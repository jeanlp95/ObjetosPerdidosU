(self.webpackChunkObjetosPerdidos=self.webpackChunkObjetosPerdidos||[]).push([[179],{2011:(wt,fe,V)=>{"use strict";V.d(fe,{Dh:()=>we,GT:()=>Ce,cc:()=>He,hO:()=>Qe,on:()=>Q,pX:()=>ge,xv:()=>Ie});var h=V(4650),j=V(127),H=V(5813);wt=V.hmd(wt);const pe=["ngOnDestroy"],ge=(ve,We,vt,je={})=>new Proxy(ve,{get:(Me,Le)=>vt.runOutsideAngular(()=>{var nt;if(ve[Le])return!(null===(nt=je?.spy)||void 0===nt)&&nt.get&&je.spy.get(Le,ve[Le]),ve[Le];if(pe.indexOf(Le)>-1)return()=>{};const rt=We.toPromise().then(Y=>{const Ee=Y&&Y[Le];return"function"==typeof Ee?Ee.bind(Y):Ee&&Ee.then?Ee.then(ne=>vt.run(()=>ne)):vt.run(()=>Ee)});return new Proxy(()=>{},{get:(Y,Ee)=>rt[Ee],apply:(Y,Ee,ne)=>rt.then(le=>{var de;const ce=le&&le(...ne);return!(null===(de=je?.spy)||void 0===de)&&de.apply&&je.spy.apply(Le,ne,ce),ce})})})}),Ce=(ve,We)=>{We.forEach(vt=>{Object.getOwnPropertyNames(vt.prototype||vt).forEach(je=>{Object.defineProperty(ve.prototype,je,Object.getOwnPropertyDescriptor(vt.prototype||vt,je))})})};class me{constructor(We){return We}}const we=new h.OlP("angularfire2.app.options"),Ie=new h.OlP("angularfire2.app.name");function Q(ve,We,vt){const Me="object"==typeof vt&&vt||{};Me.name=Me.name||"string"==typeof vt&&vt||"[DEFAULT]";const nt=j.Z.apps.filter(rt=>rt&&rt.name===Me.name)[0]||We.runOutsideAngular(()=>j.Z.initializeApp(ve,Me));try{JSON.stringify(ve)!==JSON.stringify(nt.options)&&J("error",`${nt.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(nt)}const J=(ve,...We)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ve](...We)},oe={provide:me,useFactory:Q,deps:[we,h.R0b,[new h.FiY,Ie]]};let Qe=(()=>{class ve{constructor(vt){j.Z.registerVersion("angularfire",H.q4.full,"core"),j.Z.registerVersion("angularfire",H.q4.full,"app-compat"),j.Z.registerVersion("angular",h.q4F.full,vt.toString())}static initializeApp(vt,je){return{ngModule:ve,providers:[{provide:we,useValue:vt},{provide:Ie,useValue:je}]}}}return ve.\u0275fac=function(vt){return new(vt||ve)(h.LFG(h.Lbi))},ve.\u0275mod=h.oAB({type:ve}),ve.\u0275inj=h.cJS({providers:[oe]}),ve})();function He(ve,We,vt,je,Me){const[,Le,nt]=globalThis.\u0275AngularfireInstanceCache.find(rt=>rt[0]===ve)||[];if(Le)return function Oe(ve,We){try{return ve.toString()===We.toString()}catch{return ve===We}}(Me,nt)||(xe("error",`${We} was already initialized on the ${vt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),xe("warn",{is:Me,was:nt})),Le;{const rt=je();return globalThis.\u0275AngularfireInstanceCache.push([ve,rt,Me]),rt}}const it=!!wt.hot,xe=(ve,...We)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ve](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(wt,fe,V)=>{"use strict";V.d(fe,{q4:()=>yt,iC:()=>Is,fc:()=>Or,HU:()=>xl,vb:()=>na,JM:()=>Nu});var h=V(4650),j=V(5867),H=V(5861),pe=V(9681),ge=V(2090),Ce=V(4859),me=V(1877),we=V(8766);const Ie="@firebase/installations",Q="0.5.16",oe=`w:${Q}`,Qe="FIS_v2",We=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(S){return S instanceof ge.ZR&&S.code.includes("request-failed")}function je({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Me(S){return{token:S.token,requestStatus:2,expiresIn:le(S.expiresIn),creationTime:Date.now()}}function Le(S,R){return nt.apply(this,arguments)}function nt(){return(nt=(0,H.Z)(function*(S,R){const z=(yield R.json()).error;return We.create("request-failed",{requestName:S,serverCode:z.code,serverMessage:z.message,serverStatus:z.status})})).apply(this,arguments)}function rt({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function Y(S,{refreshToken:R}){const F=rt(S);return F.append("Authorization",function de(S){return`${Qe} ${S}`}(R)),F}function Ee(S){return ne.apply(this,arguments)}function ne(){return(ne=(0,H.Z)(function*(S){const R=yield S();return R.status>=500&&R.status<600?S():R})).apply(this,arguments)}function le(S){return Number(S.replace("s","000"))}function ce(S,R){return qe.apply(this,arguments)}function qe(){return(qe=(0,H.Z)(function*({appConfig:S,heartbeatServiceProvider:R},{fid:F}){const z=je(S),se=rt(S),he=R.getImmediate({optional:!0});if(he){const Ut=yield he.getHeartbeatsHeader();Ut&&se.append("x-firebase-client",Ut)}const Ye={method:"POST",headers:se,body:JSON.stringify({fid:F,authVersion:Qe,appId:S.appId,sdkVersion:oe})},Ct=yield Ee(()=>fetch(z,Ye));if(Ct.ok){const Ut=yield Ct.json();return{fid:Ut.fid||F,registrationStatus:2,refreshToken:Ut.refreshToken,authToken:Me(Ut.authToken)}}throw yield Le("Create Installation",Ct)})).apply(this,arguments)}function Ke(S){return new Promise(R=>{setTimeout(R,S)})}const ln=/^[cdef][\w-]{21}$/;function ct(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const F=function vn(S){return function bt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return ln.test(F)?F:""}catch{return""}}function xn(S){return`${S.appName}!${S.appId}`}const dn=new Map;function rn(S,R){const F=xn(S);In(F,R),function sr(S,R){const F=function Kr(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=S=>{In(S.data.key,S.data.fid)}),pi}();F&&F.postMessage({key:S,fid:R}),function Yr(){0===dn.size&&pi&&(pi.close(),pi=null)}()}(F,R)}function In(S,R){const F=dn.get(S);if(F)for(const z of F)z(R)}let pi=null;const lr="firebase-installations-store";let Rr=null;function qn(){return Rr||(Rr=(0,we.X3)("firebase-installations-database",1,{upgrade:(S,R)=>{0===R&&S.createObjectStore(lr)}})),Rr}function et(S,R){return Br.apply(this,arguments)}function Br(){return(Br=(0,H.Z)(function*(S,R){const F=xn(S),se=(yield qn()).transaction(lr,"readwrite"),he=se.objectStore(lr),Ue=yield he.get(F);return yield he.put(R,F),yield se.done,(!Ue||Ue.fid!==R.fid)&&rn(S,R.fid),R})).apply(this,arguments)}function Ui(S){return yn.apply(this,arguments)}function yn(){return(yn=(0,H.Z)(function*(S){const R=xn(S),z=(yield qn()).transaction(lr,"readwrite");yield z.objectStore(lr).delete(R),yield z.done})).apply(this,arguments)}function Ti(S,R){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,H.Z)(function*(S,R){const F=xn(S),se=(yield qn()).transaction(lr,"readwrite"),he=se.objectStore(lr),Ue=yield he.get(F),Ye=R(Ue);return void 0===Ye?yield he.delete(F):yield he.put(Ye,F),yield se.done,Ye&&(!Ue||Ue.fid!==Ye.fid)&&rn(S,Ye.fid),Ye})).apply(this,arguments)}function Zn(S){return tr.apply(this,arguments)}function tr(){return(tr=(0,H.Z)(function*(S){let R;const F=yield Ti(S.appConfig,z=>{const se=Fn(z),he=St(S,se);return R=he.registrationPromise,he.installationEntry});return""===F.fid?{installationEntry:yield R}:{installationEntry:F,registrationPromise:R}})).apply(this,arguments)}function Fn(S){return Bt(S||{fid:ct(),registrationStatus:0})}function St(S,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(We.create("app-offline"))};const F={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},z=function Ze(S,R){return bn.apply(this,arguments)}(S,F);return{installationEntry:F,registrationPromise:z}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:Mr(S)}:{installationEntry:R}}function bn(){return(bn=(0,H.Z)(function*(S,R){try{const F=yield ce(S,R);return et(S.appConfig,F)}catch(F){throw vt(F)&&409===F.customData.serverCode?yield Ui(S.appConfig):yield et(S.appConfig,{fid:R.fid,registrationStatus:0}),F}})).apply(this,arguments)}function Mr(S){return nr.apply(this,arguments)}function nr(){return(nr=(0,H.Z)(function*(S){let R=yield gi(S.appConfig);for(;1===R.registrationStatus;)yield Ke(100),R=yield gi(S.appConfig);if(0===R.registrationStatus){const{installationEntry:F,registrationPromise:z}=yield Zn(S);return z||F}return R})).apply(this,arguments)}function gi(S){return Ti(S,R=>{if(!R)throw We.create("installation-not-found");return Bt(R)})}function Bt(S){return function Qr(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function fn(S,R){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,H.Z)(function*({appConfig:S,heartbeatServiceProvider:R},F){const z=_n(S,F),se=Y(S,F),he=R.getImmediate({optional:!0});if(he){const Ut=yield he.getHeartbeatsHeader();Ut&&se.append("x-firebase-client",Ut)}const Ye={method:"POST",headers:se,body:JSON.stringify({installation:{sdkVersion:oe,appId:S.appId}})},Ct=yield Ee(()=>fetch(z,Ye));if(Ct.ok)return Me(yield Ct.json());throw yield Le("Generate Auth Token",Ct)})).apply(this,arguments)}function _n(S,{fid:R}){return`${je(S)}/${R}/authTokens:generate`}function br(S){return ui.apply(this,arguments)}function ui(){return(ui=(0,H.Z)(function*(S,R=!1){let F;const z=yield Ti(S.appConfig,he=>{if(!Zt(he))throw We.create("not-registered");const Ue=he.authToken;if(!R&&X(Ue))return he;if(1===Ue.requestStatus)return F=pt(S,R),he;{if(!navigator.onLine)throw We.create("app-offline");const Ye=ie(he);return F=Mt(S,Ye),Ye}});return F?yield F:z.authToken})).apply(this,arguments)}function pt(S,R){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,H.Z)(function*(S,R){let F=yield gt(S.appConfig);for(;1===F.authToken.requestStatus;)yield Ke(100),F=yield gt(S.appConfig);const z=F.authToken;return 0===z.requestStatus?br(S,R):z})).apply(this,arguments)}function gt(S){return Ti(S,R=>{if(!Zt(R))throw We.create("not-registered");return function Fe(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function Mt(S,R){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,H.Z)(function*(S,R){try{const F=yield fn(S,R),z=Object.assign(Object.assign({},R),{authToken:F});return yield et(S.appConfig,z),F}catch(F){if(!vt(F)||401!==F.customData.serverCode&&404!==F.customData.serverCode){const z=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield et(S.appConfig,z)}else yield Ui(S.appConfig);throw F}})).apply(this,arguments)}function Zt(S){return void 0!==S&&2===S.registrationStatus}function X(S){return 2===S.requestStatus&&!function Z(S){const R=Date.now();return R<S.creationTime||S.creationTime+S.expiresIn<R+36e5}(S)}function ie(S){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:R})}function lt(){return(lt=(0,H.Z)(function*(S){const R=S,{installationEntry:F,registrationPromise:z}=yield Zn(R);return z?z.catch(console.error):br(R).catch(console.error),F.fid})).apply(this,arguments)}function hn(){return(hn=(0,H.Z)(function*(S,R=!1){const F=S;return yield Pn(F),(yield br(F,R)).token})).apply(this,arguments)}function Pn(S){return un.apply(this,arguments)}function un(){return(un=(0,H.Z)(function*(S){const{registrationPromise:R}=yield Zn(S);R&&(yield R)})).apply(this,arguments)}function rr(S){return We.create("missing-app-config-values",{valueName:S})}const $s="installations",Hn=S=>{const R=S.getProvider("app").getImmediate(),F=function Rn(S){if(!S||!S.options)throw rr("App Configuration");if(!S.name)throw rr("App Name");const R=["projectId","apiKey","appId"];for(const F of R)if(!S.options[F])throw rr(F);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(R);return{app:R,appConfig:F,heartbeatServiceProvider:(0,pe._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},$o=S=>{const R=S.getProvider("app").getImmediate(),F=(0,pe._getProvider)(R,$s).getImmediate();return{getId:()=>function ae(S){return lt.apply(this,arguments)}(F),getToken:se=>function Tt(S){return hn.apply(this,arguments)}(F,se)}};(function Xa(){(0,pe._registerComponent)(new Ce.wA($s,Hn,"PUBLIC")),(0,pe._registerComponent)(new Ce.wA("installations-internal",$o,"PRIVATE"))})(),(0,pe.registerVersion)(Ie,Q),(0,pe.registerVersion)(Ie,Q,"esm2017");const Xi="@firebase/remote-config",gr=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ad{constructor(R,F,z,se){this.client=R,this.storage=F,this.storageCache=z,this.logger=se}isCachedDataFresh(R,F){if(!F)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const z=Date.now()-F,se=z<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${z}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${se}.`),se}fetch(R){var F=this;return(0,H.Z)(function*(){const[z,se]=yield Promise.all([F.storage.getLastSuccessfulFetchTimestampMillis(),F.storage.getLastSuccessfulFetchResponse()]);if(se&&F.isCachedDataFresh(R.cacheMaxAgeMillis,z))return se;R.eTag=se&&se.eTag;const he=yield F.client.fetch(R),Ue=[F.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===he.status&&Ue.push(F.storage.setLastSuccessfulFetchResponse(he)),yield Promise.all(Ue),he})()}}function lu(S=navigator){return S.languages&&S.languages[0]||S.language}class uu{constructor(R,F,z,se,he,Ue){this.firebaseInstallations=R,this.sdkVersion=F,this.namespace=z,this.projectId=se,this.apiKey=he,this.appId=Ue}fetch(R){var F=this;return(0,H.Z)(function*(){var z,se,he;const[Ue,Ye]=yield Promise.all([F.firebaseInstallations.getId(),F.firebaseInstallations.getToken()]),Ut=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${F.projectId}/namespaces/${F.namespace}:fetch?key=${F.apiKey}`,Ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},xt={sdk_version:F.sdkVersion,app_instance_id:Ue,app_instance_id_token:Ye,app_id:F.appId,language_code:lu()},or={method:"POST",headers:Ht,body:JSON.stringify(xt)},hi=fetch(Ut,or),Rl=new Promise((Ml,Pa)=>{R.signal.addEventListener(()=>{const Lo=new Error("The operation was aborted.");Lo.name="AbortError",Pa(Lo)})});let Ds;try{yield Promise.race([hi,Rl]),Ds=yield hi}catch(Ml){let Pa="fetch-client-network";throw"AbortError"===(null===(z=Ml)||void 0===z?void 0:z.name)&&(Pa="fetch-timeout"),gr.create(Pa,{originalErrorMessage:null===(se=Ml)||void 0===se?void 0:se.message})}let Wt=Ds.status;const Jo=Ds.headers.get("ETag")||void 0;let ia,ao;if(200===Ds.status){let Ml;try{Ml=yield Ds.json()}catch(Pa){throw gr.create("fetch-client-parse",{originalErrorMessage:null===(he=Pa)||void 0===he?void 0:he.message})}ia=Ml.entries,ao=Ml.state}if("INSTANCE_STATE_UNSPECIFIED"===ao?Wt=500:"NO_CHANGE"===ao?Wt=304:("NO_TEMPLATE"===ao||"EMPTY_CONFIG"===ao)&&(ia={}),304!==Wt&&200!==Wt)throw gr.create("fetch-status",{httpStatus:Wt});return{status:Wt,eTag:Jo,config:ia}})()}}class Uh{constructor(R,F){this.client=R,this.storage=F}fetch(R){var F=this;return(0,H.Z)(function*(){const z=(yield F.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return F.attemptFetch(R,z)})()}attemptFetch(R,{throttleEndTimeMillis:F,backoffCount:z}){var se=this;return(0,H.Z)(function*(){yield function Cr(S,R){return new Promise((F,z)=>{const se=Math.max(R-Date.now(),0),he=setTimeout(F,se);S.addEventListener(()=>{clearTimeout(he),z(gr.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,F);try{const he=yield se.client.fetch(R);return yield se.storage.deleteThrottleMetadata(),he}catch(he){if(!function gc(S){if(!(S instanceof ge.ZR&&S.customData))return!1;const R=Number(S.customData.httpStatus);return 429===R||500===R||503===R||504===R}(he))throw he;const Ue={throttleEndTimeMillis:Date.now()+(0,ge.$s)(z),backoffCount:z+1};return yield se.storage.setThrottleMetadata(Ue),se.attemptFetch(R,Ue)}})()}}class rl{constructor(R,F,z,se,he){this.app=R,this._client=F,this._storageCache=z,this._storage=se,this._logger=he,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function cu(S,R){var F;const z=S.target.error||void 0;return gr.create(R,{originalErrorMessage:z&&(null===(F=z)||void 0===F?void 0:F.message)})}const zo="app_namespace_store";class jh{constructor(R,F,z,se=function Hh(){return new Promise((S,R)=>{var F;try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=se=>{R(cu(se,"storage-open"))},z.onsuccess=se=>{S(se.target.result)},z.onupgradeneeded=se=>{0===se.oldVersion&&se.target.result.createObjectStore(zo,{keyPath:"compositeKey"})}}catch(z){R(gr.create("storage-open",{originalErrorMessage:null===(F=z)||void 0===F?void 0:F.message}))}})}()){this.appId=R,this.appName=F,this.namespace=z,this.openDbPromise=se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var F=this;return(0,H.Z)(function*(){const z=yield F.openDbPromise;return new Promise((se,he)=>{var Ue;const Ct=z.transaction([zo],"readonly").objectStore(zo),Ut=F.createCompositeKey(R);try{const Ht=Ct.get(Ut);Ht.onerror=xt=>{he(cu(xt,"storage-get"))},Ht.onsuccess=xt=>{const or=xt.target.result;se(or?or.value:void 0)}}catch(Ht){he(gr.create("storage-get",{originalErrorMessage:null===(Ue=Ht)||void 0===Ue?void 0:Ue.message}))}})})()}set(R,F){var z=this;return(0,H.Z)(function*(){const se=yield z.openDbPromise;return new Promise((he,Ue)=>{var Ye;const Ut=se.transaction([zo],"readwrite").objectStore(zo),Ht=z.createCompositeKey(R);try{const xt=Ut.put({compositeKey:Ht,value:F});xt.onerror=or=>{Ue(cu(or,"storage-set"))},xt.onsuccess=()=>{he()}}catch(xt){Ue(gr.create("storage-set",{originalErrorMessage:null===(Ye=xt)||void 0===Ye?void 0:Ye.message}))}})})()}delete(R){var F=this;return(0,H.Z)(function*(){const z=yield F.openDbPromise;return new Promise((se,he)=>{var Ue;const Ct=z.transaction([zo],"readwrite").objectStore(zo),Ut=F.createCompositeKey(R);try{const Ht=Ct.delete(Ut);Ht.onerror=xt=>{he(cu(xt,"storage-delete"))},Ht.onsuccess=()=>{se()}}catch(Ht){he(gr.create("storage-delete",{originalErrorMessage:null===(Ue=Ht)||void 0===Ue?void 0:Ue.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class vc{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,H.Z)(function*(){const F=R.storage.getLastFetchStatus(),z=R.storage.getLastSuccessfulFetchTimestampMillis(),se=R.storage.getActiveConfig(),he=yield F;he&&(R.lastFetchStatus=he);const Ue=yield z;Ue&&(R.lastSuccessfulFetchTimestampMillis=Ue);const Ye=yield se;Ye&&(R.activeConfig=Ye)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function il(){return ol.apply(this,arguments)}function ol(){return(ol=(0,H.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function Wo(){(0,pe._registerComponent)(new Ce.wA("remote-config",function S(R,{instanceIdentifier:F}){const z=R.getProvider("app").getImmediate(),se=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gr.create("registration-window");if(!(0,ge.hl)())throw gr.create("indexed-db-unavailable");const{projectId:he,apiKey:Ue,appId:Ye}=z.options;if(!he)throw gr.create("registration-project-id");if(!Ue)throw gr.create("registration-api-key");if(!Ye)throw gr.create("registration-app-id");const Ct=new jh(Ye,z.name,F=F||"firebase"),Ut=new vc(Ct),Ht=new me.Yd(Xi);Ht.logLevel=me.in.ERROR;const xt=new uu(se,pe.SDK_VERSION,F,he,Ue,Ye),or=new Uh(xt,Ct),hi=new Ad(or,Ct,Ut,Ht),Rl=new rl(z,hi,Ut,Ct,Ht);return function jn(S){const R=(0,ge.m9)(S);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(Rl),Rl},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(Xi,"0.3.15"),(0,pe.registerVersion)(Xi,"0.3.15","esm2017")}();const to="/firebase-messaging-sw.js",So="/firebase-cloud-messaging-push-scope",xo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ma="google.c.a.c_id",sl="google.c.a.c_l",hu="google.c.a.ts",_c="google.c.a.e";var no=(()=>{return(S=no||(no={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",no;var S})();function Ai(S){const R=new Uint8Array(S);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vi(S){const F=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),z=atob(F),se=new Uint8Array(z.length);for(let he=0;he<z.length;++he)se[he]=z.charCodeAt(he);return se}const Gs="fcm_token_details_db",jr="fcm_token_object_Store";function Sd(S){return xd.apply(this,arguments)}function xd(){return xd=(0,H.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(he=>he.name).includes(Gs))return null;let R=null;return(yield(0,we.X3)(Gs,5,{upgrade:(z=(0,H.Z)(function*(se,he,Ue,Ye){var Ct;if(he<2||!se.objectStoreNames.contains(jr))return;const Ut=Ye.objectStore(jr),Ht=yield Ut.index("fcmSenderId").get(S);if(yield Ut.clear(),Ht)if(2===he){const xt=Ht;if(!xt.auth||!xt.p256dh||!xt.endpoint)return;R={token:xt.fcmToken,createTime:null!==(Ct=xt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:xt.auth,p256dh:xt.p256dh,endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:"string"==typeof xt.vapidKey?xt.vapidKey:Ai(xt.vapidKey)}}}else if(3===he){const xt=Ht;R={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:Ai(xt.auth),p256dh:Ai(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:Ai(xt.vapidKey)}}}else if(4===he){const xt=Ht;R={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:Ai(xt.auth),p256dh:Ai(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:Ai(xt.vapidKey)}}}}),function(he,Ue,Ye,Ct){return z.apply(this,arguments)})})).close(),yield(0,we.Lj)(Gs),yield(0,we.Lj)("fcm_vapid_details_db"),yield(0,we.Lj)("undefined"),Nn(R)?R:null;var z}),xd.apply(this,arguments)}function Nn(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:R}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const Si="firebase-messaging-store";let ei=null;function va(){return ei||(ei=(0,we.X3)("firebase-messaging-database",1,{upgrade:(S,R)=>{0===R&&S.createObjectStore(Si)}})),ei}function qo(S){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,H.Z)(function*(S){const R=Gi(S),z=yield(yield va()).transaction(Si).objectStore(Si).get(R);if(z)return z;{const se=yield Sd(S.appConfig.senderId);if(se)return yield cn(S,se),se}})).apply(this,arguments)}function cn(S,R){return ll.apply(this,arguments)}function ll(){return(ll=(0,H.Z)(function*(S,R){const F=Gi(S),se=(yield va()).transaction(Si,"readwrite");return yield se.objectStore(Si).put(R,F),yield se.done,R})).apply(this,arguments)}function ds(S){return ul.apply(this,arguments)}function ul(){return(ul=(0,H.Z)(function*(S){const R=Gi(S),z=(yield va()).transaction(Si,"readwrite");yield z.objectStore(Si).delete(R),yield z.done})).apply(this,arguments)}function Gi({appConfig:S}){return S.appId}const Yn=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lt(S,R){return zs.apply(this,arguments)}function zs(){return(zs=(0,H.Z)(function*(S,R){var F;const z=yield pu(S),se=Be(R),he={method:"POST",headers:z,body:JSON.stringify(se)};let Ue;try{Ue=yield(yield fetch(ko(S.appConfig),he)).json()}catch(Ye){throw Yn.create("token-subscribe-failed",{errorInfo:null===(F=Ye)||void 0===F?void 0:F.toString()})}if(Ue.error)throw Yn.create("token-subscribe-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw Yn.create("token-subscribe-no-token");return Ue.token})).apply(this,arguments)}function bc(S,R){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,H.Z)(function*(S,R){var F;const z=yield pu(S),se=Be(R.subscriptionOptions),he={method:"PATCH",headers:z,body:JSON.stringify(se)};let Ue;try{Ue=yield(yield fetch(`${ko(S.appConfig)}/${R.token}`,he)).json()}catch(Ye){throw Yn.create("token-update-failed",{errorInfo:null===(F=Ye)||void 0===F?void 0:F.toString()})}if(Ue.error)throw Yn.create("token-update-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw Yn.create("token-update-no-token");return Ue.token})).apply(this,arguments)}function dl(S,R){return fu.apply(this,arguments)}function fu(){return(fu=(0,H.Z)(function*(S,R){var F;const se={method:"DELETE",headers:yield pu(S)};try{const Ue=yield(yield fetch(`${ko(S.appConfig)}/${R}`,se)).json();if(Ue.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:Ue.error.message})}catch(he){throw Yn.create("token-unsubscribe-failed",{errorInfo:null===(F=he)||void 0===F?void 0:F.toString()})}})).apply(this,arguments)}function ko({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function pu(S){return ya.apply(this,arguments)}function ya(){return(ya=(0,H.Z)(function*({appConfig:S,installations:R}){const F=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${F}`})})).apply(this,arguments)}function Be({p256dh:S,auth:R,endpoint:F,vapidKey:z}){const se={web:{endpoint:F,auth:R,p256dh:S}};return z!==xo&&(se.web.applicationPubKey=z),se}const on=6048e5;function hl(S){return fl.apply(this,arguments)}function fl(){return(fl=(0,H.Z)(function*(S){const R=yield gu(S.swRegistration,S.vapidKey),F={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:R.endpoint,auth:Ai(R.getKey("auth")),p256dh:Ai(R.getKey("p256dh"))},z=yield qo(S.firebaseDependencies);if(z){if(mu(z.subscriptionOptions,F))return Date.now()>=z.createTime+on?Ws(S,{token:z.token,createTime:Date.now(),subscriptionOptions:F}):z.token;try{yield dl(S.firebaseDependencies,z.token)}catch(se){console.warn(se)}return wa(S.firebaseDependencies,F)}return wa(S.firebaseDependencies,F)})).apply(this,arguments)}function $n(S){return _a.apply(this,arguments)}function _a(){return(_a=(0,H.Z)(function*(S){const R=yield qo(S.firebaseDependencies);R&&(yield dl(S.firebaseDependencies,R.token),yield ds(S.firebaseDependencies));const F=yield S.swRegistration.pushManager.getSubscription();return!F||F.unsubscribe()})).apply(this,arguments)}function Ws(S,R){return xi.apply(this,arguments)}function xi(){return(xi=(0,H.Z)(function*(S,R){try{const F=yield bc(S.firebaseDependencies,R),z=Object.assign(Object.assign({},R),{token:F,createTime:Date.now()});return yield cn(S.firebaseDependencies,z),F}catch(F){throw yield $n(S),F}})).apply(this,arguments)}function wa(S,R){return qs.apply(this,arguments)}function qs(){return(qs=(0,H.Z)(function*(S,R){const z={token:yield Lt(S,R),createTime:Date.now(),subscriptionOptions:R};return yield cn(S,z),z.token})).apply(this,arguments)}function gu(S,R){return ba.apply(this,arguments)}function ba(){return(ba=(0,H.Z)(function*(S,R){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vi(R)})})).apply(this,arguments)}function mu(S,R){return R.vapidKey===S.vapidKey&&R.endpoint===S.endpoint&&R.auth===S.auth&&R.p256dh===S.p256dh}function Zs(S){const R={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Gn(S,R){if(!R.notification)return;S.notification={};const F=R.notification.title;F&&(S.notification.title=F);const z=R.notification.body;z&&(S.notification.body=z);const se=R.notification.image;se&&(S.notification.image=se);const he=R.notification.icon;he&&(S.notification.icon=he)}(R,S),function ro(S,R){!R.data||(S.data=R.data)}(R,S),function vu(S,R){var F,z,se,he,Ue;if(!(R.fcmOptions||null!==(F=R.notification)&&void 0!==F&&F.click_action))return;S.fcmOptions={};const Ye=null!==(se=null===(z=R.fcmOptions)||void 0===z?void 0:z.link)&&void 0!==se?se:null===(he=R.notification)||void 0===he?void 0:he.click_action;Ye&&(S.fcmOptions.link=Ye);const Ct=null===(Ue=R.fcmOptions)||void 0===Ue?void 0:Ue.analytics_label;Ct&&(S.fcmOptions.analyticsLabel=Ct)}(R,S),R}function hs(S){return"object"==typeof S&&!!S&&ma in S}function Ri(S,R){const F=[];for(let z=0;z<S.length;z++)F.push(S.charAt(z)),z<R.length&&F.push(R.charAt(z));return F.join("")}function Ea(S){return Yn.create("missing-app-config-values",{valueName:S})}Ri("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ri("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gh{constructor(R,F,z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const se=function $h(S){if(!S||!S.options)throw Ea("App Configuration Object");if(!S.name)throw Ea("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:F}=S;for(const z of R)if(!F[z])throw Ea(z);return{appName:S.name,projectId:F.projectId,apiKey:F.apiKey,appId:F.appId,senderId:F.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:se,installations:F,analyticsProvider:z}}_delete(){return Promise.resolve()}}function yu(S){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,H.Z)(function*(S){var R;try{S.swRegistration=yield navigator.serviceWorker.register(to,{scope:So}),S.swRegistration.update().catch(()=>{})}catch(F){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:null===(R=F)||void 0===R?void 0:R.message})}})).apply(this,arguments)}function Ia(S,R){return _u.apply(this,arguments)}function _u(){return(_u=(0,H.Z)(function*(S,R){if(!R&&!S.swRegistration&&(yield yu(S)),R||!S.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");S.swRegistration=R}})).apply(this,arguments)}function Da(S,R){return wu.apply(this,arguments)}function wu(){return(wu=(0,H.Z)(function*(S,R){R?S.vapidKey=R:S.vapidKey||(S.vapidKey=xo)})).apply(this,arguments)}function Aa(){return(Aa=(0,H.Z)(function*(S,R){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield Da(S,R?.vapidKey),yield Ia(S,R?.serviceWorkerRegistration),hl(S)})).apply(this,arguments)}function bu(S,R,F){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,H.Z)(function*(S,R,F){const z=Cu(R);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(z,{message_id:F[ma],message_name:F[sl],message_time:F[hu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cu(S){switch(S){case no.NOTIFICATION_CLICKED:return"notification_open";case no.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Po(){return(Po=(0,H.Z)(function*(S,R){const F=R.data;if(!F.isFirebaseMessaging)return;S.onMessageHandler&&F.messageType===no.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Zs(F)):S.onMessageHandler.next(Zs(F)));const z=F.data;hs(z)&&"1"===z[_c]&&(yield bu(S,F.messageType,z))})).apply(this,arguments)}const fs="@firebase/messaging",Ir=S=>{const R=new Gh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",F=>function Iu(S,R){return Po.apply(this,arguments)}(R,F)),R},yi=S=>{const R=S.getProvider("messaging").getImmediate();return{getToken:z=>function Ta(S,R){return Aa.apply(this,arguments)}(R,z)}};function Ec(){return Du.apply(this,arguments)}function Du(){return(Du=(0,H.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ln(){(0,pe._registerComponent)(new Ce.wA("messaging",Ir,"PUBLIC")),(0,pe._registerComponent)(new Ce.wA("messaging-internal",yi,"PRIVATE")),(0,pe.registerVersion)(fs,"0.11.0"),(0,pe.registerVersion)(fs,"0.11.0","esm2017")}();const gs="analytics",Ic="firebase_id",ms="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vl="https://www.googletagmanager.com/gtag/js",Qn=new me.Yd("@firebase/analytics");function yl(S){return Promise.all(S.map(R=>R.catch(F=>F)))}function _l(S,R){const F=document.createElement("script");F.src=`${vl}?l=${S}&id=${R}`,F.async=!0,document.head.appendChild(F)}function io(S,R,F,z,se,he){return zi.apply(this,arguments)}function zi(){return(zi=(0,H.Z)(function*(S,R,F,z,se,he){const Ue=z[se];try{if(Ue)yield R[Ue];else{const Ct=(yield yl(F)).find(Ut=>Ut.measurementId===se);Ct&&(yield R[Ct.appId])}}catch(Ye){Qn.error(Ye)}S("config",se,he)})).apply(this,arguments)}function Ys(S,R,F,z,se){return vs.apply(this,arguments)}function vs(){return(vs=(0,H.Z)(function*(S,R,F,z,se){try{let he=[];if(se&&se.send_to){let Ue=se.send_to;Array.isArray(Ue)||(Ue=[Ue]);const Ye=yield yl(F);for(const Ct of Ue){const Ut=Ye.find(xt=>xt.measurementId===Ct),Ht=Ut&&R[Ut.appId];if(!Ht){he=[];break}he.push(Ht)}}0===he.length&&(he=Object.values(R)),yield Promise.all(he),S("event",z,se||{})}catch(he){Qn.error(he)}})).apply(this,arguments)}function Tc(S){const R=window.document.getElementsByTagName("script");for(const F of Object.values(R))if(F.src&&F.src.includes(vl)&&F.src.includes(S))return F;return null}const Nr=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),N=new class T{constructor(R={},F=1e3){this.throttleMetadata=R,this.intervalMillis=F}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,F){this.throttleMetadata[R]=F}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function q(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Se(S){return ft.apply(this,arguments)}function ft(){return(ft=(0,H.Z)(function*(S){var R;const{appId:F,apiKey:z}=S,se={method:"GET",headers:q(z)},he=ms.replace("{app-id}",F),Ue=yield fetch(he,se);if(200!==Ue.status&&304!==Ue.status){let Ye="";try{const Ct=yield Ue.json();null!==(R=Ct.error)&&void 0!==R&&R.message&&(Ye=Ct.error.message)}catch{}throw Nr.create("config-fetch-failed",{httpStatus:Ue.status,responseMessage:Ye})}return Ue.json()})).apply(this,arguments)}function Yt(S){return ur.apply(this,arguments)}function ur(){return(ur=(0,H.Z)(function*(S,R=N,F){const{appId:z,apiKey:se,measurementId:he}=S.options;if(!z)throw Nr.create("no-app-id");if(!se){if(he)return{measurementId:he,appId:z};throw Nr.create("no-api-key")}const Ue=R.getThrottleMetadata(z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new xc;return setTimeout((0,H.Z)(function*(){Ye.abort()}),void 0!==F?F:6e4),Dr({appId:z,apiKey:se,measurementId:he},Ue,Ye,R)})).apply(this,arguments)}function Dr(S,R,F){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,H.Z)(function*(S,{throttleEndTimeMillis:R,backoffCount:F},z,se=N){var he,Ue;const{appId:Ye,measurementId:Ct}=S;try{yield ys(z,R)}catch(Ut){if(Ct)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ct} provided in the "measurementId" field in the local Firebase config. [${null===(he=Ut)||void 0===he?void 0:he.message}]`),{appId:Ye,measurementId:Ct};throw Ut}try{const Ut=yield Se(S);return se.deleteThrottleMetadata(Ye),Ut}catch(Ut){const Ht=Ut;if(!Sc(Ht)){if(se.deleteThrottleMetadata(Ye),Ct)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ct} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:Ye,measurementId:Ct};throw Ut}const xt=503===Number(null===(Ue=Ht?.customData)||void 0===Ue?void 0:Ue.httpStatus)?(0,ge.$s)(F,se.intervalMillis,30):(0,ge.$s)(F,se.intervalMillis),or={throttleEndTimeMillis:Date.now()+xt,backoffCount:F+1};return se.setThrottleMetadata(Ye,or),Qn.debug(`Calling attemptFetch again in ${xt} millis`),Dr(S,or,z,se)}})).apply(this,arguments)}function ys(S,R){return new Promise((F,z)=>{const se=Math.max(R-Date.now(),0),he=setTimeout(F,se);S.addEventListener(()=>{clearTimeout(he),z(Nr.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function Sc(S){if(!(S instanceof ge.ZR&&S.customData))return!1;const R=Number(S.customData.httpStatus);return 429===R||500===R||503===R||504===R}class xc{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let Qs,Su;function Js(){return(Js=(0,H.Z)(function*(S,R,F,z,se){if(se&&se.global)S("event",F,z);else{const he=yield R;S("event",F,Object.assign(Object.assign({},z),{send_to:he}))}})).apply(this,arguments)}function Ra(S){Su=S}function Nd(S){Qs=S}function ws(){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,H.Z)(function*(){var S;if(!(0,ge.hl)())return Qn.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(R){return Qn.warn(Nr.create("indexeddb-unavailable",{errorInfo:null===(S=R)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function Cl(){return(Cl=(0,H.Z)(function*(S,R,F,z,se,he,Ue){var Ye;const Ct=Yt(S);Ct.then(hi=>{F[hi.measurementId]=hi.appId,S.options.measurementId&&hi.measurementId!==S.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${hi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hi=>Qn.error(hi)),R.push(Ct);const Ut=ws().then(hi=>{if(hi)return z.getId()}),[Ht,xt]=yield Promise.all([Ct,Ut]);Tc(he)||_l(he,Ht.measurementId),Su&&(se("consent","default",Su),Ra(void 0)),se("js",new Date);const or=null!==(Ye=Ue?.config)&&void 0!==Ye?Ye:{};return or.origin="firebase",or.update=!0,null!=xt&&(or[Ic]=xt),se("config",Ht.measurementId,or),Qs&&(se("set",Qs),Nd(void 0)),Ht.measurementId})).apply(this,arguments)}class kc{constructor(R){this.app=R}_delete(){return delete Wi[this.app.options.appId],Promise.resolve()}}let Wi={},Xs=[];const Il={};let Tl,Ma,Dl="dataLayer",xu=!1;function hw(S,R,F){!function Xm(){const S=[];if((0,ge.ru)()&&S.push("This is a browser extension environment."),(0,ge.zI)()||S.push("Cookies are not available."),S.length>0){const R=S.map((z,se)=>`(${se+1}) ${z}`).join(" "),F=Nr.create("invalid-analytics-context",{errorInfo:R});Qn.warn(F.message)}}();const z=S.options.appId;if(!z)throw Nr.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Nr.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wi[z])throw Nr.create("already-exists",{id:z});if(!xu){!function Dc(S){let R=[];Array.isArray(window[S])?R=window[S]:window[S]=R}(Dl);const{wrappedGtag:he,gtagCore:Ue}=function Sa(S,R,F,z,se){let he=function(...Ue){window[z].push(arguments)};return window[se]&&"function"==typeof window[se]&&(he=window[se]),window[se]=function wl(S,R,F,z){function he(){return(he=(0,H.Z)(function*(Ue,Ye,Ct){try{"event"===Ue?yield Ys(S,R,F,Ye,Ct):"config"===Ue?yield io(S,R,F,z,Ye,Ct):"consent"===Ue?S("consent","update",Ct):S("set",Ye)}catch(Ut){Qn.error(Ut)}})).apply(this,arguments)}return function se(Ue,Ye,Ct){return he.apply(this,arguments)}}(he,S,R,F),{gtagCore:he,wrappedGtag:window[se]}}(Wi,Xs,Il,Dl,"gtag");Ma=he,Tl=Ue,xu=!0}return Wi[z]=function El(S,R,F,z,se,he,Ue){return Cl.apply(this,arguments)}(S,Xs,Il,R,Tl,Dl,F),new kc(S)}function pw(){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,H.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}const Et="@firebase/analytics";!function ir(){(0,pe._registerComponent)(new Ce.wA(gs,(R,{options:F})=>hw(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),F),"PUBLIC")),(0,pe._registerComponent)(new Ce.wA("analytics-internal",function S(R){try{const F=R.getProvider(gs).getImmediate();return{logEvent:(z,se,he)=>function En(S,R,F,z){S=(0,ge.m9)(S),function zh(S,R,F,z,se){return Js.apply(this,arguments)}(Ma,Wi[S.app.options.appId],R,F,z).catch(se=>Qn.error(se))}(F,z,se,he)}}catch(F){throw Nr.create("interop-component-reg-failed",{reason:F})}},"PRIVATE")),(0,pe.registerVersion)(Et,"0.8.4"),(0,pe.registerVersion)(Et,"0.8.4","esm2017")}();var Oo=V(4408),di=V(7565);const Nc=new class ea extends di.v{}(class Ru extends Oo.o{constructor(R,F){super(R,F),this.scheduler=R,this.work=F}schedule(R,F=0){return F>0?super.schedule(R,F):(this.delay=F,this.state=R,this.scheduler.flush(this),this)}execute(R,F){return F>0||this.closed?super.execute(R,F):this._execute(R,F)}requestAsyncId(R,F,z=0){return null!=z&&z>0||null==z&&this.delay>0?super.requestAsyncId(R,F,z):(R.flush(this),0)}});var Fd=V(4986),Mu=V(8505),ka=V(5363),bs=V(9468);const yt=new h.GfV("7.4.1"),ku="__angularfire_symbol__analyticsIsSupportedValue",ta="__angularfire_symbol__analyticsIsSupported",Pu="__angularfire_symbol__remoteConfigIsSupportedValue",Al="__angularfire_symbol__remoteConfigIsSupported",cr="__angularfire_symbol__messagingIsSupportedValue",Ld="__angularfire_symbol__messagingIsSupported";function Nu(S,R,F){if(R){if(1===R.length)return R[0];const he=R.filter(Ue=>Ue.app===F);if(1===he.length)return he[0]}return F.container.getProvider(S).getImmediate({optional:!0})}globalThis[ta]||(globalThis[ta]=pw().then(S=>globalThis[ku]=S).catch(()=>globalThis[ku]=!1)),globalThis[Ld]||(globalThis[Ld]=Ec().then(S=>globalThis[cr]=S).catch(()=>globalThis[cr]=!1)),globalThis[Al]||(globalThis[Al]=il().then(S=>globalThis[Pu]=S).catch(()=>globalThis[Pu]=!1));const na=(S,R)=>{const F=R?[R]:(0,j.C6)(),z=[];return F.forEach(se=>{se.container.getProvider(S).instances.forEach(Ue=>{z.includes(Ue)||z.push(Ue)})}),z};function Es(){}class Fo{constructor(R,F=Nc){this.zone=R,this.delegate=F}now(){return this.delegate.now()}schedule(R,F,z){const se=this.zone;return this.delegate.schedule(function(Ue){se.runGuarded(()=>{R.apply(this,[Ue])})},F,z)}}class Vd{constructor(R){this.zone=R,this.task=null}call(R,F){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),F.pipe((0,Mu.b)({next:z,complete:z,error:z})).subscribe(R).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xl=(()=>{class S{constructor(F){this.ngZone=F,this.outsideAngular=F.runOutsideAngular(()=>new Fo(Zone.current)),this.insideAngular=F.run(()=>new Fo(Zone.current,Fd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(F){return new(F||S)(h.LFG(h.R0b))},S.\u0275prov=h.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function qi(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Or(S){return S.pipe((0,ka.Q)(qi().outsideAngular))}function Is(S){return qi(),function dr(S){return function(F){return(F=F.lift(new Vd(S.ngZone))).pipe((0,bs.R)(S.outsideAngular),(0,ka.Q)(S.insideAngular))}}(qi())(S)}},2090:(wt,fe,V)=>{"use strict";V.d(fe,{$s:()=>gt,BH:()=>en,DV:()=>lr,Dv:()=>Mr,G6:()=>Le,GJ:()=>qt,L:()=>we,LL:()=>dn,Pz:()=>ln,Sg:()=>ct,UG:()=>Oe,UI:()=>qn,US:()=>Ce,Wj:()=>Bt,Wl:()=>In,Yr:()=>Me,ZB:()=>J,ZR:()=>xn,aH:()=>bt,b$:()=>ve,cI:()=>kt,dS:()=>fn,eu:()=>rt,g5:()=>H,gK:()=>nr,gQ:()=>Zn,h$:()=>me,hl:()=>nt,hu:()=>j,jU:()=>it,lb:()=>Qr,m9:()=>Zt,ne:()=>tr,p$:()=>Q,pd:()=>Vi,r3:()=>ar,ru:()=>xe,tV:()=>Ie,uI:()=>He,ug:()=>Bi,vZ:()=>et,w1:()=>vt,w9:()=>Yr,xO:()=>yn,xb:()=>Rr,z$:()=>Qe,zI:()=>Y,zd:()=>Ti});const j=function(X,Z){if(!X)throw H(Z)},H=function(X){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+X)},pe=function(X){const Z=[];let ie=0;for(let Fe=0;Fe<X.length;Fe++){let ae=X.charCodeAt(Fe);ae<128?Z[ie++]=ae:ae<2048?(Z[ie++]=ae>>6|192,Z[ie++]=63&ae|128):55296==(64512&ae)&&Fe+1<X.length&&56320==(64512&X.charCodeAt(Fe+1))?(ae=65536+((1023&ae)<<10)+(1023&X.charCodeAt(++Fe)),Z[ie++]=ae>>18|240,Z[ie++]=ae>>12&63|128,Z[ie++]=ae>>6&63|128,Z[ie++]=63&ae|128):(Z[ie++]=ae>>12|224,Z[ie++]=ae>>6&63|128,Z[ie++]=63&ae|128)}return Z},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,Z){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ie=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Fe=[];for(let ae=0;ae<X.length;ae+=3){const lt=X[ae],Tt=ae+1<X.length,hn=Tt?X[ae+1]:0,Pn=ae+2<X.length,un=Pn?X[ae+2]:0;let Jt=(15&hn)<<2|un>>6,kr=63&un;Pn||(kr=64,Tt||(Jt=64)),Fe.push(ie[lt>>2],ie[(3&lt)<<4|hn>>4],ie[Jt],ie[kr])}return Fe.join("")},encodeString(X,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(X):this.encodeByteArray(pe(X),Z)},decodeString(X,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(X):function(X){const Z=[];let ie=0,Fe=0;for(;ie<X.length;){const ae=X[ie++];if(ae<128)Z[Fe++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const lt=X[ie++];Z[Fe++]=String.fromCharCode((31&ae)<<6|63&lt)}else if(ae>239&&ae<365){const Pn=((7&ae)<<18|(63&X[ie++])<<12|(63&X[ie++])<<6|63&X[ie++])-65536;Z[Fe++]=String.fromCharCode(55296+(Pn>>10)),Z[Fe++]=String.fromCharCode(56320+(1023&Pn))}else{const lt=X[ie++],Tt=X[ie++];Z[Fe++]=String.fromCharCode((15&ae)<<12|(63&lt)<<6|63&Tt)}}return Z.join("")}(this.decodeStringToByteArray(X,Z))},decodeStringToByteArray(X,Z){this.init_();const ie=Z?this.charToByteMapWebSafe_:this.charToByteMap_,Fe=[];for(let ae=0;ae<X.length;){const lt=ie[X.charAt(ae++)],hn=ae<X.length?ie[X.charAt(ae)]:0;++ae;const un=ae<X.length?ie[X.charAt(ae)]:64;++ae;const ot=ae<X.length?ie[X.charAt(ae)]:64;if(++ae,null==lt||null==hn||null==un||null==ot)throw Error();Fe.push(lt<<2|hn>>4),64!==un&&(Fe.push(hn<<4&240|un>>2),64!==ot&&Fe.push(un<<6&192|ot))}return Fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},me=function(X){const Z=pe(X);return Ce.encodeByteArray(Z,!0)},we=function(X){return me(X).replace(/\./g,"")},Ie=function(X){try{return Ce.decodeString(X,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function Q(X){return J(void 0,X)}function J(X,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return Z}for(const ie in Z)!Z.hasOwnProperty(ie)||!oe(ie)||(X[ie]=J(X[ie],Z[ie]));return X}function oe(X){return"__proto__"!==X}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function Oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function xe(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vt(){const X=Qe();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Me(){return!1}function Le(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nt(){return"object"==typeof indexedDB}function rt(){return new Promise((X,Z)=>{try{let ie=!0;const Fe="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(Fe);ae.onsuccess=()=>{ae.result.close(),ie||self.indexedDB.deleteDatabase(Fe),X(!0)},ae.onupgradeneeded=()=>{ie=!1},ae.onerror=()=>{var lt;Z((null===(lt=ae.error)||void 0===lt?void 0:lt.message)||"")}}catch(ie){Z(ie)}})}function Y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ce=()=>{try{return function Ee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const X=process.env.__FIREBASE_DEFAULTS__;return X?JSON.parse(X):void 0})()||(()=>{if(typeof document>"u")return;let X;try{X=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Z=X&&Ie(X[1]);return Z&&JSON.parse(Z)})()}catch(X){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${X}`)}},bt=()=>{var X;return null===(X=ce())||void 0===X?void 0:X.config},ln=X=>{var Z;return null===(Z=ce())||void 0===Z?void 0:Z[`_${X}`]};class en{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,ie)=>{this.resolve=Z,this.reject=ie})}wrapCallback(Z){return(ie,Fe)=>{ie?this.reject(ie):this.resolve(Fe),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(ie):Z(ie,Fe))}}}function ct(X,Z){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Fe=Z||"demo-project",ae=X.iat||0,lt=X.sub||X.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Tt=Object.assign({iss:`https://securetoken.google.com/${Fe}`,aud:Fe,iat:ae,exp:ae+3600,auth_time:ae,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},X);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(Tt)),""].join(".")}class xn extends Error{constructor(Z,ie,Fe){super(ie),this.code=Z,this.customData=Fe,this.name="FirebaseError",Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(Z,ie,Fe){this.service=Z,this.serviceName=ie,this.errors=Fe}create(Z,...ie){const Fe=ie[0]||{},ae=`${this.service}/${Z}`,lt=this.errors[Z],Tt=lt?function rn(X,Z){return X.replace(kn,(ie,Fe)=>{const ae=Z[Fe];return null!=ae?String(ae):`<${Fe}?>`})}(lt,Fe):"Error";return new xn(ae,`${this.serviceName}: ${Tt} (${ae}).`,Fe)}}const kn=/\{\$([^}]+)}/g;function kt(X){return JSON.parse(X)}function In(X){return JSON.stringify(X)}const sr=function(X){let Z={},ie={},Fe={},ae="";try{const lt=X.split(".");Z=kt(Ie(lt[0])||""),ie=kt(Ie(lt[1])||""),ae=lt[2],Fe=ie.d||{},delete ie.d}catch{}return{header:Z,claims:ie,data:Fe,signature:ae}},Yr=function(X){const ie=sr(X).claims;return!!ie&&"object"==typeof ie&&ie.hasOwnProperty("iat")},qt=function(X){const Z=sr(X).claims;return"object"==typeof Z&&!0===Z.admin};function ar(X,Z){return Object.prototype.hasOwnProperty.call(X,Z)}function lr(X,Z){if(Object.prototype.hasOwnProperty.call(X,Z))return X[Z]}function Rr(X){for(const Z in X)if(Object.prototype.hasOwnProperty.call(X,Z))return!1;return!0}function qn(X,Z,ie){const Fe={};for(const ae in X)Object.prototype.hasOwnProperty.call(X,ae)&&(Fe[ae]=Z.call(ie,X[ae],ae,X));return Fe}function et(X,Z){if(X===Z)return!0;const ie=Object.keys(X),Fe=Object.keys(Z);for(const ae of ie){if(!Fe.includes(ae))return!1;const lt=X[ae],Tt=Z[ae];if(Br(lt)&&Br(Tt)){if(!et(lt,Tt))return!1}else if(lt!==Tt)return!1}for(const ae of Fe)if(!ie.includes(ae))return!1;return!0}function Br(X){return null!==X&&"object"==typeof X}function yn(X){const Z=[];for(const[ie,Fe]of Object.entries(X))Array.isArray(Fe)?Fe.forEach(ae=>{Z.push(encodeURIComponent(ie)+"="+encodeURIComponent(ae))}):Z.push(encodeURIComponent(ie)+"="+encodeURIComponent(Fe));return Z.length?"&"+Z.join("&"):""}function Ti(X){const Z={};return X.replace(/^\?/,"").split("&").forEach(Fe=>{if(Fe){const[ae,lt]=Fe.split("=");Z[decodeURIComponent(ae)]=decodeURIComponent(lt)}}),Z}function Vi(X){const Z=X.indexOf("?");if(!Z)return"";const ie=X.indexOf("#",Z);return X.substring(Z,ie>0?ie:void 0)}class Zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,ie){ie||(ie=0);const Fe=this.W_;if("string"==typeof Z)for(let ot=0;ot<16;ot++)Fe[ot]=Z.charCodeAt(ie)<<24|Z.charCodeAt(ie+1)<<16|Z.charCodeAt(ie+2)<<8|Z.charCodeAt(ie+3),ie+=4;else for(let ot=0;ot<16;ot++)Fe[ot]=Z[ie]<<24|Z[ie+1]<<16|Z[ie+2]<<8|Z[ie+3],ie+=4;for(let ot=16;ot<80;ot++){const Jt=Fe[ot-3]^Fe[ot-8]^Fe[ot-14]^Fe[ot-16];Fe[ot]=4294967295&(Jt<<1|Jt>>>31)}let un,Xe,ae=this.chain_[0],lt=this.chain_[1],Tt=this.chain_[2],hn=this.chain_[3],Pn=this.chain_[4];for(let ot=0;ot<80;ot++){ot<40?ot<20?(un=hn^lt&(Tt^hn),Xe=1518500249):(un=lt^Tt^hn,Xe=1859775393):ot<60?(un=lt&Tt|hn&(lt|Tt),Xe=2400959708):(un=lt^Tt^hn,Xe=3395469782);const Jt=(ae<<5|ae>>>27)+un+Pn+Xe+Fe[ot]&4294967295;Pn=hn,hn=Tt,Tt=4294967295&(lt<<30|lt>>>2),lt=ae,ae=Jt}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+lt&4294967295,this.chain_[2]=this.chain_[2]+Tt&4294967295,this.chain_[3]=this.chain_[3]+hn&4294967295,this.chain_[4]=this.chain_[4]+Pn&4294967295}update(Z,ie){if(null==Z)return;void 0===ie&&(ie=Z.length);const Fe=ie-this.blockSize;let ae=0;const lt=this.buf_;let Tt=this.inbuf_;for(;ae<ie;){if(0===Tt)for(;ae<=Fe;)this.compress_(Z,ae),ae+=this.blockSize;if("string"==typeof Z){for(;ae<ie;)if(lt[Tt]=Z.charCodeAt(ae),++Tt,++ae,Tt===this.blockSize){this.compress_(lt),Tt=0;break}}else for(;ae<ie;)if(lt[Tt]=Z[ae],++Tt,++ae,Tt===this.blockSize){this.compress_(lt),Tt=0;break}}this.inbuf_=Tt,this.total_+=ie}digest(){const Z=[];let ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&ie,ie/=256;this.compress_(this.buf_);let Fe=0;for(let ae=0;ae<5;ae++)for(let lt=24;lt>=0;lt-=8)Z[Fe]=this.chain_[ae]>>lt&255,++Fe;return Z}}function tr(X,Z){const ie=new Fn(X,Z);return ie.subscribe.bind(ie)}class Fn{constructor(Z,ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ie,this.task.then(()=>{Z(this)}).catch(Fe=>{this.error(Fe)})}next(Z){this.forEachObserver(ie=>{ie.next(Z)})}error(Z){this.forEachObserver(ie=>{ie.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,ie,Fe){let ae;if(void 0===Z&&void 0===ie&&void 0===Fe)throw new Error("Missing Observer.");ae=function Ze(X,Z){if("object"!=typeof X||null===X)return!1;for(const ie of Z)if(ie in X&&"function"==typeof X[ie])return!0;return!1}(Z,["next","error","complete"])?Z:{next:Z,error:ie,complete:Fe},void 0===ae.next&&(ae.next=bn),void 0===ae.error&&(ae.error=bn),void 0===ae.complete&&(ae.complete=bn);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),lt}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let ie=0;ie<this.observers.length;ie++)this.sendOne(ie,Z)}sendOne(Z,ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{ie(this.observers[Z])}catch(Fe){typeof console<"u"&&console.error&&console.error(Fe)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bn(){}const Mr=function(X,Z,ie,Fe){let ae;if(Fe<Z?ae="at least "+Z:Fe>ie&&(ae=0===ie?"none":"no more than "+ie),ae)throw new Error(X+" failed: Was called with "+Fe+(1===Fe?" argument.":" arguments.")+" Expects "+ae+".")};function nr(X,Z){return`${X} failed: ${Z} argument `}function Bt(X,Z,ie,Fe){if((!Fe||ie)&&"function"!=typeof ie)throw new Error(nr(X,Z)+"must be a valid function.")}function Qr(X,Z,ie,Fe){if((!Fe||ie)&&("object"!=typeof ie||null===ie))throw new Error(nr(X,Z)+"must be a valid context object.")}const fn=function(X){const Z=[];let ie=0;for(let Fe=0;Fe<X.length;Fe++){let ae=X.charCodeAt(Fe);if(ae>=55296&&ae<=56319){const lt=ae-55296;Fe++,j(Fe<X.length,"Surrogate pair missing trail surrogate."),ae=65536+(lt<<10)+(X.charCodeAt(Fe)-56320)}ae<128?Z[ie++]=ae:ae<2048?(Z[ie++]=ae>>6|192,Z[ie++]=63&ae|128):ae<65536?(Z[ie++]=ae>>12|224,Z[ie++]=ae>>6&63|128,Z[ie++]=63&ae|128):(Z[ie++]=ae>>18|240,Z[ie++]=ae>>12&63|128,Z[ie++]=ae>>6&63|128,Z[ie++]=63&ae|128)}return Z},Bi=function(X){let Z=0;for(let ie=0;ie<X.length;ie++){const Fe=X.charCodeAt(ie);Fe<128?Z++:Fe<2048?Z+=2:Fe>=55296&&Fe<=56319?(Z+=4,ie++):Z+=3}return Z};function gt(X,Z=1e3,ie=2){const Fe=Z*Math.pow(ie,X),ae=Math.round(.5*Fe*(Math.random()-.5)*2);return Math.min(144e5,Fe+ae)}function Zt(X){return X&&X._delegate?X._delegate:X}},1423:(wt,fe,V)=>{"use strict";var h=V(4650);let j=null;function H(){return j}const me=new h.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ie(){return(0,h.LFG)(J)}()},providedIn:"platform"}),n})();const Q=new h.OlP("Location Initialized");let J=(()=>{class n extends we{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(t){const r=H().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=H().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Qe(){return new J((0,h.LFG)(me))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(We)},providedIn:"root"}),n})();const ve=new h.OlP("appBaseHref");let We=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+it(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+it(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(we),h.LFG(ve,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vt=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=He(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+it(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+it(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(we),h.LFG(ve,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Oe(nt(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function Le(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,nt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=He,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(h.LFG(xe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Me(){return new je((0,h.LFG)(xe))}()},providedIn:"root"}),n})();function nt(n){return n.replace(/\/index.html$/,"")}class ga{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ga(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,l),Ao(c,i)}});for(let i=0,o=r.length;i<o;i++){const c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ao(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ao(n,e){n.context.$implicit=e.item}let jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ou,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Er("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Er("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ou{constructor(){this.$implicit=null,this.ngIf=null}}function Er(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class gc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Uh{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const mi=new Uh,Vh=new gc;let rl=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return mi;if((0,h.F4k)(t))return Vh;throw function Cr(n,e){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Hr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function jr(n){return"server"===n}let al=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Rd((0,h.LFG)(me),window)}),n})();class Rd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ei(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Po extends class Iu extends class Ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ge(n){j||(j=n)}(new Po)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pl(){return fs=fs||document.querySelector("base"),fs?fs.getAttribute("href"):null}();return null==t?null:function yi(n){Ir=Ir||document.createElement("a"),Ir.setAttribute("href",n);const e=Ir.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function el(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Ir,fs=null;const Ln=new h.OlP("TRANSITION_ID"),Du=[{provide:h.ip1,useFactory:function Ec(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=H(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Ln,me,h.zs3],multi:!0}];let Tu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=new h.OlP("EventManagerPlugins");let Cc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gl),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ml{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=H().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ps=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ks=(()=>{class n extends ps{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const l=this._doc.createElement("style");l.textContent=o,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zo))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Zo(n){H().remove(n)}const gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ic=/%COMP%/g;function _l(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_l(n,i,t):(i=i.replace(Ic,n),t.push(i))}return t}function Dc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let zi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ys(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Tc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Ac(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_l(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cc),h.LFG(Ks),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ys{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Sa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Sa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=gs[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Dc(r)):this.eventManager.addEventListener(e,t,Dc(r))}}function Sa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Tc extends Ys{constructor(e,t,r,i){super(e),this.component=r;const o=_l(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function Qn(n){return"_ngcontent-%COMP%".replace(Ic,n)}(i+"-"+r.id),this.hostAttr=function yl(n){return"_nghost-%COMP%".replace(Ic,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ac extends Ys{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=_l(i.id,i.styles,[]);for(let l=0;l<o.length;l++){const c=document.createElement("style");c.textContent=o[l],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Nr=(()=>{class n extends ml{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Yo=["alt","control","meta","shift"],D={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},T={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let N=(()=>{class n extends ml{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>H().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),l="code."),Yo.forEach(m=>{const _=r.indexOf(m);_>-1&&(r.splice(_,1),l+=m+".")}),l+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static matchEventFullKeyCode(t,r){let i=D[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Yo.forEach(l=>{l!==i&&(0,T[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const xc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Dr(){Po.makeCurrent()},multi:!0},{provide:me,useFactory:function ys(){return(0,h.RDi)(document),document},deps:[]}]),Qs=new h.OlP(""),zh=[{provide:h.rWj,useClass:class Md{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const c=function(f){l=l||f,o--,0==o&&r(l)};i.forEach(function(f){f.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?H().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Js=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Mi(){return new h.qLn},deps:[]},{provide:gl,useClass:Nr,multi:!0,deps:[me,h.R0b,h.Lbi]},{provide:gl,useClass:N,multi:!0,deps:[me]},{provide:zi,useClass:zi,deps:[Cc,Ks,h.AFp]},{provide:h.FYo,useExisting:zi},{provide:ps,useExisting:Ks},{provide:Ks,useClass:Ks,deps:[me]},{provide:Cc,useClass:Cc,deps:[gl,h.R0b]},{provide:class qo{},useClass:Tu,deps:[]},[]];let kd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Ln,useExisting:h.AFp},Du]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qs,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Js,...zh],imports:[Hr,h.hGG]}),n})(),_s=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function bl(){return new _s((0,h.LFG)(me))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var En=V(8996),oo=V(7669);function Et(...n){const e=(0,oo.yG)(n);return(0,En.D)(n,e)}var so=V(7579);class ir extends so.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ru=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var di=V(9751);const{isArray:ea}=Array,{getPrototypeOf:Nc,prototype:tv,keys:Fd}=Object;function Mu(n){if(1===n.length){const e=n[0];if(ea(e))return{args:e,keys:null};if(function ka(n){return n&&"object"==typeof n&&Nc(n)===tv}(e)){const t=Fd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bs=V(4671),yt=V(4004);const{isArray:ku}=Array;function Pu(n){return(0,yt.U)(e=>function ta(n,e){return ku(e)?n(...e):n(e)}(n,e))}function Al(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var cr=V(5403),Ld=V(9672);function Sl(...n){const e=(0,oo.yG)(n),t=(0,oo.jO)(n),{args:r,keys:i}=Mu(n);if(0===r.length)return(0,En.D)([],e);const o=new di.y(function nv(n,e,t=bs.y){return r=>{Ud(e,()=>{const{length:i}=n,o=new Array(i);let l=i,c=i;for(let f=0;f<i;f++)Ud(e,()=>{const m=(0,En.D)(n[f],e);let _=!1;m.subscribe((0,cr.x)(r,C=>{o[f]=C,_||(_=!0,c--),c||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Al(i,l):bs.y));return t?o.pipe(Pu(t)):o}function Ud(n,e,t){n?(0,Ld.f)(t,n,e):e()}var Oc=V(8189);function na(...n){return function Nu(){return(0,Oc.J)(1)}()((0,En.D)(n,(0,oo.yG)(n)))}var Es=V(8421);function Fo(n){return new di.y(e=>{(0,Es.Xf)(n()).subscribe(e)})}var Vd=V(9635),xl=V(576);function qi(n,e){const t=(0,xl.m)(n)?n:()=>n,r=i=>i.error(t());return new di.y(e?i=>e.schedule(r,0,i):r)}var Cs=V(515),Qo=V(727),Or=V(4482);function ra(){return(0,Or.e)((n,e)=>{let t=null;n._refCount++;const r=(0,cr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Is extends di.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,cr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qo.w0.EMPTY)}return e}refCount(){return ra()(this)}}function dr(n,e){return(0,Or.e)((t,r)=>{let i=null,o=0,l=!1;const c=()=>l&&!i&&r.complete();t.subscribe((0,cr.x)(r,f=>{i?.unsubscribe();let m=0;const _=o++;(0,Es.Xf)(n(f,_)).subscribe(i=(0,cr.x)(r,C=>r.next(e?e(f,C,_,m++):C),()=>{i=null,c()}))},()=>{l=!0,c()}))})}function Jn(n){return n<=0?()=>Cs.E:(0,Or.e)((e,t)=>{let r=0;e.subscribe((0,cr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fc(...n){const e=(0,oo.yG)(n);return(0,Or.e)((t,r)=>{(e?na(n,t,e):na(n,t)).subscribe(r)})}function S(n,e){return(0,Or.e)((t,r)=>{let i=0;t.subscribe((0,cr.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var R=V(5577);function F(n){return(0,Or.e)((e,t)=>{let r=!1;e.subscribe((0,cr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function z(n=se){return(0,Or.e)((e,t)=>{let r=!1;e.subscribe((0,cr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function se(){return new Ru}function he(n,e){const t=arguments.length>=2;return r=>r.pipe(n?S((i,o)=>n(i,o,r)):bs.y,Jn(1),t?F(e):z(()=>new Ru))}function Ue(n,e){return(0,xl.m)(e)?(0,R.z)(n,e,1):(0,R.z)(n,1)}var Ye=V(8505);function Ct(n){return(0,Or.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,cr.x)(t,void 0,void 0,l=>{o=(0,Es.Xf)(n(l,Ct(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ut(n,e,t,r,i){return(o,l)=>{let c=t,f=e,m=0;o.subscribe((0,cr.x)(l,_=>{const C=m++;f=c?n(f,_,C):(c=!0,_),r&&l.next(f)},i&&(()=>{c&&l.next(f),l.complete()})))}}function Ht(n,e){return(0,Or.e)(Ut(n,e,arguments.length>=2,!0))}function xt(n){return n<=0?()=>Cs.E:(0,Or.e)((e,t)=>{let r=[];e.subscribe((0,cr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function or(n,e){const t=arguments.length>=2;return r=>r.pipe(n?S((i,o)=>n(i,o,r)):bs.y,xt(1),t?F(e):z(()=>new Ru))}function Ds(n){return(0,Or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",Jo=Symbol("RouteTitle");class ia{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ao(n){return new ia(n)}function Ml(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],c=n[o];if(l.startsWith(":"))i[l.substring(1)]=c;else if(l!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Lo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Qp(n[i],e[i]))return!1;return!0}function Qp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function rv(n){return Array.prototype.concat.apply([],n)}function iv(n){return n.length>0?n[n.length-1]:null}function $r(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xo(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,En.D)(Promise.resolve(n)):Et(n)}const _C={exact:function sv(n,e,t){if(!Oa(n.segments,e.segments)||!Na(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!sv(n.children[r],e.children[r],t))return!1;return!0},subset:Ou},Xp={exact:function eg(n,e){return Lo(n,e)},subset:function av(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Qp(n[t],e[t]))},ignored:()=>!0};function yw(n,e,t){return _C[t.paths](n.root,e.root,t.matrixParams)&&Xp[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ou(n,e,t){return qh(n,e,e.segments,t)}function qh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Oa(i,t)||e.hasChildren()||!Na(i,t,r))}if(n.segments.length===t.length){if(!Oa(n.segments,t)||!Na(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ou(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Oa(n.segments,i)&&Na(n.segments,i,r)&&n.children[Wt])&&qh(n.children[Wt],e,o,r)}}function Na(n,e,t){return e.every((r,i)=>Xp[t](n[i].parameters,r.parameters))}class Fu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ao(this.queryParams)),this._queryParamMap}toString(){return Yh.serialize(this)}}class an{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$r(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qh(this)}}class Zh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ao(this.parameters)),this._parameterMap}toString(){return cv(this)}}function Oa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Kh},providedIn:"root"}),n})();class Kh{parse(e){const t=new Uu(e);return new Fu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Lu(e.root,!0)}`,r=function bC(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Hd(t)}=${Hd(i)}`).join("&"):`${Hd(t)}=${Hd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _w(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Yh=new Kh;function Qh(n){return n.segments.map(e=>cv(e)).join("/")}function Lu(n,e){if(!n.hasChildren())return Qh(n);if(e){const t=n.children[Wt]?Lu(n.children[Wt],!1):"",r=[];return $r(n.children,(i,o)=>{o!==Wt&&r.push(`${o}:${Lu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lv(n,e){let t=[];return $r(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),$r(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[Lu(n.children[Wt],!1)]:[`${i}:${Lu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${Qh(n)}/${t[0]}`:`${Qh(n)}/(${t.join("//")})`}}function uv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hd(n){return uv(n).replace(/%3B/gi,";")}function es(n){return uv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kl(n){return decodeURIComponent(n)}function ng(n){return kl(n.replace(/\+/g,"%20"))}function cv(n){return`${es(n.path)}${function wC(n){return Object.keys(n).map(e=>`;${es(e)}=${es(n[e])}`).join("")}(n.parameters)}`}const EC=/^[^\/()?;=#]+/;function rg(n){const e=n.match(EC);return e?e[0]:""}const dv=/^[^=?&#]+/,ww=/^[^&#]+/;class Uu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new an(e,t)),r}parseSegment(){const e=rg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Zh(kl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rg(this.remaining);i&&(r=i,this.capture(r))}e[kl(t)]=kl(r)}parseQueryParam(e){const t=function hv(n){const e=n.match(dv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function CC(n){const e=n.match(ww);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ng(t),o=ng(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rg(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Wt);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[Wt]:new an([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function jd(n){return n.segments.length>0?new an([],{[Wt]:n}):n}function ts(n){const e={};for(const r of Object.keys(n.children)){const o=ts(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Vu(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new an(n.segments.concat(e.segments),e.children)}return n}(new an(n.segments,e))}function Pl(n){return n instanceof Fu}function DC(n,e,t,r,i){if(0===t.length)return $d(e.root,e.root,e.root,r,i);const o=function pv(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ig(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return $r(o.outlets,(f,m)=>{c[m]="string"==typeof f?f.split("/"):f}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((c,f)=>{0==f&&"."===c||(0==f&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,o]},[]);return new ig(t,e,r)}(t);return o.toRoot()?$d(e.root,e.root,new an([],{}),r,i):function l(f){const m=function og(n,e,t,r){if(n.isAbsolute)return new Uc(e.root,!0,0);if(-1===r)return new Uc(t,t===e.root,0);return function sg(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new Uc(r,!1,i-o)}(t,r+(Bu(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,f),_=m.processChildren?La(m.segmentGroup,m.index,o.commands):Gd(m.segmentGroup,m.index,o.commands);return $d(e.root,m.segmentGroup,_,r,i)}(n.snapshot?._lastPathIndex)}function Bu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Fa(n){return"object"==typeof n&&null!=n&&n.outlets}function $d(n,e,t,r,i){let l,o={};r&&$r(r,(f,m)=>{o[m]=Array.isArray(f)?f.map(_=>`${_}`):`${f}`}),l=n===e?t:Ew(n,e,t);const c=jd(ts(l));return new Fu(c,o,i)}function Ew(n,e,t){const r={};return $r(n.children,(i,o)=>{r[o]=i===e?t:Ew(i,e,t)}),new an(n.segments,r)}class ig{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bu(r[0]))throw new h.vHH(4003,!1);const i=r.find(Fa);if(i&&i!==iv(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Gd(n,e,t){if(n||(n=new an([],{})),0===n.segments.length&&n.hasChildren())return La(n,e,t);const r=function Cw(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],c=t[r];if(Fa(c))break;const f=`${c}`,m=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&m&&"object"==typeof m&&void 0===m.outlets){if(!ef(f,m,l))return o;r+=2}else{if(!ef(f,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new an(n.segments.slice(0,r.pathIndex),{});return o.children[Wt]=new an(n.segments.slice(r.pathIndex),n.children),La(o,0,i)}return r.match&&0===i.length?new an(n.segments,{}):r.match&&!n.hasChildren()?Tr(n,e,t):r.match?La(n,0,i):Tr(n,e,t)}function La(n,e,t){if(0===t.length)return new an(n.segments,{});{const r=function Jh(n){return Fa(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return $r(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=Gd(n.children[l],e,o))}),$r(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new an(n.segments,i)}}function Tr(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Fa(o)){const f=Xh(o.outlets);return new an(r,f)}if(0===i&&Bu(t[0])){r.push(new Zh(n.segments[e].path,mv(t[0]))),i++;continue}const l=Fa(o)?o.outlets[Wt]:`${o}`,c=i<t.length-1?t[i+1]:null;l&&c&&Bu(c)?(r.push(new Zh(l,mv(c))),i+=2):(r.push(new Zh(l,{})),i++)}return new an(r,{})}function Xh(n){const e={};return $r(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tr(new an([],{}),0,t))}),e}function mv(n){const e={};return $r(n,(t,r)=>e[r]=`${t}`),e}function ef(n,e,t){return n==t.path&&Lo(e,t.parameters)}class oa{constructor(e,t){this.id=e,this.url=t}}class tf extends oa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hu extends oa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nf extends oa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vv extends oa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Iw extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rf extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TC extends oa{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vc extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ag extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yv{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _v{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wv{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bv{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class af{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Wd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ki(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ki(e,this._root).map(t=>t.value)}}function Wd(n,e){if(n===e.value)return e;for(const t of e.children){const r=Wd(n,t);if(r)return r}return null}function ki(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ki(n,t);if(r.length)return r.unshift(e),r}return[]}class lo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Uo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ev extends lf{constructor(e,t){super(e),this.snapshot=t,Zd(this,e)}toString(){return this.snapshot.toString()}}function Bc(n,e){const t=function Hc(n,e){const l=new _i([],{},{},"",{},Wt,e,null,n.root,-1,{});return new cf("",new lo(l,[]))}(n,e),r=new ir([new Zh("",{})]),i=new ir({}),o=new ir({}),l=new ir({}),c=new ir(""),f=new Ua(r,i,l,c,o,Wt,e,t.root);return f.snapshot=t.root,new Ev(new lo(f,[]),t)}class Ua{constructor(e,t,r,i,o,l,c,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=c,this.title=this.data?.pipe((0,yt.U)(m=>m[Jo]))??Et(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>ao(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>ao(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function uf(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _i{constructor(e,t,r,i,o,l,c,f,m,_,C,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=c,this.title=this.data?.[Jo],this.routeConfig=f,this._urlSegment=m,this._lastPathIndex=_,this._correctedLastPathIndex=x??_,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ao(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ao(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cf extends lf{constructor(e,t){super(t),this.url=e,Zd(this,t)}toString(){return Cv(this._root)}}function Zd(n,e){e.value._routerState=n,e.children.forEach(t=>Zd(n,t))}function Cv(n){const e=n.children.length>0?` { ${n.children.map(Cv).join(", ")} } `:"";return`${n.value}${e}`}function lg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Lo(e.params,t.params)||n.params.next(t.params),function Pa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Lo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Kd(n,e){const t=Lo(n.params,e.params)&&function Bd(n,e){return Oa(n,e)&&n.every((t,r)=>Lo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Kd(n.parent,e.parent))}function ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ug(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ju(n,r,i);return ju(n,r)})}(n,e,t);return new lo(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(c=>ju(n,c)),l}}const r=function Dw(n){return new Ua(new ir(n.url),new ir(n.params),new ir(n.queryParams),new ir(n.fragment),new ir(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>ju(n,o));return new lo(r,i)}}const Ts="ngNavigationCancelingError";function Nl(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Pl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function cg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ts]=!0,r.cancellationCode=e,t&&(r.url=t),r}function df(n){return Iv(n)&&Pl(n.url)}function Iv(n){return n&&n[Ts]}class hf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ff,this.attachRef=null}}let ff=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hf,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pf=!1;let $u=(()=>{class n{constructor(t,r,i,o,l){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,pf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,pf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,pf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,pf);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,f=new Tw(t,c,i.injector);if(r&&function w(n){return!!n.resolveComponentFactory}(r)){const m=r.resolveComponentFactory(l);this.activated=i.createComponent(m,i.length,f)}else this.activated=i.createComponent(l,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ff),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Tw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ua?this.route:e===ff?this.childContexts:this.parent.get(e,t)}}let g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[$u],encapsulation:2}),n})();function y(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Rt(n){const e=n.children&&n.children.map(Rt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=g),t}function On(n){return n.outlet||Wt}function uo(n,e){const t=n.filter(r=>On(r)===e);return t.push(...n.filter(r=>On(r)!==e)),t}function Gu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Yd{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Uo(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),$r(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uo(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uo(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Uo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new af(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bv(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(lg(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(c.contexts),l.attachRef=c.componentRef,l.route=c.route.value,l.outlet&&l.outlet.attach(c.componentRef,c.route.value),lg(c.route.value),this.activateChildRoutes(e,null,l.children)}else{const c=Gu(i.snapshot),f=c?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=f,l.injector=c,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Dv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gf{constructor(e,t){this.component=e,this.route=t}}function Tv(n,e,t){const r=n._root;return zu(r,e?e._root:null,t,[r.value])}function jc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Uo(e);return n.children.forEach(l=>{(function dg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const f=function hg(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Oa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Oa(n.url,e.url)||!Lo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kd(n,e)||!Lo(n.queryParams,e.queryParams);default:return!Kd(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new Dv(r)):(o.data=l.data,o._resolvedData=l._resolvedData),zu(n,e,o.component?c?c.children:null:t,r,i),f&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new gf(c.outlet.component,l))}else l&&Ol(e,c,i),i.canActivateChecks.push(new Dv(r)),zu(n,null,o.component?c?c.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),$r(o,(l,c)=>Ol(l,t.getContext(c),i)),i}function Ol(n,e,t){const r=Uo(n),i=n.value;$r(r,(o,l)=>{Ol(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new gf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $c(n){return"function"==typeof n}function Av(n){return n instanceof Ru||"EmptyError"===n?.name}const Sv=Symbol("INITIAL_VALUE");function mf(){return dr(n=>Sl(n.map(e=>e.pipe(Jn(1),Fc(Sv)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===Sv)return Sv;if(!1===t||t instanceof Fu)return t}return!0}),S(e=>e!==Sv),Jn(1)))}function co(n){return(0,Vd.z)((0,Ye.b)(e=>{if(Pl(e))throw Nl(0,e)}),(0,yt.U)(e=>!0===e))}const xv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rv(n,e,t,r,i){const o=Pi(n,e,t);return o.matched?function kw(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Et(i.map(l=>{const c=jc(l,n);return Xo(function VS(n){return n&&$c(n.canMatch)}(c)?c.canMatch(e,t):n.runInContext(()=>c(e,t)))})).pipe(mf(),co()):Et(!0)}(r=y(e,r),e,t).pipe((0,yt.U)(l=>!0===l?o:{...xv})):Et(o)}function Pi(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...xv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ml)(t,n,e);if(!i)return{...xv};const o={};$r(i.posParams,(c,f)=>{o[f]=c.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Gc(n,e,t,r,i="corrected"){if(t.length>0&&function KS(n,e,t){return t.some(r=>Mv(n,e,r)&&On(r)!==Wt)}(n,t,r)){const l=new an(e,function ZS(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&On(o)!==Wt){const l=new an([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[On(o)]=l}return i}(n,e,r,new an(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function MC(n,e,t){return t.some(r=>Mv(n,e,r))}(n,t,r)){const l=new an(n.segments,function RC(n,e,t,r,i,o){const l={};for(const c of r)if(Mv(n,t,c)&&!i[On(c)]){const f=new an([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===o?n.segments.length:e.length,l[On(c)]=f}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const o=new an(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Mv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Pw(n,e,t,r){return!!(On(n)===r||r!==Wt&&Mv(e,t,n))&&("**"===n.path||Pi(e,n,t).matched)}function kC(n,e,t){return 0===e.length&&!n.children[t]}const pg=!1;class kv{constructor(e){this.segmentGroup=e||null}}class PC{constructor(e){this.urlTree=e}}function gg(n){return qi(new kv(n))}function NC(n){return qi(new PC(n))}class QS{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=Gc(this.urlTree.root,[],[],this.config).segmentGroup,t=new an(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,yt.U)(o=>this.createUrlTree(ts(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ct(o=>{if(o instanceof PC)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof kv?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,yt.U)(i=>this.createUrlTree(ts(i),e.queryParams,e.fragment))).pipe(Ct(i=>{throw i instanceof kv?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,pg)}createUrlTree(e,t,r){const i=jd(e);return new Fu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(o=>new an([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,En.D)(i).pipe(Ue(o=>{const l=r.children[o],c=uo(t,o);return this.expandSegmentGroup(e,c,l,o).pipe((0,yt.U)(f=>({segment:f,outlet:o})))}),Ht((o,l)=>(o[l.outlet]=l.segment,o),{}),or())}expandSegment(e,t,r,i,o,l){return(0,En.D)(r).pipe(Ue(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,o,l).pipe(Ct(m=>{if(m instanceof kv)return Et(null);throw m}))),he(c=>!!c),Ct((c,f)=>{if(Av(c))return kC(t,i,o)?Et(new an([],{})):gg(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,o,l,c){return Pw(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):gg(t):gg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?NC(o):this.lineralizeSegments(r,o).pipe((0,R.z)(l=>{const c=new an(l,{});return this.expandSegment(e,c,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:c,consumedSegments:f,remainingSegments:m,positionalParamSegments:_}=Pi(t,i,o);if(!c)return gg(t);const C=this.applyRedirectCommands(f,i.redirectTo,_);return i.redirectTo.startsWith("/")?NC(C):this.lineralizeSegments(i,C).pipe((0,R.z)(x=>this.expandSegment(e,t,r,x.concat(m),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=y(r,e),r.loadChildren?(r._loadedRoutes?Et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,yt.U)(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new an(i,{})))):Et(new an(i,{}))):Rv(t,r,i,e).pipe(dr(({matched:l,consumedSegments:c,remainingSegments:f})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,R.z)(_=>{const C=_.injector??e,x=_.routes,{segmentGroup:M,slicedSegments:O}=Gc(t,c,f,x),W=new an(M.segments,M.children);if(0===O.length&&W.hasChildren())return this.expandChildren(C,x,W).pipe((0,yt.U)(ke=>new an(c,ke)));if(0===x.length&&0===O.length)return Et(new an(c,{}));const K=On(r)===o;return this.expandSegment(C,W,x,O,K?Wt:o,!0).pipe((0,yt.U)(_e=>new an(c.concat(_e.segments),_e.children)))})):gg(t)))}getChildConfig(e,t,r){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function qS(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Et(!0):Et(i.map(l=>{const c=jc(l,n);return Xo(function xw(n){return n&&$c(n.canLoad)}(c)?c.canLoad(e,t):n.runInContext(()=>c(e,t)))})).pipe(mf(),co())}(e,t,r).pipe((0,R.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ye.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function vf(n){return qi(cg(pg,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Et(r);if(i.numberOfChildren>1||!i.children[Wt])return qi(new h.vHH(4e3,pg));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Fu(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $r(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[o]=t[c]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return $r(t.children,(c,f)=>{l[f]=this.createSegmentGroup(e,c,r,i)}),new an(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,pg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class U1{}class Fl{constructor(e,t,r,i,o,l,c,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=c,this.urlSerializer=f}recognize(){const e=Gc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,yt.U)(t=>{if(null===t)return null;const r=new _i([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new lo(r,t),o=new cf(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=qd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,En.D)(Object.keys(r.children)).pipe(Ue(i=>{const o=r.children[i],l=uo(t,i);return this.processSegmentGroup(e,l,o,i)}),Ht((i,o)=>i&&o?(i.push(...o),i):null),function hi(n,e=!1){return(0,Or.e)((t,r)=>{let i=0;t.subscribe((0,cr.x)(r,o=>{const l=n(o,i++);(l||e)&&r.next(o),!l&&r.complete()}))})}(i=>null!==i),F(null),or(),(0,yt.U)(i=>{if(null===i)return null;const o=Lw(i);return function Ow(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,En.D)(t).pipe(Ue(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,o)),he(l=>!!l),Ct(l=>{if(Av(l))return kC(r,i,o)?Et([]):Et(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!Pw(t,r,i,o))return Et(null);let l;if("**"===t.path){const c=i.length>0?iv(i).parameters:{},f=FC(r)+i.length;l=Et({snapshot:new _i(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pv(t),On(t),t.component??t._loadedComponent??null,t,yf(r),f,Nv(t),f),consumedSegments:[],remainingSegments:[]})}else l=Rv(r,t,i,e).pipe((0,yt.U)(({matched:c,consumedSegments:f,remainingSegments:m,parameters:_})=>{if(!c)return null;const C=FC(r)+f.length;return{snapshot:new _i(f,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pv(t),On(t),t.component??t._loadedComponent??null,t,yf(r),C,Nv(t),C),consumedSegments:f,remainingSegments:m}}));return l.pipe(dr(c=>{if(null===c)return Et(null);const{snapshot:f,consumedSegments:m,remainingSegments:_}=c;e=t._injector??e;const C=t._loadedInjector??e,x=function Fw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:M,slicedSegments:O}=Gc(r,m,_,x.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===O.length&&M.hasChildren())return this.processChildren(C,x,M).pipe((0,yt.U)(K=>null===K?null:[new lo(f,K)]));if(0===x.length&&0===O.length)return Et([new lo(f,[])]);const W=On(t)===o;return this.processSegment(C,x,M,O,W?Wt:o).pipe((0,yt.U)(K=>null===K?null:[new lo(f,K)]))}))}}function XS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lw(n){const e=[],t=new Set;for(const r of n){if(!XS(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Lw(r.children);e.push(new lo(r.value,i))}return e.filter(r=>!t.has(r))}function yf(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function FC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Pv(n){return n.data||{}}function Nv(n){return n.resolve||{}}function Ov(n){return"string"==typeof n.title||null===n.title}function Vw(n){return dr(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,yt.U)(()=>e)):Et(e)})}let BC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[Jo]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(HC)},providedIn:"root"}),n})(),HC=(()=>{class n extends BC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_s))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nx{}class jC extends class rx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const mg=new h.OlP("",{providedIn:"root",factory:()=>({})}),Hw=new h.OlP("ROUTES");let jw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Xo(t.loadComponent()).pipe((0,Ye.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ds(()=>{this.componentLoaders.delete(t)})),i=new Is(r,()=>new so.x).pipe(ra());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,m,_=!1;Array.isArray(c)?m=c:(f=c.create(t).injector,m=rv(f.get(Hw,[],h.XFs.Self|h.XFs.Optional)));return{routes:m.map(Rt),injector:f}}),Ds(()=>{this.childrenLoaders.delete(r)})),l=new Is(o,()=>new so.x).pipe(ra());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Xo(t()).pipe((0,R.z)(r=>r instanceof h.YKP||Array.isArray(r)?Et(r):(0,En.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $C{}class GC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zC(n){throw n}function WC(n,e,t){return e.parse("/")}const ix={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},j1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function qC(){const n=(0,h.f3M)(tg),e=(0,h.f3M)(ff),t=(0,h.f3M)(je),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),o=(0,h.f3M)(Hw,{optional:!0})??[],l=(0,h.f3M)(mg,{optional:!0})??{},c=(0,h.f3M)(HC),f=(0,h.f3M)(BC,{optional:!0}),m=(0,h.f3M)($C,{optional:!0}),_=(0,h.f3M)(nx,{optional:!0}),C=new Xn(null,n,e,t,r,i,rv(o));return m&&(C.urlHandlingStrategy=m),_&&(C.routeReuseStrategy=_),C.titleStrategy=f??c,function Lv(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,C),C}let Xn=(()=>{class n{constructor(t,r,i,o,l,c,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new so.x,this.errorHandler=zC,this.malformedUriErrorHandler=WC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Et(void 0),this.urlHandlingStrategy=new GC,this.routeReuseStrategy=new jC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(jw),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new _v(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new yv(x)),this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const C=l.get(h.R0b);this.isNgZoneEnabled=C instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function ov(){return new Fu(new an([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Bc(this.currentUrlTree,this.rootComponentType),this.transitions=new ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(S(i=>0!==i.id),(0,yt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),dr(i=>{let o=!1,l=!1;return Et(i).pipe((0,Ye.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dr(c=>{const f=this.browserUrlTree.toString(),m=!this.navigated||c.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||m)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return $w(c.source)&&(this.browserUrlTree=c.extractedUrl),Et(c).pipe(dr(C=>{const x=this.transitions.getValue();return r.next(new tf(C.id,this.serializeUrl(C.extractedUrl),C.source,C.restoredState)),x!==this.transitions.getValue()?Cs.E:Promise.resolve(C)}),function JS(n,e,t,r){return dr(i=>function Wu(n,e,t,r,i){return new QS(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ye.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},i.urlAfterRedirects=C.urlAfterRedirects}),function UC(n,e,t,r,i,o){return(0,R.z)(l=>function V1(n,e,t,r,i,o,l="emptyOnly",c="legacy"){return new Fl(n,e,t,r,i,l,c,o).recognize().pipe(dr(f=>null===f?function OC(n){return new di.y(e=>e.error(n))}(new U1):Et(f)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,o).pipe((0,yt.U)(c=>({...l,targetSnapshot:c}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ye.b)(C=>{if(i.targetSnapshot=C.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!C.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);this.setBrowserUrl(M,C)}this.browserUrlTree=C.urlAfterRedirects}const x=new Iw(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);r.next(x)}));if(m&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:M,source:O,restoredState:W,extras:K}=c,te=new tf(x,this.serializeUrl(M),O,W);r.next(te);const _e=Bc(M,this.rootComponentType).snapshot;return Et(i={...c,targetSnapshot:_e,urlAfterRedirects:M,extras:{...K,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=c.rawUrl,c.resolve(null),Cs.E}),(0,Ye.b)(c=>{const f=new rf(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(f)}),(0,yt.U)(c=>i={...c,guards:Tv(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function HS(n,e){return(0,R.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?Et({...t,guardsResult:!0}):function jS(n,e,t,r){return(0,En.D)(n).pipe((0,R.z)(i=>function WS(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Et(o.map(c=>{const f=Gu(e)??i,m=jc(c,f);return Xo(function fg(n){return n&&$c(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,r):f.runInContext(()=>m(n,e,t,r))).pipe(he())})).pipe(mf()):Et(!0)}(i.component,i.route,t,e,r)),he(i=>!0!==i,!0))}(l,r,i,n).pipe((0,R.z)(c=>c&&function SC(n){return"boolean"==typeof n}(c)?function Mw(n,e,t,r){return(0,En.D)(e).pipe(Ue(i=>na(function GS(n,e){return null!==n&&e&&e(new wv(n)),Et(!0)}(i.route.parent,r),function $S(n,e){return null!==n&&e&&e(new sf(n)),Et(!0)}(i.route,r),function xC(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function Sw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Fo(()=>Et(l.guards.map(f=>{const m=Gu(l.node)??t,_=jc(f,m);return Xo(function Rw(n){return n&&$c(n.canActivateChild)}(_)?_.canActivateChild(r,n):m.runInContext(()=>_(r,n))).pipe(he())})).pipe(mf())));return Et(o).pipe(mf())}(n,i.path,t),function zS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const i=r.map(o=>Fo(()=>{const l=Gu(e)??t,c=jc(o,l);return Xo(function US(n){return n&&$c(n.canActivate)}(c)?c.canActivate(e,n):l.runInContext(()=>c(e,n))).pipe(he())}));return Et(i).pipe(mf())}(n,i.route,t))),he(i=>!0!==i,!0))}(r,o,n,e):Et(c)),(0,yt.U)(c=>({...t,guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),(0,Ye.b)(c=>{if(i.guardsResult=c.guardsResult,Pl(c.guardsResult))throw Nl(0,c.guardsResult);const f=new TC(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(f)}),S(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),Vw(c=>{if(c.guards.canActivateChecks.length)return Et(c).pipe((0,Ye.b)(f=>{const m=new Vc(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),dr(f=>{let m=!1;return Et(f).pipe(function B1(n,e){return(0,R.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Et(t);let o=0;return(0,En.D)(i).pipe(Ue(l=>function _f(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Ov(i)&&(o[Jo]=i.title),function Uw(n,e,t,r){const i=function VC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Et({});const o={};return(0,En.D)(i).pipe((0,R.z)(l=>function tx(n,e,t,r){const i=Gu(e)??r,o=jc(n,i);return Xo(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(he(),(0,Ye.b)(c=>{o[l]=c}))),xt(1),function Rl(n){return(0,yt.U)(()=>n)}(o),Ct(l=>Av(l)?Cs.E:qi(l)))}(o,n,e,r).pipe((0,yt.U)(l=>(n._resolvedData=l,n.data=qd(n,t).resolve,i&&Ov(i)&&(n.data[Jo]=i.title),null)))}(l.route,r,n,e)),(0,Ye.b)(()=>o++),xt(1),(0,R.z)(l=>o===i.length?Et(t):Cs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ye.b)({next:()=>m=!0,complete:()=>{m||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Ye.b)(f=>{const m=new ag(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}))}),Vw(c=>{const f=m=>{const _=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,Ye.b)(C=>{m.component=C}),(0,yt.U)(()=>{})));for(const C of m.children)_.push(...f(C));return _};return Sl(f(c.targetSnapshot.root)).pipe(F(),Jn(1))}),Vw(()=>this.afterPreactivation()),(0,yt.U)(c=>{const f=function ni(n,e,t){const r=ju(n,e._root,t?t._root:void 0);return new Ev(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return i={...c,targetRouterState:f}}),(0,Ye.b)(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new Yd(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),(0,Ye.b)({next(){o=!0},complete(){o=!0}}),Ds(()=>{o||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ct(c=>{if(l=!0,Iv(c)){df(c)||(this.navigated=!0,this.restoreHistory(i,!0));const f=new nf(i.id,this.serializeUrl(i.extractedUrl),c.message,c.cancellationCode);if(r.next(f),df(c)){const m=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$w(i.source)};this.scheduleNavigation(m,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new vv(i.id,this.serializeUrl(i.extractedUrl),c,i.targetSnapshot??void 0);r.next(f);try{i.resolve(this.errorHandler(c))}catch(m){i.reject(m)}}return Cs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Rt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:c,preserveFragment:f}=r,m=i||this.routerState.root,_=f?this.currentUrlTree.fragment:l;let C=null;switch(c){case"merge":C={...this.currentUrlTree.queryParams,...o};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=o||null}return null!==C&&(C=this.removeEmptyProps(C)),DC(m,this.currentUrlTree,t,C,_??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Pl(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ZC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ix}:!1===r?{...j1}:r,Pl(t))return yw(this.currentUrlTree,t,i);const o=this.parseUrl(t);return yw(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let c,f,m;l?(c=l.resolve,f=l.reject,m=l.promise):m=new Promise((x,M)=>{c=x,f=M});const _=++this.navigationId;let C;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),C=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):C=0,this.setTransition({id:_,targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:c,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new nf(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return qC()},providedIn:"root"}),n})();function $w(n){return"imperative"!==n}let Qd=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new so.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xn),h.Y36(Ua),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),vg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new so.x,this.subscription=t.events.subscribe(o=>{o instanceof Hu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,l){return!!(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xn),h.Y36(Ua),h.Y36(xe))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),yg=(()=>{class n{constructor(t,r,i,o,l,c){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=l,this.linkWithHref=c,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Hu&&this.update()})}ngAfterContentInit(){Et(this.links.changes,this.linksWithHrefs.changes,Et(null)).pipe((0,Oc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,En.D)(t).pipe((0,Oc.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Uv(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xn),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Qd,8),h.Y36(vg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,Qd,5),h.Suo(i,vg,5)),2&t){let o;h.iGM(o=h.CRH())&&(r.links=o),h.iGM(o=h.CRH())&&(r.linksWithHrefs=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class Gw{}let zw=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(S(t=>t instanceof Hu),Ue(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,h.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,c=o._loadedInjector??l;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(l,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return(0,En.D)(i).pipe((0,Oc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Et(null);const o=i.pipe((0,R.z)(l=>null===l?Et(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,En.D)([o,l]).pipe((0,Oc.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xn),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Gw),h.LFG(jw))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jd=new h.OlP("");let YC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new zd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Xd(n,e){return{\u0275kind:n,\u0275providers:e}}function wg(n){return[{provide:Hw,multi:!0,useValue:n}]}function ax(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Xn),i=n.get(Ww);1===n.get(qw)&&r.initialNavigation(),n.get(sa,null,h.XFs.Optional)?.setUpPreloading(),n.get(Jd,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Ww=new h.OlP("",{factory:()=>new so.x}),qw=new h.OlP("",{providedIn:"root",factory:()=>1});const sa=new h.OlP("");function cx(n){return Xd(0,[{provide:sa,useExisting:zw},{provide:Gw,useExisting:n}])}const XC=new h.OlP("ROUTER_FORROOT_GUARD"),hx=[je,{provide:tg,useClass:Kh},{provide:Xn,useFactory:qC},ff,{provide:Ua,useFactory:function QC(n){return n.routerState.root},deps:[Xn]},jw];function eI(){return new h.PXZ("Router",Xn)}let As=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hx,[],wg(t),{provide:XC,useFactory:tI,deps:[[Xn,new h.FiY,new h.tp0]]},{provide:mg,useValue:r||{}},r?.useHash?{provide:xe,useClass:vt}:{provide:xe,useClass:We},{provide:Jd,useFactory:()=>{const n=(0,h.f3M)(Xn),e=(0,h.f3M)(al),t=(0,h.f3M)(mg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new YC(n,e,t)}},r?.preloadingStrategy?cx(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:eI},r?.initialNavigation?nI(r):[],[{provide:Zw,useFactory:ax},{provide:h.tb,multi:!0,useExisting:Zw}]]}}static forChild(t){return{ngModule:n,providers:[wg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(XC,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[g]}),n})();function tI(n){return"guarded"}function nI(n){return["disabled"===n.initialNavigation?Xd(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Xn);return()=>{e.setUpLocationChangeListener()}}},{provide:qw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Xd(2,[{provide:qw,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Q,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const l=e.get(Xn),c=e.get(Ww);(function i(o){e.get(Xn).events.pipe(S(c=>c instanceof Hu||c instanceof nf||c instanceof vv),(0,yt.U)(c=>c instanceof Hu||c instanceof nf&&(0===c.code||1===c.code)&&null),S(c=>null!==c),Jn(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),l.afterPreactivation=()=>(o(!0),r||c.closed?Et(void 0):c),l.initialNavigation()}))}}]).\u0275providers:[]]}const Zw=new h.OlP("");var rI=V(5226),ho=V.n(rI),Re=V(5861),Kw=V(6451),Bv=V(5363),W1=V(6063);class iI extends so.x{constructor(e=1/0,t=1/0,r=W1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=t.now();let c=0;for(let f=1;f<r.length&&r[f]<=l;f+=2)c=f;c&&r.splice(0,c+1)}}}var Yw=V(3099);function zc(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Yw.B)({connector:()=>new iI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function oI(n,e){return(0,xl.m)(e)?dr(()=>n,e):dr(()=>n)}var bg=V(9468),Dn=V(5813),wi=V(2011);V(5867);var fo=V(9681),Va=V(4859),B=V(2090),aa=V(1877);const Cg=new Map,_x={activated:!1,tokenObservers:[]},Xw={initialized:!1,enabled:!1};function Zi(n){return Cg.get(n)||Object.assign({},_x)}function qu(){return Xw}class tb{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Re.Z)(function*(){t.stop();try{t.pending=new B.BH,yield function Zu(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new B.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const po=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bx(n){if(!Zi(n).activated)throw po.create("use-before-activation",{appName:n.name})}function bf(n,e){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,Re.Z)(function*({url:n,body:e},t){var r,i;const o={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const M=yield l.getHeartbeatsHeader();M&&(o["X-Firebase-Client"]=M)}const c={method:"POST",body:JSON.stringify(e),headers:o};let f,m;try{f=yield fetch(n,c)}catch(M){throw po.create("fetch-network-error",{originalErrorMessage:null===(r=M)||void 0===r?void 0:r.message})}if(200!==f.status)throw po.create("fetch-status-error",{httpStatus:f.status});try{m=yield f.json()}catch(M){throw po.create("fetch-parse-error",{originalErrorMessage:null===(i=M)||void 0===i?void 0:i.message})}const _=m.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw po.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(_[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}})).apply(this,arguments)}function sb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ig="firebase-app-check-store";let Gv=null;function ab(){return Gv||(Gv=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;e(po.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ig,{keyPath:"compositeKey"})}}catch(r){e(po.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Gv)}function ub(){return(ub=(0,Re.Z)(function*(n,e){const r=(yield ab()).transaction(Ig,"readwrite"),o=r.objectStore(Ig).put({compositeKey:n,value:e});return new Promise((l,c)=>{o.onsuccess=f=>{l()},r.onerror=f=>{var m;c(po.create("storage-set",{originalErrorMessage:null===(m=f.target.error)||void 0===m?void 0:m.message}))}})})).apply(this,arguments)}const Wv=new aa.Yd("@firebase/app-check");function pI(n,e){return(0,B.hl)()?function Cx(n,e){return function lb(n,e){return ub.apply(this,arguments)}(function Ix(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Dx(){return qu().enabled}function Tx(){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,Re.Z)(function*(){const n=qu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ax={error:"UNKNOWN_ERROR"};function mI(n){return B.US.encodeString(JSON.stringify(n),!1)}function Cf(n){return qv.apply(this,arguments)}function qv(){return(qv=(0,Re.Z)(function*(n,e=!1){const t=n.app;bx(t);const r=Zi(t);let o,i=r.token;if(i&&!If(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(If(f)?i=f:yield pI(t,void 0))}if(!e&&i&&If(i))return{token:i.token};let c,l=!1;if(Dx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bf(sb(t,yield Tx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const f=yield r.exchangeTokenPromise;return yield pI(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Zi(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Wv.warn(f.message):Wv.error(f),o=f}return i?o?c=If(i)?{token:i.token,internalError:o}:hb(o):(c={token:i.token},r.token=i,yield pI(t,i)):c=hb(o),l&&yI(t,c),c})).apply(this,arguments)}function db(n,e){const t=Zi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Ku(n){const{app:e}=n,t=Zi(e);let r=t.tokenRefresher;r||(r=function vI(n){const{app:e}=n;return new tb((0,Re.Z)(function*(){let r;if(r=Zi(e).token?yield Cf(n,!0):yield Cf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Zi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yI(n,e){const t=Zi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function If(n){return n.expireTimeMillis-Date.now()>0}function hb(n){return{token:mI(Ax),error:n}}class Sx{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zi(this.app);for(const t of e)db(this.app,t.next);return Promise.resolve()}}const wb="app-check-internal";!function kx(){(0,fo._registerComponent)(new Va.wA("app-check",n=>function xx(n,e){return new Sx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wb).initialize()})),(0,fo._registerComponent)(new Va.wA(wb,n=>function Zv(n){return{getToken:e=>Cf(n,e),addTokenListener:e=>function Dg(n,e,t,r){const{app:i}=n,o=Zi(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&If(o.token)){const c=o.token;Promise.resolve().then(()=>{t({token:c.token}),Ku(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Ku(n))}(n,"INTERNAL",e),removeTokenListener:e=>db(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,fo.registerVersion)("@firebase/app-check","0.5.17")}();class Af{constructor(){return(0,Dn.vb)("app-check")}}typeof window<"u"&&window;var ey=V(127);const Cb=new h.OlP("angularfire2.auth.use-emulator"),Ib=new h.OlP("angularfire2.auth.settings"),Sf=new h.OlP("angularfire2.auth.tenant-id"),Ag=new h.OlP("angularfire2.auth.langugage-code"),xf=new h.OlP("angularfire2.auth.use-device-language"),TI=new h.OlP("angularfire.auth.persistence"),Sg=(n,e,t,r,i,o,l,c)=>(0,wi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,o&&f.useDeviceLanguage(),l)for(const[m,_]of Object.entries(l))f.settings[m]=_;return c&&f.setPersistence(c),f},[t,r,i,o,l,c]);let Ha=(()=>{class n{constructor(t,r,i,o,l,c,f,m,_,C,x,M){const O=new so.x,W=Et(void 0).pipe((0,Bv.Q)(l.outsideAngular),dr(()=>o.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,1277)))),(0,yt.U)(()=>(0,wi.on)(t,o,r)),(0,yt.U)(K=>Sg(K,o,c,m,_,C,f,x)),zc({bufferSize:1,refCount:!1}));if(jr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{W.pipe(he()).subscribe();const te=W.pipe(dr(Ne=>Ne.getRedirectResult().then(ut=>ut,()=>null)),Dn.iC,zc({bufferSize:1,refCount:!1})),_e=W.pipe(dr(Ne=>new di.y(ut=>({unsubscribe:o.runOutsideAngular(()=>Ne.onAuthStateChanged(at=>ut.next(at),at=>ut.error(at),()=>ut.complete()))})))),ke=W.pipe(dr(Ne=>new di.y(ut=>({unsubscribe:o.runOutsideAngular(()=>Ne.onIdTokenChanged(at=>ut.next(at),at=>ut.error(at),()=>ut.complete()))}))));this.authState=te.pipe(oI(_e),(0,bg.R)(l.outsideAngular),(0,Bv.Q)(l.insideAngular)),this.user=te.pipe(oI(ke),(0,bg.R)(l.outsideAngular),(0,Bv.Q)(l.insideAngular)),this.idToken=this.user.pipe(dr(Ne=>Ne?(0,En.D)(Ne.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(dr(Ne=>Ne?(0,En.D)(Ne.getIdTokenResult()):Et(null))),this.credential=(0,Kw.T)(te,O,this.authState.pipe(S(Ne=>!Ne))).pipe((0,yt.U)(Ne=>Ne?.user?Ne:null),(0,bg.R)(l.outsideAngular),(0,Bv.Q)(l.insideAngular))}return(0,wi.pX)(this,W,o,{spy:{apply:(K,te,_e)=>{(K.startsWith("signIn")||K.startsWith("createUser"))&&_e.then(ke=>O.next(ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wi.Dh),h.LFG(wi.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(Cb,8),h.LFG(Ib,8),h.LFG(Sf,8),h.LFG(Ag,8),h.LFG(xf,8),h.LFG(TI,8),h.LFG(Af,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Db=(()=>{class n{constructor(){ey.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ha]}),n})();var ty=V(4986);function ny(){return(0,Or.e)((n,e)=>{let t,r=!1;n.subscribe((0,cr.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Tb(n,e=bs.y){return n=n??Ab,(0,Or.e)((t,r)=>{let i,o=!0;t.subscribe((0,cr.x)(r,l=>{const c=e(l);(o||!n(i,c))&&(o=!1,i=c,r.next(l))}))})}function Ab(n,e){return n===e}V(1277);var At,Rf=V(3942),ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xs={},xg=xg||{},Qt=ry||self;function iy(){}function oy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var AI="closure_uid_"+(1e9*Math.random()>>>0),Vx=0;function vO(n,e,t){return n.call.apply(n.bind,arguments)}function Bx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function go(n,e,t){return(go=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vO:Bx).apply(null,arguments)}function sy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ni(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,o){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return e.prototype[i].apply(r,l)}}function Vl(){this.s=this.s,this.o=this.o}Vl.prototype.s=!1,Vl.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ux(n){Object.prototype.hasOwnProperty.call(n,AI)&&n[AI]||(n[AI]=++Vx)}(this)},Vl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ay=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Sb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function SI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(oy(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function mo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}mo.prototype.h=function(){this.defaultPrevented=!0};var jx=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",iy,e),Qt.removeEventListener("test",iy,e)}catch{}return n}();function ly(n){return/^[\s\xa0]*$/.test(n)}var xI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Mf(n,e){return n<e?-1:n>e?1:0}function Bl(){var n=Qt.navigator;return n&&(n=n.userAgent)?n:""}function Ju(n){return-1!=Bl().indexOf(n)}function eh(n){return eh[" "](n),n}eh[" "]=iy;var th,n,Gx=Ju("Opera"),qc=Ju("Trident")||Ju("MSIE"),RI=Ju("Edge"),la=RI||qc,kf=Ju("Gecko")&&!(-1!=Bl().toLowerCase().indexOf("webkit")&&!Ju("Edge"))&&!(Ju("Trident")||Ju("MSIE"))&&!Ju("Edge"),vo=-1!=Bl().toLowerCase().indexOf("webkit")&&!Ju("Edge");function Zc(){var n=Qt.document;return n?n.documentMode:void 0}e:{var ns="",Rg=(n=Bl(),kf?/rv:([^\);]+)(\)|;)/.exec(n):RI?/Edge\/([\d\.]+)/.exec(n):qc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vo?/WebKit\/(\S+)/.exec(n):Gx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rg&&(ns=Rg?Rg[1]:""),qc){var Kc=Zc();if(null!=Kc&&Kc>parseFloat(ns)){th=String(Kc);break e}}th=ns}var Pf={};var Of=Qt.document&&qc&&(Zc()||parseInt(th,10))||void 0;function Hl(n,e){if(mo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(kf){e:{try{eh(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ff[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hl.X.h.call(this)}}Ni(Hl,mo);var Ff={2:"touch",3:"pen",4:"mouse"};Hl.prototype.h=function(){Hl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var jl="closure_listenable_"+(1e6*Math.random()|0),MI=0;function kI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++MI,this.ba=this.ea=!1}function Mg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function uy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function xb(n){const e={};for(const t in n)e[t]=n[t];return e}const Rb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Rb.length;o++)t=Rb[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function kg(n){this.src=n,this.g={},this.h=0}function cy(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=ay(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Mg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kb(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==r)return i}return-1}kg.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=kb(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new kI(e,this.src,o,!!r,i)).ea=t,n.push(e)),e};var Pb="closure_lm_"+(1e6*Math.random()|0),dy={};function PI(n,e,t,r,i){if(r&&r.once)return hy(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)PI(n,e[o],t,r,i);return null}return t=Og(t),n&&n[jl]?n.N(e,t,Qu(r)?!!r.capture:!!r,i):Nb(n,e,t,!1,r,i)}function Nb(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=Qu(i)?!!i.capture:!!i,c=Lb(n);if(c||(n[Pb]=c=new kg(n)),(t=c.add(e,t,r,l,o)).proxy)return t;if(r=function Ob(){const e=Fb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)jx||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Pg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hy(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)hy(n,e[o],t,r,i);return null}return t=Og(t),n&&n[jl]?n.O(e,t,Qu(r)?!!r.capture:!!r,i):Nb(n,e,t,!0,r,i)}function NI(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)NI(n,e[o],t,r,i);else r=Qu(r)?!!r.capture:!!r,t=Og(t),n&&n[jl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kb(o=n.g[e],t,r,i))&&(Mg(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Lb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kb(e,t,r,i)),(t=-1<n?e[n]:null)&&Lf(t))}function Lf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[jl])cy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lb(e))?(cy(t,n),0==t.h&&(t.src=null,e[Pb]=null)):Mg(n)}}}function Pg(n){return n in dy?dy[n]:dy[n]="on"+n}function Fb(n,e){if(n.ba)n=!0;else{e=new Hl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Lf(n),n=t.call(r,e)}return n}function Lb(n){return(n=n[Pb])instanceof kg?n:null}var Ng="__closure_events_fn_"+(1e9*Math.random()>>>0);function Og(n){return"function"==typeof n?n:(n[Ng]||(n[Ng]=function(e){return n.handleEvent(e)}),n[Ng])}function bi(){Vl.call(this),this.i=new kg(this),this.P=this,this.I=null}function Oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mo(e,n);else if(e instanceof mo)e.target=e.target||n;else{var i=e;Mb(e=new mo(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=Uf(l,r,!0,e)&&i}if(i=Uf(l=e.g=n,r,!0,e)&&i,i=Uf(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Uf(l=e.g=t[o],r,!1,e)&&i}function Uf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ba&&l.capture==t){var c=l.listener,f=l.ha||l.src;l.ea&&cy(n.i,l),i=!1!==c.call(f,r)&&i}}return i&&!r.defaultPrevented}Ni(bi,Vl),bi.prototype[jl]=!0,bi.prototype.removeEventListener=function(n,e,t,r){NI(this,n,e,t,r)},bi.prototype.M=function(){if(bi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mg(t[r]);delete n.g[e],n.h--}}this.I=null},bi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},bi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var fy=Qt.JSON.stringify;function OI(){var n=UI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var py,Vb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zx,n=>n.reset());class zx{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function FI(n){Qt.setTimeout(()=>{throw n},0)}function Bb(n,e){py||function LI(){var n=Qt.Promise.resolve(void 0);py=function(){n.then(Wx)}}(),Hb||(py(),Hb=!0),UI.add(n,e)}var Hb=!1,UI=new class Ub{constructor(){this.h=this.g=null}add(e,t){const r=Vb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Wx(){for(var n;n=OI();){try{n.h.call(n.g)}catch(t){FI(t)}var e=Vb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hb=!1}function Vf(n,e){bi.call(this),this.h=n||1,this.g=e||Qt,this.j=go(this.lb,this),this.l=Date.now()}function Bf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function gy(n,e,t){if("function"==typeof n)t&&(n=go(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=go(n.handleEvent,n)}return 2147483647<Number(e)?-1:Qt.setTimeout(n,e||0)}function jb(n){n.g=gy(()=>{n.g=null,n.i&&(n.i=!1,jb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ni(Vf,bi),(At=Vf.prototype).ca=!1,At.R=null,At.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Oi(this,"tick"),this.ca&&(Bf(this),this.start()))}},At.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},At.M=function(){Vf.X.M.call(this),Bf(this),delete this.g};class VI extends Vl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jb(this)}M(){super.M(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hf(n){Vl.call(this),this.h=n,this.g={}}Ni(Hf,Vl);var $b=[];function Gb(n,e,t,r){Array.isArray(t)||(t&&($b[0]=t.toString()),t=$b);for(var i=0;i<t.length;i++){var o=PI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function zb(n){uy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lf(e)},n),n.g={}}function Fg(){this.g=!0}function jf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zx(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return fy(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Hf.prototype.M=function(){Hf.X.M.call(this),zb(this)},Hf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fg.prototype.Aa=function(){this.g=!1},Fg.prototype.info=function(){};var mr={},Wb=null;function my(){return Wb=Wb||new bi}function HI(n){mo.call(this,mr.Pa,n)}function $f(n){const e=my();Oi(e,new HI(e))}function jI(n,e){mo.call(this,mr.STAT_EVENT,n),this.stat=e}function yo(n){const e=my();Oi(e,new jI(e,n))}function qb(n,e){mo.call(this,mr.Qa,n),this.size=e}function $l(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},e)}mr.Pa="serverreachability",Ni(HI,mo),mr.STAT_EVENT="statevent",Ni(jI,mo),mr.Qa="timingevent",Ni(qb,mo);var vy={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},$I={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function yy(){}function Zb(){}yy.prototype.h=null;var ua,_y={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function wy(){mo.call(this,"d")}function Lg(){mo.call(this,"c")}function by(){}function Ug(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Hf(this),this.O=$a,this.T=new Vf(n=la?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ja}function ja(){this.i=null,this.g="",this.h=!1}Ni(wy,mo),Ni(Lg,mo),Ni(by,yy),by.prototype.g=function(){return new XMLHttpRequest},by.prototype.i=function(){return{}},ua=new by;var $a=45e3,Rs={},Vg={};function Ey(n,e,t){n.K=1,n.v=jg(ca(e)),n.s=t,n.P=!0,zI(n,null)}function zI(n,e){n.F=Date.now(),rh(n),n.A=ca(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),tD(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ja,n.g=_D(n.l,t?e:null,!n.s),0<n.N&&(n.L=new VI(go(n.La,n,n.g),n.N)),Gb(n.S,n.g,"readystatechange",n.ib),e=n.H?xb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),$f(),function yO(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",c=o.split("&"),f=0;f<c.length;f++){var m=c[f].split("=");if(1<m.length){var _=m[0];m=m[1];var C=_.split("_");l=2<=C.length&&"type"==C[1]?l+(_+"=")+m+"&":l+(_+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function WI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function qI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Kx(n,t),i==Vg){4==e&&(n.o=4,yo(14),r=!1),jf(n.j,n.m,null,"[Incomplete Response]");break}if(i==Rs){n.o=4,yo(15),jf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}jf(n.j,n.m,i,null),Iy(n,i)}WI(n)&&i!=Vg&&i!=Rs&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),oh(e),e.K=!0,yo(11))):(jf(n.j,n.m,t,"[Invalid Chunked Response]"),ih(n),zf(n))}function Kx(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Vg:(t=Number(e.substring(t,r)),isNaN(t)?Rs:(r+=1)+t>e.length?Vg:(e=e.substr(r,t),n.C=r+t,e))}function rh(n){n.V=Date.now()+n.O,Gf(n,n.O)}function Gf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$l(go(n.gb,n),e)}function Cy(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function zf(n){0==n.l.G||n.I||yD(n.l,n)}function ih(n){Cy(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Bf(n.T),zb(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Iy(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Qb(t.h,n)))if(!n.J&&Qb(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ky(t),Kg(t)}t0(t),yo(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=$l(go(t.cb,t),6e3));if(1>=iD(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Xc(t,11)}else if((n.J||t.g==n)&&ky(t),!ly(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(t.T=m[0],m=m[1],2==t.G)if("c"==m[0]){t.I=m[1],t.ka=m[2];const _=m[3];null!=_&&(t.ma=_,t.j.info("VER="+t.ma));const C=m[4];null!=C&&(t.Ca=C,t.j.info("SVER="+t.Ca));const x=m[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const M=n.g;if(M){const O=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(O){var o=r.h;o.g||-1==O.indexOf("spdy")&&-1==O.indexOf("quic")&&-1==O.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ty(o,o.h),o.h=null))}if(r.D){const W=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(r.za=W,vr(r.F,r.D,W))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=r0(r,r.H?r.ka:null,r.V),l.J){Jb(r.h,l);var c=l,f=r.J;f&&c.setTimeout(f),c.B&&(Cy(c),rh(c)),r.g=l}else mD(r);0<t.i.length&&Yg(t)}else"stop"!=m[0]&&"close"!=m[0]||Xc(t,7);else 3==t.G&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?Xc(t,7):My(t):"noop"!=m[0]&&t.l&&t.l.wa(m),t.A=0)}$f()}catch{}}function KI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(oy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Dy(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(oy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ZI(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(oy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(At=Ug.prototype).setTimeout=function(n){this.O=n},At.ib=function(n){n=n.target;const e=this.L;e&&3==rs(n)?e.l():this.La(n)},At.La=function(n){try{if(n==this.g)e:{const _=rs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>_)&&(3!=_||la||this.g&&(this.h.h||this.g.fa()||hD(this.g)))){this.I||4!=_||7==e||$f(),Cy(this);var t=this.g.aa();this.Y=t;t:if(WI(this)){var r=hD(this.g);n="";var i=r.length,o=4==rs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ih(this),zf(this);var l="";break t}this.h.i=new Qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function qx(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.U,_,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,f=this.g;if((c=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ly(c)){var m=c;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,yo(12),ih(this),zf(this);break e}jf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Iy(this,t)}this.P?(qI(this,_,l),la&&this.i&&3==_&&(Gb(this.S,this.T,"tick",this.hb),this.T.start())):(jf(this.j,this.m,l,null),Iy(this,l)),4==_&&ih(this),this.i&&!this.I&&(4==_?yD(this.l,this):(this.i=!1,rh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,yo(12)):(this.o=0,yo(13)),ih(this),zf(this)}}}catch{}},At.hb=function(){if(this.g){var n=rs(this.g),e=this.g.fa();this.C<e.length&&(Cy(this),qI(this,n,e),this.i&&4!=n&&rh(this))}},At.cancel=function(){this.I=!0,ih(this)},At.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function BI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($f(),yo(17)),ih(this),this.o=2,zf(this)):Gf(this,this.V-n)};var Kb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xu){this.h=void 0!==e?e:n.h,Bg(this,n.j),this.s=n.s,this.g=n.g,Hg(this,n.m),this.l=n.l,e=n.i;var t=new $g;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Yb(this,t),this.o=n.o}else n&&(t=String(n).match(Kb))?(this.h=!!e,Bg(this,t[1]||"",!0),this.s=Wf(t[2]||""),this.g=Wf(t[3]||"",!0),Hg(this,t[4]),this.l=Wf(t[5]||"",!0),Yb(this,t[6]||"",!0),this.o=Wf(t[7]||"")):(this.h=!!e,this.i=new $g(null,this.h))}function ca(n){return new Xu(n)}function Bg(n,e,t){n.j=t?Wf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Hg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Yb(n,e,t){e instanceof $g?(n.i=e,function eR(n,e){e&&!n.j&&(Qc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(XI(this,r),tD(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qf(e,Jx)),n.i=new $g(e,n.h))}function vr(n,e,t){n.i.set(e,t)}function jg(n){return vr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,QI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function QI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qf(e,JI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qf(e,JI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qf(t,"/"==t.charAt(0)?Qx:Yx,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qf(t,Xx)),n.join("")};var JI=/[#\/\?@]/g,Yx=/[#\?:]/g,Qx=/[#\?]/g,Jx=/[#\?@]/g,Xx=/#/g;function $g(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qc(n){n.g||(n.g=new Map,n.h=0,n.i&&function YI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function XI(n,e){Qc(n),e=Zf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function eD(n,e){return Qc(n),e=Zf(n,e),n.g.has(e)}function tD(n,e,t){XI(n,e),0<t.length&&(n.i=null,n.g.set(Zf(n,e),Sb(t)),n.h+=t.length)}function Zf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nD(n){this.l=n||nR,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ga&&Qt.g.Ga()&&Qt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(At=$g.prototype).add=function(n,e){Qc(this),this.i=null,n=Zf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},At.forEach=function(n,e){Qc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},At.oa=function(){Qc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},At.W=function(n){Qc(this);let e=[];if("string"==typeof n)eD(this,n)&&(e=e.concat(this.g.get(Zf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},At.set=function(n,e){return Qc(this),this.i=null,eD(this,n=Zf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},At.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},At.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var nR=10;function rD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iD(n){return n.h?1:n.g?n.g.size:0}function Qb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ty(n,e){n.g?n.g.add(e):n.h=e}function Jb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Xb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Sb(n.i)}function Ay(){}function oD(){this.g=new Ay}function sD(n,e,t){const r=t||"";try{KI(n,function(i,o){let l=i;Qu(i)&&(l=fy(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Gg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Kf(n){this.l=n.ac||null,this.j=n.jb||!1}function zg(n,e){bi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Sy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nD.prototype.cancel=function(){if(this.i=Xb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ay.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},Ay.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},Ni(Kf,yy),Kf.prototype.g=function(){return new zg(this.l,this.j)},Kf.prototype.i=function(n){return function(){return n}}({}),Ni(zg,bi);var Sy=0;function Jc(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Wg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qg(n)}function qg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(At=zg.prototype).open=function(n,e){if(this.readyState!=Sy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qg(this)},At.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Qt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},At.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wg(this)),this.readyState=Sy},At.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qg(this)),this.g&&(this.readyState=3,qg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jc(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},At.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wg(this):qg(this),3==this.readyState&&Jc(this)}},At.Va=function(n){this.g&&(this.response=this.responseText=n,Wg(this))},At.Ua=function(n){this.g&&(this.response=n,Wg(this))},At.ga=function(){this.g&&Wg(this)},At.setRequestHeader=function(n,e){this.v.append(n,e)},At.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},At.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Yf=Qt.JSON.parse;function ri(n){bi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xy,this.K=this.L=!1}Ni(ri,bi);var xy="",_O=/^https?$/i,lD=["POST","PUT"];function rR(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Vt(n),Ry(n)}function Vt(n){n.D||(n.D=!0,Oi(n,"complete"),Oi(n,"error"))}function cD(n){if(n.h&&typeof xg<"u"&&(!n.C[1]||4!=rs(n)||2!=n.aa()))if(n.v&&4==rs(n))gy(n.Ha,0,n);else if(Oi(n,"readystatechange"),4==rs(n)){n.h=!1;try{const c=n.aa();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.H).match(Kb)[1]||null;if(!i&&Qt.self&&Qt.self.location){var o=Qt.self.location.protocol;i=o.substr(0,o.length-1)}r=!_O.test(i?i.toLowerCase():"")}t=r}if(t)Oi(n,"complete"),Oi(n,"success");else{n.m=6;try{var l=2<rs(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Vt(n)}}finally{Ry(n)}}}function Ry(n,e){if(n.g){dD(n);const t=n.g,r=n.C[0]?iy:null;n.g=null,n.C=null,e||Oi(n,"ready");try{t.onreadystatechange=r}catch{}}}function dD(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function rs(n){return n.g?n.g.readyState:0}function hD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Zg(n){let e="";return uy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Qf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Zg(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vr(n,e,t))}function hr(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iR(n){this.Ca=0,this.i=[],this.j=new Fg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=hr("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=hr("baseRetryDelayMs",5e3,n),this.bb=hr("retryDelaySeedMs",1e4,n),this.$a=hr("forwardChannelMaxRetries",2,n),this.ta=hr("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new nD(n&&n.concurrentRequestLimit),this.Fa=new oD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function My(n){if(fD(n),3==n.G){var e=n.U++,t=ca(n.F);vr(t,"SID",n.I),vr(t,"RID",e),vr(t,"TYPE","terminate"),Jf(n,t),(e=new Ug(n,n.j,e,void 0)).K=2,e.v=jg(ca(t)),t=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(t=Qt.navigator.sendBeacon(e.v.toString(),"")),!t&&Qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_D(e.l,null),e.g.da(e.v)),e.F=Date.now(),rh(e)}n0(n)}function Kg(n){n.g&&(oh(n),n.g.cancel(),n.g=null)}function fD(n){Kg(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),ky(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function Yg(n){rD(n.h)||n.m||(n.m=!0,Bb(n.Ja,n),n.C=0)}function e0(n,e){var t;t=e?e.m:n.U++;const r=ca(n.F);vr(r,"SID",n.I),vr(r,"RID",t),vr(r,"AID",n.T),Jf(n,r),n.o&&n.s&&Qf(r,n.o,n.s),t=new Ug(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=gD(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ty(n.h,t),Ey(t,r,e)}function Jf(n,e){n.ia&&uy(n.ia,function(t,r){vr(e,r,t)}),n.l&&KI({},function(t,r){vr(e,r,t)})}function gD(n,e,t){t=Math.min(n.i.length,t);var r=n.l?go(n.l.Ra,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let c=!0;for(let f=0;f<t;f++){let m=i[f].h;const _=i[f].g;if(m-=o,0>m)o=Math.max(0,i[f].h-100),c=!1;else try{sD(_,l,"req"+m+"_")}catch{r&&r(_)}}if(c){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function mD(n){n.g||n.u||(n.Z=1,Bb(n.Ia,n),n.A=0)}function t0(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=$l(go(n.Ia,n),Qg(n,n.A)),n.A++,0))}function oh(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function vD(n){n.g=new Ug(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ca(n.sa);vr(e,"RID","rpc"),vr(e,"SID",n.I),vr(e,"CI",n.L?"0":"1"),vr(e,"AID",n.T),vr(e,"TYPE","xmlhttp"),Jf(n,e),n.o&&n.s&&Qf(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=jg(ca(e)),t.s=null,t.P=!0,zI(t,n)}function ky(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function yD(n,e){var t=null;if(n.g==e){ky(n),oh(n),n.g=null;var r=2}else{if(!Qb(n.h,e))return;t=e.D,Jb(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Oi(r=my(),new qb(r,t)),Yg(n)}else mD(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function pD(n,e){return!(iD(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=$l(go(n.Ja,n,e),Qg(n,n.C)),n.C++,0)))}(n,e)||2==r&&t0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Xc(n,5);break;case 4:Xc(n,10);break;case 3:Xc(n,6);break;default:Xc(n,2)}}function Qg(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Xc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=go(n.kb,n);t||(t=new Xu("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||Bg(t,"https"),jg(t)),function aD(n,e){const t=new Fg;if(Qt.Image){const r=new Image;r.onload=sy(Gg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=sy(Gg,t,r,"TestLoadImage: error",!1,e),r.onabort=sy(Gg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=sy(Gg,t,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yo(2);n.G=0,n.l&&n.l.va(e),n0(n),fD(n)}function n0(n){if(n.G=0,n.la=[],n.l){const e=Xb(n.h);(0!=e.length||0!=n.i.length)&&(SI(n.la,e),SI(n.la,n.i),n.h.i.length=0,Sb(n.i),n.i.length=0),n.l.ua()}}function r0(n,e,t){var r=t instanceof Xu?ca(t):new Xu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Hg(r,r.m);else{var i=Qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Xu(null,void 0);r&&Bg(o,r),e&&(o.g=e),i&&Hg(o,i),t&&(o.l=t),r=o}return e=n.za,(t=n.D)&&e&&vr(r,t,e),vr(r,"VER",n.ma),Jf(n,r),r}function _D(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ri(t&&n.Da&&!n.ra?new Kf({jb:!0}):n.ra)).Ka(n.H),e}function Xf(){}function ed(){if(qc&&!(10<=Number(Of)))throw Error("Environmental error: no available transport.")}function Ms(n,e){bi.call(this),this.g=new iR(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!ly(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ly(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sh(this)}function wD(n){wy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bD(){Lg.call(this),this.status=1}function sh(n){this.g=n}(At=ri.prototype).Ka=function(n){this.L=n},At.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ua.g(),this.C=function GI(n){return n.h||(n.h=n.i())}(this.u?this.u:ua),this.g.onreadystatechange=go(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void rR(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Qt.FormData&&n instanceof Qt.FormData,!(0<=ay(lD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dD(this),0<this.B&&((this.K=function uD(n){return qc&&function Nf(){return function $x(n){var e=Pf;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xI(String(th)).split("."),t=xI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",o=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=Mf(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||Mf(0==i[2].length,0==o[2].length)||Mf(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=go(this.qa,this)):this.A=gy(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){rR(this,o)}},At.qa=function(){typeof xg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oi(this,"timeout"),this.abort(8))},At.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Oi(this,"complete"),Oi(this,"abort"),Ry(this))},At.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ry(this,!0)),ri.X.M.call(this)},At.Ha=function(){this.s||(this.F||this.v||this.l?cD(this):this.fb())},At.fb=function(){cD(this)},At.aa=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},At.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},At.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Yf(e)}},At.Ea=function(){return this.m},At.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(At=iR.prototype).ma=8,At.G=1,At.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ug(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=xb(o),Mb(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gD(this,i,e),vr(t=ca(this.F),"RID",n),vr(t,"CVER",22),this.D&&vr(t,"X-HTTP-Session-Id",this.D),Jf(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(Zg(o)))+"&"+e:this.o&&Qf(t,this.o,o)),Ty(this.h,i),this.Ya&&vr(t,"TYPE","init"),this.O?(vr(t,"$req",e),vr(t,"SID","null"),i.Z=!0,Ey(i,t,null)):Ey(i,t,e),this.G=2}}else 3==this.G&&(n?e0(this,n):0==this.i.length||rD(this.h)||e0(this))},At.Ia=function(){if(this.u=null,vD(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=$l(go(this.eb,this),n)}},At.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yo(10),Kg(this),vD(this))},At.cb=function(){null!=this.v&&(this.v=null,Kg(this),t0(this),yo(19))},At.kb=function(n){n?(this.j.info("Successfully pinged google.com"),yo(2)):(this.j.info("Failed to ping google.com"),yo(1))},(At=Xf.prototype).xa=function(){},At.wa=function(){},At.va=function(){},At.ua=function(){},At.Ra=function(){},ed.prototype.g=function(n,e){return new Ms(n,e)},Ni(Ms,bi),Ms.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;yo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=r0(n,null,n.V),Yg(n)},Ms.prototype.close=function(){My(this.g)},Ms.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=fy(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Yg(e)},Ms.prototype.M=function(){this.g.l=null,delete this.j,My(this.g),delete this.g,Ms.X.M.call(this)},Ni(wD,wy),Ni(bD,Lg),Ni(sh,Xf),sh.prototype.xa=function(){Oi(this.g,"a")},sh.prototype.wa=function(n){Oi(this.g,new wD(n))},sh.prototype.va=function(n){Oi(this.g,new bD)},sh.prototype.ua=function(){Oi(this.g,"b")},ed.prototype.createWebChannel=ed.prototype.g,Ms.prototype.send=Ms.prototype.u,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,vy.NO_ERROR=0,vy.TIMEOUT=8,vy.HTTP_ERROR=6,$I.COMPLETE="complete",Zb.EventType=_y,_y.OPEN="a",_y.CLOSE="b",_y.ERROR="c",_y.MESSAGE="d",bi.prototype.listen=bi.prototype.N,ri.prototype.listenOnce=ri.prototype.O,ri.prototype.getLastError=ri.prototype.Oa,ri.prototype.getLastErrorCode=ri.prototype.Ea,ri.prototype.getStatus=ri.prototype.aa,ri.prototype.getResponseJson=ri.prototype.Sa,ri.prototype.getResponseText=ri.prototype.fa,ri.prototype.send=ri.prototype.da,ri.prototype.setWithCredentials=ri.prototype.Ka;var ED=xs.createWebChannelTransport=function(){return new ed},CD=xs.getStatEventTarget=function(){return my()},o0=xs.ErrorCode=vy,ID=xs.EventType=$I,oR=xs.Event=mr,DD=xs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},wO=xs.FetchXmlHttpFactory=Kf,s0=xs.WebChannel=Zb,bO=xs.XhrIo=ri;const sR="@firebase/firestore";class Ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let ec="9.14.0";const td=new aa.Yd("@firebase/firestore");function a0(){return td.logLevel}function ze(n,...e){if(td.logLevel<=aa.in.DEBUG){const t=e.map(l0);td.debug(`Firestore (${ec}): ${n}`,...t)}}function ii(n,...e){if(td.logLevel<=aa.in.ERROR){const t=e.map(l0);td.error(`Firestore (${ec}): ${n}`,...t)}}function ah(n,...e){if(td.logLevel<=aa.in.WARN){const t=e.map(l0);td.warn(`Firestore (${ec}): ${n}`,...t)}}function l0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function It(n="Unexpected state"){const e=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: `+n;throw ii(e),new Error(e)}function zt(n,e){n||It()}function ht(n,e){return n}const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends B.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class u0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ei.UNAUTHENTICATED))}shutdown(){}}class SD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lR{constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ci,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable((0,Re.Z)(function*(){yield m.promise,yield o(r.currentUser)}))},f=m=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ci)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zt("string"==typeof r.accessToken),new u0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zt(null===e||"string"==typeof e),new Ei(e)}}class xD{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(zt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class uR{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new xD(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Py{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cR{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=o=>{null!=o.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?i(o):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zt("string"==typeof t.token),this.A=t.token,new Py(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function RD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class MD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=RD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Xt(n,e){return n<e?-1:n>e?1:0}function ep(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ny(n){return n+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ge(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new Ar(0,0))}static max(){return new jt(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jg{constructor(e,t,r){void 0===t?t=0:t>e.length&&It(),void 0===r?r=e.length-t:r>e.length-t&&It(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tn extends Jg{construct(e,t,r){return new Tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Tn(t)}static emptyPath(){return new Tn([])}}const hR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends Jg{construct(e,t,r){return new Gr(e,t,r)}static isValidIdentifier(e){return hR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ge(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new Ge(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ge(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===c?(l=!l,i++):"."!==c||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new Ge(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(t)}static emptyPath(){return new Gr([])}}class dt{constructor(e){this.path=e}static fromPath(e){return new dt(Tn.fromString(e))}static fromName(e){return new dt(Tn.fromString(e).popFirst(5))}static empty(){return new dt(Tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new Tn(e.slice()))}}class Oy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function c0(n){return n.fields.find(e=>2===e.kind)}function lh(n){return n.fields.filter(e=>2!==e.kind)}Oy.UNKNOWN_ID=-1;class Xg{constructor(e,t){this.fieldPath=e,this.kind=t}}class em{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new em(0,ks.min())}}function d0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(1e9===r?new Ar(t+1,0):new Ar(t,r));return new ks(i,dt.empty(),e)}function PD(n){return new ks(n.readTime,n.key,-1)}class ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ks(jt.min(),dt.empty(),-1)}static max(){return new ks(jt.max(),dt.empty(),-1)}}function h0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=dt.comparator(n.documentKey,e.documentKey),0!==t?t:Xt(n.largestBatchId,e.largestBatchId))}const Fy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ly{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tc(n){return tm.apply(this,arguments)}function tm(){return tm=(0,Re.Z)(function*(n){if(n.code!==De.FAILED_PRECONDITION||n.message!==Fy)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),tm.apply(this,arguments)}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},f=>r(f))}),l=!0,o===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ye((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const m=f;t(e[m]).next(_=>{l[m]=_,++c,c===o&&r(l)},_=>i(_))}})}static doWhile(e,t){return new ye((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class Uy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ci,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new tp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Vy(r.target.error);this.P.reject(new tp(e,i))}}static open(e,t,r,i){try{return new Uy(t,e.transaction(i,r))}catch(o){throw new tp(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ND(t)}}class Ps{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ps.D((0,B.z$)())&&ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),uh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,B.hl)())return!1;if(Ps.N())return!0;const e=(0,B.z$)(),t=Ps.D(e),r=0<t&&t<10,i=Ps.k(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Re.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const c=l.target.error;i("VersionError"===c.name?new Ge(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new Ge(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new tp(e,c))},o.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,Re.Z)(function*(){const l="readonly"===t;let c=0;for(;;){++c;try{o.db=yield o.F(e);const f=Uy.open(o.db,e,l?"readonly":"readwrite",r),m=i(f).next(_=>(f.V(),_)).catch(_=>(f.abort(_),ye.reject(_))).toPromise();return m.catch(()=>{}),yield f.v,m}catch(f){const m=f,_="FirebaseError"!==m.name&&c<3;if(ze("SimpleDb","Transaction failed with error:",m.message,"Retrying:",_),o.close(),!_)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pR{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return uh(this.U.delete())}}class tp extends Ge{constructor(e,t){super(De.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ns(n){return"IndexedDbTransactionError"===n.name}class ND{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uh(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),uh(this.store.add(e))}get(e){return uh(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),uh(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),uh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.H(i,(l,c)=>{o.push(c)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ye((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ye((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,l,c)=>c.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=o=>{const l=Vy(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}H(e,t){const r=[];return new ye((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const f=new pR(c),m=t(c.primaryKey,c.value,f);if(m instanceof ye){const _=m.catch(C=>(f.done(),ye.reject(C)));r.push(_)}f.isDone?i():null===f.G?c.continue():c.continue(f.G)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uh(n){return new ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Vy(r.target.error);t(i)}})}let gR=!1;function Vy(n){const e=Ps.D((0,B.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gR||(gR=!0,setTimeout(()=>{throw r},0)),r}}return n}class f0{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Re.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ns(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield tc(r)}yield t.nt(6e4)}))}}class mR{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Re.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,o=!0;return ye.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(c=>{i-=c,r.add(l)});o=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,o)).next(c=>(ze("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=PD(o);h0(l,r)>0&&(r=l)}),new ks(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class _o{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function OD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function By(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}_o.at=-1;class Fr{constructor(e,t){this.comparator=e,this.root=t||Fi.EMPTY}insert(e,t){return new Fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fi.BLACK,null,null))}remove(e){return new Fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Fi.RED,this.left=i??Fi.EMPTY,this.right=o??Fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Fi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Fi.EMPTY=null,Fi.RED=!0,Fi.BLACK=!1,Fi.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Fi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FD(this.data.getIterator())}getIteratorFrom(e){return new FD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wn(this.comparator);return t.data=e,t}}class FD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function np(n){return n.hasNext()?n.getNext():void 0}class Os{constructor(e){this.fields=e,e.sort(Gr.comparator)}static empty(){return new Os([])}unionWith(e){let t=new Wn(Gr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ep(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const EO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(n){if(zt(!!n),"string"==typeof n){let e=0;const t=EO.exec(n);if(zt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zr(n.seconds),nanos:zr(n.nanos)}}function zr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ch(n){return"string"==typeof n?fi.fromBase64String(n):fi.fromUint8Array(n)}function LD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yR(n){const e=n.mapValue.fields.__previous_value__;return LD(e)?yR(e):e}function rm(n){const e=nc(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class _R{constructor(e,t,r,i,o,l,c,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.useFetchStreams=f}}class rc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}function im(n){return null==n}function om(n){return 0===n&&1/n==-1/0}function UD(n){return"number"==typeof n&&Number.isInteger(n)&&!om(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hy={nullValue:"NULL_VALUE"};function dh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LD(n)?4:BD(n)?9007199254740991:10:It()}function Gl(n,e){if(n===e)return!0;const t=dh(n);if(t!==dh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rm(n).isEqual(rm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=nc(r.timestampValue),l=nc(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ch(n.bytesValue).isEqual(ch(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return zr(r.geoPointValue.latitude)===zr(i.geoPointValue.latitude)&&zr(r.geoPointValue.longitude)===zr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zr(r.integerValue)===zr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=zr(r.doubleValue),l=zr(i.doubleValue);return o===l?om(o)===om(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return ep(n.arrayValue.values||[],e.arrayValue.values||[],Gl);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(OD(o)!==OD(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===l[c]||!Gl(o[c],l[c])))return!1;return!0}(n,e);default:return It()}var i}function sm(n,e){return void 0!==(n.values||[]).find(t=>Gl(t,e))}function id(n,e){if(n===e)return 0;const t=dh(n),r=dh(e);if(t!==r)return Xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=zr(i.integerValue||i.doubleValue),c=zr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return rp(n.timestampValue,e.timestampValue);case 4:return rp(rm(n),rm(e));case 5:return Xt(n.stringValue,e.stringValue);case 6:return function(i,o){const l=ch(i),c=ch(o);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let f=0;f<l.length&&f<c.length;f++){const m=Xt(l[f],c[f]);if(0!==m)return m}return Xt(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Xt(zr(i.latitude),zr(o.latitude));return 0!==l?l:Xt(zr(i.longitude),zr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],c=o.values||[];for(let f=0;f<l.length&&f<c.length;++f){const m=id(l[f],c[f]);if(m)return m}return Xt(l.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===rd.mapValue&&o===rd.mapValue)return 0;if(i===rd.mapValue)return 1;if(o===rd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=o.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let _=0;_<c.length&&_<m.length;++_){const C=Xt(c[_],m[_]);if(0!==C)return C;const x=id(l[c[_]],f[m[_]]);if(0!==x)return x}return Xt(c.length,m.length)}(n.mapValue,e.mapValue);default:throw It()}}function rp(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xt(n,e);const t=nc(n),r=nc(e),i=Xt(t.seconds,r.seconds);return 0!==i?i:Xt(t.nanos,r.nanos)}function hh(n){return jy(n)}function jy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ch(n.bytesValue).toBase64():"referenceValue"in n?dt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=jy(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${jy(r.fields[c])}`;return o+"}"}(n.mapValue):It();var e}function od(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $y(n){return!!n&&"integerValue"in n}function ip(n){return!!n&&"arrayValue"in n}function p0(n){return!!n&&"nullValue"in n}function VD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function g0(n){return!!n&&"mapValue"in n}function op(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=op(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=op(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wR(n){return"nullValue"in n?Hy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?od(rc.empty(),dt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:It()}function bR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?od(rc.empty(),dt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rd:It()}function HD(n,e){const t=id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function sp(n,e){const t=id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!g0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=op(t)}setAll(e){let t=Gr.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=op(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());g0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];g0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){nd(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ki(op(this.value))}}function Gy(n){const e=[];return nd(n.fields,(t,r)=>{const i=new Gr([t]);if(g0(r)){const o=Gy(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Os(e)}class Cn{constructor(e,t,r,i,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Cn(e,0,jt.min(),jt.min(),Ki.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,jt.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,jt.min(),Ki.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,jt.min(),Ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ER{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ht=null}}function zy(n,e=null,t=[],r=[],i=null,o=null,l=null){return new ER(n,e,t,r,i,o,l)}function Ga(n){const e=ht(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+hh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),im(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hh(r)).join(",")),e.ht=t}return e.ht}function am(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!_0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Gl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zD(n.startAt,e.startAt)&&zD(n.endAt,e.endAt)}function Wy(n){return dt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fh(n,e){return n.filters.filter(t=>t instanceof Yi&&t.field.isEqual(e))}function lm(n,e,t){let r=Hy,i=!0;for(const o of fh(n,e)){let l=Hy,c=!0;switch(o.op){case"<":case"<=":l=wR(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=Hy}HD({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];HD({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function jD(n,e,t){let r=rd,i=!0;for(const o of fh(n,e)){let l=rd,c=!0;switch(o.op){case">=":case">":l=bR(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=rd}sp({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];sp({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new $D(e,t,r):"array-contains"===t?new IR(e,r):"in"===t?new DR(e,r):"not-in"===t?new CO(e,r):"array-contains-any"===t?new y0(e,r):new Yi(e,t,r)}static lt(e,t,r){return"in"===t?new GD(e,r):new m0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(id(t,this.value)):null!==t&&dh(this.value)===dh(t)&&this.ft(id(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $D extends Yi{constructor(e,t,r){super(e,t,r),this.key=dt.fromName(r.referenceValue)}matches(e){const t=dt.comparator(e.key,this.key);return this.ft(t)}}class GD extends Yi{constructor(e,t){super(e,"in",t),this.keys=v0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class m0 extends Yi{constructor(e,t){super(e,"not-in",t),this.keys=v0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function v0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>dt.fromName(r.referenceValue))}class IR extends Yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ip(t)&&sm(t.arrayValue,this.value)}}class DR extends Yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sm(this.value.arrayValue,t)}}class CO extends Yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(sm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sm(this.value.arrayValue,t)}}class y0 extends Yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sm(this.value.arrayValue,r))}}class zl{constructor(e,t){this.position=e,this.inclusive=t}}class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function _0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function qy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?dt.comparator(dt.fromName(l.referenceValue),t.key):id(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function zD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gl(n.position[t],e.position[t]))return!1;return!0}class ic{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this._t=null,this.wt=null}}function WD(n,e,t,r,i,o,l,c){return new ic(n,e,t,r,i,o,l,c)}function ap(n){return new ic(n)}function w0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function um(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Zy(n){for(const e of n.filters)if(e.dt())return e.field;return null}function b0(n){return null!==n.collectionGroup}function gh(n){const e=ht(n);if(null===e._t){e._t=[];const t=Zy(e),r=um(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new ph(t)),e._t.push(new ph(Gr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e._t.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ph(Gr.keyField(),o))}}}return e._t}function wo(n){const e=ht(n);if(!e.wt)if("F"===e.limitType)e.wt=zy(e.path,e.collectionGroup,gh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of gh(e))t.push(new ph(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new zl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new zl(e.startAt.position,e.startAt.inclusive):null;e.wt=zy(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ky(n,e,t){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lp(n,e){return am(wo(n),wo(e))&&n.limitType===e.limitType}function E0(n){return`${Ga(wo(n))}|lt:${n.limitType}`}function C0(n){return`Query(target=${function CR(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${hh(r.value)}`;var r}).join(", ")}]`),im(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>hh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>hh(t)).join(",")),`Target(${e})`}(wo(n))}; limitType=${n.limitType})`}function Yy(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):dt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const c=qy(i,o,l);return i.inclusive?c<=0:c<0}(t.startAt,gh(t),r)||t.endAt&&!function(i,o,l){const c=qy(i,o,l);return i.inclusive?c>=0:c>0}(t.endAt,gh(t),r)));var t,r}function I0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bo(n){return(e,t)=>{let r=!1;for(const i of gh(n)){const o=up(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function up(n,e,t){const r=n.field.isKeyField()?dt.comparator(e.key,t.key):function(i,o,l){const c=o.data.field(i),f=l.data.field(i);return null!==c&&null!==f?id(c,f):It()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}function qD(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(e)?"-0":e}}function ZD(n){return{integerValue:""+n}}function TR(n,e){return UD(e)?ZD(e):qD(n,e)}class D0{constructor(){this._=void 0}}function KD(n,e,t){return n instanceof dp?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof oc?QD(n,e):n instanceof sd?JD(n,e):function(r,i){const o=cp(r,i),l=XD(o)+XD(r.yt);return $y(o)&&$y(r.yt)?ZD(l):qD(r.It,l)}(n,e)}function YD(n,e,t){return n instanceof oc?QD(n,e):n instanceof sd?JD(n,e):t}function cp(n,e){return n instanceof hp?$y(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class dp extends D0{}class oc extends D0{constructor(e){super(),this.elements=e}}function QD(n,e){const t=Qy(e);for(const r of n.elements)t.some(i=>Gl(i,r))||t.push(r);return{arrayValue:{values:t}}}class sd extends D0{constructor(e){super(),this.elements=e}}function JD(n,e){let t=Qy(e);for(const r of n.elements)t=t.filter(i=>!Gl(i,r));return{arrayValue:{values:t}}}class hp extends D0{constructor(e,t){super(),this.It=e,this.yt=t}}function XD(n){return zr(n.integerValue||n.doubleValue)}function Qy(n){return ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fp{constructor(e,t){this.field=e,this.transform=t}}class Jy{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function T0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cm{}function tT(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new pp(n.key,fr.none()):new ad(n.key,n.data,fr.none());{const t=n.data,r=Ki.empty();let i=new Wn(Gr.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new ld(n.key,r,new Os(i.toArray()),fr.none())}}function nT(n,e,t){n instanceof ad?function(r,i,o){const l=r.value.clone(),c=SR(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ld?function(r,i,o){if(!T0(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=SR(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(rT(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wl(n,e,t,r){return n instanceof ad?function(i,o,l,c){if(!T0(i.precondition,o))return l;const f=i.value.clone(),m=iT(i.fieldTransforms,c,o);return f.setAll(m),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof ld?function(i,o,l,c){if(!T0(i.precondition,o))return l;const f=iT(i.fieldTransforms,c,o),m=o.data;return m.setAll(rT(i)),m.setAll(f),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(_=>_.field))}(n,e,t,r):(l=t,T0(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function AR(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=cp(r.transform,i||null);null!=o&&(null===t&&(t=Ki.empty()),t.set(r.field,o))}return t||null}function A0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ep(t,r,(i,o)=>function eT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof oc&&r instanceof oc||t instanceof sd&&r instanceof sd?ep(t.elements,r.elements,Gl):t instanceof hp&&r instanceof hp?Gl(t.yt,r.yt):t instanceof dp&&r instanceof dp);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ad extends cm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ld extends cm{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function rT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function SR(n,e,t){const r=new Map;zt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,YD(l,c,t[i]))}return r}function iT(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,KD(o,l,e))}return r}class pp extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oT{constructor(e){this.count=e}}var oi,An;function x0(n){switch(n){default:return It();case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0}}function R0(n){if(void 0===n)return ii("GRPC error has no .code"),De.UNKNOWN;switch(n){case oi.OK:return De.OK;case oi.CANCELLED:return De.CANCELLED;case oi.UNKNOWN:return De.UNKNOWN;case oi.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case oi.INTERNAL:return De.INTERNAL;case oi.UNAVAILABLE:return De.UNAVAILABLE;case oi.UNAUTHENTICATED:return De.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case oi.NOT_FOUND:return De.NOT_FOUND;case oi.ALREADY_EXISTS:return De.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return De.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case oi.ABORTED:return De.ABORTED;case oi.OUT_OF_RANGE:return De.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return De.UNIMPLEMENTED;case oi.DATA_LOSS:return De.DATA_LOSS;default:return It()}}(An=oi||(oi={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";class ud{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nd(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return By(this.inner)}size(){return this.innerSize}}const xR=new Fr(dt.comparator);function Vo(){return xR}const sT=new Fr(dt.comparator);function gp(...n){let e=sT;for(const t of n)e=e.insert(t.key,t);return e}function M0(n){let e=sT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function za(){return dm()}function k0(){return dm()}function dm(){return new ud(n=>n.toString(),(n,e)=>n.isEqual(e))}const RR=new Fr(dt.comparator),IO=new Wn(dt.comparator);function nn(...n){let e=IO;for(const t of n)e=e.add(t);return e}const DO=new Wn(Xt);function P0(){return DO}class Xy{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,e_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Xy(jt.min(),i,P0(),Vo(),nn())}}class e_{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new e_(r,t,nn(),nn(),nn())}}class N0{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class MR{constructor(e,t){this.targetId=e,this.At=t}}class kR{constructor(e,t,r=fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class PR{constructor(){this.Rt=0,this.bt=O0(),this.Pt=fi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=nn(),t=nn(),r=nn();return this.bt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:It()}}),new e_(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=O0()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class t_{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Vo(),this.qt=NR(),this.Kt=new Wn(Xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const o=i.target;if(Wy(o))if(0===r){const l=new dt(o.path);this.jt(t,l,Cn.newNoDocument(l,jt.min()))}else zt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((o,l)=>{const c=this.Xt(l);if(c){if(o.current&&Wy(c.target)){const f=new dt(c.target.path);null!==this.Ut.get(f)||this.ee(l,f)||this.jt(l,f,Cn.newNoDocument(f,e))}o.Dt&&(t.set(l,o.xt()),o.Nt())}});let r=nn();this.qt.forEach((o,l)=>{let c=!0;l.forEachWhile(f=>{const m=this.Xt(f);return!m||2===m.purpose||(c=!1,!1)}),c&&(r=r.add(o))}),this.Ut.forEach((o,l)=>l.setReadTime(e));const i=new Xy(e,t,this.Kt,this.Ut,r);return this.Ut=Vo(),this.qt=NR(),this.Kt=new Wn(Xt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new PR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Wn(Xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new PR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function NR(){return new Fr(dt.comparator)}function O0(){return new Fr(dt.comparator)}const n_={asc:"ASCENDING",desc:"DESCENDING"},aT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class lT{constructor(e,t){this.databaseId=e,this.gt=t}}function r_(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i_(n,e){return n.gt?e.toBase64():e.toUint8Array()}function uT(n,e){return r_(n,e.toTimestamp())}function Li(n){return zt(!!n),jt.fromTimestamp(function(e){const t=nc(e);return new Ar(t.seconds,t.nanos)}(n))}function o_(n,e){return(t=n,new Tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function OR(n){const e=Tn.fromString(n);return zt(l_(e)),e}function s_(n,e){return o_(n.databaseId,e.path)}function ql(n,e){const t=OR(e);if(t.get(1)!==n.databaseId.projectId)throw new Ge(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ge(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new dt(FR(t))}function F0(n,e){return o_(n.databaseId,e)}function hm(n){const e=OR(n);return 4===e.length?Tn.emptyPath():FR(e)}function fm(n){return new Tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FR(n){return zt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function LR(n,e,t){return{name:s_(n,e),fields:t.value.mapValue.fields}}function UR(n,e,t){const r=ql(n,e.name),i=Li(e.updateTime),o=new Ki({mapValue:{fields:e.fields}}),l=Cn.newFoundDocument(r,i,o);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function pm(n,e){let t;if(e instanceof ad)t={update:LR(n,e.key,e.value)};else if(e instanceof pp)t={delete:s_(n,e.key)};else if(e instanceof ld)t={update:LR(n,e.key,e.data),updateMask:zR(e.fieldMask)};else{if(!(e instanceof S0))return It();t={verify:s_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof dp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof sd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hp)return{fieldPath:o.field.canonicalString(),increment:l.yt};throw It()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:uT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:It()),t;var i}function cT(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(Li(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let c=null;"setToServerValue"in l?(zt("REQUEST_TIME"===l.setToServerValue),c=new dp):"appendMissingElements"in l?c=new oc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?c=new sd(l.removeAllFromArray.values||[]):"increment"in l?c=new hp(o,l.increment):It();const f=Gr.fromServerFormat(l.fieldPath);return new fp(f,c)}(n,i)):[];var i;if(e.update){const i=ql(n,e.update.name),o=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Os((e.updateMask.fieldPaths||[]).map(m=>Gr.fromServerFormat(m)));return new ld(i,o,l,t,r)}return new ad(i,o,t,r)}if(e.delete){const i=ql(n,e.delete);return new pp(i,t)}if(e.verify){const i=ql(n,e.verify);return new S0(i,t)}return It()}function L0(n,e){return{documents:[F0(n,e.path)]}}function a_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=F0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=F0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const m=f.map(_=>function(C){if("=="===C.op){if(VD(C.value))return{unaryFilter:{field:Qi(C.field),op:"IS_NAN"}};if(p0(C.value))return{unaryFilter:{field:Qi(C.field),op:"IS_NULL"}}}else if("!="===C.op){if(VD(C.value))return{unaryFilter:{field:Qi(C.field),op:"IS_NOT_NAN"}};if(p0(C.value))return{unaryFilter:{field:Qi(C.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(C.field),op:$R(C.op),value:C.value}}}(_));return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(f){if(0!==f.length)return f.map(m=>{return{field:Qi((_=m).field),direction:U0(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=(m=e.limit,n.gt||im(m)?m:{value:m});var m,c,f;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function jR(n){let e=hm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){zt(1===r);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=dT(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(_=>{return new ph(mp((C=_).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let c=null;t.limit&&(c=function(_){let C;return C="object"==typeof _?_.value:_,im(C)?null:C}(t.limit));let f=null;var _;t.startAt&&(f=new zl((_=t.startAt).values||[],!!_.before));let m=null;return t.endAt&&(m=function(_){return new zl(_.values||[],!_.before)}(t.endAt)),WD(e,i,l,o,c,"F",f,m)}function dT(n){return n?void 0!==n.unaryFilter?[GR(n)]:void 0!==n.fieldFilter?[V0(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dT(e)).reduce((e,t)=>e.concat(t)):It():[]}function U0(n){return n_[n]}function $R(n){return aT[n]}function Qi(n){return{fieldPath:n.canonicalString()}}function mp(n){return Gr.fromServerFormat(n.fieldPath)}function V0(n){return Yi.create(mp(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(n.fieldFilter.op),n.fieldFilter.value)}function GR(n){switch(n.unaryFilter.op){case"IS_NAN":const e=mp(n.unaryFilter.field);return Yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=mp(n.unaryFilter.field);return Yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mp(n.unaryFilter.field);return Yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mp(n.unaryFilter.field);return Yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return It()}}function zR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function l_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Eo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fT(e)),e=hT(n.get(t),e);return fT(e)}function hT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function fT(n){return n+"\x01\x01"}function qa(n){const e=n.length;if(zt(e>=2),2===e)return zt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Tn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&It(),n.charAt(l+1)){case"\x01":const c=n.substring(o,l);let f;0===i.length?f=c:(i+=c,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:It()}o=l+2}return new Tn(r)}const B0=["userId","batchId"];function u_(n,e){return[n,Eo(e)]}function H0(n,e,t){return[n,Eo(e),t]}const WR={},j0=["prefixPath","collectionGroup","readTime","documentId"],cd=["prefixPath","collectionGroup","documentId"],pT=["collectionGroup","readTime","prefixPath","documentId"],$0=["canonicalId","targetId"],sc=["targetId","path"],qR=["path","targetId"],TO=["collectionId","parent"],ZR=["indexId","uid"],KR=["uid","sequenceNumber"],YR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QR=["indexId","uid","orderedDocumentKey"],gT=["userId","collectionPath","documentId"],AO=["userId","collectionPath","largestBatchId"],mT=["userId","collectionGroup","largestBatchId"],vT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yT=[...vT,"documentOverlays"],JR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],c_=JR,_T=[...c_,"indexConfiguration","indexState","indexEntries"];class d_ extends Ly{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ii(n,e){const t=ht(n);return Ps.M(t.ie,e)}class h_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&nT(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=k0();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const f=tT(l,c);null!==f&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&ep(this.mutations,e.mutations,(t,r)=>A0(t,r))&&ep(this.baseMutations,e.baseMutations,(t,r)=>A0(t,r))}}class f_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){zt(e.mutations.length===r.length);let i=RR;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new f_(e,t,r,i)}}class vp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Za{constructor(e,t,r,i,o=jt.min(),l=jt.min(),c=fi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class G0{constructor(e){this.re=e}}function z0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:s_(i=n.re,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:r_(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:mh(e.version)};else{if(!e.isUnknownDocument())return It();r.unknownDocument={path:t.path.toArray(),version:mh(e.version)}}var i,o;return r}function gm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vh(n){const e=new Ar(n.seconds,n.nanoseconds);return jt.fromTimestamp(e)}function yp(n,e){const t=(e.baseMutations||[]).map(o=>cT(n.re,o));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(l.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>cT(n.re,o)),i=Ar.fromMillis(e.localWriteTimeMs);return new h_(e.batchId,i,t,r)}function p_(n){const e=vh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vh(n.lastLimboFreeSnapshotVersion):jt.min();let r;var i;return void 0!==n.query.documents?(zt(1===(i=n.query).documents.length),r=wo(ap(hm(i.documents[0])))):r=wo(jR(n.query)),new Za(r,n.targetId,0,n.lastListenSequenceNumber,e,t,fi.fromBase64String(n.resumeToken))}function W0(n,e){const t=mh(e.snapshotVersion),r=mh(e.lastLimboFreeSnapshotVersion);let i;i=Wy(e.target)?L0(n.re,e.target):a_(n.re,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ga(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function q0(n){const e=jR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ky(e,e.limit,"L"):e}function Z0(n,e){return new vp(e.largestBatchId,cT(n.re,e.overlayMutation))}function wT(n,e){const t=e.path.lastSegment();return[n,Eo(e.path.popLast()),t]}function eM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:mh(r.readTime),documentKey:Eo(r.documentKey.path),largestBatchId:r.largestBatchId}}class SO{getBundleMetadata(e,t){return tM(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:vh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return tM(e).put({bundleId:(r=t).id,createTime:mh(Li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return nM(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:q0(i.bundledQuery),readTime:vh(i.readTime)};var i})}saveNamedQuery(e,t){return nM(e).put({name:(r=t).name,readTime:mh(Li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function tM(n){return Ii(n,"bundles")}function nM(n){return Ii(n,"namedQueries")}class K0{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new K0(e,t.uid||"")}getOverlay(e,t){return mm(e).get(wT(this.userId,t)).next(r=>r?Z0(this.It,r):null)}getOverlays(e,t){const r=za();return ye.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const c=new vp(t,l);i.push(this.ue(e,c))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Eo(l.getCollectionPath())));const o=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(mm(e).Y("collectionPathOverlayIndex",c))}),ye.waitFor(o)}getOverlaysForCollection(e,t,r){const i=za(),o=Eo(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return mm(e).W("collectionPathOverlayIndex",l).next(c=>{for(const f of c){const m=Z0(this.It,f);i.set(m.getKey(),m)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=za();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mm(e).Z({index:"collectionGroupOverlayIndex",range:c},(f,m,_)=>{const C=Z0(this.It,m);o.size()<i||C.largestBatchId===l?(o.set(C.getKey(),C),l=C.largestBatchId):_.done()}).next(()=>o)}ue(e,t){return mm(e).put(function(r,i,o){const[l,c,f]=wT(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:pm(r.re,o.mutation)}}(this.It,this.userId,t))}}function mm(n){return Ii(n,"documentOverlays")}class Zl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(zr(e.integerValue));else if("doubleValue"in e){const r=zr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),om(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ch(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?BD(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):It()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),dt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function rM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function bT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=rM(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Zl.Te=new Zl;class ET{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=bT(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=bT(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yh{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class CT{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class _h{constructor(){this.Be=new ET,this.Le=new yh(this.Be),this.Ue=new CT(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class ac{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ac(this.indexId,this.documentKey,this.arrayValue,r)}}function wh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=g_(n.arrayValue,e.arrayValue),0!==t?t:(t=g_(n.directionalValue,e.directionalValue),0!==t?t:dt.comparator(n.documentKey,e.documentKey)))}function g_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Y0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=c0(e);if(void 0!==t&&!this.ze(t))return!1;const r=lh(e);let i=0,o=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[o++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(o>=this.Ge.length||!this.Je(this.Ge[o++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class m_{constructor(){this.Ye=new IT}addToCollectionParentIndex(e,t){return this.Ye.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(ks.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class IT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wn(Tn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wn(Tn.comparator)).toArray()}}const Q0=new Uint8Array(0);class xO{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new IT,this.Ze=new ud(r=>Ga(r),(r,i)=>am(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const o={collectionId:r,parent:Eo(i)};return iM(e).put(o)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ny(t),""],!1,!0);return iM(e).W(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(qa(l.parent))}return r})}addFieldIndex(e,t){const r=v_(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var l;delete i.indexId;const o=r.add(i);if(t.indexState){const l=vm(e);return o.next(c=>{l.put(eM(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=v_(e),i=vm(e),o=_p(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=_p(e);let i=!0;const o=new Map;return ye.forEach(this.tn(t),l=>this.en(e,l).next(c=>{i&&(i=!!c),o.set(l,c)})).next(()=>{if(i){let l=nn();const c=[];return ye.forEach(o,(f,m)=>{var _;ze("IndexedDbIndexManager",`Using index ${_=f,`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(ke=>`${ke.fieldPath}:${ke.kind}`).join(",")}`} to execute ${Ga(t)}`);const C=function(ke,Ne){const ut=c0(Ne);if(void 0===ut)return null;for(const at of fh(ke,ut.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(m,f),x=function(ke,Ne){const ut=new Map;for(const at of lh(Ne))for(const Gt of fh(ke,at.fieldPath))switch(Gt.op){case"==":case"in":ut.set(at.fieldPath.canonicalString(),Gt.value);break;case"not-in":case"!=":return ut.set(at.fieldPath.canonicalString(),Gt.value),Array.from(ut.values())}return null}(m,f),M=function(ke,Ne){const ut=[];let at=!0;for(const Gt of lh(Ne)){const Dt=0===Gt.kind?lm(ke,Gt.fieldPath,ke.startAt):jD(ke,Gt.fieldPath,ke.startAt);ut.push(Dt.value),at&&(at=Dt.inclusive)}return new zl(ut,at)}(m,f),O=function(ke,Ne){const ut=[];let at=!0;for(const Gt of lh(Ne)){const Dt=0===Gt.kind?jD(ke,Gt.fieldPath,ke.endAt):lm(ke,Gt.fieldPath,ke.endAt);ut.push(Dt.value),at&&(at=Dt.inclusive)}return new zl(ut,at)}(m,f),W=this.nn(f,m,M),K=this.nn(f,m,O),te=this.sn(f,m,x),_e=this.rn(f.indexId,C,W,M.inclusive,K,O.inclusive,te);return ye.forEach(_e,ke=>r.J(ke,t.limit).next(Ne=>{Ne.forEach(ut=>{const at=dt.fromSegments(ut.documentKey);l.has(at)||(l=l.add(at),c.push(at))})}))}).next(()=>c)}return ye.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,o,l,c){const f=(null!=t?t.length:1)*Math.max(r.length,o.length),m=f/(null!=t?t.length:1),_=[];for(let C=0;C<f;++C){const x=t?this.on(t[C/m]):Q0,M=this.un(e,x,r[C%m],i),O=this.cn(e,x,o[C%m],l),W=c.map(K=>this.un(e,x,K,!0));_.push(...this.createRange(M,O,W))}return _}un(e,t,r,i){const o=new ac(e,dt.empty(),t,r);return i?o:o.Ke()}cn(e,t,r,i){const o=new ac(e,dt.empty(),t,r);return i?o.Ke():o}en(e,t){const r=new Y0(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const c of o)r.We(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;return ye.forEach(this.tn(t),i=>this.en(e,i).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new Wn(Gr.comparator),f=!1;for(const m of l.filters){const _=m;_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:c=c.add(_.field))}for(const m of l.orderBy)m.field.isKeyField()||(c=c.add(m.field));return c.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new _h;for(const i of lh(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const l=r.qe(i.kind);Zl.Te.ce(o,l)}return r.$e()}on(e){const t=new _h;return Zl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new _h;return Zl.Te.ce(od(this.databaseId,t),r.qe(function(i){const o=lh(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new _h);let o=0;for(const l of lh(e)){const c=r[o++];for(const f of i)if(this.ln(t,l.fieldPath)&&ip(c))i=this.fn(i,l,c);else{const m=f.qe(l.kind);Zl.Te.ce(c,m)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const c of i){const f=new _h;f.seed(c.$e()),Zl.Te.ce(l,f.qe(t.kind)),o.push(f)}return o}ln(e,t){return!!e.filters.find(r=>r instanceof Yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=v_(e),i=vm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(o=>{const l=[];return ye.forEach(o,c=>i.get([c.indexId,this.uid]).next(f=>{l.push(function(m,_){const C=_?new em(_.sequenceNumber,new ks(vh(_.readTime),new dt(qa(_.documentKey)),_.largestBatchId)):em.empty(),x=m.fields.map(([M,O])=>new Xg(Gr.fromServerFormat(M),O));return new Oy(m.indexId,m.collectionGroup,x,C)}(c,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=v_(e),o=vm(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>ye.forEach(c,f=>o.put(eM(f.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?ye.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),ye.forEach(c,f=>this.wn(e,i,f).next(m=>{const _=this.mn(o,f);return m.isEqual(_)?ye.resolve():this.gn(e,o,f,m,_)}))))})}yn(e,t,r,i){return _p(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return _p(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=_p(e);let o=new Wn(wh);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,c)=>{o=o.add(new ac(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>o)}mn(e,t){let r=new Wn(wh);const i=this.an(t,e);if(null==i)return r;const o=c0(t);if(null!=o){const l=e.data.field(o.fieldPath);if(ip(l))for(const c of l.arrayValue.values||[])r=r.add(new ac(t.indexId,e.key,this.on(c),i))}else r=r.add(new ac(t.indexId,e.key,Q0,i));return r}gn(e,t,r,i,o){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(c,f,m,_,C){const x=c.getIterator(),M=f.getIterator();let O=np(x),W=np(M);for(;O||W;){let K=!1,te=!1;if(O&&W){const _e=m(O,W);_e<0?te=!0:_e>0&&(K=!0)}else null!=O?te=!0:K=!0;K?(_(W),W=np(M)):te?(C(O),O=np(x)):(O=np(x),W=np(M))}}(i,o,wh,c=>{l.push(this.yn(e,t,r,c))},c=>{l.push(this.pn(e,t,r,c))}),ye.waitFor(l)}_n(e){let t=1;return vm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>wh(l,c)).filter((l,c,f)=>!c||0!==wh(l,f[c-1]));const i=[];i.push(e);for(const l of r){const c=wh(l,e),f=wh(l,t);if(0===c)i[0]=e.Ke();else if(c>0&&f<0)i.push(l),i.push(l.Ke());else if(f>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2)o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Q0,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Q0,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(DT)}getMinOffset(e,t){return ye.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||It())).next(DT)}}function iM(n){return Ii(n,"collectionParents")}function _p(n){return Ii(n,"indexEntries")}function v_(n){return Ii(n,"indexConfiguration")}function vm(n){return Ii(n,"indexState")}function DT(n){zt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;h0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ks(e.readTime,e.documentKey,t)}const TT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bo(e,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function J0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const f=r.Z({range:l},(_,C,x)=>(c++,x.delete()));o.push(f.next(()=>{zt(1===c)}));const m=[];for(const _ of t.mutations){const C=H0(e,_.key.path,t.batchId);o.push(i.delete(C)),m.push(_.key)}return ye.waitFor(o).next(()=>m)}function ym(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw It();e=n.noDocument}return JSON.stringify(e).length}Bo.DEFAULT_COLLECTION_PERCENTILE=10,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bo.DEFAULT=new Bo(41943040,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bo.DISABLED=new Bo(-1,0,0);class y_{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){zt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new y_(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lc(e).Z({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=dd(e),l=lc(e);return l.add({}).next(c=>{zt("number"==typeof c);const f=new h_(c,t,r,i),m=function(x,M,O){const W=O.baseMutations.map(te=>pm(x.re,te)),K=O.mutations.map(te=>pm(x.re,te));return{userId:M,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:W,mutations:K}}(this.It,this.userId,f),_=[];let C=new Wn((x,M)=>Xt(x.canonicalString(),M.canonicalString()));for(const x of i){const M=H0(this.userId,x.key.path,c);C=C.add(x.key.path.popLast()),_.push(l.put(m)),_.push(o.put(M,WR))}return C.forEach(x=>{_.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[c]=f.keys()}),ye.waitFor(_).next(()=>f)})}lookupMutationBatch(e,t){return lc(e).get(t).next(r=>r?(zt(r.userId===this.userId),yp(this.It,r)):null)}Tn(e,t){return this.In[t]?ye.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return lc(e).Z({index:"userMutationsIndex",range:i},(l,c,f)=>{c.userId===this.userId&&(zt(c.batchId>=r),o=yp(this.It,c)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lc(e).W("userMutationsIndex",t).next(r=>r.map(i=>yp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=u_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return dd(e).Z({range:i},(l,c,f)=>{const[m,_,C]=l,x=qa(_);if(m===this.userId&&t.path.isEqual(x))return lc(e).get(C).next(M=>{if(!M)throw It();zt(M.userId===this.userId),o.push(yp(this.It,M))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Xt);const i=[];return t.forEach(o=>{const l=u_(this.userId,o.path),c=IDBKeyRange.lowerBound(l),f=dd(e).Z({range:c},(m,_,C)=>{const[x,M,O]=m,W=qa(M);x===this.userId&&o.path.isEqual(W)?r=r.add(O):C.done()});i.push(f)}),ye.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=u_(this.userId,r),l=IDBKeyRange.lowerBound(o);let c=new Wn(Xt);return dd(e).Z({range:l},(f,m,_)=>{const[C,x,M]=f,O=qa(x);C===this.userId&&r.isPrefixOf(O)?O.length===i&&(c=c.add(M)):_.done()}).next(()=>this.En(e,c))}En(e,t){const r=[],i=[];return t.forEach(o=>{i.push(lc(e).get(o).next(l=>{if(null===l)throw It();zt(l.userId===this.userId),r.push(yp(this.It,l))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return J0(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return dd(e).Z({range:r},(o,l,c)=>{if(o[0]===this.userId){const f=qa(o[1]);i.push(f)}else c.done()}).next(()=>{zt(0===i.length)})})}containsKey(e,t){return AT(e,this.userId,t)}Rn(e){return oM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function AT(n,e,t){const r=u_(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return dd(n).Z({range:o,X:!0},(c,f,m)=>{const[_,C,x]=c;_===e&&C===i&&(l=!0),m.done()}).next(()=>l)}function lc(n){return Ii(n,"mutations")}function dd(n){return Ii(n,"documentMutations")}function oM(n){return Ii(n,"mutationQueues")}class hd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hd(0)}static vn(){return new hd(-1)}}class X0{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new hd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>jt.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wp(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(zt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return wp(e).Z((l,c)=>{const f=p_(c);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,o.push(this.removeTargetData(e,f)))}).next(()=>ye.waitFor(o)).next(()=>i)}forEachTarget(e,t){return wp(e).Z((r,i)=>{const o=p_(i);t(o)})}Vn(e){return ST(e).get("targetGlobalKey").next(t=>(zt(null!==t),t))}Sn(e,t){return ST(e).put("targetGlobalKey",t)}Dn(e,t){return wp(e).put(W0(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ga(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return wp(e).Z({range:i,index:"queryTargetsIndex"},(l,c,f)=>{const m=p_(c);am(t,m.target)&&(o=m,f.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=bh(e);return t.forEach(l=>{const c=Eo(l.path);i.push(o.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=bh(e);return ye.forEach(t,o=>{const l=Eo(o.path);return ye.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=bh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bh(e);let o=nn();return i.Z({range:r,X:!0},(l,c,f)=>{const m=qa(l[1]),_=new dt(m);o=o.add(_)}).next(()=>o)}containsKey(e,t){const r=Eo(t.path),i=IDBKeyRange.bound([r],[Ny(r)],!1,!0);let o=0;return bh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,c],f,m)=>{0!==l&&(o++,m.done())}).next(()=>o>0)}se(e,t){return wp(e).get(t).next(r=>r?p_(r):null)}}function wp(n){return Ii(n,"targets")}function ST(n){return Ii(n,"targetGlobal")}function bh(n){return Ii(n,"targetDocuments")}function sM([n,e],[t,r]){const i=Xt(n,t);return 0===i?Xt(e,r):i}class aM{constructor(e){this.xn=e,this.buffer=new Wn(sM),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Re.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ns(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield tc(r)}yield t.Fn(3e5)}))}}class uM{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(_o.at);const r=new aM(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(TT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TT):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,o,l,c,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),i=this.params.maximumSequenceNumbersToCollect):i=C,l=Date.now(),this.nthSequenceNumber(e,i))).next(C=>(r=C,c=Date.now(),this.removeTargets(e,r,t))).next(C=>(o=C,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(C=>(m=Date.now(),a0()<=aa.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-_}ms\n\tDetermined least recently used ${i} in `+(c-l)+`ms\n\tRemoved ${o} targets in `+(f-c)+`ms\n\tRemoved ${C} documents in `+(m-f)+`ms\nTotal Duration: ${m-_}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:C})))}}class RO{constructor(e,t){this.db=e,this.garbageCollector=new uM(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return eE(e,r)}removeReference(e,t,r){return eE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return eE(e,t)}Gn(e,t){return function(r,i){let o=!1;return oM(r).tt(l=>AT(r,l,i).next(c=>(c&&(o=!0),ye.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Kn(e,(l,c)=>{if(c<=t){const f=this.Gn(e,l).next(m=>{if(!m)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,jt.min()),bh(e).delete([0,Eo(l.path)])))});i.push(f)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return eE(e,t)}Kn(e,t){const r=bh(e);let i,o=_o.at;return r.Z({index:"documentTargetsIndex"},([l,c],{path:f,sequenceNumber:m})=>{0===l?(o!==_o.at&&t(new dt(qa(i)),o),o=m,i=f):o=_o.at}).next(()=>{o!==_o.at&&t(new dt(qa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function eE(n,e){return bh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Eo(e.path),sequenceNumber:r}));var r}class cM{constructor(){this.changes=new ud(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MO{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bp(e).put(r)}removeEntry(e,t,r){return bp(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],gm(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return bp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(__(t))},(i,o)=>{r=this.jn(t,o)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return bp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(__(t))},(i,o)=>{r={document:this.jn(t,o),size:ym(o)}}).next(()=>r)}getEntries(e,t){let r=Vo();return this.zn(e,t,(i,o)=>{const l=this.jn(i,o);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Vo(),i=new Fr(dt.comparator);return this.zn(e,t,(o,l)=>{const c=this.jn(o,l);r=r.insert(o,c),i=i.insert(o,ym(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ye.resolve();let i=new Wn(gM);t.forEach(f=>i=i.add(f));const o=IDBKeyRange.bound(__(i.first()),__(i.last())),l=i.getIterator();let c=l.getNext();return bp(e).Z({index:"documentKeyIndex",range:o},(f,m,_)=>{const C=dt.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;c&&gM(c,C)<0;)r(c,null),c=l.getNext();c&&c.isEqual(C)&&(r(c,m),c=l.hasNext()?l.getNext():null),c?_.j(__(c)):_.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),gm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bp(e).W(IDBKeyRange.bound(i,o,!0)).next(l=>{let c=Vo();for(const f of l){const m=this.jn(dt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);c=c.insert(m.key,m)}return c})}getAllFromCollectionGroup(e,t,r,i){let o=Vo();const l=pM(t,r),c=pM(t,ks.max());return bp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,c,!0)},(f,m,_)=>{const C=this.jn(dt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(C.key,C),o.size===i&&_.done()}).next(()=>o)}newChangeBuffer(e){return new hM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fM(e).get("remoteDocumentGlobalKey").next(t=>(zt(!!t),t))}Qn(e,t){return fM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function XR(n,e){let t;if(e.document)t=UR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=dt.fromSegments(e.noDocument.path),i=vh(e.noDocument.readTime);t=Cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return It();{const r=dt.fromSegments(e.unknownDocument.path),i=vh(e.unknownDocument.version);t=Cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ar(r[0],r[1]);return jt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(jt.min()))return r}return Cn.newInvalidDocument(e)}}function dM(n){return new MO(n)}class hM extends cM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ud(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Wn((o,l)=>Xt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const c=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,c.readTime)),l.isValidDocument()){const f=z0(this.Yn.It,l);i=i.add(o.path.popLast()),r+=ym(f)-c.size,t.push(this.Yn.addEntry(e,o,f))}else if(r-=c.size,this.trackRemovals){const f=z0(this.Yn.It,l.convertToNoDocument(jt.min()));t.push(this.Yn.addEntry(e,o,f))}}),i.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((o,l)=>{this.Xn.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function fM(n){return Ii(n,"remoteDocumentGlobal")}function bp(n){return Ii(n,"remoteDocumentsV14")}function __(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pM(n,e){const t=e.documentKey.path.toArray();return[n,gm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gM(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Xt(t[o],r[o]),i)return i;return i=Xt(t.length,r.length),i||(i=Xt(t[t.length-2],r[r.length-2]),i||Xt(t[t.length-1],r[r.length-1]))}class kO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class s{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Wl(r.mutation,i,Os.empty(),Ar.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=za();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=gp();return o.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=za();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Vo();const l=dm(),c=dm();return t.forEach((f,m)=>{const _=r.get(m.key);i.has(m.key)&&(void 0===_||_.mutation instanceof ld)?o=o.insert(m.key,m):void 0!==_&&(l.set(m.key,_.mutation.getFieldMask()),Wl(_.mutation,m,_.mutation.getFieldMask(),Ar.now()))}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,_)=>l.set(m,_)),t.forEach((m,_)=>{var C;return c.set(m,new kO(_,null!==(C=l.get(m))&&void 0!==C?C:null))}),c))}recalculateAndSaveOverlays(e,t){const r=dm();let i=new Fr((l,c)=>l-c),o=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(f=>{const m=t.get(f);if(null===m)return;let _=r.get(f)||Os.empty();_=c.applyToLocalView(m,_),r.set(f,_);const C=(i.get(c.batchId)||nn()).add(f);i=i.insert(c.batchId,C)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),m=f.key,_=f.value,C=k0();_.forEach(x=>{if(!o.has(x)){const M=tT(t.get(x),r.get(x));null!==M&&C.set(x,M),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,C))}return ye.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return dt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):b0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ye.resolve(za());let c=-1,f=o;return l.next(m=>ye.forEach(m,(_,C)=>(c<C.largestBatchId&&(c=C.largestBatchId),o.get(_)?ye.resolve():this.getBaseDocument(e,_,C).next(x=>{f=f.insert(_,x)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,nn())).next(_=>({batchId:c,changes:M0(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dt(t)).next(r=>{let i=gp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=gp();return this.indexManager.getCollectionParents(e,i).next(l=>ye.forEach(l,c=>{const f=(m=t,_=c.child(i),new ic(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(m=>{m.forEach((_,C)=>{o=o.insert(_,C)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((c,f)=>{const m=f.getKey();null===i.get(m)&&(i=i.insert(m,Cn.newInvalidDocument(m)))});let l=gp();return i.forEach((c,f)=>{const m=o.get(c);void 0!==m&&Wl(m.mutation,f,Os.empty(),Ar.now()),Yy(t,f)&&(l=l.insert(c,f))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ye.resolve(Cn.newInvalidDocument(t))}}class a{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ye.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Li(r.createTime)}),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:q0(r.bundledQuery),readTime:Li(r.readTime)}),ye.resolve();var r}}class u{constructor(){this.overlays=new Fr(dt.comparator),this.es=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=za();return ye.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ue(e,t,o)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=za(),o=t.length+1,l=new dt(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Fr((m,_)=>m-_);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=o.get(m.largestBatchId);null===_&&(_=za(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const c=za(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,_)=>c.set(m,_)),!(c.size()>=i)););return ye.resolve(c)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new vp(t,r));let o=this.es.get(t);void 0===o&&(o=nn(),this.es.set(t,o)),this.es.set(t,o.add(r.key))}}class d{constructor(){this.ns=new Wn(p.ss),this.rs=new Wn(p.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new p(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new p(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new dt(new Tn([])),r=new p(t,e),i=new p(t,e+1),o=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),o.push(l.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new dt(new Tn([])),r=new p(t,e),i=new p(t,e+1);let o=nn();return this.rs.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new p(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class p{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return dt.comparator(e.key,t.key)||Xt(e._s,t._s)}static os(e,t){return Xt(e._s,t._s)||dt.comparator(e.key,t.key)}}class v{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Wn(p.ss)}checkEmpty(e){return ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.ws;this.ws++;const l=new h_(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.gs=this.gs.add(new p(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ye.resolve(l)}lookupMutationBatch(e,t){return ye.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),o=i<0?0:i;return ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new p(t,0),i=new p(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([r,i],l=>{const c=this.ys(l._s);o.push(c)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Xt);return t.forEach(i=>{const o=new p(i,0),l=new p(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,l],c=>{r=r.add(c._s)})}),ye.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;dt.isDocumentKey(o)||(o=o.child(""));const l=new p(new dt(o),0);let c=new Wn(Xt);return this.gs.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(c=c.add(f._s)),!0)},l),ye.resolve(this.Is(c))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){zt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ye.forEach(t.mutations,i=>{const o=new p(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new p(t,0),i=this.gs.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class b{constructor(e){this.Es=e,this.docs=new Fr(dt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Vo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Cn.newInvalidDocument(i))}),ye.resolve(r)}getAllFromCollection(e,t,r){let i=Vo();const o=new dt(t.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!t.isPrefixOf(c.path))break;c.path.length>t.length+1||h0(PD(f),r)<=0||(i=i.insert(f.key,f.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,t,r,i){It()}As(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new I(this)}getSize(e){return ye.resolve(this.size)}}class I extends cM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class A{constructor(e){this.persistence=e,this.Rs=new ud(t=>Ga(t),am),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new d,this.targetCount=0,this.vs=hd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ye.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new hd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Dn(t),ye.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Rs.forEach((l,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.Rs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ye.waitFor(o).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ye.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.Ps.containsKey(t))}}class k{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new _o(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new A(this),this.indexManager=new m_,this.remoteDocumentCache=new b(r=>this.referenceDelegate.xs(r)),this.It=new G0(t),this.Ns=new a(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new v(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new L(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(o=>this.referenceDelegate.Os(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ms(e,t){return ye.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class L extends Ly{constructor(e){super(),this.currentSequenceNumber=e}}class ${constructor(e){this.persistence=e,this.Fs=new d,this.$s=null}static Bs(e){return new $(e)}get Ls(){if(this.$s)return this.$s;throw It()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ls.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Ls,r=>{const i=dt.fromPath(r);return this.Us(e,i).next(o=>{o||t.removeEntry(i,jt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ye.or([()=>ye.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class ee{constructor(e){this.It=e}$(e,t,r,i){const o=new Uy("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",B0,{unique:!0}),c.createObjectStore("documentMutations"),ue(e),function(c){c.createObjectStore("remoteDocuments")}(e));let l=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ue(e)),l=l.next(()=>function(c){const f=c.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(c,f){return f.store("mutations").W().next(m=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",B0,{unique:!0});const _=f.store("mutations"),C=m.map(x=>_.put(x));return ye.waitFor(C)})}(e,o))),l=l.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(o))),r<6&&i>=6&&(l=l.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(o))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(o))),r<11&&i>=11&&(l=l.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(c){const f=c.createObjectStore("documentOverlays",{keyPath:gT});f.createIndex("collectionPathOverlayIndex",AO,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",mT,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(c){const f=c.createObjectStore("remoteDocumentsV14",{keyPath:j0});f.createIndex("documentKeyIndex",cd),f.createIndex("collectionGroupIndex",pT)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,o))),r<15&&i>=15&&(l=l.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:ZR}).createIndex("sequenceNumberIndex",KR,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:YR}).createIndex("documentKeyIndex",QR,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=ym(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ye.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(c=>ye.forEach(c,f=>{zt(f.userId===o.userId);const m=yp(this.It,f);return J0(e,o.userId,m).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Z((l,c)=>{const f=new Tn(l),m=[0,Eo(f)];o.push(t.get(m).next(_=>_?ye.resolve():t.put({targetId:0,path:Eo(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ye.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:TO});const r=t.store("collectionParents"),i=new IT,o=l=>{if(i.add(l)){const c=l.lastSegment(),f=l.popLast();return r.put({collectionId:c,parent:Eo(f)})}};return t.store("remoteDocuments").Z({X:!0},(l,c)=>{const f=new Tn(l);return o(f.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,c,f],m)=>{const _=qa(c);return o(_.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const o=p_(i),l=W0(this.It,o);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((o,l)=>{const c=t.store("remoteDocumentsV14"),f=(m=l,m.document?new dt(Tn.fromString(m.document.name).popFirst(5)):m.noDocument?dt.fromSegments(m.noDocument.path):m.unknownDocument?dt.fromSegments(m.unknownDocument.path):It()).path.toArray();var m;const _={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(_))}).next(()=>ye.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=dM(this.It),o=new k($.Bs,this.It.re);return r.W().next(l=>{const c=new Map;return l.forEach(f=>{var m;let _=null!==(m=c.get(f.userId))&&void 0!==m?m:nn();yp(this.It,f).keys().forEach(C=>_=_.add(C)),c.set(f.userId,_)}),ye.forEach(c,(f,m)=>{const _=new Ei(m),C=K0.oe(this.It,_),x=o.getIndexManager(_),M=y_.oe(_,this.It,x,o.referenceDelegate);return new s(i,M,C,x).recalculateAndSaveOverlaysForDocumentKeys(new d_(t,_o.at),f).next()})})}}function ue(n){n.createObjectStore("targetDocuments",{keyPath:sc}).createIndex("documentTargetsIndex",qR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$0,{unique:!0}),n.createObjectStore("targetGlobal")}const Pe="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Je{constructor(e,t,r,i,o,l,c,f,m,_,C=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=o,this.window=l,this.document=c,this.Js=m,this.Ys=_,this.Xs=C,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!Je.C())throw new Ge(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RO(this,i),this.ii=t+"main",this.It=new G0(f),this.ri=new Ps(this.ii,this.Xs,new ee(this.It)),this.Cs=new X0(this.referenceDelegate,this.It),this.remoteDocumentCache=dM(this.It),this.Ns=new SO,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===_&&ii("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(De.FAILED_PRECONDITION,Pe);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new _o(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Re.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Re.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Re.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_t(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ns(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return st(e).get("owner").next(t=>ye.resolve(this.mi(t)))}gi(e){return _t(e).delete(this.clientId)}yi(){var e=this;return(0,Re.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ii(r,"clientMetadata");return i.W().next(o=>{const l=e.Ii(o,18e5),c=o.filter(f=>-1===l.indexOf(f));return ye.forEach(c,f=>i.delete(f.clientId)).next(()=>c)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ye.resolve(!0):st(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ge(De.FAILED_PRECONDITION,Pe);return!1}}return!(!this.networkEnabled||!this.inForeground)||_t(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Re.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new d_(t,_o.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>_t(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return y_.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xO(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return K0.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(l=this.Xs)?_T:14===l?c_:13===l?JR:12===l?yT:11===l?vT:void It();var l;let c;return this.ri.runTransaction(e,i,o,f=>(c=new d_(f,this.Ss?this.Ss.next():_o.at),"readwrite-primary"===t?this.fi(c).next(m=>!!m||this.di(c)).next(m=>{if(!m)throw ii(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ge(De.FAILED_PRECONDITION,Fy);return r(c)}).next(m=>this.wi(c).next(()=>m)):this.Vi(c).next(()=>r(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}Vi(e){return st(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(De.FAILED_PRECONDITION,Pe)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return st(e).put("owner",t)}static C(){return Ps.C()}_i(e){const t=st(e);return t.get("owner").next(r=>this.mi(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ye.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ii(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,B.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ii("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ii("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function st(n){return Ii(n,"owner")}function _t(n){return Ii(n,"clientMetadata")}function Pt(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $e{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=nn(),i=nn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new $e(e,t.fromCache,r,i)}}class $t{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(o=>o||this.Oi(e,t,i,r)).next(o=>o||this.Mi(e,t))}ki(e,t){if(w0(t))return ye.resolve(null);let r=wo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ky(t,null,"F"),r=wo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=nn(...o);return this.Ni.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.Fi(t,c);return this.$i(t,m,l,f.readTime)?this.ki(e,Ky(t,null,"F")):this.Bi(e,m,t,f)}))})))}Oi(e,t,r,i){return w0(t)||i.isEqual(jt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(o=>{const l=this.Fi(t,o);return this.$i(t,l,r,i)?this.Mi(e,t):(a0()<=aa.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),C0(t)),this.Bi(e,l,t,d0(i,-1)))})}Fi(e,t){let r=new Wn(bo(e));return t.forEach((i,o)=>{Yy(e,o)&&(r=r.add(o))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Mi(e,t){return a0()<=aa.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",C0(t)),this.Ni.getDocumentsMatchingQuery(e,t,ks.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class Un{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Fr(Xt),this.qi=new ud(o=>Ga(o),am),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function yr(n,e,t,r){return new Un(n,e,t,r)}function fd(n,e){return _m.apply(this,arguments)}function _m(){return _m=(0,Re.Z)(function*(n,e){const t=ht(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let f=nn();for(const m of i){l.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of o){c.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next(m=>({ji:m,removedBatchIds:l,addedBatchIds:c}))})})}),_m.apply(this,arguments)}function tE(n,e){const t=ht(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,c,f,m){const _=f.batch,C=_.keys();let x=ye.resolve();return C.forEach(M=>{x=x.next(()=>m.getEntry(c,M)).next(O=>{const W=f.docVersions.get(M);zt(null!==W),O.version.compareTo(W)<0&&(_.applyToRemoteDocument(O,f),O.isValidDocument()&&(O.setReadTime(f.commitVersion),m.addEntry(O)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,_))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=nn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function w_(n){const e=ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function nE(n,e){const t=ht(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const c=[];e.targetChanges.forEach((_,C)=>{const x=i.get(C);if(!x)return;c.push(t.Cs.removeMatchingKeys(o,_.removedDocuments,C).next(()=>t.Cs.addMatchingKeys(o,_.addedDocuments,C)));let M=x.withSequenceNumber(o.currentSequenceNumber);var O,W,K;e.targetMismatches.has(C)?M=M.withResumeToken(fi.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,r)),i=i.insert(C,M),W=M,K=_,(0===(O=x).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&c.push(t.Cs.updateTargetData(o,M))});let f=Vo(),m=nn();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),c.push(b_(o,l,e.documentUpdates).next(_=>{f=_.Wi,m=_.zi})),!r.isEqual(jt.min())){const _=t.Cs.getLastRemoteSnapshotVersion(o).next(C=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(_)}return ye.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(t.Ui=i,o))}function b_(n,e,t){let r=nn(),i=nn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Vo();return t.forEach((c,f)=>{const m=o.get(c);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(c)),f.isNoDocument()&&f.version.isEqual(jt.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):ze("LocalStore","Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",f.version)}),{Wi:l,zi:i}})}function rE(n,e){const t=ht(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pd(n,e){const t=ht(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(o=>o?(i=o,ye.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Za(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function gd(n,e,t){return wm.apply(this,arguments)}function wm(){return wm=(0,Re.Z)(function*(n,e,t){const r=ht(n),i=r.Ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ns(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),wm.apply(this,arguments)}function xT(n,e,t){const r=ht(n);let i=jt.min(),o=nn();return r.persistence.runTransaction("Execute query","readonly",l=>function(c,f,m){const _=ht(c),C=_.qi.get(m);return void 0!==C?ye.resolve(_.Ui.get(C)):_.Cs.getTargetData(f,m)}(r,l,wo(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,c.targetId).next(f=>{o=f})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:jt.min(),t?o:nn())).next(c=>(OO(r,I0(e),c),{documents:c,Hi:o})))}function PO(n,e){const t=ht(n),r=ht(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.se(o,e).next(l=>l?l.target:null))}function NO(n,e){const t=ht(n),r=t.Ki.get(e)||jt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,d0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OO(t,e,i),i))}function OO(n,e,t){let r=n.Ki.get(e)||jt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ki.set(e,r)}function mM(){return mM=(0,Re.Z)(function*(n,e,t,r){const i=ht(n);let o=nn(),l=Vo();for(const m of t){const _=e.Ji(m.metadata.name);m.document&&(o=o.add(_));const C=e.Yi(m);C.setReadTime(e.Xi(m.metadata.readTime)),l=l.insert(_,C)}const c=i.Gi.newChangeBuffer({trackRemovals:!0}),f=yield pd(i,(m=r,wo(ap(Tn.fromString(`__bundle__/docs/${m}`)))));var m;return i.persistence.runTransaction("Apply bundle documents","readwrite",m=>b_(m,c,l).next(_=>(c.apply(m),_)).next(_=>i.Cs.removeMatchingKeysForTargetId(m,f.targetId).next(()=>i.Cs.addMatchingKeys(m,o,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(m,_.Wi,_.zi)).next(()=>_.Wi)))}),mM.apply(this,arguments)}function _$(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,Re.Z)(function*(n,e,t=nn()){const r=yield pd(n,wo(q0(e.bundledQuery))),i=ht(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=Li(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(o,e);const c=r.withResumeToken(fi.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(c.targetId,c),i.Cs.updateTargetData(o,c).next(()=>i.Cs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Cs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(o,e))})}),vM.apply(this,arguments)}function FO(n,e){return`firestore_clients_${n}_${e}`}function LO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yM(n,e){return`firestore_targets_${n}_${e}`}class RT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new Ge(i.error.code,i.error.message))),l?new RT(e,t,i.state,o):(ii("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ge(r.error.code,r.error.message))),o?new iE(e,r.state,i):(ii("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class MT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=P0();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=UD(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new MT(e,o):(ii("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _M{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _M(t.clientId,t.onlineState):(ii("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wM{constructor(){this.activeTargetIds=P0()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bM{constructor(e,t,r,i,o){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Fr(Xt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=FO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new wM),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Re.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const o=e.getItem(FO(e.persistenceKey,i));if(o){const l=MT.Zi(i,o);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(yM(this.persistenceKey,e));if(r){const i=iE.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void ii("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Re.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(o){let l=_o.at;if(null!=o)try{const c=JSON.parse(o);zt("number"==typeof c),l=c}catch(c){ii("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(r.newValue);i!==_o.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Mr(o)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new RT(this.currentUser,e,t,r),o=LO(this.persistenceKey,this.currentUser,e);this.setItem(o,i.tr())}Er(e){const t=LO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=yM(this.persistenceKey,e),o=new iE(e,t,r);this.setItem(i,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return MT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return RT.Zi(new Ei(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return iE.Zi(i,t)}yr(e){return _M.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Re.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),o=this.Ir(r),l=[],c=[];return o.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{o.has(f)||c.push(f)}),this.syncEngine.Br(l,c).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=P0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UO{constructor(){this.Lr=new wM,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class w${qr(e){}shutdown(){}}class VO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const b$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class E${constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class C$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,o){const l=this.ho(e,t);ze("RestConnection","Sending: ",l,r);const c={};return this.lo(c,i,o),this.fo(e,l,c,r).then(f=>(ze("RestConnection","Received: ",f),f),f=>{throw ah("RestConnection",`${e} failed with error: `,f,"url: ",l,"request:",r),f})}_o(e,t,r,i,o,l){return this.ao(e,t,r,i,o)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ec,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ho(e,t){return`${this.oo}/v1/${t}:${b$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((o,l)=>{const c=new bO;c.setWithCredentials(!0),c.listenOnce(ID.COMPLETE,()=>{var m;try{switch(c.getLastErrorCode()){case o0.NO_ERROR:const _=c.getResponseJson();ze("Connection","XHR received:",JSON.stringify(_)),o(_);break;case o0.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),l(new Ge(De.DEADLINE_EXCEEDED,"Request time out"));break;case o0.HTTP_ERROR:const C=c.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',C,"response text:",c.getResponseText()),C>0){let x=c.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=null===(m=x)||void 0===m?void 0:m.error;if(M&&M.status&&M.message){const O=function(W){const K=W.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf(K)>=0?K:De.UNKNOWN}(M.status);l(new Ge(O,M.message))}else l(new Ge(De.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ge(De.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(i);c.send(t,"POST",f,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ED(),l=CD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new wO({})),this.lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=i.join("");ze("Connection","Creating WebChannel: "+f,c);const m=o.createWebChannel(f,c);let _=!1,C=!1;const x=new E$({Hr:O=>{C?ze("Connection","Not sending because WebChannel is closed:",O):(_||(ze("Connection","Opening WebChannel transport."),m.open(),_=!0),ze("Connection","WebChannel sending:",O),m.send(O))},Jr:()=>m.close()}),M=(O,W,K)=>{O.listen(W,te=>{try{K(te)}catch(_e){setTimeout(()=>{throw _e},0)}})};return M(m,s0.EventType.OPEN,()=>{C||ze("Connection","WebChannel transport opened.")}),M(m,s0.EventType.CLOSE,()=>{C||(C=!0,ze("Connection","WebChannel transport closed"),x.io())}),M(m,s0.EventType.ERROR,O=>{C||(C=!0,ah("Connection","WebChannel transport errored:",O),x.io(new Ge(De.UNAVAILABLE,"The operation could not be completed")))}),M(m,s0.EventType.MESSAGE,O=>{var W;if(!C){const K=O.data[0];zt(!!K);const te=K,_e=te.error||(null===(W=te[0])||void 0===W?void 0:W.error);if(_e){ze("Connection","WebChannel received error:",_e);const ke=_e.status;let Ne=function(at){const Gt=oi[at];if(void 0!==Gt)return R0(Gt)}(ke),ut=_e.message;void 0===Ne&&(Ne=De.INTERNAL,ut="Unknown error status: "+ke+" with message "+_e.message),C=!0,x.io(new Ge(Ne,ut)),m.close()}else ze("Connection","WebChannel received:",K),x.ro(K)}}),M(l,oR.STAT_EVENT,O=>{O.stat===DD.PROXY?ze("Connection","Detected buffering proxy"):O.stat===DD.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function BO(){return typeof window<"u"?window:null}function kT(){return typeof document<"u"?document:null}function oE(n){return new lT(n,!0)}class EM{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class HO{constructor(e,t,r,i,o,l,c,f){this.Hs=e,this.vo=r,this.Vo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new EM(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Re.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Re.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Re.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===De.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===De.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ge(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Re.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I$ extends HO{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=o}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function BR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:It(),i=e.targetChange.targetIds||[],o=function(f,m){return f.gt?(zt(void 0===m||"string"==typeof m),fi.fromBase64String(m||"")):(zt(void 0===m||m instanceof Uint8Array),fi.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const m=void 0===f.code?De.UNKNOWN:R0(f.code);return new Ge(m,f.message||"")}(l);t=new kR(r,i,o,c||null)}else if("documentChange"in e){const r=e.documentChange,i=ql(n,r.document.name),o=Li(r.document.updateTime),l=new Ki({mapValue:{fields:r.document.fields}}),c=Cn.newFoundDocument(i,o,l);t=new N0(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=ql(n,r.document),o=r.readTime?Li(r.readTime):jt.min(),l=Cn.newNoDocument(i,o);t=new N0([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ql(n,r.document);t=new N0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,o=new oT(r.count||0);t=new MR(r.targetId,o)}}var f;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return jt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?jt.min():o.readTime?Li(o.readTime):jt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=fm(this.It),t.addTarget=function(i,o){let l;const c=o.target;return l=Wy(c)?{documents:L0(i,c)}:{query:a_(i,c)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=i_(i,o.resumeToken):o.snapshotVersion.compareTo(jt.min())>0&&(l.readTime=r_(i,o.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Wa(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return It()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=fm(this.It),t.removeTarget=e,this.Bo(t)}}class D$ extends HO{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function HR(n,e){return n&&n.length>0?(zt(void 0!==e),n.map(t=>function(r,i){let o=Li(r.updateTime?r.updateTime:i);return o.isEqual(jt.min())&&(o=Li(i)),new Jy(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.Zo(r,t)}return zt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=fm(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pm(this.It,r))};this.Bo(t)}}class T$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ge(De.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.ao(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ge(De.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection._o(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ge(De.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class S${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ii(t),this.ou=!1):ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class x${constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.qr(c=>{r.enqueueAndForget((0,Re.Z)(function*(){var f;Eh(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Re.Z)(function*(m){const _=ht(m);_._u.add(4),yield E_(_),_.gu.set("Unknown"),_._u.delete(4),yield sE(_)}),function(m){return f.apply(this,arguments)})(l))}))}),this.gu=new S$(r,i)}}function sE(n){return IM.apply(this,arguments)}function IM(){return IM=(0,Re.Z)(function*(n){if(Eh(n))for(const e of n.wu)yield e(!0)}),IM.apply(this,arguments)}function E_(n){return DM.apply(this,arguments)}function DM(){return DM=(0,Re.Z)(function*(n){for(const e of n.wu)yield e(!1)}),DM.apply(this,arguments)}function PT(n,e){const t=ht(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),SM(t)?AM(t):I_(t).ko()&&TM(t,e))}function aE(n,e){const t=ht(n),r=I_(t);t.du.delete(e),r.ko()&&jO(t,e),0===t.du.size&&(r.ko()?r.Fo():Eh(t)&&t.gu.set("Unknown"))}function TM(n,e){n.yu.Mt(e.targetId),I_(n).zo(e)}function jO(n,e){n.yu.Mt(e),I_(n).Ho(e)}function AM(n){n.yu=new t_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),I_(n).start(),n.gu.uu()}function SM(n){return Eh(n)&&!I_(n).No()&&n.du.size>0}function Eh(n){return 0===ht(n)._u.size}function $O(n){n.yu=void 0}function R$(n){return xM.apply(this,arguments)}function xM(){return xM=(0,Re.Z)(function*(n){n.du.forEach((e,t)=>{TM(n,e)})}),xM.apply(this,arguments)}function M$(n,e){return RM.apply(this,arguments)}function RM(){return RM=(0,Re.Z)(function*(n,e){$O(n),SM(n)?(n.gu.hu(e),AM(n)):n.gu.set("Unknown")}),RM.apply(this,arguments)}function k$(n,e,t){return MM.apply(this,arguments)}function MM(){return MM=(0,Re.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof kR&&2===e.state&&e.cause)try{yield(r=(0,Re.Z)(function*(i,o){const l=o.cause;for(const c of o.targetIds)i.du.has(c)&&(yield i.remoteSyncer.rejectListen(c,l),i.du.delete(c),i.yu.removeTarget(c))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield NT(n,r)}else if(e instanceof N0?n.yu.Gt(e):e instanceof MR?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(jt.min()))try{const r=yield w_(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.yu.te(o);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.du.get(f);m&&i.du.set(f,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach(c=>{const f=i.du.get(c);if(!f)return;i.du.set(c,f.withResumeToken(fi.EMPTY_BYTE_STRING,f.snapshotVersion)),jO(i,c);const m=new Za(f.target,c,1,f.sequenceNumber);TM(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield NT(n,r)}var r}),MM.apply(this,arguments)}function NT(n,e,t){return kM.apply(this,arguments)}function kM(){return kM=(0,Re.Z)(function*(n,e,t){if(!Ns(e))throw e;n._u.add(1),yield E_(n),n.gu.set("Offline"),t||(t=()=>w_(n.localStore)),n.asyncQueue.enqueueRetryable((0,Re.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield sE(n)}))}),kM.apply(this,arguments)}function GO(n,e){return e().catch(t=>NT(n,t,e))}function C_(n){return PM.apply(this,arguments)}function PM(){return PM=(0,Re.Z)(function*(n){const e=ht(n),t=Ep(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;P$(e);)try{const i=yield rE(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,N$(e,i)}catch(i){yield NT(e,i)}zO(e)&&WO(e)}),PM.apply(this,arguments)}function P$(n){return Eh(n)&&n.fu.length<10}function N$(n,e){n.fu.push(e);const t=Ep(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function zO(n){return Eh(n)&&!Ep(n).No()&&n.fu.length>0}function WO(n){Ep(n).start()}function O$(n){return NM.apply(this,arguments)}function NM(){return NM=(0,Re.Z)(function*(n){Ep(n).eu()}),NM.apply(this,arguments)}function F$(n){return OM.apply(this,arguments)}function OM(){return OM=(0,Re.Z)(function*(n){const e=Ep(n);for(const t of n.fu)e.Xo(t.mutations)}),OM.apply(this,arguments)}function L$(n,e,t){return FM.apply(this,arguments)}function FM(){return FM=(0,Re.Z)(function*(n,e,t){const r=n.fu.shift(),i=f_.from(r,e,t);yield GO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield C_(n)}),FM.apply(this,arguments)}function U$(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,Re.Z)(function*(n,e){var t;e&&Ep(n).Yo&&(yield(t=(0,Re.Z)(function*(r,i){if(x0(o=i.code)&&o!==De.ABORTED){const l=r.fu.shift();Ep(r).Mo(),yield GO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield C_(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),zO(n)&&WO(n)}),LM.apply(this,arguments)}function qO(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,Re.Z)(function*(n,e){const t=ht(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=Eh(t);t._u.add(3),yield E_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield sE(t)}),UM.apply(this,arguments)}function VM(n,e){return BM.apply(this,arguments)}function BM(){return BM=(0,Re.Z)(function*(n,e){const t=ht(n);e?(t._u.delete(2),yield sE(t)):e||(t._u.add(2),yield E_(t),t.gu.set("Unknown"))}),BM.apply(this,arguments)}function I_(n){return n.pu||(n.pu=function(e,t,r){const i=ht(e);return i.su(),new I$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:R$.bind(null,n),Zr:M$.bind(null,n),Wo:k$.bind(null,n)}),n.wu.push(function(){var e=(0,Re.Z)(function*(t){t?(n.pu.Mo(),SM(n)?AM(n):n.gu.set("Unknown")):(yield n.pu.stop(),$O(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ep(n){return n.Iu||(n.Iu=function(e,t,r){const i=ht(e);return i.su(),new D$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:O$.bind(null,n),Zr:U$.bind(null,n),tu:F$.bind(null,n),Zo:L$.bind(null,n)}),n.wu.push(function(){var e=(0,Re.Z)(function*(t){t?(n.Iu.Mo(),yield C_(n)):(yield n.Iu.stop(),n.fu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class HM{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new HM(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D_(n,e){if(ii("AsyncQueue",`${e}: ${n}`),Ns(n))return new Ge(De.UNAVAILABLE,`${e}: ${n}`);throw n}class T_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||dt.comparator(t.key,r.key):(t,r)=>dt.comparator(t.key,r.key),this.keyedMap=gp(),this.sortedSet=new Fr(this.comparator)}static emptySet(e){return new T_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof T_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new T_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZO{constructor(){this.Tu=new Fr(dt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):It():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class A_{constructor(e,t,r,i,o,l,c,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new A_(e,t,T_.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class V${constructor(){this.Au=void 0,this.listeners=[]}}class B${constructor(){this.queries=new ud(e=>E0(e),lp),this.onlineState="Unknown",this.Ru=new Set}}function jM(n,e){return $M.apply(this,arguments)}function $M(){return $M=(0,Re.Z)(function*(n,e){const t=ht(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new V$),i)try{o.Au=yield t.onListen(r)}catch(l){const c=D_(l,`Initialization of query '${C0(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&WM(t)}),$M.apply(this,arguments)}function GM(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,Re.Z)(function*(n,e){const t=ht(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),zM.apply(this,arguments)}function H$(n,e){const t=ht(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const c of l.listeners)c.Pu(i)&&(r=!0);l.Au=i}}r&&WM(t)}function j$(n,e,t){const r=ht(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function WM(n){n.Ru.forEach(e=>{e.next()})}class qM{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new A_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=A_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class $${constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class KO{constructor(e){this.It=e}Ji(e){return ql(this.It,e)}Yi(e){return e.metadata.exists?UR(this.It,e.document,!1):Cn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Li(e)}}class G${constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=YO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Tn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new KO(this.It);for(const i of e)if(i.metadata.queries){const o=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const c=(t.get(l)||nn()).add(o);t.set(l,c)}}return t}complete(){var e=this;return(0,Re.Z)(function*(){const t=yield function y$(n,e,t,r){return mM.apply(this,arguments)}(e.localStore,new KO(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield _$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function YO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class QO{constructor(e){this.key=e}}class JO{constructor(e){this.key=e}}class XO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=nn(),this.mutatedKeys=nn(),this.Gu=bo(e),this.Qu=new T_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new ZO,i=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,m="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,C)=>{const x=i.get(_),M=Yy(this.query,C)?C:null,O=!!x&&this.mutatedKeys.has(x.key),W=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let K=!1;x&&M?x.data.isEqual(M.data)?O!==W&&(r.track({type:3,doc:M}),K=!0):this.Hu(x,M)||(r.track({type:2,doc:M}),K=!0,(f&&this.Gu(M,f)>0||m&&this.Gu(M,m)<0)&&(c=!0)):!x&&M?(r.track({type:0,doc:M}),K=!0):x&&!M&&(r.track({type:1,doc:x}),K=!0,(f||m)&&(c=!0)),K&&(M?(l=l.add(M),o=W?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const _="F"===this.query.limitType?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{Qu:l,zu:r,$i:c,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Eu();o.sort((m,_)=>function(C,x){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return M(C)-M(x)}(m.type,_.type)||this.Gu(m.doc,_.doc)),this.Ju(r);const l=t?this.Yu():[],c=0===this.Ku.size&&this.current?1:0,f=c!==this.qu;return this.qu=c,0!==o.length||f?{snapshot:new A_(this.query,e.Qu,i,o,e.mutatedKeys,0===c,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ZO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=nn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new JO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new QO(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=nn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return A_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class z${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class W${constructor(e){this.key=e,this.nc=!1}}class q${constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new ud(c=>E0(c),lp),this.rc=new Map,this.oc=new Set,this.uc=new Fr(dt.comparator),this.cc=new Map,this.ac=new d,this.hc={},this.lc=new Map,this.fc=hd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Z$(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Re.Z)(function*(n,e){const t=vk(n);let r,i;const o=t.ic.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.ec();else{const l=yield pd(t.localStore,wo(e));t.isPrimaryClient&&PT(t.remoteStore,l);const c=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield KM(t,e,r,"current"===c,l.resumeToken)}return i}),ZM.apply(this,arguments)}function KM(n,e,t,r,i){return YM.apply(this,arguments)}function YM(){return YM=(0,Re.Z)(function*(n,e,t,r,i){n._c=(C,x,M)=>{return(O=(0,Re.Z)(function*(W,K,te,_e){let ke=K.view.Wu(te);ke.$i&&(ke=yield xT(W.localStore,K.query,!1).then(({documents:at})=>K.view.Wu(at,ke)));const Ne=_e&&_e.targetChanges.get(K.targetId),ut=K.view.applyChanges(ke,W.isPrimaryClient,Ne);return sk(W,K.targetId,ut.Xu),ut.snapshot}),function(W,K,te,_e){return O.apply(this,arguments)})(n,C,x,M);var O};const o=yield xT(n.localStore,e,!0),l=new XO(e,o.Hi),c=l.Wu(o.documents),f=e_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),m=l.applyChanges(c,n.isPrimaryClient,f);sk(n,t,m.Xu);const _=new z$(e,t,l);return n.ic.set(e,_),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),m.snapshot}),YM.apply(this,arguments)}function K$(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,Re.Z)(function*(n,e){const t=ht(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(o=>!lp(o,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),aE(t.remoteStore,r.targetId),S_(t,r.targetId)}).catch(tc))):(S_(t,r.targetId),yield gd(t.localStore,r.targetId,!0))}),QM.apply(this,arguments)}function JM(){return JM=(0,Re.Z)(function*(n,e,t){const r=yk(n);try{const i=yield function(o,l){const c=ht(o),f=Ar.now(),m=l.reduce((x,M)=>x.add(M.key),nn());let _,C;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let M=Vo(),O=nn();return c.Gi.getEntries(x,m).next(W=>{M=W,M.forEach((K,te)=>{te.isValidDocument()||(O=O.add(K))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,M)).next(W=>{_=W;const K=[];for(const te of l){const _e=AR(te,_.get(te.key).overlayedDocument);null!=_e&&K.push(new ld(te.key,_e,Gy(_e.value.mapValue),fr.exists(!0)))}return c.mutationQueue.addMutationBatch(x,f,K,l)}).next(W=>{C=W;const K=W.applyToLocalDocumentSet(_,O);return c.documentOverlayCache.saveOverlays(x,W.batchId,K)})}).then(()=>({batchId:C.batchId,changes:M0(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let f=o.hc[o.currentUser.toKey()];f||(f=new Fr(Xt)),f=f.insert(l,c),o.hc[o.currentUser.toKey()]=f}(r,i.batchId,t),yield Ch(r,i.changes),yield C_(r.remoteStore)}catch(i){const o=D_(i,"Failed to persist write");t.reject(o)}}),JM.apply(this,arguments)}function eF(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,Re.Z)(function*(n,e){const t=ht(n);try{const r=yield nE(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.cc.get(o);l&&(zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?zt(l.nc):i.removedDocuments.size>0&&(zt(l.nc),l.nc=!1))}),yield Ch(t,r,e)}catch(r){yield tc(r)}}),XM.apply(this,arguments)}function tF(n,e,t){const r=ht(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((o,l)=>{const c=l.view.bu(e);c.snapshot&&i.push(c.snapshot)}),function(o,l){const c=ht(o);c.onlineState=l;let f=!1;c.queries.forEach((m,_)=>{for(const C of _.listeners)C.bu(l)&&(f=!0)}),f&&WM(c)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Q$(n,e,t){return ek.apply(this,arguments)}function ek(){return ek=(0,Re.Z)(function*(n,e,t){const r=ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),o=i&&i.key;if(o){let l=new Fr(dt.comparator);l=l.insert(o,Cn.newNoDocument(o,jt.min()));const c=nn().add(o),f=new Xy(jt.min(),new Map,new Wn(Xt),l,c);yield eF(r,f),r.uc=r.uc.remove(o),r.cc.delete(e),ak(r)}else yield gd(r.localStore,e,!1).then(()=>S_(r,e,t)).catch(tc)}),ek.apply(this,arguments)}function J$(n,e){return tk.apply(this,arguments)}function tk(){return tk=(0,Re.Z)(function*(n,e){const t=ht(n),r=e.batch.batchId;try{const i=yield tE(t.localStore,e);ok(t,r,null),ik(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ch(t,i)}catch(i){yield tc(i)}}),tk.apply(this,arguments)}function X$(n,e,t){return nk.apply(this,arguments)}function nk(){return nk=(0,Re.Z)(function*(n,e,t){const r=ht(n);try{const i=yield function(o,l){const c=ht(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,l).next(_=>(zt(null!==_),m=_.keys(),c.mutationQueue.removeMutationBatch(f,_))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(r.localStore,e);ok(r,e,t),ik(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ch(r,i)}catch(i){yield tc(i)}}),nk.apply(this,arguments)}function rk(){return rk=(0,Re.Z)(function*(n,e){const t=ht(n);Eh(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=ht(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=D_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rk.apply(this,arguments)}function ik(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function ok(n,e,t){const r=ht(n);let i=r.hc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function S_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||nF(n,r)})}function nF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(aE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ak(n))}function sk(n,e,t){for(const r of t)r instanceof QO?(n.ac.addReference(r.key,e),tG(n,r)):r instanceof JO?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||nF(n,r.key)):It()}function tG(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.oc.add(r),ak(n))}function ak(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new dt(Tn.fromString(e)),r=n.fc.next();n.cc.set(r,new W$(t)),n.uc=n.uc.insert(t,r),PT(n.remoteStore,new Za(wo(ap(t.path)),r,2,_o.at))}}function Ch(n,e,t){return lk.apply(this,arguments)}function lk(){return lk=(0,Re.Z)(function*(n,e,t){const r=ht(n),i=[],o=[],l=[];var c;r.ic.isEmpty()||(r.ic.forEach((c,f)=>{l.push(r._c(f,e,t).then(m=>{if((m||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,m?.fromCache?"not-current":"current"),m){i.push(m);const _=$e.Ci(f.targetId,m);o.push(_)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(c=(0,Re.Z)(function*(f,m){const _=ht(f);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>ye.forEach(m,x=>ye.forEach(x.Si,M=>_.persistence.referenceDelegate.addReference(C,x.targetId,M)).next(()=>ye.forEach(x.Di,M=>_.persistence.referenceDelegate.removeReference(C,x.targetId,M)))))}catch(C){if(!Ns(C))throw C;ze("LocalStore","Failed to update sequence numbers: "+C)}for(const C of m){const x=C.targetId;if(!C.fromCache){const M=_.Ui.get(x),W=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);_.Ui=_.Ui.insert(x,W)}}}),function(f,m){return c.apply(this,arguments)})(r.localStore,o))}),lk.apply(this,arguments)}function nG(n,e){return uk.apply(this,arguments)}function uk(){return uk=(0,Re.Z)(function*(n,e){const t=ht(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield fd(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(c=>{c.reject(new Ge(De.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ch(t,r.ji)}var i}),uk.apply(this,arguments)}function rG(n,e){const t=ht(n),r=t.cc.get(e);if(r&&r.nc)return nn().add(r.key);{let i=nn();const o=t.rc.get(e);if(!o)return i;for(const l of o){const c=t.ic.get(l);i=i.unionWith(c.view.ju)}return i}}function iG(n,e){return ck.apply(this,arguments)}function ck(){return ck=(0,Re.Z)(function*(n,e){const t=ht(n),r=yield xT(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&sk(t,e.targetId,i.Xu),i}),ck.apply(this,arguments)}function oG(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,Re.Z)(function*(n,e){const t=ht(n);return NO(t.localStore,e).then(r=>Ch(t,r))}),dk.apply(this,arguments)}function sG(n,e,t,r){return hk.apply(this,arguments)}function hk(){return hk=(0,Re.Z)(function*(n,e,t,r){const i=ht(n),o=yield function(l,c){const f=ht(l),m=ht(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",_=>m.Tn(_,c).next(C=>C?f.localDocuments.getDocuments(_,C):ye.resolve(null)))}(i.localStore,e);var c;null!==o?("pending"===t?yield C_(i.remoteStore):"acknowledged"===t||"rejected"===t?(ok(i,e,r||null),ik(i,e),c=e,ht(ht(i.localStore).mutationQueue).An(c)):It(),yield Ch(i,o)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),hk.apply(this,arguments)}function fk(){return fk=(0,Re.Z)(function*(n,e){const t=ht(n);if(vk(t),yk(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rF(t,r.toArray());t.dc=!0,yield VM(t.remoteStore,!0);for(const o of i)PT(t.remoteStore,o)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(S_(t,l),gd(t.localStore,l,!0))),aE(t.remoteStore,l)}),yield i,yield rF(t,r),function(o){const l=ht(o);l.cc.forEach((c,f)=>{aE(l.remoteStore,f)}),l.ac.fs(),l.cc=new Map,l.uc=new Fr(dt.comparator)}(t),t.dc=!1,yield VM(t.remoteStore,!1)}}),fk.apply(this,arguments)}function rF(n,e,t){return pk.apply(this,arguments)}function pk(){return pk=(0,Re.Z)(function*(n,e,t){const r=ht(n),i=[],o=[];for(const l of e){let c;const f=r.rc.get(l);if(f&&0!==f.length){c=yield pd(r.localStore,wo(f[0]));for(const m of f){const _=r.ic.get(m),C=yield iG(r,_);C.snapshot&&o.push(C.snapshot)}}else{const m=yield PO(r.localStore,l);c=yield pd(r.localStore,m),yield KM(r,iF(m),l,!1,c.resumeToken)}i.push(c)}return r.sc.Wo(o),i}),pk.apply(this,arguments)}function iF(n){return WD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lG(n){const e=ht(n);return ht(ht(e.localStore).persistence).vi()}function uG(n,e,t,r){return gk.apply(this,arguments)}function gk(){return gk=(0,Re.Z)(function*(n,e,t,r){const i=ht(n);if(i.dc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const o=i.rc.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield NO(i.localStore,I0(o[0])),c=Xy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,fi.EMPTY_BYTE_STRING);yield Ch(i,l,c);break}case"rejected":yield gd(i.localStore,e,!0),S_(i,e,r);break;default:It()}}),gk.apply(this,arguments)}function cG(n,e,t){return mk.apply(this,arguments)}function mk(){return mk=(0,Re.Z)(function*(n,e,t){const r=vk(n);if(r.dc){for(const i of e){if(r.rc.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const o=yield PO(r.localStore,i),l=yield pd(r.localStore,o);yield KM(r,iF(o),l.targetId,!1,l.resumeToken),PT(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield gd(r.localStore,i,!1).then(()=>{aE(r.remoteStore,i),S_(r,i)}).catch(tc))}}),mk.apply(this,arguments)}function vk(n){const e=ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q$.bind(null,e),e.sc.Wo=H$.bind(null,e.eventManager),e.sc.wc=j$.bind(null,e.eventManager),e}function yk(n){const e=ht(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X$.bind(null,e),e}class oF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Re.Z)(function*(){t.It=oE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return yr(this.persistence,new $t,e.initialUser,this.It)}yc(e){return new k($.Bs,this.It)}gc(e){return new UO}terminate(){var e=this;return(0,Re.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sF extends oF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Re.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield yk(r.Ac.syncEngine),yield C_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return yr(this.persistence,new $t,e.initialUser,this.It)}Tc(e,t){return new lM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new mR(t,this.persistence);return new f0(e.asyncQueue,r)}yc(e){const t=Pt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bo.withCacheSize(this.cacheSizeBytes):Bo.DEFAULT;return new Je(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,BO(),kT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new UO}}class hG extends sF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Re.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof bM&&(r.sharedClientState.syncEngine={Fr:sG.bind(null,i),$r:uG.bind(null,i),Br:cG.bind(null,i),vi:lG.bind(null,i),Mr:oG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var o=(0,Re.Z)(function*(l){yield function aG(n,e){return fk.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}gc(e){const t=BO();if(!bM.C(t))throw new Ge(De.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _k{initialize(e,t){var r=this;return(0,Re.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>tF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nG.bind(null,r.syncEngine),yield VM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new B$}createDatastore(e){const t=oE(e.databaseInfo.databaseId),r=new C$(e.databaseInfo);return new T$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=c=>tF(this.syncEngine,c,0),l=VO.C()?new VO:new w$,new x$(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,c,f,m){const _=new q$(r,i,o,l,c,f);return m&&(_.dc=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Re.Z)(function*(t){const r=ht(t);ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield E_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function wk(n,e,t){if(!t)throw new Ge(De.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aF(n,e,t,r){if(!0===e&&!0===r)throw new Ge(De.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lF(n){if(!dt.isDocumentKey(n))throw new Ge(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uF(n){if(dt.isDocumentKey(n))throw new Ge(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":It()}function Sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ge(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OT(n);throw new Ge(De.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cF(n,e){if(e<=0)throw new Ge(De.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const dF=new Map;class hF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ge(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ge(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,aF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ge(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ge(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aR;switch(t.type){case"gapi":return new uR(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ge(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dF.get(e);t&&(ze("ComponentProvider","Removing Datastore"),dF.delete(e),t.terminate())}(this),Promise.resolve()}}class Lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new md(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lr(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class md extends is{constructor(e,t,r){super(e,t,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lr(this.firestore,null,new dt(e))}withConverter(e){return new md(this.firestore,e,this._path)}}function pF(n,e,...t){if(n=(0,B.m9)(n),wk("collection","path",e),n instanceof lE){const r=Tn.fromString(e,...t);return uF(r),new md(n,null,r)}{if(!(n instanceof Lr||n instanceof md))throw new Ge(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tn.fromString(e,...t));return uF(r),new md(n.firestore,null,r)}}function FT(n,e,...t){if(n=(0,B.m9)(n),1===arguments.length&&(e=MD.R()),wk("doc","path",e),n instanceof lE){const r=Tn.fromString(e,...t);return lF(r),new Lr(n,null,new dt(r))}{if(!(n instanceof Lr||n instanceof md))throw new Ge(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Tn.fromString(e,...t));return lF(r),new Lr(n.firestore,n instanceof md?n.converter:null,new dt(r))}}function gF(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),(n instanceof Lr||n instanceof md)&&(e instanceof Lr||e instanceof md)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bk(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&lp(n._query,e._query)&&n.converter===e.converter}function mF(n,e=10240){let t=0;return{read:()=>(0,Re.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Re.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class LT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class pG{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ci,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Re.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Re.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Re.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const o=yield e.Cc(i);return new $$(JSON.parse(o),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Re.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Re.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Re.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class vG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Re.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ge(De.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Re.Z)(function*(o,l){const c=ht(o),f=fm(c.It)+"/documents",m={documents:l.map(M=>s_(c.It,M))},_=yield c._o("BatchGetDocuments",f,m,l.length),C=new Map;_.forEach(M=>{const O=function VR(n,e){return"found"in e?function(t,r){zt(!!r.found);const i=ql(t,r.found.name),o=Li(r.found.updateTime),l=new Ki({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(i,o,l)}(n,e):"missing"in e?function(t,r){zt(!!r.missing),zt(!!r.readTime);const i=ql(t,r.missing),o=Li(r.readTime);return Cn.newNoDocument(i,o)}(n,e):It()}(c.It,M);C.set(O.key.toString(),O)});const x=[];return l.forEach(M=>{const O=C.get(M.toString());zt(!!O),x.push(O)}),x}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Re.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=dt.fromPath(i);e.mutations.push(new S0(o,e.precondition(o)))}),yield(r=(0,Re.Z)(function*(i,o){const l=ht(i),c=fm(l.It)+"/documents",f={writes:o.map(m=>pm(l.It,m))};yield l.ao("Commit",c,f)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw It();t=jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ge(De.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(jt.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(jt.min()))throw new Ge(De.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class yG{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.kc=r.maxAttempts,this.xo=new EM(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Re.Z)(function*(){const t=new vG(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Fc(o)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!im(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!x0(t)}return!1}}class _G{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ei.UNAUTHENTICATED,this.clientId=MD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Re.Z)(function*(c){ze("FirestoreClient","Received user=",c.uid),yield o.authCredentialListener(c),o.user=c});return function(c){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Re.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(De.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=D_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function vF(n,e){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,Re.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Re.Z)(function*(o){r.isEqual(o)||(yield fd(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Ek.apply(this,arguments)}function yF(n,e){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,Re.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ik(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>qO(e.remoteStore,o)),n.onlineComponents=e}),Ck.apply(this,arguments)}function Ik(n){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,Re.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield vF(n,new oF)),n.offlineComponents}),Dk.apply(this,arguments)}function UT(n){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,Re.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield yF(n,new _k)),n.onlineComponents}),Tk.apply(this,arguments)}function _F(n){return Ik(n).then(e=>e.persistence)}function VT(n){return Ik(n).then(e=>e.localStore)}function Ak(n){return UT(n).then(e=>e.remoteStore)}function Sk(n){return UT(n).then(e=>e.syncEngine)}function x_(n){return xk.apply(this,arguments)}function xk(){return xk=(0,Re.Z)(function*(n){const e=yield UT(n),t=e.eventManager;return t.onListen=Z$.bind(null,e.syncEngine),t.onUnlisten=K$.bind(null,e.syncEngine),t}),xk.apply(this,arguments)}function bF(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(i,o,l,c,f){const m=new LT({next:C=>{o.enqueueAndForget(()=>GM(i,_));const x=C.docs.has(l);!x&&C.fromCache?f.reject(new Ge(De.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&C.fromCache&&c&&"server"===c.source?f.reject(new Ge(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(C)},error:C=>f.reject(C)}),_=new qM(ap(l.path),m,{includeMetadataChanges:!0,Nu:!0});return jM(i,_)}(yield x_(n),n.asyncQueue,e,t,r)})),r.promise}function EF(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(i,o,l,c,f){const m=new LT({next:C=>{o.enqueueAndForget(()=>GM(i,_)),C.fromCache&&"server"===c.source?f.reject(new Ge(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(C)},error:C=>f.reject(C)}),_=new qM(l,m,{includeMetadataChanges:!0,Nu:!0});return jM(i,_)}(yield x_(n),n.asyncQueue,e,t,r)})),r.promise}class AG{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new EM(this,"async_queue_retry"),this.Wc=()=>{const t=kT();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=kT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=kT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ci;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Re.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ns(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,ii("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=HM.createAndSchedule(this,e,t,r,o=>this.Yc(o));return this.qc.push(i),i}zc(){this.Kc&&It()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Re.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Rk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class SG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ur extends lE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new AG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CF(this),this._firestoreClient.terminate()}}function Di(n){return n._firestoreClient||CF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CF(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _R(n._databaseId,o,n._persistenceKey,(c=t).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));var o,c;n._firestoreClient=new _G(n._authCredentials,n._appCheckCredentials,n._queue,r)}function IF(n,e,t){const r=new Ci;return n.asyncQueue.enqueue((0,Re.Z)(function*(){try{yield vF(n,t),yield yF(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(l=o).name?l.code===De.FAILED_PRECONDITION||l.code===De.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;ah("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function DF(n){if(n._initialized||n._terminated)throw new Ge(De.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vd(fi.fromBase64String(e))}catch(t){throw new Ge(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vd(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ih{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ge(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bm{constructor(e){this._methodName=e}}class BT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const UG=/^__.*__$/;class VG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new ad(e,this.data,t,this.fieldTransforms)}}class TF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class HT{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new HT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return GT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(AF(this.sa)&&UG.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class BG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||oE(e)}da(e,t,r,i=!1){return new HT({sa:e,methodName:t,fa:r,path:Gr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Em(n){const e=n._freezeSettings(),t=oE(n._databaseId);return new BG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jT(n,e,t,r,i,o={}){const l=n.da(o.merge||o.mergeFields?2:0,e,t,i);Nk("Data must be an object, but it was:",l,r);const c=RF(r,l);let f,m;if(o.merge)f=new Os(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const C of o.mergeFields){const x=Ok(e,C,t);if(!l.contains(x))throw new Ge(De.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);kF(_,x)||_.push(x)}f=new Os(_),m=l.fieldTransforms.filter(C=>f.covers(C.field))}else f=null,m=l.fieldTransforms;return new VG(new Ki(c),f,m)}class uE extends bm{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uE}}function SF(n,e,t){return new HT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Mk extends bm{_toFieldTransform(e){return new fp(e.path,new dp)}isEqual(e){return e instanceof Mk}}class HG extends bm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=SF(this,e,!0),r=this._a.map(o=>Cm(o,t)),i=new oc(r);return new fp(e.path,i)}isEqual(e){return this===e}}class jG extends bm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=SF(this,e,!0),r=this._a.map(o=>Cm(o,t)),i=new sd(r);return new fp(e.path,i)}isEqual(e){return this===e}}class $G extends bm{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new hp(e.It,TR(e.It,this.wa));return new fp(e.path,t)}isEqual(e){return this===e}}function kk(n,e,t,r){const i=n.da(1,e,t);Nk("Data must be an object, but it was:",i,r);const o=[],l=Ki.empty();nd(r,(f,m)=>{const _=$T(e,f,t);m=(0,B.m9)(m);const C=i.ca(_);if(m instanceof uE)o.push(_);else{const x=Cm(m,C);null!=x&&(o.push(_),l.set(_,x))}});const c=new Os(o);return new TF(l,c,i.fieldTransforms)}function Pk(n,e,t,r,i,o){const l=n.da(1,e,t),c=[Ok(e,r,t)],f=[i];if(o.length%2!=0)throw new Ge(De.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)c.push(Ok(e,o[x])),f.push(o[x+1]);const m=[],_=Ki.empty();for(let x=c.length-1;x>=0;--x)if(!kF(m,c[x])){const M=c[x];let O=f[x];O=(0,B.m9)(O);const W=l.ca(M);if(O instanceof uE)m.push(M);else{const K=Cm(O,W);null!=K&&(m.push(M),_.set(M,K))}}const C=new Os(m);return new TF(_,C,l.fieldTransforms)}function xF(n,e,t,r=!1){return Cm(t,n.da(r?4:3,e))}function Cm(n,e){if(MF(n=(0,B.m9)(n)))return Nk("Unsupported field value:",e,n),RF(n,e);if(n instanceof bm)return function(t,r){if(!AF(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let c=Cm(l,r.aa(o));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,B.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TR(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ar.fromDate(t);return{timestampValue:r_(r.It,i)}}if(t instanceof Ar){const i=new Ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:r_(r.It,i)}}if(t instanceof BT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vd)return{bytesValue:i_(r.It,t._byteString)};if(t instanceof Lr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:o_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${OT(t)}`)}(n,e)}function RF(n,e){const t={};return By(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nd(n,(r,i)=>{const o=Cm(i,e.ra(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function MF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof BT||n instanceof vd||n instanceof Lr||n instanceof bm)}function Nk(n,e,t){if(!MF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Ok(n,e,t){if((e=(0,B.m9)(e))instanceof Ih)return e._internalPath;if("string"==typeof e)return $T(n,e);throw GT("Field path arguments must be of type string or ",n,!1,void 0,t)}const GG=new RegExp("[~\\*/\\[\\]]");function $T(n,e,t){if(e.search(GG)>=0)throw GT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ih(...e.split("."))._internalPath}catch{throw GT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GT(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Ge(De.INVALID_ARGUMENT,c+n+f)}function kF(n,e){return n.some(t=>t.isEqual(e))}class cE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zG extends cE{data(){return super.data()}}function zT(n,e){return"string"==typeof e?$T(n,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}function PF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dE{}function Cp(n,...e){for(const t of e)n=t._apply(n);return n}class WG extends dE{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Em(e.firestore),r=function(i,o,l,c,f,m,_){let C;if(f.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new Ge(De.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){VF(_,m);const M=[];for(const O of _)M.push(UF(c,i,O));C={arrayValue:{values:M}}}else C=UF(c,i,_)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||VF(_,m),C=xF(l,"where",_,"in"===m||"not-in"===m);const x=Yi.create(f,m,C);return function(M,O){if(O.dt()){const K=Zy(M);if(null!==K&&!K.isEqual(O.field))throw new Ge(De.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${K.toString()}' and '${O.field.toString()}'`);const te=um(M);null!==te&&BF(0,O.field,te)}const W=function(K,te){for(const _e of K.filters)if(te.indexOf(_e.op)>=0)return _e.op;return null}(M,function(K){switch(K){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(O.op));if(null!==W)throw new Ge(De.INVALID_ARGUMENT,W===O.op?`Invalid query. You cannot use more than one '${O.op.toString()}' filter.`:`Invalid query. You cannot use '${O.op.toString()}' filters with '${W.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new is(e.firestore,e.converter,function(i,o){const l=i.filters.concat([o]);return new ic(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class ZG extends dE{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ge(De.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ge(De.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ph(i,o);return function(c,f){if(null===um(c)){const m=Zy(c);null!==m&&BF(0,m,f.field)}}(r,l),l}(e._query,this.ma,this.pa);return new is(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ic(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class NF extends dE{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new is(e.firestore,e.converter,Ky(e._query,this.Ia,this.Ta))}}class OF extends dE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=LF(e,this.type,this.Ea,this.Aa);return new is(e.firestore,e.converter,(i=t,new ic((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class FF extends dE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=LF(e,this.type,this.Ea,this.Aa);return new is(e.firestore,e.converter,(i=t,new ic((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function LF(n,e,t,r){if(t[0]=(0,B.m9)(t[0]),t[0]instanceof cE)return function(i,o,l,c,f){if(!c)throw new Ge(De.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const _ of gh(i))if(_.field.isKeyField())m.push(od(o,c.key));else{const C=c.data.field(_.field);if(LD(C))throw new Ge(De.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===C){const x=_.field.canonicalString();throw new Ge(De.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}m.push(C)}return new zl(m,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Em(n.firestore);return function(o,l,c,f,m,_){const C=o.explicitOrderBy;if(m.length>C.length)throw new Ge(De.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let M=0;M<m.length;M++){const O=m[M];if(C[M].field.isKeyField()){if("string"!=typeof O)throw new Ge(De.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof O}`);if(!b0(o)&&-1!==O.indexOf("/"))throw new Ge(De.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${O}' contains a slash.`);const W=o.path.child(Tn.fromString(O));if(!dt.isDocumentKey(W))throw new Ge(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const K=new dt(W);x.push(od(l,K))}else{const W=xF(c,f,O);x.push(W)}}return new zl(x,_)}(n._query,n.firestore._databaseId,i,e,t,r)}}function UF(n,e,t){if("string"==typeof(t=(0,B.m9)(t))){if(""===t)throw new Ge(De.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b0(e)&&-1!==t.indexOf("/"))throw new Ge(De.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Tn.fromString(t));if(!dt.isDocumentKey(r))throw new Ge(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return od(n,new dt(r))}if(t instanceof Lr)return od(n,t._key);throw new Ge(De.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OT(t)}.`)}function VF(n,e){if(!Array.isArray(n)||0===n.length)throw new Ge(De.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ge(De.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function BF(n,e,t){if(!t.isEqual(e))throw new Ge(De.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Fk{convertValue(e,t="none"){switch(dh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ch(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){const r={};return nd(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new BT(zr(e.latitude),zr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yR(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rm(e));default:return null}}convertTimestamp(e){const t=nc(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Tn.fromString(e);zt(l_(r));const i=new rc(r.get(1),r.get(3)),o=new dt(r.popFirst(5));return i.isEqual(t)||ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function WT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class n3 extends Fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new vd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,t)}}class Im{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dh extends cE{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hE extends Dh{data(e={}){return super.data(e)}}class Ip{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Im(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hE(this._firestore,this._userDataWriter,r.key,r,new Im(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ge(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new hE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Im(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const c=new hE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Im(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return 0!==l.type&&(f=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:r3(l.type),doc:c,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function r3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}function HF(n,e){return n instanceof Dh&&e instanceof Dh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ip&&e instanceof Ip&&n._firestore===e._firestore&&bk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dp extends Fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new vd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,t)}}function jF(n,e,t){n=Sn(n,Lr);const r=Sn(n.firestore,Ur),i=WT(n.converter,e,t);return R_(r,[jT(Em(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function $F(n,e,t,...r){n=Sn(n,Lr);const i=Sn(n.firestore,Ur),o=Em(i);let l;return l="string"==typeof(e=(0,B.m9)(e))||e instanceof Ih?Pk(o,"updateDoc",n._key,e,t,r):kk(o,"updateDoc",n._key,e),R_(i,[l.toMutation(n._key,fr.exists(!0))])}function GF(n,...e){var t,r,i;n=(0,B.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Rk(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(Rk(e[l])){const C=e[l];e[l]=null===(t=C.next)||void 0===t?void 0:t.bind(C),e[l+1]=null===(r=C.error)||void 0===r?void 0:r.bind(C),e[l+2]=null===(i=C.complete)||void 0===i?void 0:i.bind(C)}let f,m,_;if(n instanceof Lr)m=Sn(n.firestore,Ur),_=ap(n._key.path),f={next:C=>{e[l]&&e[l](Lk(m,n,C))},error:e[l+1],complete:e[l+2]};else{const C=Sn(n,is);m=Sn(C.firestore,Ur),_=C._query;const x=new Dp(m);f={next:M=>{e[l]&&e[l](new Ip(m,x,C,M))},error:e[l+1],complete:e[l+2]},PF(n._query)}return function(C,x,M,O){const W=new LT(O),K=new qM(x,W,M);return C.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return jM(yield x_(C),K)})),()=>{W.bc(),C.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return GM(yield x_(C),K)}))}}(Di(m),_,c,f)}function R_(n,e){return function(t,r){const i=new Ci;return t.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function Y$(n,e,t){return JM.apply(this,arguments)}(yield Sk(t),r,i)})),i.promise}(Di(n),e)}function Lk(n,e,t){const r=t.docs.get(e._key),i=new Dp(n);return new Dh(n,i,e._key,r,new Im(t.hasPendingWrites,t.fromCache),e.converter)}const f3={maxAttempts:5};class zF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Em(e)}set(e,t,r){this._verifyNotCommitted();const i=Tp(e,this._firestore),o=WT(i.converter,t,r),l=jT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Tp(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof Ih?Pk(this._dataReader,"WriteBatch.update",o._key,t,r,i):kk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tp(e,this._firestore);return this._mutations=this._mutations.concat(new pp(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(De.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tp(n,e){if((n=(0,B.m9)(n)).firestore!==e)throw new Ge(De.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class p3 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Em(e)}get(e){const t=Tp(e,this._firestore),r=new n3(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return It();const o=i[0];if(o.isFoundDocument())return new cE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new cE(this._firestore,r,t._key,null,t.converter);throw It()})}set(e,t,r){const i=Tp(e,this._firestore),o=WT(i.converter,t,r),l=jT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=Tp(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof Ih?Pk(this._dataReader,"Transaction.update",o._key,t,r,i):kk(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=Tp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tp(e,this._firestore),r=new Dp(this._firestore);return super.get(e).then(i=>new Dh(this._firestore,r,t._key,i._document,new Im(!1,!1),t.converter))}}function Uk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qF(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function ZF(){if(!function vR(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ec=fo.SDK_VERSION,(0,fo._registerComponent)(new Va.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new Ur(new lR(t.getProvider("auth-internal")),new cR(t.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ge(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(c.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,fo.registerVersion)(sR,"3.7.3",n),(0,fo.registerVersion)(sR,"3.7.3","esm2017")}();class fE{constructor(e){this._delegate=e}static fromBase64String(e){return ZF(),new fE(vd.fromBase64String(e))}static fromUint8Array(e){return qF(),new fE(vd.fromUint8Array(e))}toBase64(){return ZF(),this._delegate.toBase64()}toUint8Array(){return qF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vk(n){return function C3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class I3{enableIndexedDbPersistence(e,t){return function RG(n,e){DF(n=Sn(n,Ur));const t=Di(n),r=n._freezeSettings(),i=new _k;return IF(t,i,new sF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function MG(n){DF(n=Sn(n,Ur));const e=Di(n),t=n._freezeSettings(),r=new _k;return IF(e,r,new hG(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kG(n){if(n._initialized&&!n._terminated)throw new Ge(De.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{yield(t=(0,Re.Z)(function*(r){if(!Ps.C())return Promise.resolve();const i=r+"main";yield Ps.delete(i)}),function(r){return t.apply(this,arguments)})(Pt(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ah("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fF(n,e,t,r={}){var i;const o=(n=Sn(n,lE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&ah("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,c;if("string"==typeof r.mockUserToken)l=r.mockUserToken,c=Ei.MOCK_USER;else{l=(0,B.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ge(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ei(f)}n._authCredentials=new SD(new u0(l,c))}}(this._delegate,e,t,r)}enableNetwork(){return function NG(n){return function wG(n){return n.asyncQueue.enqueue((0,Re.Z)(function*(){const e=yield _F(n),t=yield Ak(n);return e.setNetworkEnabled(!0),function(r){const i=ht(r);return i._u.delete(0),sE(i)}(t)}))}(Di(n=Sn(n,Ur)))}(this._delegate)}disableNetwork(){return function OG(n){return function bG(n){return n.asyncQueue.enqueue((0,Re.Z)(function*(){const e=yield _F(n),t=yield Ak(n);return e.setNetworkEnabled(!1),(r=(0,Re.Z)(function*(i){const o=ht(i);o._u.add(0),yield E_(o),o.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Di(n=Sn(n,Ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function PG(n){return function(e){const t=new Ci;return e.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function eG(n,e){return rk.apply(this,arguments)}(yield Sk(e),t)})),t.promise}(Di(n=Sn(n,Ur)))}(this._delegate)}onSnapshotsInSync(e){return function h3(n,e){return function IG(n,e){const t=new LT(e);return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return r=yield x_(n),i=t,ht(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return r=yield x_(n),i=t,void ht(r).Ru.delete(i);var r,i}))}}(Di(n=Sn(n,Ur)),Rk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new M_(this,pF(this._delegate,e))}catch(t){throw Fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Kl(this,FT(this._delegate,e))}catch(t){throw Fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ls(this,function fG(n,e){if(n=Sn(n,lE),wk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ge(De.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new ic(Tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function g3(n,e,t){n=Sn(n,Ur);const r=Object.assign(Object.assign({},f3),t);return function(i){if(i.maxAttempts<1)throw new Ge(De.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const c=new Ci;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){const f=yield function wF(n){return UT(n).then(e=>e.datastore)}(i);new yG(i.asyncQueue,f,l,o,c).run()})),c.promise}(Di(n),i=>e(new p3(n,i)),r)}(this._delegate,t=>e(new YF(this,t)))}batch(){return Di(this._delegate),new QF(new zF(this._delegate,e=>R_(this._delegate,e)))}loadBundle(e){return function FG(n,e){const t=Di(n=Sn(n,Ur)),r=new SG;return function DG(n,e,t,r){const i=function(o,l){let c;return c="string"==typeof o?(new TextEncoder).encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return mF(f,m);if(f instanceof ArrayBuffer)return mF(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new pG(f,l);var f}(t,oE(e));n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){!function dG(n,e,t){const r=ht(n);var i;(i=(0,Re.Z)(function*(o,l,c){try{const f=yield l.getMetadata();if(yield function(x,M){const O=ht(x),W=Li(M.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",K=>O.Ns.getBundleMetadata(K,M.id)).then(K=>!!K&&K.createTime.compareTo(W)>=0)}(o.localStore,f))return yield l.close(),c._completeWith({taskState:"Success",documentsLoaded:(x=f).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);c._updateProgress(YO(f));const m=new G$(f,o.localStore,l.It);let _=yield l.mc();for(;_;){const x=yield m.Fu(_);x&&c._updateProgress(x),_=yield l.mc()}const C=yield m.complete();return yield Ch(o,C.Lu,void 0),yield function(x,M){const O=ht(x);return O.persistence.runTransaction("Save bundle","readwrite",W=>O.Ns.saveBundleMetadata(W,M))}(o.localStore,f),c._completeWith(C.progress),Promise.resolve(C.Bu)}catch(f){return ah("SyncEngine",`Loading bundle failed with ${f}`),c._failWith(f),Promise.resolve(new Set)}var x}),function(o,l,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Sk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function LG(n,e){return function TG(n,e){return n.asyncQueue.enqueue((0,Re.Z)(function*(){return function(t,r){const i=ht(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ns.getNamedQuery(o,r))}(yield VT(n),e)}))}(Di(n=Sn(n,Ur)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ls(this,t):null)}}class qT extends Fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new fE(new vd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Kl.forKey(t,this.firestore,null)}}class YF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qT(e)}get(e){const t=Tm(e);return this._delegate.get(t).then(r=>new pE(this._firestore,new Dh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tm(e);return r?(Uk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Tm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Tm(e);return this._delegate.delete(t),this}}class QF{constructor(e){this._delegate=e}set(e,t,r){const i=Tm(e);return r?(Uk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Tm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Tm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Dm(e,new qT(e),t),i.set(t,o)),o}}Dm.INSTANCES=new WeakMap;class Kl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kl(t,new Lr(t._delegate,r,new dt(e)))}static forKey(e,t,r){return new Kl(t,new Lr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new M_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new M_(this.firestore,pF(this._delegate,e))}catch(t){throw Fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,B.m9)(e))instanceof Lr&&gF(this._delegate,e)}set(e,t){t=Uk("DocumentReference.set",t);try{return t?jF(this._delegate,e,t):jF(this._delegate,e)}catch(r){throw Fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$F(this._delegate,e):$F(this._delegate,e,t,...r)}catch(i){throw Fs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function c3(n){return R_(Sn(n.firestore,Ur),[new pp(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=JF(e),r=XF(e,i=>new pE(this.firestore,new Dh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function o3(n){n=Sn(n,Lr);const e=Sn(n.firestore,Ur),t=Di(e),r=new Dp(e);return function EG(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(r=(0,Re.Z)(function*(i,o,l){try{const c=yield function(f,m){const _=ht(f);return _.persistence.runTransaction("read document","readonly",C=>_.localDocuments.getDocument(C,m))}(i,o);c.isFoundDocument()?l.resolve(c):c.isNoDocument()?l.resolve(null):l.reject(new Ge(De.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const f=D_(c,`Failed to get document '${o} from cache`);l.reject(f)}}),function(i,o,l){return r.apply(this,arguments)})(yield VT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Dh(e,r,n._key,i,new Im(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function s3(n){n=Sn(n,Lr);const e=Sn(n.firestore,Ur);return bF(Di(e),n._key,{source:"server"}).then(t=>Lk(e,n,t))}(this._delegate):function i3(n){n=Sn(n,Lr);const e=Sn(n.firestore,Ur);return bF(Di(e),n._key).then(t=>Lk(e,n,t))}(this._delegate),t.then(r=>new pE(this.firestore,new Dh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Kl(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function Fs(n,e,t){return n.message=n.message.replace(e,t),n}function JF(n){for(const e of n)if("object"==typeof e&&!Vk(e))return e;return{}}function XF(n,e){var t,r;let i;return i=Vk(n[0])?n[0]:Vk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HF(this._delegate,e._delegate)}}class gE extends pE{data(e){const t=this._delegate.data(e);return function AD(n,e){n||It()}(void 0!==t),t}}class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qT(e)}where(e,t,r){try{return new Ls(this.firestore,Cp(this._delegate,function qG(n,e,t){const r=e,i=zT("where",n);return new WG(i,r,t)}(e,t,r)))}catch(i){throw Fs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ls(this.firestore,Cp(this._delegate,function KG(n,e="asc"){const t=e,r=zT("orderBy",n);return new ZG(r,t)}(e,t)))}catch(r){throw Fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ls(this.firestore,Cp(this._delegate,function YG(n){return cF("limit",n),new NF("limit",n,"F")}(e)))}catch(t){throw Fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ls(this.firestore,Cp(this._delegate,function QG(n){return cF("limitToLast",n),new NF("limitToLast",n,"L")}(e)))}catch(t){throw Fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ls(this.firestore,Cp(this._delegate,function JG(...n){return new OF("startAt",n,!0)}(...e)))}catch(t){throw Fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ls(this.firestore,Cp(this._delegate,function XG(...n){return new OF("startAfter",n,!1)}(...e)))}catch(t){throw Fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ls(this.firestore,Cp(this._delegate,function e3(...n){return new FF("endBefore",n,!1)}(...e)))}catch(t){throw Fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ls(this.firestore,Cp(this._delegate,function t3(...n){return new FF("endAt",n,!0)}(...e)))}catch(t){throw Fs(t,"endAt()","Query.endAt()")}}isEqual(e){return bk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function l3(n){n=Sn(n,is);const e=Sn(n.firestore,Ur),t=Di(e),r=new Dp(e);return function CG(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(r=(0,Re.Z)(function*(i,o,l){try{const c=yield xT(i,o,!0),f=new XO(o,c.Hi),m=f.Wu(c.documents),_=f.applyChanges(m,!1);l.resolve(_.snapshot)}catch(c){const f=D_(c,`Failed to execute query '${o} against cache`);l.reject(f)}}),function(i,o,l){return r.apply(this,arguments)})(yield VT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ip(e,r,n,i))}(this._delegate):"server"===e?.source?function u3(n){n=Sn(n,is);const e=Sn(n.firestore,Ur),t=Di(e),r=new Dp(e);return EF(t,n._query,{source:"server"}).then(i=>new Ip(e,r,n,i))}(this._delegate):function a3(n){n=Sn(n,is);const e=Sn(n.firestore,Ur),t=Di(e),r=new Dp(e);return PF(n._query),EF(t,n._query).then(i=>new Ip(e,r,n,i))}(this._delegate),t.then(r=>new Bk(this.firestore,new Ip(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JF(e),r=XF(e,i=>new Bk(this.firestore,new Ip(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GF(this._delegate,t,r)}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}class T3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Bk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new T3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gE(this._firestore,r))})}isEqual(e){return HF(this._delegate,e._delegate)}}class M_ extends Ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kl(this.firestore,e):null}doc(e){try{return new Kl(this.firestore,void 0===e?FT(this._delegate):FT(this._delegate,e))}catch(t){throw Fs(t,"doc()","CollectionReference.doc()")}}add(e){return function d3(n,e){const t=Sn(n.firestore,Ur),r=FT(n),i=WT(n.converter,e);return R_(t,[jT(Em(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Kl(this.firestore,t))}isEqual(e){return gF(this._delegate,e._delegate)}withConverter(e){return new M_(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function Tm(n){return Sn(n,Lr)}class Hk{constructor(...e){this._delegate=new Ih(...e)}static documentId(){return new Hk(Gr.keyField().canonicalString())}isEqual(e){return(e=(0,B.m9)(e))instanceof Ih&&this._delegate._internalPath.isEqual(e._internalPath)}}class Am{constructor(e){this._delegate=e}static serverTimestamp(){const e=function v3(){return new Mk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Am(e)}static delete(){const e=function m3(){return new uE("deleteField")}();return e._methodName="FieldValue.delete",new Am(e)}static arrayUnion(...e){const t=function y3(...n){return new HG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Am(t)}static arrayRemove(...e){const t=function _3(...n){return new jG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Am(t)}static increment(e){const t=function w3(n){return new $G("increment",n)}(e);return t._methodName="FieldValue.increment",new Am(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const A3={Firestore:KF,GeoPoint:BT,Timestamp:Ar,Blob:fE,Transaction:YF,WriteBatch:QF,DocumentReference:Kl,DocumentSnapshot:pE,Query:Ls,QueryDocumentSnapshot:gE,QuerySnapshot:Bk,CollectionReference:M_,FieldPath:Hk,FieldValue:Am,setLogLevel:function D3(n){!function TD(n){td.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eL(n,e){return function R3(n,e=ty.z){return new di.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function jk(n,e){return eL(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function ZT(n,e){return jk(n,e).pipe(Fc(void 0),ny(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,c)=>{const f=i.find(_=>_.doc.ref.isEqual(l.ref)),m=t?.payload.docs.find(_=>_.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:l}})}),o}))}function tL(n,e,t){return ZT(n,t).pipe(Ht((r,i)=>function k3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function P3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $k(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $k(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $k(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Tb(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function $k(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function nL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function x3(n){(function S3(n,e){n.INTERNAL.registerComponent(new Va.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},A3)))})(n,(e,t)=>new KF(e,t,new I3)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Rf.Z);class rL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fc(void 0),ny(),S(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ht((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nL(e);return tL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return jk(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new iL(this.ref.doc(e),this.afs)}}class iL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=aL(r,t);return new rL(i,o,this.afs)}snapshotChanges(){return function M3(n,e){return eL(n,e).pipe(Fc(void 0),ny(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(Dn.iC)}}class N3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZT(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),S(t=>t.length>0),Dn.iC):ZT(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ht((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nL(e);return tL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return jk(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Dn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(Dn.iC)}}const oL=new h.OlP("angularfire2.enableFirestorePersistence"),sL=new h.OlP("angularfire2.firestore.persistenceSettings"),O3=new h.OlP("angularfire2.firestore.settings"),F3=new h.OlP("angularfire2.firestore.use-emulator");function aL(n,e=(t=>t)){return{query:e(n),ref:n}}let KT=(()=>{class n{constructor(t,r,i,o,l,c,f,m,_,C,x,M,O,W,K,te,_e){this.schedulers=f;const ke=(0,wi.on)(t,c,r),Ne=_;C&&Sg(ke,c,x,O,W,K,M,te),[this.firestore,this.persistenceEnabled$]=(0,wi.cc)(`${ke.name}.firestore`,"AngularFirestore",ke.name,()=>{const ut=c.runOutsideAngular(()=>ke.firestore());if(o&&ut.settings(o),Ne&&ut.useEmulator(...Ne),i&&!jr(l)){const at=()=>{try{return(0,En.D)(ut.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(Gt){return typeof console<"u"&&console.warn(Gt),Et(!1)}};return[ut,c.runOutsideAngular(at)]}return[ut,Et(!1)]},[o,Ne,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=aL(i,r),c=this.schedulers.ngZone.run(()=>o);return new rL(c,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new N3(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new iL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wi.Dh),h.LFG(wi.xv,8),h.LFG(oL,8),h.LFG(O3,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(sL,8),h.LFG(F3,8),h.LFG(Ha,8),h.LFG(Cb,8),h.LFG(Ib,8),h.LFG(Sf,8),h.LFG(Ag,8),h.LFG(xf,8),h.LFG(TI,8),h.LFG(Af,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lL=(()=>{class n{constructor(){ey.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oL,useValue:!0},{provide:sL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[KT]}),n})(),yd=(()=>{class n{constructor(t,r){this.afauth=t,this.firestore=r,this.respuesta=!0}login(t,r){var i=this;return(0,Re.Z)(function*(){try{return yield i.afauth.signInWithEmailAndPassword(t,r)}catch(o){return console.log("error en login: ",o),null}})()}register(t,r,i,o){var l=this;return(0,Re.Z)(function*(){try{return yield l.afauth.createUserWithEmailAndPassword(t,r).then(c=>{console.log(c.user);const f=c.user,_={displayName:i.concat(o)};f.updateProfile(_)}).catch(c=>console.log(c))}catch(c){return console.log("error en login: ",c),null}})()}getUserLog(){return this.afauth.authState}estaLog(){return this.afauth.authState.subscribe(t=>t?(console.log("LOGEADO"),this.respuesta=!0,this.respuesta):(console.log("NO ESTA"),this.respuesta=!1,this.respuesta)),this.respuesta}logi(){return!0}logout(){this.afauth.signOut()}esAdmin(t){return this.firestore.collection("admins").doc(t).snapshotChanges().pipe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ha),h.LFG(KT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Sm=(()=>{class n extends uL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const _d=new h.OlP("NgValueAccessor"),V3={provide:_d,useExisting:(0,h.Gpc)(()=>Ap),multi:!0},H3=new h.OlP("CompositionEventMode");let Ap=(()=>{class n extends uL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function B3(){const n=H()?H().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(H3,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[h._Bn([V3]),h.qOj]}),n})();function Sp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const os=new h.OlP("NgValidators"),xp=new h.OlP("NgAsyncValidators");function pL(n){return Sp(n.value)?{required:!0}:null}function YT(n){return null}function wL(n){return null!=n}function bL(n){return(0,h.QGY)(n)?(0,En.D)(n):n}function EL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function CL(n,e){return e.map(t=>t(n))}function IL(n){return n.map(e=>function G3(n){return!n.validate}(e)?e:t=>e.validate(t))}function Gk(n){return null!=n?function DL(n){if(!n)return null;const e=n.filter(wL);return 0==e.length?null:function(t){return EL(CL(t,e))}}(IL(n)):null}function zk(n){return null!=n?function TL(n){if(!n)return null;const e=n.filter(wL);return 0==e.length?null:function(t){return function L3(...n){const e=(0,oo.jO)(n),{args:t,keys:r}=Mu(n),i=new di.y(o=>{const{length:l}=t;if(!l)return void o.complete();const c=new Array(l);let f=l,m=l;for(let _=0;_<l;_++){let C=!1;(0,Es.Xf)(t[_]).subscribe((0,cr.x)(o,x=>{C||(C=!0,m--),c[_]=x},()=>f--,void 0,()=>{(!f||!C)&&(m||o.next(r?Al(r,c):c),o.complete())}))}});return e?i.pipe(Pu(e)):i}(CL(t,e).map(bL)).pipe((0,yt.U)(EL))}}(IL(n)):null}function AL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function SL(n){return n._rawValidators}function xL(n){return n._rawAsyncValidators}function Wk(n){return n?Array.isArray(n)?n:[n]:[]}function QT(n,e){return Array.isArray(n)?n.includes(e):n===e}function RL(n,e){const t=Wk(e);return Wk(n).forEach(i=>{QT(t,i)||t.push(i)}),t}function ML(n,e){return Wk(e).filter(t=>!QT(n,t))}class kL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Gk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Us extends kL{get formDirective(){return null}get path(){return null}}class Rp extends kL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class PL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let k_=(()=>{class n extends PL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rp,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),P_=(()=>{class n extends PL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Us,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const mE="VALID",XT="INVALID",N_="PENDING",vE="DISABLED";function Yk(n){return(eA(n)?n.validators:n)||null}function OL(n){return Array.isArray(n)?Gk(n):n||null}function Qk(n,e){return(eA(e)?e.asyncValidators:n)||null}function FL(n){return Array.isArray(n)?zk(n):n||null}function eA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function LL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function UL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})}class tA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=OL(this._rawValidators),this._composedAsyncValidatorFn=FL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mE}get invalid(){return this.status===XT}get pending(){return this.status==N_}get disabled(){return this.status===vE}get enabled(){return this.status!==vE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=OL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=FL(e)}addValidators(e){this.setValidators(RL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ML(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ML(e,this._rawAsyncValidators))}hasValidator(e){return QT(this._rawValidators,e)}hasAsyncValidator(e){return QT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=N_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mE||this.status===N_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vE:mE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=N_,this._hasOwnPendingAsyncValidator=!0;const t=bL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?vE:this.errors?XT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(N_)?N_:this._anyControlsHaveStatus(XT)?XT:mE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){eA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class yE extends tA{constructor(e,t,r){super(Yk(t),Qk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){UL(this,0,e),Object.keys(e).forEach(r=>{LL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class VL extends yE{}function nA(n,e){return[...e.path,n]}function _E(n,e){Jk(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function J3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BL(n,e)})}(n,e),function ez(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function X3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Q3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rA(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function iA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jk(n,e){const t=SL(n);null!==e.validator?n.setValidators(AL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=xL(n);null!==e.asyncValidator?n.setAsyncValidators(AL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();iA(e._rawValidators,i),iA(e._rawAsyncValidators,i)}function oA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=SL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=xL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return iA(e._rawValidators,r),iA(e._rawAsyncValidators,r),t}function BL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HL(n,e){Jk(n,e)}function Xk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function $L(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function eP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Ap?t=o:function rz(n){return Object.getPrototypeOf(n.constructor)===Sm}(o)?r=o:i=o}),i||r||t||null}const oz={provide:Us,useExisting:(0,h.Gpc)(()=>bE)},wE=(()=>Promise.resolve())();let bE=(()=>{class n extends Us{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new yE({},Gk(t),zk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),_E(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wE.then(()=>{const r=this._findContainer(t.path),i=new yE({});HL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){wE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,$L(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(os,10),h.Y36(xp,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([oz]),h.qOj]}),n})();function GL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const EE=class extends tA{constructor(e=null,t,r){super(Yk(t),Qk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},lz={provide:Rp,useExisting:(0,h.Gpc)(()=>sA)},ZL=(()=>Promise.resolve())();let sA=(()=>{class n extends Rp{constructor(t,r,i,o,l){super(),this._changeDetectorRef=l,this.control=new EE,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=eP(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Xk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_E(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ZL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);ZL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nA(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Us,9),h.Y36(os,10),h.Y36(xp,10),h.Y36(_d,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([lz]),h.qOj,h.TTD]}),n})(),O_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const uz={provide:_d,useExisting:(0,h.Gpc)(()=>tP),multi:!0};let tP=(()=>{class n extends Sm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([uz]),h.qOj]}),n})(),KL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const nP=new h.OlP("NgModelWithFormControlWarning"),pz={provide:Us,useExisting:(0,h.Gpc)(()=>F_)};let F_=(()=>{class n extends Us{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return _E(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){rA(t.control||null,t,!1),function iz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,$L(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(rA(r||null,t),(n=>n instanceof EE)(i)&&(_E(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);HL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function tz(n,e){return oA(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jk(this.form,this),this._oldForm&&oA(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(os,10),h.Y36(xp,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([pz]),h.qOj,h.TTD]}),n})();const vz={provide:Rp,useExisting:(0,h.Gpc)(()=>CE)};let CE=(()=>{class n extends Rp{constructor(t,r,i,o,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=eP(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Xk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return nA(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Us,13),h.Y36(os,10),h.Y36(xp,10),h.Y36(_d,10),h.Y36(nP,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([vz]),h.qOj,h.TTD]}),n})(),xm=(()=>{class n{constructor(){this._validator=YT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Tz={provide:os,useExisting:(0,h.Gpc)(()=>Rm),multi:!0};let Rm=(()=>{class n extends xm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>pL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Tz]),h.qOj]}),n})();const Mz={provide:os,useExisting:(0,h.Gpc)(()=>aA),multi:!0};let aA=(()=>{class n extends xm{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function _L(n){if(!n)return YT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Sp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[h._Bn([Mz]),h.qOj]}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[KL]}),n})(),kz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[c2]}),n})(),d2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nP,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[c2]}),n})();class h2 extends tA{constructor(e,t,r){super(Yk(t),Qk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){UL(this,0,e),e.forEach((r,i)=>{LL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function f2(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let aP=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return f2(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new yE(i,o)}record(t,r=null){const i=this._reduceControls(t);return new VL(i,r)}control(t,r,i){let o={};return this.useNonNullable?(f2(r)?o=r:(o.validators=r,o.asyncValidators=i),new EE(t,{...o,nonNullable:!0})):new EE(t,r,i)}array(t,r,i){const o=t.map(l=>this._createControl(l));return new h2(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof EE||t instanceof tA?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:d2}),n})(),lA=(()=>{class n{constructor(t){this.firestore=t}agregar(t){this.firestore.collection("objetos").add(t).then(r=>{console.log(r)})}verObjetos(){return this.firestore.collection("objetos").snapshotChanges()}verObjetosOder(){return this.firestore.collection("objetos",t=>t.orderBy("estado").limit(4)).snapshotChanges()}verObjetos2(){return this.firestore.collection("objetos",t=>t.where("estado","==",0)).snapshotChanges()}getObjetoByID(t){return this.firestore.collection("objetos").doc(t).snapshotChanges().pipe()}agregarCalendario(t){this.firestore.collection("calendario").add(t).then(r=>{console.log(r)})}setEspera(t,r){return console.log(r),this.firestore.collection("objetos").doc(t).update({estado:2,codigo:r})}setCode(t,r){return this.firestore.collection("objetos").doc(t).update({codigo:r})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(KT))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pz=function(){return["/enEspera"]};function Nz(n,e){1&n&&(h.TgZ(0,"li")(1,"a",5),h._uU(2,"En Espera"),h.qZA()()),2&n&&(h.xp6(1),h.Q6J("routerLink",h.DdM(1,Pz)))}const Oz=function(){return["/reclamados"]};function Fz(n,e){1&n&&(h.TgZ(0,"li")(1,"a",5),h._uU(2,"Reclamados"),h.qZA()()),2&n&&(h.xp6(1),h.Q6J("routerLink",h.DdM(1,Oz)))}const Lz=function(){return["/reportar"]};function Uz(n,e){1&n&&(h.TgZ(0,"li")(1,"a",5),h._uU(2,"Reportar"),h.qZA()()),2&n&&(h.xp6(1),h.Q6J("routerLink",h.DdM(1,Lz)))}const Vz=function(){return["/calendario"]};function Bz(n,e){1&n&&(h.TgZ(0,"li")(1,"a",5),h._uU(2,"calendario"),h.qZA()()),2&n&&(h.xp6(1),h.Q6J("routerLink",h.DdM(1,Vz)))}function Hz(n,e){if(1&n&&(h.TgZ(0,"div")(1,"a",9),h._uU(2),h.qZA()()),2&n){const t=e.ngIf;h.xp6(2),h.hij(" ",t.email,"")}}const jz=function(){return["/iniciarSesion"]},$z=function(){return["/registrarse"]};function Gz(n,e){1&n&&(h.TgZ(0,"ul")(1,"li")(2,"a",5),h._uU(3,"Iniciar Sesion"),h.qZA()()(),h.TgZ(4,"ul")(5,"li")(6,"a",5),h._uU(7,"Registrarse"),h.qZA()()()),2&n&&(h.xp6(2),h.Q6J("routerLink",h.DdM(2,jz)),h.xp6(4),h.Q6J("routerLink",h.DdM(3,$z)))}const zz=function(){return["/objetos"]},Wz=function(){return["/perfil"]};let uc=(()=>{class n{constructor(t,r,i){this.authService=t,this.fireAuth=r,this.objetosService=i,this.logeado=this.authService.getUserLog(),this.admin=!1,r.user.subscribe(o=>{this.user=o,this.authService.esAdmin(this.user.email).subscribe(l=>{this.objRef=l,l.payload.data()&&(this.admin=!0)})})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yd),h.Y36(Ha),h.Y36(lA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:24,vars:12,consts:[[1,"logo"],["type","checkbox","id","click"],["for","click",1,"menu-btn"],[1,"fas","fa-bars"],["href",""],["routerLinkActive","router-link-active",3,"routerLink"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["negativo",""],["routerLink","/perfil",1,"navbar-brand"]],template:function(t,r){if(1&t&&(h.TgZ(0,"nav")(1,"div",0),h._uU(2,"Brand"),h.qZA(),h._UZ(3,"input",1),h.TgZ(4,"label",2),h._UZ(5,"i",3),h.qZA(),h.TgZ(6,"ul")(7,"li")(8,"a",4),h._uU(9,"Inicio"),h.qZA()(),h.TgZ(10,"li")(11,"a",5),h._uU(12,"Objetos"),h.qZA()(),h.YNc(13,Nz,3,2,"li",6),h.YNc(14,Fz,3,2,"li",6),h.YNc(15,Uz,3,2,"li",6),h.YNc(16,Bz,3,2,"li",6),h.TgZ(17,"li")(18,"a",5),h._uU(19,"Perfil"),h.qZA()()(),h.YNc(20,Hz,3,1,"div",7),h.ALo(21,"async"),h.YNc(22,Gz,8,4,"ng-template",null,8,h.W1O),h.qZA()),2&t){const i=h.MAs(23);h.xp6(11),h.Q6J("routerLink",h.DdM(10,zz)),h.xp6(2),h.Q6J("ngIf",r.admin),h.xp6(1),h.Q6J("ngIf",r.admin),h.xp6(1),h.Q6J("ngIf",r.admin),h.xp6(1),h.Q6J("ngIf",r.admin),h.xp6(2),h.Q6J("routerLink",h.DdM(11,Wz)),h.xp6(2),h.Q6J("ngIf",h.lcZ(21,8,r.logeado))("ngIfElse",i)}},dependencies:[jn,vg,yg,rl],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}nav[_ngcontent-%COMP%]{display:flex;height:120px;width:100%;background:#337ab7;align-items:center;justify-content:space-between;padding:0 50px 0 100px;flex-wrap:wrap}nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;font-size:35px;font-weight:600}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 5px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2f2f2;text-decoration:none;font-size:18px;font-weight:500;padding:8px 15px;border-radius:5px;letter-spacing:1px;transition:all .3s ease}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#111;background:#fff}nav[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:22px;cursor:pointer;display:none}input[type=checkbox][_ngcontent-%COMP%]{display:none}@media (max-width: 1000px){nav[_ngcontent-%COMP%]{padding:0 40px 0 50px}}@media (max-width: 920px){nav[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block}#click[_ngcontent-%COMP%]:checked ~ .menu-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:"\\f00d"}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:fixed;top:80px;left:-100%;background:#111;height:100vh;width:100%;text-align:center;display:block;transition:all .3s ease}#click[_ngcontent-%COMP%]:checked ~ ul[_ngcontent-%COMP%]{left:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;margin:40px 0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:-100%;display:block;font-size:20px;transition:.6s cubic-bezier(.68,-.55,.265,1.55)}#click[_ngcontent-%COMP%]:checked ~ ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:none;color:#0ff}}.content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;z-index:-1;width:100%;padding:0 30px;color:#1b1b1b}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:40px;font-weight:700}']}),n})(),qz=(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r,this.usuario={email:"",password:""}}Ingresar(){const{email:t,password:r}=this.usuario;""!=t?t.match("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")?""!=r?r.length>=6?setTimeout(()=>{this.AuthService.login(t,r).then(o=>{o||ho().fire("Error al iniciar sesion, ingresar credenciales correctas"),ho().fire("Ingreso correctamente!"),this.router.navigate([""])})},1e3):ho().fire("La contrase\xf1a es demaciado corta"):ho().fire("El campo CONTRASE\xd1A esta vacio!"):ho().fire("El campo EMAIL no tiene el formato correcto!"):ho().fire("El campo EMAIL esta vacio!")}cerrarSesion(){this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yd),h.Y36(Xn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:2,consts:[[1,"container","card-body"],[1,"row"],[1,"col-lg-10","col-xl-9","mx-auto"],[1,"card","flex-row","my-5","border-0","shadow","rounded-3","overflow-hidden"],[1,"card-img-left","d-none","d-md-flex"],[1,"card-body","p-4","p-sm-5"],[1,"card-title","text-center","mb-5","fw-light","fs-5"],[1,"form-floating","mb-3"],["required","","pattern","^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$","type","email","name","floatingInputEmail","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInputEmail"],["type","password","name","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"d-grid","mb-2"],["type","submit",1,"btn","btn-primary","btn-login","fw-bold","text-uppercase",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),h._UZ(5,"div",4),h.TgZ(6,"div",5)(7,"h5",6),h._uU(8,"Iniciar Sesion"),h.qZA(),h.TgZ(9,"form")(10,"div",7)(11,"input",8),h.NdJ("ngModelChange",function(o){return r.usuario.email=o}),h.qZA(),h.TgZ(12,"label",9),h._uU(13,"direccion de Email"),h.qZA()(),h.TgZ(14,"div",7)(15,"input",10),h.NdJ("ngModelChange",function(o){return r.usuario.password=o}),h.qZA(),h.TgZ(16,"label",11),h._uU(17,"Contrase\xf1a"),h.qZA()(),h._UZ(18,"hr"),h.TgZ(19,"div",12)(20,"button",13),h.NdJ("click",function(){return r.Ingresar()}),h._uU(21,"Iniciar Sesion"),h.qZA()()()()()()()()),2&t&&(h.xp6(11),h.Q6J("ngModel",r.usuario.email),h.xp6(4),h.Q6J("ngModel",r.usuario.password))},dependencies:[O_,Ap,k_,P_,Rm,aA,sA,bE,uc],styles:[".wrapper[_ngcontent-%COMP%]{margin-top:80px;margin-bottom:80px}.form-signin[_ngcontent-%COMP%]{max-width:500px;padding:15px 35px 45px;margin:0 auto;background-color:#fff;border:1px solid rgba(0,0,0,.1)}.form-signin[_ngcontent-%COMP%]   .form-signin-heading[_ngcontent-%COMP%], .form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-bottom:30px}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;font-size:16px;height:auto;padding:10px;box-sizing:border-box}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-left-radius:0;border-bottom-right-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:20px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})();function Zz(n,e){if(1&n&&(h.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div"),h._UZ(5,"img",9),h.qZA()()(),h.TgZ(6,"div",10)(7,"h5",11),h._uU(8),h.qZA(),h.TgZ(9,"div",12),h._uU(10),h.qZA()()()()),2&n){const t=e.$implicit;h.xp6(5),h.s9C("src",t.imagen,h.LSH),h.xp6(3),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.descripcion)}}let p2=(()=>{class n{constructor(t){this.objetosService=t}ngOnInit(){this.objetosService.verObjetosOder().subscribe(t=>{this.objetosS=t.map(r=>({rid:r.payload.doc.id,...r.payload.doc.data()}))})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-inicio"]],decls:9,vars:1,consts:[[1,"content"],[2,"height","150px"],[1,"container"],[1,"row"],["class","col-xl-3 col-md-6 mb-4 ",4,"ngFor","ngForOf"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-0","shadow",2,"height","400px","width","310px"],[1,""],[1,"bannerC"],["alt","",1,"imgtam",3,"src"],[1,"card-body","text-center"],[1,"card-title","mb-0"],[1,"card-text","text-black-50","mb-3"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0)(2,"div"),h._uU(3,"Objetos recientemente Reportados"),h.qZA(),h._UZ(4,"hr"),h.qZA(),h._UZ(5,"div",1),h.TgZ(6,"div",2)(7,"div",3),h.YNc(8,Zz,11,3,"div",4),h.qZA()()),2&t&&(h.xp6(8),h.Q6J("ngForOf",r.objetosS))},dependencies:[Hi,uc],styles:[".content[_ngcontent-%COMP%]{position:absolute;top:20%;left:25%}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:40px;font-weight:700}.imgtam[_ngcontent-%COMP%]{height:250px;width:310px}"]}),n})();function Kz(n,e){if(1&n&&(h.TgZ(0,"button",14),h._uU(1," RECLAMAR "),h.qZA()),2&n){const t=h.oxw().$implicit;h.MGl("routerLink","/reclamarO/",t.rid,"")}}function Yz(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,o=h.oxw();return h.KtG(o.reclamar(i.rid))}),h._uU(1,"En espera"),h.qZA()}}function Qz(n,e){if(1&n&&(h.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div"),h._UZ(5,"img",8),h.qZA()()(),h.TgZ(6,"div",9)(7,"h5",10),h._uU(8),h.qZA(),h.TgZ(9,"div",11),h._uU(10),h.qZA(),h.YNc(11,Kz,2,1,"button",12),h.YNc(12,Yz,2,0,"ng-template",null,13,h.W1O),h.qZA()()()),2&n){const t=e.$implicit,r=h.MAs(13);h.xp6(5),h.s9C("src",t.imagen,h.LSH),h.xp6(3),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.descripcion),h.xp6(1),h.Q6J("ngIf",0==t.estado)("ngIfElse",r)}}let Jz=(()=>{class n{constructor(t,r){this.objetosService=t,this.router=r}ngOnInit(){this.objetosService.verObjetos().subscribe(t=>{this.objetosS=t.map(r=>({rid:r.payload.doc.id,...r.payload.doc.data()}))})}reclamar(t){var r=new Date;r.setDate(r.getDate()+3),this.router.navigate(["/reclamarO/a"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lA),h.Y36(Xn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-objetos-e"]],decls:5,vars:1,consts:[[2,"height","150px"],[1,"container"],[1,"row"],["class","col-xl-3 col-md-6 mb-4 ",4,"ngFor","ngForOf"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-0","shadow",2,"height","400px","width","310px"],[1,""],[1,"bannerC"],["alt","",1,"imgtam",3,"src"],[1,"card-body","text-center"],[1,"card-title","mb-0"],[1,"card-text","text-black-50","mb-3"],["class","btn btn-primary",3,"routerLink",4,"ngIf","ngIfElse"],["Enespera",""],[1,"btn","btn-primary",3,"routerLink"],["disabled","",1,"btn","btn-warning",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar")(1,"div",0),h.TgZ(2,"div",1)(3,"div",2),h.YNc(4,Qz,14,5,"div",3),h.qZA()()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.objetosS))},dependencies:[Hi,jn,Qd,uc],styles:[".imgtam[_ngcontent-%COMP%]{height:250px;width:310px}"]}),n})(),Xz=(()=>{class n{constructor(t,r,i){this.authService=t,this.fireAuth=r,this.router=i,r.user.subscribe(o=>{this.user=o})}ngOnInit(){}cerrarSesion(){this.authService.logout(),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yd),h.Y36(Ha),h.Y36(Xn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-perfil"]],decls:38,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[3,"click"],["href","",1,"aaa"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"col-md-12"],[1,"media"],["src","https://firebasestorage.googleapis.com/v0/b/objetosperdidos-ab4d3.appspot.com/o/unnamed.jpg?alt=media&token=54dd85ad-3c7f-40d7-8dd3-337d76a78c6a","alt","{}",1,"align-self-start","mr-5","img-thumbnail","rounded-circle",2,"height","200px"],[1,"media-body"],[1,"list-group",2,"width","60vh"],[1,"list-group-item","active"],[1,"list-group-item","list-group-item-secondary"],[2,"height","5px"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0)(2,"div",1)(3,"nav",2)(4,"div",3)(5,"ul",4),h._UZ(6,"hr"),h.TgZ(7,"li",5),h.NdJ("click",function(){return r.cerrarSesion()}),h.TgZ(8,"a",6),h._uU(9,"Cerrar Sesion"),h.qZA()()()()(),h.TgZ(10,"main",7)(11,"div",8)(12,"div",9)(13,"h1",10),h._uU(14,"Perfil de usuario"),h.qZA()(),h.TgZ(15,"div",1)(16,"div",11)(17,"div",12),h._UZ(18,"img",13),h.TgZ(19,"div",14),h._UZ(20,"hr"),h.TgZ(21,"ul",15)(22,"li",16),h._uU(23,"ID:"),h.qZA(),h.TgZ(24,"li",17),h._uU(25),h.qZA()(),h._UZ(26,"div",18),h.TgZ(27,"ul",15)(28,"li",16),h._uU(29,"EMAIL:"),h.qZA(),h.TgZ(30,"li",17),h._uU(31),h.qZA()(),h._UZ(32,"div",18),h.TgZ(33,"ul",15)(34,"li",16),h._uU(35,"EMAIL VERIFICADO:"),h.qZA(),h.TgZ(36,"li",17),h._uU(37),h.qZA()()()()()()()()()()),2&t&&(h.xp6(25),h.Oqu(r.user.uid),h.xp6(6),h.Oqu(r.user.email),h.xp6(6),h.Oqu(r.user.emailVerified))},dependencies:[uc],styles:[".aaa[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-size:18px;font-weight:500;padding:8px 15px;border-radius:5px;letter-spacing:1px;transition:all .3s ease;background-color:#337ab7}.aaa[_ngcontent-%COMP%]:hover{color:#111;background:#fff}"]}),n})(),eW=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return console.log(this.authService.estaLog()),this.authService.estaLog()?(console.log("esta log"),!0):(console.log("No est\xe1s logueado"),this.router.navigate(["/"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yd),h.LFG(Xn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g2="firebasestorage.googleapis.com",m2="storageBucket";class si extends B.ZR{constructor(e,t,r=0){super(lP(e),`Firebase Storage: ${t} (${lP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,si.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function lP(n){return"storage/"+n}function uP(){return new si("unknown","An unknown error occurred, please check the error payload for server response.")}function v2(){return new si("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function y2(){return new si("canceled","User canceled the upload/download.")}function _2(){return new si("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function L_(n){return new si("invalid-argument",n)}function w2(){return new si("app-deleted","The Firebase app was deleted.")}function b2(n){return new si("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function IE(n,e){return new si("invalid-format","String does not match format '"+n+"': "+e)}function DE(n){throw new si("internal-error","Internal error: "+n)}class ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ss.makeFromUrl(e,t)}catch{return new ss(e,"")}if(""===r.path)return r;throw function dW(n){return new si("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function m(Ne){Ne.path_=decodeURIComponent(Ne.path)}const C=t.replace(/[.]/g,"\\."),ke=[{regex:c,indices:{bucket:1,path:3},postModify:function o(Ne){"/"===Ne.path.charAt(Ne.path.length-1)&&(Ne.path_=Ne.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${C}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${t===g2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let Ne=0;Ne<ke.length;Ne++){const ut=ke[Ne],at=ut.regex.exec(e);if(at){let Dt=at[ut.indices.path];Dt||(Dt=""),r=new ss(at[ut.indices.bucket],Dt),ut.postModify(r);break}}if(null==r)throw function cW(n){return new si("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class mW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uA(n){return"string"==typeof n||n instanceof String}function E2(n){return cP()&&n instanceof Blob}function cP(){return typeof Blob<"u"&&!(0,B.UG)()}function dP(n,e,t,r){if(r<e)throw L_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw L_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Th(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function C2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Mp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Mp||(Mp={})),Mp))();function I2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class EW{constructor(e,t,r,i,o,l,c,f,m,_,C,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=C,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());!function _W(n){return void 0!==n}(f)?o():o(f)}catch(f){l(f)}else if(null!==c){const f=uP();f.serverResponse=c.getErrorText(),l(this.errorCallback_?this.errorCallback_(c,f):f)}else l(i.canceled?this.appDelete_?w2():y2():v2())};this.canceled_?t(0,new cA(!1,null,!0)):this.backoffId_=function vW(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function f(){return 2===c}let m=!1;function _(...K){m||(m=!0,e.apply(null,K))}function C(K){i=setTimeout(()=>{i=null,n(M,f())},K)}function x(){o&&clearTimeout(o)}function M(K,...te){if(m)return void x();if(K)return x(),void _.call(null,K,...te);if(f()||l)return x(),void _.call(null,K,...te);let ke;r<64&&(r*=2),1===c?(c=2,ke=0):ke=1e3*(r+Math.random()),C(ke)}let O=!1;function W(K){O||(O=!0,x(),!m&&(null!==i?(K||(c=2),clearTimeout(i),C(0)):K||(c=1)))}return C(0),o=setTimeout(()=>{l=!0,W(!0)},t),W}((r,i)=>{if(i)return void r(!1,new cA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Mp.NO_ERROR,f=o.getStatus();if((!c||I2(f,this.additionalRetryCodes_))&&this.retry){const _=o.getErrorCode()===Mp.ABORT;return void r(!1,new cA(!1,null,_))}const m=-1!==this.successCodes_.indexOf(f);r(!0,new cA(m,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function yW(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class cA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function xW(...n){const e=function SW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(cP())return new Blob(n);throw new si("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ka={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hP{constructor(e,t){this.data=e,this.contentType=t||null}}function fP(n,e){switch(n){case Ka.RAW:return new hP(D2(e));case Ka.BASE64:case Ka.BASE64URL:return new hP(T2(n,e));case Ka.DATA_URL:return new hP(function PW(n){const e=new A2(n);return e.base64?T2(Ka.BASE64,e.rest):function kW(n){let e;try{e=decodeURIComponent(n)}catch{throw IE(Ka.DATA_URL,"Malformed data URL.")}return D2(e)}(e.rest)}(e),function NW(n){return new A2(n).contentType}(e))}throw uP()}function D2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function T2(n,e){switch(n){case Ka.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw IE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ka.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw IE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function MW(n){if(typeof atob>"u")throw function gW(n){return new si("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:IE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class A2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw IE(Ka.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function OW(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class wd{constructor(e,t){let r=0,i="";E2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(E2(this.data_)){const i=function RW(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new wd(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new wd(r,!0)}}static getBlob(...e){if(cP()){const t=e.map(r=>r instanceof wd?r.data_:r);return new wd(xW.apply(null,t))}{const t=e.map(l=>uA(l)?fP(Ka.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new wd(i,!0)}}uploadData(){return this.data_}}function pP(n){let e;try{e=JSON.parse(n)}catch{return null}return function bW(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function S2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function UW(n,e){return e}class Vs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||UW}}let dA=null;function TE(){if(dA)return dA;const n=[];n.push(new Vs("bucket")),n.push(new Vs("generation")),n.push(new Vs("metageneration")),n.push(new Vs("name","fullPath",!0));const t=new Vs("name");t.xform=function e(o,l){return function VW(n){return!uA(n)||n.length<2?n:S2(n)}(l)},n.push(t);const i=new Vs("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Vs("timeCreated")),n.push(new Vs("updated")),n.push(new Vs("md5Hash",null,!0)),n.push(new Vs("cacheControl",null,!0)),n.push(new Vs("contentDisposition",null,!0)),n.push(new Vs("contentEncoding",null,!0)),n.push(new Vs("contentLanguage",null,!0)),n.push(new Vs("contentType",null,!0)),n.push(new Vs("metadata","customMetadata",!0)),dA=n,dA}function x2(n,e,t){const r=pP(e);return null===r?null:function HW(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return function BW(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new ss(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function gP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const R2="prefixes";class bd{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ed(n){if(!n)throw uP()}function hA(n,e){return function t(r,i){const o=x2(n,i,e);return Ed(null!==o),o}}function U_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function lW(){return new si("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function aW(){return new si("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function sW(n){return new si("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function uW(n){return new si("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function AE(n){const e=U_(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function oW(n){return new si("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function k2(n,e,t){const i=Th(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new bd(i,"GET",hA(n,t),l);return c.errorHandler=AE(e),c}function qW(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const c=Th(e.bucketOnlyServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,_=new bd(c,"GET",function zW(n,e){return function t(r,i){const o=function GW(n,e,t){const r=pP(t);return null===r?null:function $W(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[R2])for(const i of t[R2]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new ss(e,o));r.prefixes.push(l)}if(t.items)for(const i of t.items){const o=n._makeStorageReference(new ss(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Ed(null!==o),o}}(n,e.bucket),m);return _.urlParams=o,_.errorHandler=U_(e),_}function N2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function QW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class fA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function mP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ed(!1)}return Ed(!!t&&-1!==(e||["active"]).indexOf(t)),t}const tq={STATE_CHANGED:"state_changed"},Bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vP(n){switch(n){case"running":case"pausing":case"canceling":return Bs.RUNNING;case"paused":return Bs.PAUSED;case"success":return Bs.SUCCESS;case"canceled":return Bs.CANCELED;default:return Bs.ERROR}}class nq{constructor(e,t,r){if(function wW(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function V_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class iq extends class rq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw DE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw DE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw DE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw DE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw DE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function cc(){return new iq}class U2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=TE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(I2(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=v2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function JW(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=N2(e,r,i),c={name:l.fullPath},f=Th(o,n.host,n._protocol),_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},C=gP(l,t),O=new bd(f,"POST",function M(W){let K;mP(W);try{K=W.getResponseHeader("X-Goog-Upload-URL")}catch{Ed(!1)}return Ed(uA(K)),K},n.maxUploadRetryTime);return O.urlParams=c,O.headers=_,O.body=C,O.errorHandler=U_(e),O}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cc,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function XW(n,e,t,r){const f=new bd(t,"POST",function o(m){const _=mP(m,["active","final"]);let C=null;try{C=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ed(!1)}C||Ed(!1);const x=Number(C);return Ed(!isNaN(x)),new fA(x,r.size(),"final"===_)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=U_(e),f}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,cc,t,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new fA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function eq(n,e,t,r,i,o,l,c){const f=new fA(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function fW(){return new si("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const m=f.total-f.current;let _=m;i>0&&(_=Math.min(_,i));const C=f.current;let M="";M=0===_?"finalize":m===_?"upload, finalize":"upload";const O={"X-Goog-Upload-Command":M,"X-Goog-Upload-Offset":`${f.current}`},W=r.slice(C,C+_);if(null===W)throw _2();const ke=new bd(t,"POST",function K(Ne,ut){const at=mP(Ne,["active","final"]),Gt=f.current+_,Dt=r.size();let wr;return wr="final"===at?hA(e,o)(Ne,ut):null,new fA(Gt,Dt,"final"===at,wr)},e.maxUploadRetryTime);return ke.headers=O,ke.body=W.uploadData(),ke.progressCallback=c||null,ke.errorHandler=U_(n),ke}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const c=this._ref.storage._makeRequest(l,cc,i,o,!1);this._request=c,c.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=k2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,cc,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function O2(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function c(){let ke="";for(let Ne=0;Ne<2;Ne++)ke+=Math.random().toString().slice(2);return ke}();l["Content-Type"]="multipart/related; boundary="+f;const m=N2(e,r,i),_=gP(m,t),M=wd.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_+"\r\n--"+f+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===M)throw _2();const O={name:m.fullPath},W=Th(o,n.host,n._protocol),te=n.maxUploadRetryTime,_e=new bd(W,"POST",hA(n,t),te);return _e.urlParams=O,_e.headers=l,_e.body=M.uploadData(),_e.errorHandler=U_(e),_e}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cc,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=y2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=vP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new nq(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(vP(this._state)){case Bs.SUCCESS:V_(this._resolve.bind(null,this.snapshot))();break;case Bs.CANCELED:case Bs.ERROR:V_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vP(this._state)){case Bs.RUNNING:case Bs.PAUSED:e.next&&V_(e.next.bind(e,this.snapshot))();break;case Bs.SUCCESS:e.complete&&V_(e.complete.bind(e))();break;default:e.error&&V_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Mm{constructor(e,t){this._service=e,this._location=t instanceof ss?t:ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mm(e,t)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S2(this._location.path)}get storage(){return this._service}get parent(){const e=function FW(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ss(this._location.bucket,e);return new Mm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw b2(e)}}function B2(n,e,t){return yP.apply(this,arguments)}function yP(){return yP=(0,Re.Z)(function*(n,e,t){const i=yield H2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield B2(n,e,i.nextPageToken))}),yP.apply(this,arguments)}function H2(n,e){null!=e&&"number"==typeof e.maxResults&&dP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,cc)}function mq(n){n._throwIfRoot("getDownloadURL");const e=function ZW(n,e,t){const i=Th(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new bd(i,"GET",function WW(n,e){return function t(r,i){const o=x2(n,i,e);return Ed(null!==o),function jW(n,e,t,r){const i=pP(e);if(null===i||!uA(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(m=>{const C=n.fullPath;return Th("/b/"+l(n.bucket)+"/o/"+l(C),t,r)+C2({alt:"media",token:m})})[0]}(o,i,n.host,n._protocol)}}(n,t),l);return c.errorHandler=AE(e),c}(n.storage,n._location,TE());return n.storage.makeRequestWithTokens(e,cc).then(t=>{if(null===t)throw function pW(){return new si("no-download-url","The given file does not have any download URLs.")}();return t})}function j2(n,e){const t=function LW(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ss(n._location.bucket,t);return new Mm(n.storage,r)}function $2(n,e){if(n instanceof _P){const t=n;if(null==t._bucket)throw function hW(){return new si("no-default-bucket","No default bucket found. Did you set the '"+m2+"' property when initializing the app?")}();const r=new Mm(t,t._bucket);return null!=e?$2(r,e):r}return void 0!==e?j2(n,e):n}function wq(n,e){if(e&&function yq(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _P)return function _q(n,e){return new Mm(n,e)}(n,e);throw L_("To use ref(service, url), the first argument must be a Storage instance.")}return $2(n,e)}function G2(n,e){const t=e?.[m2];return null==t?null:ss.makeFromBucketSpec(t,n)}class _P{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=g2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ss.makeFromBucketSpec(i,this._host):G2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ss.makeFromBucketSpec(this._url,e):G2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Re.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Re.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new mW(w2());{const l=function AW(n,e,t,r,i,o,l=!0){const c=C2(n.urlParams),f=n.url+c,m=Object.assign({},n.headers);return function DW(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function CW(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function IW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,o),function TW(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new EW(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Re.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const z2="@firebase/storage";function Z2(n,e){return wq(n=(0,B.m9)(n),e)}function Rq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _P(t,r,i,e,fo.SDK_VERSION)}!function Mq(){(0,fo._registerComponent)(new Va.wA("storage",Rq,"PUBLIC").setMultipleInstances(!0)),(0,fo.registerVersion)(z2,"0.9.14",""),(0,fo.registerVersion)(z2,"0.9.14","esm2017")}();class pA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Y2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new pA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new pA(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?l=>t(new pA(l,this,this._ref)):{next:t.next?l=>t.next(new pA(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class Q2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ah(e,this._service))}get items(){return this._delegate.items.map(e=>new Ah(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ah{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function xq(n,e){return j2(n,e)}(this._delegate,e);return new Ah(t,this.storage)}get root(){return new Ah(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ah(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Y2(function Eq(n,e,t){return function dq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new U2(n,new wd(e),t)}(n=(0,B.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ka.RAW,r){this._throwIfRoot("putString");const i=fP(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new Y2(new U2(this._delegate,new wd(i.data,!0),o),this)}listAll(){return function Tq(n){return function fq(n){const e={prefixes:[],items:[]};return B2(n,e).then(()=>e)}(n=(0,B.m9)(n))}(this._delegate).then(e=>new Q2(e,this.storage))}list(e){return function Dq(n,e){return H2(n=(0,B.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Q2(t,this.storage))}getMetadata(){return function Cq(n){return function pq(n){n._throwIfRoot("getMetadata");const e=k2(n.storage,n._location,TE());return n.storage.makeRequestWithTokens(e,cc)}(n=(0,B.m9)(n))}(this._delegate)}updateMetadata(e){return function Iq(n,e){return function gq(n,e){n._throwIfRoot("updateMetadata");const t=function KW(n,e,t,r){const o=Th(e.fullServerUrl(),n.host,n._protocol),c=gP(t,r),m=n.maxOperationRetryTime,_=new bd(o,"PATCH",hA(n,r),m);return _.headers={"Content-Type":"application/json; charset=utf-8"},_.body=c,_.errorHandler=AE(e),_}(n.storage,n._location,e,TE());return n.storage.makeRequestWithTokens(t,cc)}(n=(0,B.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Aq(n){return mq(n=(0,B.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Sq(n){return function vq(n){n._throwIfRoot("deleteObject");const e=function YW(n,e){const r=Th(e.fullServerUrl(),n.host,n._protocol),c=new bd(r,"DELETE",function l(f,m){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=AE(e),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,cc)}(n=(0,B.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw b2(e)}}class J2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(X2(e))throw L_("ref() expected a child path but got a URL, use refFromURL instead.");return new Ah(Z2(this._delegate,e),this)}refFromURL(e){if(!X2(e))throw L_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ss.makeFromUrl(e,this._delegate.host)}catch{throw L_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ah(Z2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function K2(n,e,t,r={}){!function bq(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,B.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function X2(n){return/^[A-Za-z]+:\/\//.test(n)}function Oq(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new J2(t,r)}function eU(n){const e=function Lq(n){return new di.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(function tW(n,e=ty.z){return(0,Or.e)((t,r)=>{let i=null,o=null,l=null;const c=()=>{if(i){i.unsubscribe(),i=null;const m=o;o=null,r.next(m)}};function f(){const m=l+n,_=e.now();if(_<m)return i=this.schedule(void 0,m-_),void r.add(i);c()}t.subscribe((0,cr.x)(r,m=>{o=m,l=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gA(n){return{getDownloadURL:()=>Et(void 0).pipe(Dn.fc,dr(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>Et(void 0).pipe(Dn.fc,dr(()=>n.getMetadata()),Dn.iC),delete:()=>(0,En.D)(n.delete()),child:e=>gA(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>eU(n.put(e,t)),putString:(e,t,r)=>eU(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}!function Fq(n){const e={TaskState:Bs,TaskEvent:tq,StringFormat:Ka,Storage:J2,Reference:Ah};n.INTERNAL.registerComponent(new Va.wA("storage-compat",Oq,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Rf.Z);const Uq=new h.OlP("angularfire2.storageBucket"),Vq=new h.OlP("angularfire2.storage.maxUploadRetryTime"),Bq=new h.OlP("angularfire2.storage.maxOperationRetryTime"),Hq=new h.OlP("angularfire2.storage.use-emulator");let tU=(()=>{class n{constructor(t,r,i,o,l,c,f,m,_,C){const x=(0,wi.on)(t,l,r);this.storage=(0,wi.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const M=l.runOutsideAngular(()=>x.storage(i||void 0)),O=_;return O&&M.useEmulator(...O),f&&M.setMaxUploadRetryTime(f),m&&M.setMaxOperationRetryTime(m),M},[f,m])}ref(t){return gA(this.storage.ref(t))}refFromURL(t){return gA(this.storage.refFromURL(t))}upload(t,r,i){return gA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wi.Dh),h.LFG(wi.xv,8),h.LFG(Uq,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(Vq,8),h.LFG(Bq,8),h.LFG(Hq,8),h.LFG(Af,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),$q=(()=>{class n{constructor(){ey.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[tU],imports:[jq]}),n})(),SE=(()=>{class n{constructor(t,r){this.firestore=t,this.storage=r}verObjetosEspera(){return this.firestore.collection("objetos",t=>t.where("estado","==",2)).snapshotChanges()}verObjetosReclamados(){return this.firestore.collection("objetos",t=>t.where("estado","==",4)).snapshotChanges()}reportarObjeto(t,r){return new Promise((i,o)=>{this.firestore.collection("objetos").add(t).then(l=>{console.log(l.id),console.log(r),this.subirImg(r,l.id)},l=>{o(l)})})}subirImg(t,r){const i=`imagenes/${r}`,o=this.storage.ref(i);this.storage.upload(i,t).snapshotChanges().pipe(Ds(()=>{o.getDownloadURL().subscribe(c=>{console.log("finalize",c),this.firestore.collection("objetos").doc(r).update({imagen:c})})})).subscribe(c=>{})}cancelarEspera(t){this.firestore.collection("objetos").doc(t).update({estado:0})}reclamar(t){this.firestore.collection("objetos").doc(t).update({estado:4})}getCalendario(){return this.firestore.collection("calendario").snapshotChanges()}getCalendarioObjeto(t){return this.firestore.collection("calendario",r=>r.where("idObjeto","==",t)).snapshotChanges().pipe()}deleteCalendari(t){return this.firestore.collection("calendario").doc(t).delete()}getObjetoByID(t){return this.firestore.collection("objetos").doc(t).snapshotChanges().pipe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(KT),h.LFG(tU))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,o=h.oxw(2);return h.KtG(o.showInfo(i.rid.toString()))}),h._uU(1," Ver peticion "),h.qZA()}}function zq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"div",19)(4,"h3"),h._uU(5,"DESCRIPCION"),h.qZA(),h.TgZ(6,"ul",20)(7,"li",21),h._uU(8,"OBJETO:"),h.qZA(),h.TgZ(9,"li",22),h._uU(10),h.qZA()(),h._UZ(11,"hr"),h.TgZ(12,"ul",20)(13,"li",21),h._uU(14,"PEDIDO POR:"),h.qZA(),h.TgZ(15,"li",22),h._uU(16),h.qZA()(),h._UZ(17,"hr"),h.TgZ(18,"ul",20)(19,"li",21),h._uU(20,"TELEFONO DE CONTACTO:"),h.qZA(),h.TgZ(21,"li",22),h._uU(22),h.qZA()(),h._UZ(23,"hr"),h.TgZ(24,"ul",20)(25,"li",21),h._uU(26,"MENSAJE:"),h.qZA(),h.TgZ(27,"li",22),h._uU(28),h.qZA()(),h._UZ(29,"hr"),h.TgZ(30,"ul",20)(31,"li",21),h._uU(32,"FECHA DE ENCUENTRO:"),h.qZA(),h.TgZ(33,"li",22),h._uU(34),h.qZA()(),h._UZ(35,"hr"),h.qZA()()(),h.TgZ(36,"button",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(4);return h.KtG(i.menos())}),h._uU(37," Ver Menos "),h.qZA()()}if(2&n){const t=h.oxw(4);h.xp6(10),h.Oqu(t.peticion[0].title),h.xp6(6),h.Oqu(t.peticion[0].nombreU),h.xp6(6),h.Oqu(t.peticion[0].telefono),h.xp6(6),h.Oqu(t.peticion[0].mensaje),h.xp6(6),h.Oqu(t.peticion[0].date)}}function Wq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2).$implicit,o=h.oxw(2);return h.KtG(o.showInfo2(i.rid.toString()))}),h._uU(1," Ver peticion "),h.qZA()}}function qq(n,e){if(1&n&&(h.YNc(0,zq,38,5,"div",17),h.YNc(1,Wq,2,0,"ng-template",null,18,h.W1O),h._UZ(3,"div")),2&n){const t=h.MAs(2),r=h.oxw().$implicit,i=h.oxw(2);h.Q6J("ngIf",r.rid.toString()==i.activo)("ngIfElse",t)}}function Zq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div"),h._UZ(5,"img",9),h.qZA()()(),h.TgZ(6,"div",10)(7,"h5",11),h._uU(8),h.qZA(),h.TgZ(9,"div",12),h._uU(10),h.qZA(),h.TgZ(11,"button",13),h._uU(12," RECLAMAR "),h.qZA(),h.TgZ(13,"button",14),h.NdJ("click",function(){const o=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.cancelar(o.rid))}),h._uU(14," CANCELAR "),h.qZA(),h._UZ(15,"hr"),h.YNc(16,Gq,2,0,"button",15),h.YNc(17,qq,4,2,"ng-template",null,16,h.W1O),h.qZA()()()}if(2&n){const t=e.$implicit,r=h.MAs(18),i=h.oxw(2);h.xp6(5),h.s9C("src",t.imagen,h.LSH),h.xp6(3),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.descripcion),h.xp6(1),h.MGl("routerLink","/confirmar/",t.rid,""),h.xp6(5),h.Q6J("ngIf",!i.info)("ngIfElse",r)}}function Kq(n,e){if(1&n&&(h.TgZ(0,"div",2)(1,"div",3),h.YNc(2,Zq,19,6,"div",4),h.qZA()()),2&n){const t=h.oxw();h.xp6(2),h.Q6J("ngForOf",t.objetosS)}}let Yq=(()=>{class n{constructor(t,r,i,o){this.objetosService=t,this.router=r,this.authService=i,this.fireAuth=o,this.admin=!1,this.altura=600,this.info=!1,o.user.subscribe(l=>{this.user=l,this.authService.esAdmin(this.user.email).subscribe(c=>{this.ref=c,c.payload.data()&&(this.admin=!0)})})}ngOnInit(){this.objetosService.verObjetosEspera().subscribe(t=>{this.objetosS=t.map(r=>({rid:r.payload.doc.id,...r.payload.doc.data()}))})}cancelar(t){this.objetosService.cancelarEspera(t),this.objetosService.getCalendarioObjeto(t).subscribe(r=>{this.peticion=r.map(i=>(this.objetosService.deleteCalendari(i.payload.doc.id),{rid:i.payload.doc.id,...i.payload.doc.data()}))})}reclamar(t){this.router.navigate(["/confirmar"])}showInfo(t){this.activo=t,setTimeout(()=>{this.info=!this.info},200),this.objetosService.getCalendarioObjeto(t).subscribe(r=>{this.peticion=r.map(i=>({rid:i.payload.doc.id,...i.payload.doc.data()}))})}showInfo2(t){this.activo=t,this.objetosService.getCalendarioObjeto(t).subscribe(r=>{this.peticion=r.map(i=>({rid:i.payload.doc.id,...i.payload.doc.data()}))})}menos(){this.info=!1}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(SE),h.Y36(Xn),h.Y36(yd),h.Y36(Ha))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-objetos-espera"]],decls:3,vars:1,consts:[[2,"height","150px"],["class","container",4,"ngIf"],[1,"container"],[1,"row"],["class","col-xl-3 col-md-6 mb-4 ",4,"ngFor","ngForOf"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-0","shadow",2,"height","alturapx","width","310px"],[1,""],[1,"bannerC"],["alt","",1,"imgtam",3,"src"],[1,"card-body","text-center"],[1,"card-title","mb-0"],[1,"card-text","text-black-50","mb-3"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"],["class","btn btn-danger",3,"click",4,"ngIf","ngIfElse"],["verMenos",""],[4,"ngIf","ngIfElse"],["asd",""],[1,"col-12"],[1,"list-group"],[1,"list-group-item","active"],[1,"list-group-item","list-group-item-secondary"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar")(1,"div",0),h.YNc(2,Kq,3,1,"div",1)),2&t&&(h.xp6(2),h.Q6J("ngIf",r.admin))},dependencies:[Hi,jn,Qd,uc],styles:[".imgtam[_ngcontent-%COMP%]{height:250px;width:310px}"]}),n})();function Qq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,o=h.oxw(2);return h.KtG(o.showInfo(i.rid.toString()))}),h._uU(1," Ver Informacion "),h.qZA()}}function Jq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"div",18)(4,"h3"),h._uU(5,"DESCRIPCION"),h.qZA(),h.TgZ(6,"ul",19)(7,"li",20),h._uU(8,"OBJETO:"),h.qZA(),h.TgZ(9,"li",21),h._uU(10),h.qZA()(),h._UZ(11,"hr"),h.TgZ(12,"ul",19)(13,"li",20),h._uU(14,"Entregado a:"),h.qZA(),h.TgZ(15,"li",21),h._uU(16),h.qZA()(),h._UZ(17,"hr"),h.TgZ(18,"ul",19)(19,"li",20),h._uU(20,"TELEFONO DE CONTACTO:"),h.qZA(),h.TgZ(21,"li",21),h._uU(22),h.qZA()(),h._UZ(23,"hr"),h.TgZ(24,"ul",19)(25,"li",20),h._uU(26,"MENSAJE:"),h.qZA(),h.TgZ(27,"li",21),h._uU(28),h.qZA()(),h._UZ(29,"hr"),h.TgZ(30,"ul",19)(31,"li",20),h._uU(32,"FECHA DE ENCUENTRO:"),h.qZA(),h.TgZ(33,"li",21),h._uU(34),h.qZA()(),h._UZ(35,"hr"),h.qZA()()(),h.TgZ(36,"button",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(4);return h.KtG(i.menos())}),h._uU(37," Ver Menos "),h.qZA()()}if(2&n){const t=h.oxw(4);h.xp6(10),h.Oqu(t.peticion[0].title),h.xp6(6),h.Oqu(t.peticion[0].nombreU),h.xp6(6),h.Oqu(t.peticion[0].telefono),h.xp6(6),h.Oqu(t.peticion[0].mensaje),h.xp6(6),h.Oqu(t.peticion[0].date)}}function Xq(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2).$implicit,o=h.oxw(2);return h.KtG(o.showInfo2(i.rid.toString()))}),h._uU(1," Ver peticion "),h.qZA()}}function e6(n,e){if(1&n&&(h.YNc(0,Jq,38,5,"div",16),h.YNc(1,Xq,2,0,"ng-template",null,17,h.W1O),h._UZ(3,"div")),2&n){const t=h.MAs(2),r=h.oxw().$implicit,i=h.oxw(2);h.Q6J("ngIf",r.rid.toString()==i.activo)("ngIfElse",t)}}function t6(n,e){if(1&n&&(h.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div"),h._UZ(5,"img",9),h.qZA()()(),h.TgZ(6,"div",10)(7,"h5",11),h._uU(8),h.qZA(),h.TgZ(9,"div",12),h._uU(10),h.qZA(),h._UZ(11,"hr"),h.YNc(12,Qq,2,0,"button",13),h.YNc(13,e6,4,2,"ng-template",null,14,h.W1O),h.qZA()()()),2&n){const t=e.$implicit,r=h.MAs(14),i=h.oxw(2);h.xp6(5),h.s9C("src",t.imagen,h.LSH),h.xp6(3),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.descripcion),h.xp6(2),h.Q6J("ngIf",!i.info)("ngIfElse",r)}}function n6(n,e){if(1&n&&(h.TgZ(0,"div",2)(1,"div",3),h.YNc(2,t6,15,5,"div",4),h.qZA()()),2&n){const t=h.oxw();h.xp6(2),h.Q6J("ngForOf",t.objetosS)}}let r6=(()=>{class n{constructor(t,r,i,o){this.objetosService=t,this.router=r,this.authService=i,this.fireAuth=o,this.admin=!1,this.altura=600,this.info=!1,o.user.subscribe(l=>{this.user=l,this.authService.esAdmin(this.user.email).subscribe(c=>{this.ref=c,c.payload.data()&&(this.admin=!0)})})}ngOnInit(){this.objetosService.verObjetosReclamados().subscribe(t=>{this.objetosS=t.map(r=>({rid:r.payload.doc.id,...r.payload.doc.data()}))})}showInfo(t){this.activo=t,setTimeout(()=>{this.info=!this.info},200),this.objetosService.getCalendarioObjeto(t).subscribe(r=>{this.peticion=r.map(i=>({rid:i.payload.doc.id,...i.payload.doc.data()}))})}showInfo2(t){this.activo=t,this.objetosService.getCalendarioObjeto(t).subscribe(r=>{this.peticion=r.map(i=>({rid:i.payload.doc.id,...i.payload.doc.data()}))})}menos(){this.info=!1}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(SE),h.Y36(Xn),h.Y36(yd),h.Y36(Ha))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-objetos-reclamados"]],decls:3,vars:1,consts:[[2,"height","150px"],["class","container",4,"ngIf"],[1,"container"],[1,"row"],["class","col-xl-3 col-md-6 mb-4 ",4,"ngFor","ngForOf"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-0","shadow",2,"height","alturapx","width","310px"],[1,""],[1,"bannerC"],["alt","",1,"imgtam",3,"src"],[1,"card-body","text-center"],[1,"card-title","mb-0"],[1,"card-text","text-black-50","mb-3"],["class","btn btn-danger",3,"click",4,"ngIf","ngIfElse"],["verMenos",""],[1,"btn","btn-danger",3,"click"],[4,"ngIf","ngIfElse"],["asd",""],[1,"col-12"],[1,"list-group"],[1,"list-group-item","active"],[1,"list-group-item","list-group-item-secondary"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar")(1,"div",0),h.YNc(2,n6,3,1,"div",1)),2&t&&(h.xp6(2),h.Q6J("ngIf",r.admin))},dependencies:[Hi,jn,uc],styles:[".imgtam[_ngcontent-%COMP%]{height:250px;width:310px}"]}),n})();function i6(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",1)(1,"div",2)(2,"h5",3),h._uU(3,"Reporte de objetos perdidos"),h.qZA(),h.TgZ(4,"div",4)(5,"div",5)(6,"h4",6),h._uU(7,"Descripcion"),h.qZA(),h.TgZ(8,"form",7),h.NdJ("ngSubmit",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.onSubmit())}),h.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),h._uU(13,"Objeto"),h.qZA(),h._UZ(14,"input",12),h.qZA()()(),h.TgZ(15,"div",10)(16,"label",13),h._uU(17,"Descripcion "),h.qZA(),h._UZ(18,"input",14),h.qZA(),h.TgZ(19,"div",15)(20,"div",16)(21,"input",17),h.NdJ("change",function(i){h.CHM(t);const o=h.oxw();return h.KtG(o.onFileSelected(i))}),h.qZA(),h.TgZ(22,"label",18),h._uU(23,"Imagen"),h.qZA()()(),h.TgZ(24,"div",19)(25,"button",20),h._uU(26,"CREAR"),h.qZA()()()()()()()}if(2&n){const t=h.oxw();h.xp6(8),h.Q6J("formGroup",t.objetoForm),h.xp6(17),h.Q6J("disabled",!t.objetoForm.valid)}}let o6=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.formBuilder=r,this.AdminService=i,this.authService=o,this.fireAuth=l,this.admin=!1,l.user.subscribe(c=>{this.user=c,this.authService.esAdmin(this.user.email).subscribe(f=>{this.ref=f,f.payload.data()&&(this.admin=!0)})}),this.objetoForm=this.formBuilder.group({nombre:[""],descripcion:[""],estado:[0]})}ngOnInit(){}onSubmit(){this.AdminService.reportarObjeto(this.objetoForm.value,this.fileImg),this.router.navigate(["/objetos"])}onFileSelected(t){this.fileImg=t.target.files[0]}onFileSelectedImg(t){this.fileImg=t.target.files[0]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xn),h.Y36(aP),h.Y36(SE),h.Y36(yd),h.Y36(Ha))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-objetos-reportar"]],decls:2,vars:1,consts:[["class","banner",4,"ngIf"],[1,"banner"],[1,"container","p-5"],[1,"pb-4"],[1,"card","mx-3","mt-n5","shadow-lg",2,"border-radius","0px","border","none"],[1,"card-body","p-5"],[1,"card-title","mb-3","text-dark","text-uppercase",2,"font-weight","700"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"form-floating","mb-3"],["for","floatingTextInput1"],["type","text","formControlName","nombre","placeholder","NOMBRE",1,"form-control"],["for","floatingEmailInput"],["type","email","formControlName","descripcion","placeholder","name@example.com",1,"form-control"],[1,"col-md-4"],[1,"custom-file"],["type","file",1,"custom-file-input",3,"change"],[1,"custom-file-label","text-left"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.YNc(1,i6,27,2,"div",0)),2&t&&(h.xp6(1),h.Q6J("ngIf",r.admin))},dependencies:[jn,O_,Ap,k_,P_,F_,CE,uc]}),n})();var xE,Nt,nU,RE,rU,iU,s6=V(2559),a6=V.n(s6),G=V(655),mA={},oU=[],u6=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Sh(n,e){for(var t in e)n[t]=e[t];return n}function sU(n){var e=n.parentNode;e&&e.removeChild(n)}function Yl(n,e,t){var r,i,o,l={};for(o in e)"key"==o?r=e[o]:"ref"==o?i=e[o]:l[o]=e[o];if(arguments.length>2&&(l.children=arguments.length>3?xE.call(arguments,2):t),"function"==typeof n&&null!=n.defaultProps)for(o in n.defaultProps)void 0===l[o]&&(l[o]=n.defaultProps[o]);return ME(n,l,r,i,null)}function ME(n,e,t,r,i){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++nU};return null==i&&null!=Nt.vnode&&Nt.vnode(o),o}function xh(n){return n.children}function Ql(n,e){this.props=n,this.context=e}function kE(n,e){if(null==e)return n.__?kE(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e)return t.__e;return"function"==typeof n.type?kE(n):null}function lU(n){var e,t;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e){n.__e=n.__c.base=t.__e;break}return lU(n)}}function wP(n){(!n.__d&&(n.__d=!0)&&RE.push(n)&&!vA.__r++||rU!==Nt.debounceRendering)&&((rU=Nt.debounceRendering)||setTimeout)(vA)}function vA(){for(var n;vA.__r=RE.length;)n=RE.sort(function(e,t){return e.__v.__b-t.__v.__b}),RE=[],n.some(function(e){var t,r,i,o,l,c;e.__d&&(l=(o=(t=e).__v).__e,(c=t.__P)&&(r=[],(i=Sh({},o)).__v=o.__v+1,bP(c,o,i,t.__n,void 0!==c.ownerSVGElement,null!=o.__h?[l]:null,r,l??kE(o),o.__h),gU(r,o),o.__e!=l&&lU(o)))})}function uU(n,e,t,r,i,o,l,c,f,m){var _,C,x,M,O,W,K,te=r&&r.__k||oU,_e=te.length;for(t.__k=[],_=0;_<e.length;_++)if(null!=(M=t.__k[_]=null==(M=e[_])||"boolean"==typeof M?null:"string"==typeof M||"number"==typeof M||"bigint"==typeof M?ME(null,M,null,null,M):Array.isArray(M)?ME(xh,{children:M},null,null,null):M.__b>0?ME(M.type,M.props,M.key,M.ref?M.ref:null,M.__v):M)){if(M.__=t,M.__b=t.__b+1,null===(x=te[_])||x&&M.key==x.key&&M.type===x.type)te[_]=void 0;else for(C=0;C<_e;C++){if((x=te[C])&&M.key==x.key&&M.type===x.type){te[C]=void 0;break}x=null}bP(n,M,x=x||mA,i,o,l,c,f,m),O=M.__e,(C=M.ref)&&x.ref!=C&&(K||(K=[]),x.ref&&K.push(x.ref,null,M),K.push(C,M.__c||O,M)),null!=O?(null==W&&(W=O),"function"==typeof M.type&&M.__k===x.__k?M.__d=f=cU(M,f,n):f=dU(n,M,x,te,O,f),"function"==typeof t.type&&(t.__d=f)):f&&x.__e==f&&f.parentNode!=n&&(f=kE(x))}for(t.__e=W,_=_e;_--;)null!=te[_]&&vU(te[_],te[_]);if(K)for(_=0;_<K.length;_++)mU(K[_],K[++_],K[++_])}function cU(n,e,t){for(var r,i=n.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=n,e="function"==typeof r.type?cU(r,e,t):dU(t,r,r,i,r.__e,e));return e}function Rh(n,e){return e=e||[],null==n||"boolean"==typeof n||(Array.isArray(n)?n.some(function(t){Rh(t,e)}):e.push(n)),e}function dU(n,e,t,r,i,o){var l,c,f;if(void 0!==e.__d)l=e.__d,e.__d=void 0;else if(null==t||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==n)n.appendChild(i),l=null;else{for(c=o,f=0;(c=c.nextSibling)&&f<r.length;f+=1)if(c==i)break e;n.insertBefore(i,o),l=o}return void 0!==l?l:i.nextSibling}function hU(n,e,t){"-"===e[0]?n.setProperty(e,t):n[e]=null==t?"":"number"!=typeof t||u6.test(e)?t:t+"px"}function yA(n,e,t,r,i){var o;e:if("style"===e)if("string"==typeof t)n.style.cssText=t;else{if("string"==typeof r&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||hU(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||hU(n.style,e,t[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r||n.addEventListener(e,o?pU:fU,o):n.removeEventListener(e,o?pU:fU,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in n)try{n[e]=t??"";break e}catch{}"function"==typeof t||(null==t||!1===t&&-1==e.indexOf("-")?n.removeAttribute(e):n.setAttribute(e,t))}}function fU(n){this.l[n.type+!1](Nt.event?Nt.event(n):n)}function pU(n){this.l[n.type+!0](Nt.event?Nt.event(n):n)}function bP(n,e,t,r,i,o,l,c,f){var m,_,C,x,M,O,W,K,te,_e,ke,Ne,ut,at,Gt,Dt=e.type;if(void 0!==e.constructor)return null;null!=t.__h&&(f=t.__h,c=e.__e=t.__e,e.__h=null,o=[c]),(m=Nt.__b)&&m(e);try{e:if("function"==typeof Dt){if(K=e.props,te=(m=Dt.contextType)&&r[m.__c],_e=m?te?te.props.value:m.__:r,t.__c?W=(_=e.__c=t.__c).__=_.__E:("prototype"in Dt&&Dt.prototype.render?e.__c=_=new Dt(K,_e):(e.__c=_=new Ql(K,_e),_.constructor=Dt,_.render=h6),te&&te.sub(_),_.props=K,_.state||(_.state={}),_.context=_e,_.__n=r,C=_.__d=!0,_.__h=[],_._sb=[]),null==_.__s&&(_.__s=_.state),null!=Dt.getDerivedStateFromProps&&(_.__s==_.state&&(_.__s=Sh({},_.__s)),Sh(_.__s,Dt.getDerivedStateFromProps(K,_.__s))),x=_.props,M=_.state,C)null==Dt.getDerivedStateFromProps&&null!=_.componentWillMount&&_.componentWillMount(),null!=_.componentDidMount&&_.__h.push(_.componentDidMount);else{if(null==Dt.getDerivedStateFromProps&&K!==x&&null!=_.componentWillReceiveProps&&_.componentWillReceiveProps(K,_e),!_.__e&&null!=_.shouldComponentUpdate&&!1===_.shouldComponentUpdate(K,_.__s,_e)||e.__v===t.__v){for(_.props=K,_.state=_.__s,e.__v!==t.__v&&(_.__d=!1),_.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(wr){wr&&(wr.__=e)}),ke=0;ke<_._sb.length;ke++)_.__h.push(_._sb[ke]);_._sb=[],_.__h.length&&l.push(_);break e}null!=_.componentWillUpdate&&_.componentWillUpdate(K,_.__s,_e),null!=_.componentDidUpdate&&_.__h.push(function(){_.componentDidUpdate(x,M,O)})}if(_.context=_e,_.props=K,_.__v=e,_.__P=n,Ne=Nt.__r,ut=0,"prototype"in Dt&&Dt.prototype.render){for(_.state=_.__s,_.__d=!1,Ne&&Ne(e),m=_.render(_.props,_.state,_.context),at=0;at<_._sb.length;at++)_.__h.push(_._sb[at]);_._sb=[]}else do{_.__d=!1,Ne&&Ne(e),m=_.render(_.props,_.state,_.context),_.state=_.__s}while(_.__d&&++ut<25);_.state=_.__s,null!=_.getChildContext&&(r=Sh(Sh({},r),_.getChildContext())),C||null==_.getSnapshotBeforeUpdate||(O=_.getSnapshotBeforeUpdate(x,M)),Gt=null!=m&&m.type===xh&&null==m.key?m.props.children:m,uU(n,Array.isArray(Gt)?Gt:[Gt],e,t,r,i,o,l,c,f),_.base=e.__e,e.__h=null,_.__h.length&&l.push(_),W&&(_.__E=_.__=null),_.__e=!1}else null==o&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=function d6(n,e,t,r,i,o,l,c){var f,m,_,C=t.props,x=e.props,M=e.type,O=0;if("svg"===M&&(i=!0),null!=o)for(;O<o.length;O++)if((f=o[O])&&"setAttribute"in f==!!M&&(M?f.localName===M:3===f.nodeType)){n=f,o[O]=null;break}if(null==n){if(null===M)return document.createTextNode(x);n=i?document.createElementNS("http://www.w3.org/2000/svg",M):document.createElement(M,x.is&&x),o=null,c=!1}if(null===M)C===x||c&&n.data===x||(n.data=x);else{if(o=o&&xE.call(n.childNodes),m=(C=t.props||mA).dangerouslySetInnerHTML,_=x.dangerouslySetInnerHTML,!c){if(null!=o)for(C={},O=0;O<n.attributes.length;O++)C[n.attributes[O].name]=n.attributes[O].value;(_||m)&&(_&&(m&&_.__html==m.__html||_.__html===n.innerHTML)||(n.innerHTML=_&&_.__html||""))}if(function c6(n,e,t,r,i){var o;for(o in t)"children"===o||"key"===o||o in e||yA(n,o,null,t[o],r);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||t[o]===e[o]||yA(n,o,e[o],t[o],r)}(n,x,C,i,c),_)e.__k=[];else if(O=e.props.children,uU(n,Array.isArray(O)?O:[O],e,t,r,i&&"foreignObject"!==M,o,l,o?o[0]:t.__k&&kE(t,0),c),null!=o)for(O=o.length;O--;)null!=o[O]&&sU(o[O]);c||("value"in x&&void 0!==(O=x.value)&&(O!==n.value||"progress"===M&&!O||"option"===M&&O!==C.value)&&yA(n,"value",O,C.value,!1),"checked"in x&&void 0!==(O=x.checked)&&O!==n.checked&&yA(n,"checked",O,C.checked,!1))}return n}(t.__e,e,t,r,i,o,l,f);(m=Nt.diffed)&&m(e)}catch(wr){e.__v=null,(f||null!=o)&&(e.__e=c,e.__h=!!f,o[o.indexOf(c)]=null),Nt.__e(wr,e,t)}}function gU(n,e){Nt.__c&&Nt.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){Nt.__e(r,t.__v)}})}function mU(n,e,t){try{"function"==typeof n?n(e):n.current=e}catch(r){Nt.__e(r,t)}}function vU(n,e,t){var r,i;if(Nt.unmount&&Nt.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||mU(r,null,e)),null!=(r=n.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Nt.__e(o,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&vU(r[i],e,t||"function"!=typeof n.type);t||null==n.__e||sU(n.__e),n.__=n.__e=n.__d=void 0}function h6(n,e,t){return this.constructor(n,t)}function kp(n,e,t){var r,i,o;Nt.__&&Nt.__(n,e),i=(r="function"==typeof t)?null:t&&t.__k||e.__k,o=[],bP(e,n=(!r&&t||e).__k=Yl(xh,null,[n]),i||mA,mA,void 0!==e.ownerSVGElement,!r&&t?[t]:i?null:e.firstChild?xE.call(e.childNodes):null,o,!r&&t?t:i?i.__e:e.firstChild,r),gU(o,n)}xE=oU.slice,Nt={__e:function(n,e,t,r){for(var i,o,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),l=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,r||{}),l=i.__d),l)return i.__E=i}catch(c){n=c}throw n}},nU=0,Ql.prototype.setState=function(n,e){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Sh({},this.state),"function"==typeof n&&(n=n(Sh({},t),this.props)),n&&Sh(t,n),null!=n&&this.__v&&(e&&this._sb.push(e),wP(this))},Ql.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),wP(this))},Ql.prototype.render=xh,RE=[],vA.__r=0,iU=0;var Vr,EP,wU,bU=[],_A=[],EU=Nt.__b,CU=Nt.__r,IU=Nt.diffed,DU=Nt.__c,TU=Nt.unmount;function w6(){for(var n;n=bU.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(bA),n.__H.__h.forEach(DP),n.__H.__h=[]}catch(e){n.__H.__h=[],Nt.__e(e,n.__v)}}Nt.__b=function(n){Vr=null,EU&&EU(n)},Nt.__r=function(n){CU&&CU(n);var e=(Vr=n.__c).__H;e&&(EP===Vr?(e.__h=[],Vr.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=_A,t.__N=t.i=void 0})):(e.__h.forEach(bA),e.__h.forEach(DP),e.__h=[])),EP=Vr},Nt.diffed=function(n){IU&&IU(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(1!==bU.push(e)&&wU===Nt.requestAnimationFrame||((wU=Nt.requestAnimationFrame)||b6)(w6)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==_A&&(t.__=t.__V),t.i=void 0,t.__V=_A})),EP=Vr=null},Nt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(bA),t.__h=t.__h.filter(function(r){return!r.__||DP(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Nt.__e(r,t.__v)}}),DU&&DU(n,e)},Nt.unmount=function(n){TU&&TU(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{bA(r)}catch(i){e=i}}),t.__H=void 0,e&&Nt.__e(e,t.__v))};var xU="function"==typeof requestAnimationFrame;function b6(n){var e,t=function(){clearTimeout(r),xU&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);xU&&(e=requestAnimationFrame(t))}function bA(n){var e=Vr,t=n.__c;"function"==typeof t&&(n.__c=void 0,t()),Vr=e}function DP(n){var e=Vr;n.__c=n.__(),Vr=e}function AP(n,e){for(var t in n)if("__source"!==t&&!(t in e))return!0;for(var r in e)if("__source"!==r&&n[r]!==e[r])return!0;return!1}function xP(n){this.props=n}(xP.prototype=new Ql).isPureReactComponent=!0,xP.prototype.shouldComponentUpdate=function(n,e){return AP(this.props,n)||AP(this.state,e)};var kU=Nt.__b;Nt.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),kU&&kU(n)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var T6=Nt.__e;Nt.__e=function(n,e,t,r){if(n.then)for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return null==e.__e&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e);T6(n,e,t,r)};var NU=Nt.unmount;function OU(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){"function"==typeof r.__c&&r.__c()}),n.__c.__H=null),null!=(n=function MU(n,e){for(var t in e)n[t]=e[t];return n}({},n)).__c&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return OU(r,e,t)})),n}function FU(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return FU(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function EA(){this.__u=0,this.t=null,this.__b=null}function LU(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function PE(){this.u=null,this.o=null}Nt.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&!0===n.__h&&(n.type=null),NU&&NU(n)},(EA.prototype=new Ql).__c=function(n,e){var t=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(t);var i=LU(r.__v),o=!1,l=function(){o||(o=!0,t.__R=null,i?i(c):c())};t.__R=l;var c=function(){if(!--r.__u){if(r.state.__a){var m=r.state.__a;r.__v.__k[0]=FU(m,m.__c.__P,m.__c.__O)}var _;for(r.setState({__a:r.__b=null});_=r.t.pop();)_.forceUpdate()}},f=!0===e.__h;r.__u++||f||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(l,l)},EA.prototype.componentWillUnmount=function(){this.t=[]},EA.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=OU(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&Yl(xh,null,n.fallback);return i&&(i.__h=null),[Yl(xh,null,e.__a?null:n.children),i]};var UU=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&("t"!==n.props.revealOrder[0]||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function S6(n){return this.getChildContext=function(){return n.context},n.children}function x6(n){var e=this,t=n.i;e.componentWillUnmount=function(){kp(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),kp(Yl(S6,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}(PE.prototype=new Ql).__a=function(n){var e=this,t=LU(e.__v),r=e.o.get(n);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),UU(e,n,r)):i()};t?t(o):o()}},PE.prototype.render=function(n){this.u=null,this.o=new Map;var e=Rh(n.children);n.revealOrder&&"b"===n.revealOrder[0]&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},PE.prototype.componentDidUpdate=PE.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){UU(n,t,e)})};var BU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,R6=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,M6=typeof document<"u",k6=function(n){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};Ql.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Ql.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var HU=Nt.event;function O6(){}function F6(){return this.cancelBubble}function L6(){return this.defaultPrevented}Nt.event=function(n){return HU&&(n=HU(n)),n.persist=O6,n.isPropagationStopped=F6,n.isDefaultPrevented=L6,n.nativeEvent=n};var $U={configurable:!0,get:function(){return this.class}},GU=Nt.vnode;Nt.vnode=function(n){var e=n.type,t=n.props,r=t;if("string"==typeof e){var i=-1===e.indexOf("-");for(var o in r={},t){var l=t[o];M6&&"children"===o&&"noscript"===e||"value"===o&&"defaultValue"in t&&null==l||("defaultValue"===o&&"value"in t&&null==t.value?o="value":"download"===o&&!0===l?l="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!k6(t.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&R6.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===l&&(l=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=l)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=Rh(t.children).forEach(function(c){c.props.selected=-1!=r.value.indexOf(c.props.value)})),"select"==e&&null!=r.defaultValue&&(r.value=Rh(t.children).forEach(function(c){c.props.selected=r.multiple?-1!=r.defaultValue.indexOf(c.props.value):r.defaultValue==c.props.value})),n.props=r,t.class!=t.className&&($U.enumerable="className"in t,null!=t.className&&(r.class=t.className),Object.defineProperty(r,"className",$U))}n.$$typeof=BU,GU&&GU(n)};var zU=Nt.__r;Nt.__r=function(n){zU&&zU(n)};var ZU=typeof globalThis<"u"?globalThis:window;ZU.FullCalendarVDom?console.warn("FullCalendar VDOM already loaded"):ZU.FullCalendarVDom={Component:Ql,createElement:Yl,render:kp,createRef:function aU(){return{current:null}},Fragment:xh,createContext:function J6(n){var e=function _U(n,e){var t={__c:e="__cC"+iU++,__:n,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,o;return this.getChildContext||(i=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&i.some(wP)},this.sub=function(l){i.push(l);var c=l.componentWillUnmount;l.componentWillUnmount=function(){i.splice(i.indexOf(l),1),c&&c.call(l)}}),r.children}};return t.Provider.__=t.Consumer.contextType=t}(n),t=e.Provider;return e.Provider=function(){var r=this,i=!this.getChildContext,o=t.apply(this,arguments);if(i){var l=[];this.shouldComponentUpdate=function(c){r.props.value!==c.value&&l.forEach(function(f){f.context=c.value,f.forceUpdate()})},this.sub=function(c){l.push(c);var f=c.componentWillUnmount;c.componentWillUnmount=function(){l.splice(l.indexOf(c),1),f&&f.call(c)}}}return o},e},createPortal:function VU(n,e){var t=Yl(x6,{__v:n,i:e});return t.containerInfo=e,t},flushSync:function Y6(n){n();var e=Nt.debounceRendering,t=[];for(Nt.debounceRendering=function r(i){t.push(i)},kp(Yl(Q6,{}),document.createElement("div"));t.length;)t.shift()();Nt.debounceRendering=e},unmountComponentAtNode:function X6(n){kp(null,n)}};var Q6=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){return Yl("div",{})},e.prototype.componentDidMount=function(){this.setState({})},e}(Ql);if(typeof FullCalendarVDom>"u")throw new Error("Please import the top-level fullcalendar lib before attempting to import a plugin.");var RP=FullCalendarVDom.Component,Te=FullCalendarVDom.createElement,e5=FullCalendarVDom.render,Jl=FullCalendarVDom.createRef,da=FullCalendarVDom.Fragment,KU=FullCalendarVDom.createContext,t5=FullCalendarVDom.createPortal,YU=FullCalendarVDom.flushSync,n5=FullCalendarVDom.unmountComponentAtNode,H_=function(){function n(e,t){this.context=e,this.internalEventSource=t}return n.prototype.remove=function(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},n.prototype.refetch=function(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})},Object.defineProperty(n.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return this.internalEventSource.meta.format},enumerable:!1,configurable:!0}),n}();function MP(n){n.parentNode&&n.parentNode.removeChild(n)}function as(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(kP(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}function kP(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}var i5=/(top|left|right|bottom|width|height)$/i;function NE(n,e){for(var t in e)QU(n,t,e[t])}function QU(n,e,t){n.style[e]=null==t?"":"number"==typeof t&&i5.test(e)?t+"px":t}function JU(n){var e,t;return null!==(t=null===(e=n.composedPath)||void 0===e?void 0:e.call(n)[0])&&void 0!==t?t:n.target}function XU(n){return n.getRootNode?n.getRootNode():document}var eV=0;function CA(){return"fc-dom-"+(eV+=1)}function IA(n){n.preventDefault()}function tV(n,e,t,r){var i=function o5(n,e){return function(t){var r=as(t.target,n);r&&e.call(r,t,r)}}(t,r);return n.addEventListener(e,i),function(){n.removeEventListener(e,i)}}var nV=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function rV(n){return(0,G.pi)({onClick:n},iV(n))}function iV(n){return{tabIndex:0,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(n(e),e.preventDefault())}}}var oV=0;function j_(){return String(oV+=1)}function DA(){document.body.classList.add("fc-not-allowed")}function TA(){document.body.classList.remove("fc-not-allowed")}function p5(n,e,t){return t.func?t.func(n,e):function g5(n,e){return n||e?null==e?-1:null==n?1:"string"==typeof n||"string"==typeof e?String(n).localeCompare(String(e)):n-e:0}(n[t.field],e[t.field])*(t.order||1)}function $_(n,e){var t=String(n);return"000".substr(0,e-t.length)+t}function OE(n,e,t){return"function"==typeof n?n.apply(void 0,e):"string"==typeof n?e.reduce(function(r,i,o){return r.replace("$"+o,i||"")},n):t}function m5(n,e){return n-e}function AA(n){return n%1==0}function v5(n){var e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}var sV=["sun","mon","tue","wed","thu","fri","sat"];function aV(n,e){var t=Np(n);return t[2]+=7*e,ha(t)}function Hs(n,e){var t=Np(n);return t[2]+=e,ha(t)}function Pm(n,e){var t=Np(n);return t[6]+=e,ha(t)}function Nm(n,e){return(e.valueOf()-n.valueOf())/864e5}function SA(n,e){return Op(n)===Op(e)?Math.round(Nm(n,e)):null}function Wr(n){return ha([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function PP(n,e,t,r){var i=ha([e,0,1+S5(e,t,r)]),o=Wr(n),l=Math.round(Nm(i,o));return Math.floor(l/7)+1}function S5(n,e,t){var r=7+e-t;return-(7+ha([n,0,r]).getUTCDay()-e)%7+r-1}function lV(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function uV(n){return new Date(n[0],n[1]||0,n[2]??1,n[3]||0,n[4]||0,n[5]||0)}function Np(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function ha(n){return 1===n.length&&(n=n.concat([0])),new Date(Date.UTC.apply(Date,n))}function cV(n){return!isNaN(n.valueOf())}function Op(n){return 1e3*n.getUTCHours()*60*60+1e3*n.getUTCMinutes()*60+1e3*n.getUTCSeconds()+n.getUTCMilliseconds()}function xA(n,e,t,r){return{instanceId:j_(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}var RA=Object.prototype.hasOwnProperty;function NP(n,e){var t={};if(e)for(var r in e){for(var i=[],o=n.length-1;o>=0;o-=1){var l=n[o][r];if("object"==typeof l&&l)i.unshift(l);else if(void 0!==l){t[r]=l;break}}i.length&&(t[r]=NP(i))}for(o=n.length-1;o>=0;o-=1){var c=n[o];for(var f in c)f in t||(t[f]=c[f])}return t}function Om(n,e){var t={};for(var r in n)e(n[r],r)&&(t[r]=n[r]);return t}function Mh(n,e){var t={};for(var r in n)t[r]=e(n[r],r);return t}function dV(n){for(var e={},t=0,r=n;t<r.length;t++)e[r[t]]=!0;return e}function OP(n){var e=[];for(var t in n)e.push(n[t]);return e}function kh(n,e){if(n===e)return!0;for(var t in n)if(RA.call(n,t)&&!(t in e))return!1;for(var t in e)if(RA.call(e,t)&&n[t]!==e[t])return!1;return!0}function hV(n,e){var t=[];for(var r in n)RA.call(n,r)&&(r in e||t.push(r));for(var r in e)RA.call(e,r)&&n[r]!==e[r]&&t.push(r);return t}function FP(n,e,t){if(void 0===t&&(t={}),n===e)return!0;for(var r in e)if(!(r in n)||!x5(n[r],e[r],t[r]))return!1;for(var r in n)if(!(r in e))return!1;return!0}function x5(n,e,t){return n===e||!0===t||!!t&&t(n,e)}function G_(n,e,t){var r=t.dateEnv,i=t.pluginHooks,o=t.options,l=n.defs,c=n.instances;for(var f in c=Om(c,function(K){return!l[K.defId].recurringDef}),l){var m=l[f];if(m.recurringDef){var _=m.recurringDef.duration;_||(_=m.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);for(var x=0,M=k5(m,_,e,r,i.recurringTypes);x<M.length;x++){var O=M[x],W=xA(f,{start:O,end:r.add(O,_)});c[W.instanceId]=W}}}return{defs:l,instances:c}}function k5(n,e,t,r,i){var l=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(l=l.map(Wr)),l}var P5=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Vn(n,e){var t;return"string"==typeof n?function N5(n){var e=P5.exec(n);if(e){var t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*(60*(e[3]?parseInt(e[3],10):0)*60*1e3+60*(e[4]?parseInt(e[4],10):0)*1e3+1e3*(e[5]?parseInt(e[5],10):0)+(e[6]?parseInt(e[6],10):0))}}return null}(n):"object"==typeof n&&n?pV(n):"number"==typeof n?pV(((t={})[e||"milliseconds"]=n,t)):null}function pV(n){var e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:60*(n.hours||n.hour||0)*60*1e3+60*(n.minutes||n.minute||0)*1e3+1e3*(n.seconds||n.second||0)+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=7*t,e.specifiedWeeks=!0),e}function z_(n){return Fm(n)/864e5}function Fm(n){return 31536e6*n.years+2592e6*n.months+864e5*n.days+n.milliseconds}function LP(n){var e=n.milliseconds;if(e){if(e%1e3!=0)return{unit:"millisecond",value:e};if(e%6e4!=0)return{unit:"second",value:e/1e3};if(e%36e5!=0)return{unit:"minute",value:e/6e4};if(e)return{unit:"hour",value:e/36e5}}return n.days?n.specifiedWeeks&&n.days%7==0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function gV(n){return n.toISOString().replace(/T.*$/,"")}function UP(n,e){void 0===e&&(e=!1);var t=n<0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),o=Math.round(r%60);return e?t+$_(i,2)+":"+$_(o,2):"GMT"+t+i+(o?":"+$_(o,2):"")}function Fp(n,e,t){if(n===e)return!0;var i,r=n.length;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(t?t(n[i],e[i]):n[i]===e[i]))return!1;return!0}function pn(n,e,t){var r,i;return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];if(r){if(!Fp(r,o)){t&&t(i);var c=n.apply(this,o);(!e||!e(c,i))&&(i=c)}}else i=n.apply(this,o);return r=o,i}}function MA(n,e,t){var i,o,r=this;return function(l){if(i){if(!kh(i,l)){t&&t(o);var c=n.call(r,l);(!e||!e(c,o))&&(o=c)}}else o=n.call(r,l);return i=l,o}}var mV={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},kA={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},PA=/\s*([ap])\.?m\.?/i,B5=/,/g,H5=/\s+/g,j5=/\u200e/g,$5=/UTC|GMT/,G5=function(){function n(e){var t={},r={},i=0;for(var o in e)o in mV?(r[o]=e[o],i=Math.max(mV[o],i)):(t[o]=e[o],o in kA&&(i=Math.max(kA[o],i)));this.standardDateProps=t,this.extendedSettings=r,this.severity=i,this.buildFormattingFunc=pn(vV)}return n.prototype.format=function(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)},n.prototype.formatRange=function(e,t,r,i){var l=this.standardDateProps,c=this.extendedSettings,f=function Y5(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Op(n)!==Op(e)?1:0}(e.marker,t.marker,r.calendarSystem);if(!f)return this.format(e,r);var m=f;m>1&&("numeric"===l.year||"2-digit"===l.year)&&("numeric"===l.month||"2-digit"===l.month)&&("numeric"===l.day||"2-digit"===l.day)&&(m=1);var _=this.format(e,r),C=this.format(t,r);if(_===C)return _;var x=function Q5(n,e){var t={};for(var r in n)(!(r in kA)||kA[r]<=e)&&(t[r]=n[r]);return t}(l,m),M=vV(x,c,r),O=M(e),W=M(t),K=function J5(n,e,t,r){for(var i=0;i<n.length;){var o=n.indexOf(e,i);if(-1===o)break;for(var l=n.substr(0,o),c=n.substr(i=o+e.length),f=0;f<t.length;){var m=t.indexOf(r,f);if(-1===m)break;var _=t.substr(0,m),C=t.substr(f=m+r.length);if(l===_&&c===C)return{before:l,after:c}}}return null}(_,O,C,W),te=c.separator||i||r.defaultSeparator||"";return K?K.before+O+te+W+K.after:_+te+C},n.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}},n}();function vV(n,e,t){var r=Object.keys(n).length;return 1===r&&"short"===n.timeZoneName?function(i){return UP(i.timeZoneOffset)}:0===r&&e.week?function(i){return function K5(n,e,t,r,i){var o=[];return"long"===i?o.push(t):("short"===i||"narrow"===i)&&o.push(e),("long"===i||"short"===i)&&o.push(" "),o.push(r.simpleNumberFormat.format(n)),"rtl"===r.options.direction&&o.reverse(),o.join("")}(t.computeWeekNumber(i.marker),t.weekText,t.weekTextLong,t.locale,e.week)}:function z5(n,e,t){n=(0,G.pi)({},n),e=(0,G.pi)({},e),function W5(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),"long"===n.timeZoneName&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}(n,e),n.timeZone="UTC";var i,r=new Intl.DateTimeFormat(t.locale.codes,n);if(e.omitZeroMinute){var o=(0,G.pi)({},n);delete o.minute,i=new Intl.DateTimeFormat(t.locale.codes,o)}return function(l){var c=l.marker;return function q5(n,e,t,r,i){return n=n.replace(j5,""),"short"===t.timeZoneName&&(n=function Z5(n,e){var t=!1;return n=n.replace($5,function(){return t=!0,e}),t||(n+=" "+e),n}(n,"UTC"===i.timeZone||null==e.timeZoneOffset?"UTC":UP(e.timeZoneOffset))),r.omitCommas&&(n=n.replace(B5,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),!1===r.meridiem?n=n.replace(PA,"").trim():"narrow"===r.meridiem?n=n.replace(PA,function(o,l){return l.toLocaleLowerCase()}):"short"===r.meridiem?n=n.replace(PA,function(o,l){return l.toLocaleLowerCase()+"m"}):"lowercase"===r.meridiem&&(n=n.replace(PA,function(o){return o.toLocaleLowerCase()})),(n=n.replace(H5," ")).trim()}((i&&!c.getUTCMinutes()?i:r).format(c),l,n,e,t)}}(n,e,t)}function yV(n,e){var t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function NA(n,e,t,r){var i=yV(n,t.calendarSystem);return{date:i,start:i,end:e?yV(e,t.calendarSystem):null,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:r||t.defaultSeparator}}var X5=function(){function n(e){this.cmdStr=e}return n.prototype.format=function(e,t,r){return t.cmdFormatter(this.cmdStr,NA(e,null,t,r))},n.prototype.formatRange=function(e,t,r,i){return r.cmdFormatter(this.cmdStr,NA(e,t,r,i))},n}(),e4=function(){function n(e){this.func=e}return n.prototype.format=function(e,t,r){return this.func(NA(e,null,t,r))},n.prototype.formatRange=function(e,t,r,i){return this.func(NA(e,t,r,i))},n}();function Ji(n){return"object"==typeof n&&n?new G5(n):"string"==typeof n?new X5(n):"function"==typeof n?new e4(n):null}var _V={navLinkDayClick:Ae,navLinkWeekClick:Ae,duration:Vn,bootstrapFontAwesome:Ae,buttonIcons:Ae,customButtons:Ae,defaultAllDayEventDuration:Vn,defaultTimedEventDuration:Vn,nextDayThreshold:Vn,scrollTime:Vn,scrollTimeReset:Boolean,slotMinTime:Vn,slotMaxTime:Vn,dayPopoverFormat:Ji,slotDuration:Vn,snapDuration:Vn,headerToolbar:Ae,footerToolbar:Ae,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Ji,dayHeaderClassNames:Ae,dayHeaderContent:Ae,dayHeaderDidMount:Ae,dayHeaderWillUnmount:Ae,dayCellClassNames:Ae,dayCellContent:Ae,dayCellDidMount:Ae,dayCellWillUnmount:Ae,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ae,weekNumbers:Boolean,weekNumberClassNames:Ae,weekNumberContent:Ae,weekNumberDidMount:Ae,weekNumberWillUnmount:Ae,editable:Boolean,viewClassNames:Ae,viewDidMount:Ae,viewWillUnmount:Ae,nowIndicator:Boolean,nowIndicatorClassNames:Ae,nowIndicatorContent:Ae,nowIndicatorDidMount:Ae,nowIndicatorWillUnmount:Ae,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ae,locale:Ae,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ae,eventOrder:function h5(n){var r,i,e=[],t=[];for("string"==typeof n?t=n.split(/\s*,\s*/):"function"==typeof n?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r+=1)"string"==typeof(i=t[r])?e.push("-"===i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):"function"==typeof i&&e.push({func:i});return e},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ae,contentHeight:Ae,direction:String,weekNumberFormat:Ji,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ae,initialDate:Ae,now:Ae,eventDataTransform:Ae,stickyHeaderDates:Ae,stickyFooterScrollbar:Ae,viewHeight:Ae,defaultAllDay:Boolean,eventSourceFailure:Ae,eventSourceSuccess:Ae,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ae,eventConstraint:Ae,eventAllow:Ae,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ae,eventContent:Ae,eventDidMount:Ae,eventWillUnmount:Ae,selectConstraint:Ae,selectOverlap:Ae,selectAllow:Ae,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ae,slotLaneClassNames:Ae,slotLaneContent:Ae,slotLaneDidMount:Ae,slotLaneWillUnmount:Ae,slotLabelClassNames:Ae,slotLabelContent:Ae,slotLabelDidMount:Ae,slotLabelWillUnmount:Ae,dayMaxEvents:Ae,dayMaxEventRows:Ae,dayMinWidth:Number,slotLabelInterval:Vn,allDayText:String,allDayClassNames:Ae,allDayContent:Ae,allDayDidMount:Ae,allDayWillUnmount:Ae,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Ji,rerenderDelay:Number,moreLinkText:Ae,moreLinkHint:Ae,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ae,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Vn,hiddenDays:Ae,monthMode:Boolean,fixedWeekCount:Boolean,validRange:Ae,visibleRange:Ae,titleFormat:Ae,eventInteractive:Boolean,noEventsText:String,viewHint:Ae,navLinkHint:Ae,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ae,moreLinkClassNames:Ae,moreLinkContent:Ae,moreLinkDidMount:Ae,moreLinkWillUnmount:Ae},Ph={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30},wV={datesSet:Ae,eventsSet:Ae,eventAdd:Ae,eventChange:Ae,eventRemove:Ae,windowResize:Ae,eventClick:Ae,eventMouseEnter:Ae,eventMouseLeave:Ae,select:Ae,unselect:Ae,loading:Ae,_unmount:Ae,_beforeprint:Ae,_afterprint:Ae,_noEventDrop:Ae,_noEventResize:Ae,_resize:Ae,_scrollRequest:Ae},bV={buttonText:Ae,buttonHints:Ae,views:Ae,plugins:Ae,initialEvents:Ae,events:Ae,eventSources:Ae},Lm={headerToolbar:W_,footerToolbar:W_,buttonText:W_,buttonHints:W_,buttonIcons:W_,dateIncrement:W_};function W_(n,e){return"object"==typeof n&&"object"==typeof e&&n&&e?kh(n,e):n===e}var t4={type:String,component:Ae,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ae,usesMinMaxTime:Boolean,classNames:Ae,content:Ae,didMount:Ae,willUnmount:Ae};function VP(n){return NP(n,Lm)}function OA(n,e){var t={},r={};for(var i in e)i in n&&(t[i]=e[i](n[i]));for(var i in n)i in e||(r[i]=n[i]);return{refined:t,extra:r}}function Ae(n){return n}function FA(n,e,t,r){for(var i={defs:{},instances:{}},o=GP(t),l=0,c=n;l<c.length;l++){var m=IV(c[l],e,t,r,o);m&&FE(m,i)}return i}function FE(n,e){return void 0===e&&(e={defs:{},instances:{}}),e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function BP(n,e){var t=n.instances[e];if(t){var r=n.defs[t.defId],i=LA(n,function(o){return function n4(n,e){return Boolean(n.groupId&&n.groupId===e.groupId)}(r,o)});return i.defs[r.defId]=r,i.instances[t.instanceId]=t,i}return{defs:{},instances:{}}}function HP(n,e){return{defs:(0,G.pi)((0,G.pi)({},n.defs),e.defs),instances:(0,G.pi)((0,G.pi)({},n.instances),e.instances)}}function LA(n,e){var t=Om(n.defs,e),r=Om(n.instances,function(i){return t[i.defId]});return{defs:t,instances:r}}function jP(n){return Array.isArray(n)?n:"string"==typeof n?n.split(/\s+/):[]}var UA={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ae,overlap:Ae,allow:Ae,className:jP,classNames:jP,color:String,backgroundColor:String,borderColor:String,textColor:String},o4={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function VA(n,e){var t=function i4(n,e){return Array.isArray(n)?FA(n,null,e,!0):"object"==typeof n&&n?FA([n],null,e,!0):null!=n?String(n):null}(n.constraint,e);return{display:n.display||null,startEditable:null!=n.startEditable?n.startEditable:n.editable,durationEditable:null!=n.durationEditable?n.durationEditable:n.editable,constraints:null!=t?[t]:[],overlap:null!=n.overlap?n.overlap:null,allows:null!=n.allow?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function EV(n){return n.reduce(s4,o4)}function s4(n,e){return{display:null!=e.display?e.display:n.display,startEditable:null!=e.startEditable?e.startEditable:n.startEditable,durationEditable:null!=e.durationEditable?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:"boolean"==typeof e.overlap?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}var BA={id:String,groupId:String,title:String,url:String,interactive:Boolean},CV={start:Ae,end:Ae,date:Ae,allDay:Boolean},a4=(0,G.pi)((0,G.pi)((0,G.pi)({},BA),CV),{extendedProps:Ae});function IV(n,e,t,r,i){void 0===i&&(i=GP(t));var o=$P(n,t,i),l=o.refined,c=o.extra,f=function u4(n,e){var t=null;return n&&(t=n.defaultAllDay),null==t&&(t=e.options.defaultAllDay),t}(e,t),m=function M5(n,e,t,r){for(var i=0;i<r.length;i+=1){var o=r[i].parse(n,t);if(o){var l=n.allDay;return null==l&&null==(l=e)&&null==(l=o.allDayGuess)&&(l=!1),{allDay:l,duration:o.duration,typeData:o.typeData,typeId:i}}}return null}(l,f,t.dateEnv,t.pluginHooks.recurringTypes);if(m)return(_=HA(l,c,e?e.sourceId:"",m.allDay,Boolean(m.duration),t)).recurringDef={typeId:m.typeId,typeData:m.typeData,duration:m.duration},{def:_,instance:null};var _,C=function l4(n,e,t,r){var o,f,i=n.allDay,l=null,c=!1,m=null;if(o=t.dateEnv.createMarkerMeta(null!=n.start?n.start:n.date))l=o.marker;else if(!r)return null;return null!=n.end&&(f=t.dateEnv.createMarkerMeta(n.end)),null==i&&(i=null!=e?e:(!o||o.isTimeUnspecified)&&(!f||f.isTimeUnspecified)),i&&l&&(l=Wr(l)),f&&(m=f.marker,i&&(m=Wr(m)),l&&m<=l&&(m=null)),m?c=!0:r||(c=t.options.forceEventDuration||!1,m=t.dateEnv.add(l,i?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:i,hasEnd:c,range:{start:l,end:m},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:f?f.forcedTzo:null}}(l,f,t,r);return C?{def:_=HA(l,c,e?e.sourceId:"",C.allDay,C.hasEnd,t),instance:xA(_.defId,C.range,C.forcedStartTzo,C.forcedEndTzo)}:null}function $P(n,e,t){return void 0===t&&(t=GP(e)),OA(n,t)}function GP(n){return(0,G.pi)((0,G.pi)((0,G.pi)({},UA),a4),n.pluginHooks.eventRefiners)}function HA(n,e,t,r,i,o){for(var l={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:j_(),sourceId:t,allDay:r,hasEnd:i,interactive:n.interactive,ui:VA(n,o),extendedProps:(0,G.pi)((0,G.pi)({},n.extendedProps||{}),e)},c=0,f=o.pluginHooks.eventDefMemberAdders;c<f.length;c++)(0,G.pi)(l,(0,f[c])(n));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function DV(n){var e=Math.floor(Nm(n.start,n.end))||1,t=Wr(n.start);return{start:t,end:Hs(t,e)}}function zP(n,e){void 0===e&&(e=Vn(0));var t=null,r=null;if(n.end){r=Wr(n.end);var i=n.end.valueOf()-r.valueOf();i&&i>=Fm(e)&&(r=Hs(r,1))}return n.start&&(t=Wr(n.start),r&&r<=t&&(r=Hs(t,1))),{start:t,end:r}}function q_(n,e,t,r){return"year"===r?Vn(t.diffWholeYears(n,e),"year"):"month"===r?Vn(t.diffWholeMonths(n,e),"month"):function E5(n,e){var t=Wr(n),r=Wr(e);return{years:0,months:0,days:Math.round(Nm(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}(n,e)}function TV(n,e){var i,o,t=[],r=e.start;for(n.sort(d4),i=0;i<n.length;i+=1)(o=n[i]).start>r&&t.push({start:r,end:o.start}),o.end>r&&(r=o.end);return r<e.end&&t.push({start:r,end:e.end}),t}function d4(n,e){return n.start.valueOf()-e.start.valueOf()}function LE(n,e){var t=n.start,r=n.end,i=null;return null!==e.start&&(t=null===t?e.start:new Date(Math.max(t.valueOf(),e.start.valueOf()))),null!=e.end&&(r=null===r?e.end:new Date(Math.min(r.valueOf(),e.end.valueOf()))),(null===t||null===r||t<r)&&(i={start:t,end:r}),i}function WP(n,e){return(null===n.end||null===e.start||n.end>e.start)&&(null===n.start||null===e.end||n.start<e.end)}function jA(n,e){return(null===n.start||null!==e.start&&e.start>=n.start)&&(null===n.end||null!==e.end&&e.end<=n.end)}function Um(n,e){return(null===n.start||e>=n.start)&&(null===n.end||e<n.end)}function qP(n,e,t,r){var i={},o={},l={},c=[],f=[],m=$A(n.defs,e);for(var _ in n.defs)"inverse-background"===(x=m[(C=n.defs[_]).defId]).display&&(C.groupId?(i[C.groupId]=[],l[C.groupId]||(l[C.groupId]=C)):o[_]=[]);for(var M in n.instances){var O=n.instances[M],x=m[(C=n.defs[O.defId]).defId],W=O.range,K=!C.allDay&&r?zP(W,r):W,te=LE(K,t);te&&("inverse-background"===x.display?C.groupId?i[C.groupId].push(te):o[O.defId].push(te):"none"!==x.display&&("background"===x.display?c:f).push({def:C,ui:x,instance:O,range:te,isStart:K.start&&K.start.valueOf()===te.start.valueOf(),isEnd:K.end&&K.end.valueOf()===te.end.valueOf()}))}for(var _e in i)for(var ut=0,at=TV(i[_e],t);ut<at.length;ut++){var C;c.push({def:C=l[_e],ui:x=m[C.defId],instance:null,range:at[ut],isStart:!1,isEnd:!1})}for(var _ in o)for(var Dt=0,wr=TV(o[_],t);Dt<wr.length;Dt++)c.push({def:n.defs[_],ui:m[_],instance:null,range:wr[Dt],isStart:!1,isEnd:!1});return{bg:c,fg:f}}function AV(n,e){n.fcSeg=e}function Z_(n){return n.fcSeg||n.parentNode.fcSeg||null}function $A(n,e){return Mh(n,function(t){return SV(t,e)})}function SV(n,e){var t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),EV(t)}function g4(n){var e=n.eventRange,t=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,o=r.end?r.end.valueOf():0;return(0,G.pi)((0,G.pi)((0,G.pi)({},t.extendedProps),t),{id:t.publicId,start:i,end:o,duration:o-i,allDay:Number(t.allDay),_seg:n})}function m4(n,e){for(var i=n.eventRange,o=i.def,l=i.ui,c=l.startEditable,f=0,m=e.pluginHooks.isDraggableTransformers;f<m.length;f++)c=(0,m[f])(c,o,l,e);return c}function v4(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function y4(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function xV(n,e,t,r,i,o,l){var c=t.dateEnv,f=t.options,m=f.displayEventTime,_=f.displayEventEnd,C=n.eventRange.def,x=n.eventRange.instance;null==m&&(m=!1!==r),null==_&&(_=!1!==i);var M=x.range.start,O=x.range.end,W=o||n.start||n.eventRange.range.start,K=l||n.end||n.eventRange.range.end,te=Wr(M).valueOf()===Wr(W).valueOf(),_e=Wr(Pm(O,-1)).valueOf()===Wr(Pm(K,-1)).valueOf();return m&&!C.allDay&&(te||_e)?(W=te?M:W,K=_e?O:K,_&&C.hasEnd?c.formatRange(W,K,e,{forcedStartTzo:o?null:x.forcedStartTzo,forcedEndTzo:l?null:x.forcedEndTzo}):c.format(W,e,{forcedTzo:o?null:x.forcedStartTzo})):""}function UE(n,e,t){var r=n.eventRange.range;return{isPast:r.end<(t||e.start),isFuture:r.start>=(t||e.end),isToday:e&&Um(e,r.start)}}function w4(n){return n.instance?n.instance.instanceId:n.def.defId+":"+n.range.start.toISOString()}function RV(n,e){var t=n.eventRange,r=t.def,i=t.instance,o=r.url;if(o)return{href:o};var l=e.emitter,f=e.options.eventInteractive;return null==f&&null==(f=r.interactive)&&(f=Boolean(l.hasHandlers("eventClick"))),f?iV(function(m){l.trigger("eventClick",{el:m.target,event:new ai(e,r,i),jsEvent:m,view:e.viewApi})}):{}}var b4={start:Ae,end:Ae,allDay:Boolean};function MV(n,e,t){return(0,G.pi)((0,G.pi)({},kV(n,e,t)),{timeZone:e.timeZone})}function kV(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function A4(n,e,t){var r=$P({editable:!1},t),i=HA(r.refined,r.extra,"",n.allDay,!0,t);return{def:i,ui:SV(i,e),instance:xA(i.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function PV(n,e,t){t.emitter.trigger("select",(0,G.pi)((0,G.pi)({},ZP(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function ZP(n,e){for(var t={},r=0,i=e.pluginHooks.dateSpanTransforms;r<i.length;r++)(0,G.pi)(t,(0,i[r])(n,e));return(0,G.pi)(t,function T4(n,e){return(0,G.pi)((0,G.pi)({},kV(n.range,e,n.allDay)),{allDay:n.allDay})}(n,e.dateEnv)),t}function KP(n,e,t){var r=t.dateEnv,i=t.options,o=e;return n?(o=Wr(o),o=r.add(o,i.defaultAllDayEventDuration)):o=r.add(o,i.defaultTimedEventDuration),o}function YP(n,e,t,r){var i=$A(n.defs,e),o={defs:{},instances:{}};for(var l in n.defs)o.defs[l]=x4(n.defs[l],i[l],t,r);for(var f in n.instances){var m=n.instances[f];o.instances[f]=R4(m,o.defs[m.defId],i[m.defId],t,r)}return o}function x4(n,e,t,r){var i=t.standardProps||{};null==i.hasEnd&&e.durationEditable&&(t.startDelta||t.endDelta)&&(i.hasEnd=!0);var o=(0,G.pi)((0,G.pi)((0,G.pi)({},n),i),{ui:(0,G.pi)((0,G.pi)({},n.ui),i.ui)});t.extendedProps&&(o.extendedProps=(0,G.pi)((0,G.pi)({},o.extendedProps),t.extendedProps));for(var l=0,c=r.pluginHooks.eventDefMutationAppliers;l<c.length;l++)(0,c[l])(o,t,r);return!o.hasEnd&&r.options.forceEventDuration&&(o.hasEnd=!0),o}function R4(n,e,t,r,i){var o=i.dateEnv,l=r.standardProps&&!0===r.standardProps.allDay,c=r.standardProps&&!1===r.standardProps.hasEnd,f=(0,G.pi)({},n);return l&&(f.range=DV(f.range)),r.datesDelta&&t.startEditable&&(f.range={start:o.add(f.range.start,r.datesDelta),end:o.add(f.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(f.range={start:o.add(f.range.start,r.startDelta),end:f.range.end}),r.endDelta&&t.durationEditable&&(f.range={start:f.range.start,end:o.add(f.range.end,r.endDelta)}),c&&(f.range={start:f.range.start,end:KP(e.allDay,f.range.start,i)}),e.allDay&&(f.range={start:Wr(f.range.start),end:Wr(f.range.end)}),f.range.end<f.range.start&&(f.range.end=KP(e.allDay,f.range.start,i)),f}var M4=function(){function n(e,t,r){this.type=e,this.getCurrentData=t,this.dateEnv=r}return Object.defineProperty(n.prototype,"calendar",{get:function(){return this.getCurrentData().calendarApi},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.getCurrentData().viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)},enumerable:!1,configurable:!0}),n.prototype.getOption=function(e){return this.getCurrentData().options[e]},n}(),k4={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ae,eventDataTransform:Ae,success:Ae,failure:Ae};function NV(n,e,t){var r;if(void 0===t&&(t=OV(e)),"string"==typeof n?r={url:n}:"function"==typeof n||Array.isArray(n)?r={events:n}:"object"==typeof n&&n&&(r=n),r){var i=OA(r,t),o=i.refined,l=i.extra,c=function P4(n,e){for(var t=e.pluginHooks.eventSourceDefs,r=t.length-1;r>=0;r-=1){var o=t[r].parseMeta(n);if(o)return{sourceDefId:r,meta:o}}return null}(o,e);if(c)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:o.defaultAllDay,eventDataTransform:o.eventDataTransform,success:o.success,failure:o.failure,publicId:o.id||"",sourceId:j_(),sourceDefId:c.sourceDefId,meta:c.meta,ui:VA(o,e),extendedProps:l}}return null}function OV(n){return(0,G.pi)((0,G.pi)((0,G.pi)({},UA),k4),n.pluginHooks.eventSourceRefiners)}function VE(n,e){return"function"==typeof n&&(n=n()),null==n?e.createNowMarker():e.createMarker(n)}var F4=function(){function n(){}return n.prototype.getCurrentData=function(){return this.currentDataManager.getCurrentData()},n.prototype.dispatch=function(e){return this.currentDataManager.dispatch(e)},Object.defineProperty(n.prototype,"view",{get:function(){return this.getCurrentData().viewApi},enumerable:!1,configurable:!0}),n.prototype.batchRendering=function(e){e()},n.prototype.updateSize=function(){this.trigger("_resize",!0)},n.prototype.setOption=function(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})},n.prototype.getOption=function(e){return this.currentDataManager.currentCalendarOptionsInput[e]},n.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.getCurrentData().availableRawLocales)},n.prototype.on=function(e,t){var r=this.currentDataManager;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,t):console.warn("Unknown listener name '"+e+"'")},n.prototype.off=function(e,t){this.currentDataManager.emitter.off(e,t)},n.prototype.trigger=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(t=this.currentDataManager.emitter).trigger.apply(t,(0,G.ev)([e],r))},n.prototype.changeView=function(e,t){var r=this;this.batchRendering(function(){if(r.unselect(),t)if(t.start&&t.end)r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),r.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{var i=r.getCurrentData().dateEnv;r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(t)})}else r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})},n.prototype.zoomTo=function(e,t){var i;i=this.getCurrentData().viewSpecs[t=t||"day"]||this.getUnitViewSpec(t),this.unselect(),this.dispatch(i?{type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}:{type:"CHANGE_DATE",dateMarker:e})},n.prototype.getUnitViewSpec=function(e){var l,c,t=this.getCurrentData(),r=t.viewSpecs,i=t.toolbarConfig,o=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]);for(var f in r)o.push(f);for(l=0;l<o.length;l+=1)if((c=r[o[l]])&&c.singleUnit===e)return c;return null},n.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},n.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},n.prototype.prevYear=function(){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})},n.prototype.nextYear=function(){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})},n.prototype.today=function(){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:VE(e.calendarOptions.now,e.dateEnv)})},n.prototype.gotoDate=function(e){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})},n.prototype.incrementDate=function(e){var t=this.getCurrentData(),r=Vn(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,r)}))},n.prototype.getDate=function(){var e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)},n.prototype.formatDate=function(e,t){var r=this.getCurrentData().dateEnv;return r.format(r.createMarker(e),Ji(t))},n.prototype.formatRange=function(e,t,r){var i=this.getCurrentData().dateEnv;return i.formatRange(i.createMarker(e),i.createMarker(t),Ji(r),r)},n.prototype.formatIso=function(e,t){var r=this.getCurrentData().dateEnv;return r.formatIso(r.createMarker(e),{omitTime:t})},n.prototype.select=function(e,t){var r;r=null==t?null!=e.start?e:{start:e,end:null}:{start:e,end:t};var i=this.getCurrentData(),o=function E4(n,e,t){var r=function C4(n,e){var t=OA(n,b4),r=t.refined,i=t.extra,o=r.start?e.createMarkerMeta(r.start):null,l=r.end?e.createMarkerMeta(r.end):null,c=r.allDay;return null==c&&(c=o&&o.isTimeUnspecified&&(!l||l.isTimeUnspecified)),(0,G.pi)({range:{start:o?o.marker:null,end:l?l.marker:null},allDay:c},i)}(n,e),i=r.range;if(!i.start)return null;if(!i.end){if(null==t)return null;i.end=e.add(i.start,t)}return r}(r,i.dateEnv,Vn({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),PV(o,null,i))},n.prototype.unselect=function(e){var t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function S4(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}(e,t))},n.prototype.addEvent=function(e,t){if(e instanceof ai){var r=e._def,i=e._instance;return this.getCurrentData().eventStore.defs[r.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:FE({def:r,instance:i})}),this.triggerEventAdd(e)),e}var c,l=this.getCurrentData();if(t instanceof H_)c=t.internalEventSource;else if("boolean"==typeof t)t&&(c=OP(l.eventSources)[0]);else if(null!=t){var f=this.getEventSourceById(t);if(!f)return console.warn('Could not find an event source with ID "'+t+'"'),null;c=f.internalEventSource}var m=IV(e,c,l,!1);if(m){var _=new ai(l,m.def,m.def.recurringDef?null:m.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:FE(m)}),this.triggerEventAdd(_),_}return null},n.prototype.triggerEventAdd=function(e){var t=this;this.getCurrentData().emitter.trigger("eventAdd",{event:e,relatedEvents:[],revert:function(){t.dispatch({type:"REMOVE_EVENTS",eventStore:FV(e)})}})},n.prototype.getEventById=function(e){var t=this.getCurrentData(),r=t.eventStore,i=r.defs,o=r.instances;for(var l in e=String(e),i){var c=i[l];if(c.publicId===e){if(c.recurringDef)return new ai(t,c,null);for(var f in o){var m=o[f];if(m.defId===c.defId)return new ai(t,c,m)}}}return null},n.prototype.getEvents=function(){var e=this.getCurrentData();return Vm(e.eventStore,e)},n.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},n.prototype.getEventSources=function(){var e=this.getCurrentData(),t=e.eventSources,r=[];for(var i in t)r.push(new H_(e,t[i]));return r},n.prototype.getEventSourceById=function(e){var t=this.getCurrentData(),r=t.eventSources;for(var i in e=String(e),r)if(r[i].publicId===e)return new H_(t,r[i]);return null},n.prototype.addEventSource=function(e){var t=this.getCurrentData();if(e instanceof H_)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;var r=NV(e,t);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new H_(t,r)):null},n.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},n.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})},n.prototype.scrollToTime=function(e){var t=Vn(e);t&&this.trigger("_scrollRequest",{time:t})},n}(),ai=function(){function n(e,t,r){this._context=e,this._def=t,this._instance=r||null}return n.prototype.setProp=function(e,t){var r,i;if(e in CV)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===e)t=BA[e](t),this.mutate({standardProps:{publicId:t}});else if(e in BA)t=BA[e](t),this.mutate({standardProps:(r={},r[e]=t,r)});else if(e in UA){var o=UA[e](t);"color"===e?o={backgroundColor:t,borderColor:t}:"editable"===e?o={startEditable:t,durationEditable:t}:((i={})[e]=t,o=i),this.mutate({standardProps:{ui:o}})}else console.warn("Could not set prop '"+e+"'. Use setExtendedProp instead.")},n.prototype.setExtendedProp=function(e,t){var r;this.mutate({extendedProps:(r={},r[e]=t,r)})},n.prototype.setStart=function(e,t){void 0===t&&(t={});var r=this._context.dateEnv,i=r.createMarker(e);if(i&&this._instance){var l=q_(this._instance.range.start,i,r,t.granularity);this.mutate(t.maintainDuration?{datesDelta:l}:{startDelta:l})}},n.prototype.setEnd=function(e,t){void 0===t&&(t={});var i,r=this._context.dateEnv;if((null==e||(i=r.createMarker(e)))&&this._instance)if(i){var o=q_(this._instance.range.end,i,r,t.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})},n.prototype.setDates=function(e,t,r){void 0===r&&(r={});var c,i=this._context.dateEnv,o={allDay:r.allDay},l=i.createMarker(e);if(l&&(null==t||(c=i.createMarker(t)))&&this._instance){var f=this._instance.range;!0===r.allDay&&(f=DV(f));var m=q_(f.start,l,i,r.granularity);if(c){var _=q_(f.end,c,i,r.granularity);!function O5(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}(m,_)?this.mutate({startDelta:m,endDelta:_,standardProps:o}):this.mutate({datesDelta:m,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:m,standardProps:o})}},n.prototype.moveStart=function(e){var t=Vn(e);t&&this.mutate({startDelta:t})},n.prototype.moveEnd=function(e){var t=Vn(e);t&&this.mutate({endDelta:t})},n.prototype.moveDates=function(e){var t=Vn(e);t&&this.mutate({datesDelta:t})},n.prototype.setAllDay=function(e,t){void 0===t&&(t={});var r={allDay:e},i=t.maintainDuration;null==i&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})},n.prototype.formatRange=function(e){var t=this._context.dateEnv,r=this._instance,i=Ji(e);return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})},n.prototype.mutate=function(e){var t=this._instance;if(t){var r=this._def,i=this._context,o=i.getCurrentData().eventStore,l=BP(o,t.instanceId);l=YP(l,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);var f=new n(i,r,t);this._def=l.defs[r.defId],this._instance=l.instances[t.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:l}),i.emitter.trigger("eventChange",{oldEvent:f,event:this,relatedEvents:Vm(l,i,t),revert:function(){i.dispatch({type:"RESET_EVENTS",eventStore:o})}})}},n.prototype.remove=function(){var e=this._context,t=FV(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert:function(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})},Object.defineProperty(n.prototype,"source",{get:function(){var e=this._def.sourceId;return e?new H_(this._context,this._context.getCurrentData().eventSources[e]):null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"startStr",{get:function(){var e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"endStr",{get:function(){var e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._def.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._def.title},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._def.url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"display",{get:function(){return this._def.ui.display||"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!1,configurable:!0}),n.prototype.toPlainObject=function(e){void 0===e&&(e={});var t=this._def,r=t.ui,o=this.startStr,l=this.endStr,c={};return t.title&&(c.title=t.title),o&&(c.start=o),l&&(c.end=l),t.publicId&&(c.id=t.publicId),t.groupId&&(c.groupId=t.groupId),t.url&&(c.url=t.url),r.display&&"auto"!==r.display&&(c.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?c.color=r.backgroundColor:(r.backgroundColor&&(c.backgroundColor=r.backgroundColor),r.borderColor&&(c.borderColor=r.borderColor)),r.textColor&&(c.textColor=r.textColor),r.classNames.length&&(c.classNames=r.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?(0,G.pi)(c,t.extendedProps):c.extendedProps=t.extendedProps),c},n.prototype.toJSON=function(){return this.toPlainObject()},n}();function FV(n){var e,t,r=n._def,i=n._instance;return{defs:(e={},e[r.defId]=r,e),instances:i?(t={},t[i.instanceId]=i,t):{}}}function Vm(n,e,t){var r=n.defs,i=n.instances,o=[],l=t?t.instanceId:"";for(var c in i){var f=i[c];f.instanceId!==l&&o.push(new ai(e,r[f.defId],f))}return o}var LV={},V4=function(){function n(){}return n.prototype.getMarkerYear=function(e){return e.getUTCFullYear()},n.prototype.getMarkerMonth=function(e){return e.getUTCMonth()},n.prototype.getMarkerDay=function(e){return e.getUTCDate()},n.prototype.arrayToMarker=function(e){return ha(e)},n.prototype.markerToArray=function(e){return Np(e)},n}();!function L4(n,e){LV[n]=e}("gregory",V4);var B4=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/,UV=function(){function n(e){var t=this.timeZone=e.timeZone,r="local"!==t&&"UTC"!==t;e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=Boolean(!r||this.namedTimeZoneImpl),this.calendarSystem=function U4(n){return new LV[n]}(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,"ISO"===e.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof e.firstDay&&(this.weekDow=e.firstDay),"function"==typeof e.weekNumberCalculation&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=null!=e.weekText?e.weekText:e.locale.options.weekText,this.weekTextLong=(null!=e.weekTextLong?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}return n.prototype.createMarker=function(e){var t=this.createMarkerMeta(e);return null===t?null:t.marker},n.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):ha(lV(new Date))},n.prototype.createMarkerMeta=function(e){if("string"==typeof e)return this.parse(e);var t=null;return"number"==typeof e?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=ha(e)),null!==t&&cV(t)?{marker:t,isTimeUnspecified:!1,forcedTzo:null}:null},n.prototype.parse=function(e){var t=function H4(n){var e=B4.exec(n);if(e){var t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?1e3*Number("0."+e[12]):0));if(cV(t)){var r=null;return e[13]&&(r=("-"===e[15]?-1:1)*(60*Number(e[16]||0)+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}(e);if(null===t)return null;var r=t.marker,i=null;return null!==t.timeZoneOffset&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-60*t.timeZoneOffset*1e3):i=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}},n.prototype.getYear=function(e){return this.calendarSystem.getMarkerYear(e)},n.prototype.getMonth=function(e){return this.calendarSystem.getMarkerMonth(e)},n.prototype.add=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)},n.prototype.subtract=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)},n.prototype.addYears=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)},n.prototype.addMonths=function(e,t){var r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)},n.prototype.diffWholeYears=function(e,t){var r=this.calendarSystem;return Op(e)===Op(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null},n.prototype.diffWholeMonths=function(e,t){var r=this.calendarSystem;return Op(e)===Op(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+12*(r.getMarkerYear(t)-r.getMarkerYear(e)):null},n.prototype.greatestWholeUnit=function(e,t){var r=this.diffWholeYears(e,t);return null!==r?{unit:"year",value:r}:null!==(r=this.diffWholeMonths(e,t))?{unit:"month",value:r}:(r=function C5(n,e){var t=SA(n,e);return null!==t&&t%7==0?t/7:null}(e,t),null!==r?{unit:"week",value:r}:null!==(r=SA(e,t))?{unit:"day",value:r}:(r=function _5(n,e){return(e.valueOf()-n.valueOf())/36e5}(e,t),AA(r)?{unit:"hour",value:r}:(r=function w5(n,e){return(e.valueOf()-n.valueOf())/6e4}(e,t),AA(r)?{unit:"minute",value:r}:(r=function b5(n,e){return(e.valueOf()-n.valueOf())/1e3}(e,t),AA(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))},n.prototype.countDurationsBetween=function(e,t,r){var i;return r.years&&null!==(i=this.diffWholeYears(e,t))?i/function L5(n){return z_(n)/365}(r):r.months&&null!==(i=this.diffWholeMonths(e,t))?i/function U5(n){return z_(n)/30}(r):r.days&&null!==(i=SA(e,t))?i/z_(r):(t.valueOf()-e.valueOf())/Fm(r)},n.prototype.startOf=function(e,t){return"year"===t?this.startOfYear(e):"month"===t?this.startOfMonth(e):"week"===t?this.startOfWeek(e):"day"===t?Wr(e):"hour"===t?function I5(n){return ha([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}(e):"minute"===t?function D5(n){return ha([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}(e):"second"===t?function T5(n){return ha([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}(e):null},n.prototype.startOfYear=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])},n.prototype.startOfMonth=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])},n.prototype.startOfWeek=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])},n.prototype.computeWeekNumber=function(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):function A5(n,e,t){var r=n.getUTCFullYear(),i=PP(n,r,e,t);if(i<1)return PP(n,r-1,e,t);var o=PP(n,r+1,e,t);return o>=1?Math.min(i,o):i}(e,this.weekDow,this.weekDoy)},n.prototype.format=function(e,t,r){return void 0===r&&(r={}),t.format({marker:e,timeZoneOffset:null!=r.forcedTzo?r.forcedTzo:this.offsetForMarker(e)},this)},n.prototype.formatRange=function(e,t,r,i){return void 0===i&&(i={}),i.isEndExclusive&&(t=Pm(t,-1)),r.formatRange({marker:e,timeZoneOffset:null!=i.forcedStartTzo?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:null!=i.forcedEndTzo?i.forcedEndTzo:this.offsetForMarker(t)},this,i.defaultSeparator)},n.prototype.formatIso=function(e,t){void 0===t&&(t={});var r=null;return t.omitTimeZoneOffset||(r=null!=t.forcedTzo?t.forcedTzo:this.offsetForMarker(e)),function V5(n,e,t){void 0===t&&(t=!1);var r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==e?r=r.replace("Z",""):0!==e&&(r=r.replace("Z",UP(e,!0)))),r}(e,r,t.omitTime)},n.prototype.timestampToMarker=function(e){return"local"===this.timeZone?ha(lV(new Date(e))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?ha(this.namedTimeZoneImpl.timestampToArray(e)):new Date(e)},n.prototype.offsetForMarker=function(e){return"local"===this.timeZone?-uV(Np(e)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Np(e)):null},n.prototype.toDate=function(e,t){return"local"===this.timeZone?uV(Np(e)):"UTC"===this.timeZone?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(Np(e))*60):new Date(e.valueOf()-(t||0))},n}(),j4=[],VV={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},BV=(0,G.pi)((0,G.pi)({},VV),{buttonHints:{prev:"Previous $0",next:"Next $0",today:function(n,e){return"day"===e?"Today":"This "+n}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:function(n){return"Show "+n+" more event"+(1===n?"":"s")}});function HV(n){for(var e=n.length>0?n[0].code:"en",t=j4.concat(n),r={en:BV},i=0,o=t;i<o.length;i++){var l=o[i];r[l.code]=l}return{map:r,defaultCode:e}}function QP(n,e){return"object"!=typeof n||Array.isArray(n)?function $4(n,e){var t=[].concat(n||[]),r=function G4(n,e){for(var t=0;t<n.length;t+=1)for(var r=n[t].toLocaleLowerCase().split("-"),i=r.length;i>0;i-=1){var o=r.slice(0,i).join("-");if(e[o])return e[o]}return null}(t,e)||BV;return jV(n,t,r)}(n,e):jV(n.code,[n.code],n)}function jV(n,e,t){var r=NP([VV,t],["buttonText"]);delete r.code;var i=r.week;return delete r.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}var JP,z4={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Z4(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function GV(n,e){var t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom&&t}function zV(){return null==JP&&(JP=function J4(){if(typeof document>"u")return!0;var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);var t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}()),JP}var XP={defs:{},instances:{}};function X4(n,e,t){var r=[];n&&r.push(n),e&&r.push(e);var i={"":EV(r)};return t&&(0,G.pi)(i,t),i}function WV(n,e,t,r){return{dow:n.getUTCDay(),isDisabled:Boolean(r&&!Um(r.activeRange,n)),isOther:Boolean(r&&!Um(r.currentRange,n)),isToday:Boolean(e&&Um(e,n)),isPast:Boolean(t?n<t:!!e&&n<e.start),isFuture:Boolean(t?n>t:!!e&&n>=e.end)}}function eN(n,e){var t=["fc-day","fc-day-"+sV[n.dow]];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}!function(){function n(){this.getKeysForEventDefs=pn(this._getKeysForEventDefs),this.splitDateSelection=pn(this._splitDateSpan),this.splitEventStore=pn(this._splitEventStore),this.splitIndividualUi=pn(this._splitIndividualUi),this.splitEventDrag=pn(this._splitInteraction),this.splitEventResize=pn(this._splitInteraction),this.eventUiBuilders={}}n.prototype.splitProps=function(e){var t=this,r=this.getKeyInfo(e),i=this.getKeysForEventDefs(e.eventStore),o=this.splitDateSelection(e.dateSelection),l=this.splitIndividualUi(e.eventUiBases,i),c=this.splitEventStore(e.eventStore,i),f=this.splitEventDrag(e.eventDrag),m=this.splitEventResize(e.eventResize),_={};for(var C in this.eventUiBuilders=Mh(r,function(W,K){return t.eventUiBuilders[K]||pn(X4)}),r){var x=r[C],M=c[C]||XP;_[C]={businessHours:x.businessHours||e.businessHours,dateSelection:o[C]||null,eventStore:M,eventUiBases:(0,this.eventUiBuilders[C])(e.eventUiBases[""],x.ui,l[C]),eventSelection:M.instances[e.eventSelection]?e.eventSelection:"",eventDrag:f[C]||null,eventResize:m[C]||null}}return _},n.prototype._splitDateSpan=function(e){var t={};if(e)for(var i=0,o=this.getKeysForDateSpan(e);i<o.length;i++)t[o[i]]=e;return t},n.prototype._getKeysForEventDefs=function(e){var t=this;return Mh(e.defs,function(r){return t.getKeysForEventDef(r)})},n.prototype._splitEventStore=function(e,t){var r=e.defs,i=e.instances,o={};for(var l in r)for(var c=0,f=t[l];c<f.length;c++)o[m=f[c]]||(o[m]={defs:{},instances:{}}),o[m].defs[l]=r[l];for(var _ in i)for(var C=i[_],x=0,M=t[C.defId];x<M.length;x++){var m;o[m=M[x]]&&(o[m].instances[_]=C)}return o},n.prototype._splitIndividualUi=function(e,t){var r={};for(var i in e)if(i)for(var o=0,l=t[i];o<l.length;o++){var c=l[o];r[c]||(r[c]={}),r[c][i]=e[i]}return r},n.prototype._splitInteraction=function(e){var t={};if(e){var r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),i=this._getKeysForEventDefs(e.mutatedEvents),o=this._splitEventStore(e.mutatedEvents,i),l=function(f){t[f]||(t[f]={affectedEvents:r[f]||XP,mutatedEvents:o[f]||XP,isEvent:e.isEvent})};for(var c in r)l(c);for(var c in o)l(c)}return t}}();var eZ=Ji({year:"numeric",month:"long",day:"numeric"}),tZ=Ji({week:"long"});function tN(n,e,t,r){void 0===t&&(t="day"),void 0===r&&(r=!0);var i=n.dateEnv,o=n.options,l=n.calendarApi,c=i.format(e,"week"===t?tZ:eZ);if(o.navLinks){var f=i.toDate(e),m=function(_){var C="day"===t?o.navLinkDayClick:"week"===t?o.navLinkWeekClick:null;"function"==typeof C?C.call(l,i.toDate(e),_):("string"==typeof C&&(t=C),l.zoomTo(e,t))};return(0,G.pi)({title:OE(o.navLinkHint,[c,f],c),"data-navlink":""},r?rV(m):{onClick:m})}return{"aria-label":c}}var rN,nN=null;function qV(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function aZ(n,e,t){void 0===e&&(e=!1);var r=t?n.getBoundingClientRect():iN(n),i=function sZ(n,e){void 0===e&&(e=!1);var t=window.getComputedStyle(n),r=parseInt(t.borderLeftWidth,10)||0,i=parseInt(t.borderRightWidth,10)||0,o=parseInt(t.borderTopWidth,10)||0,l=parseInt(t.borderBottomWidth,10)||0,c=qV(n),f=c.y-r-i,_={borderLeft:r,borderRight:i,borderTop:o,borderBottom:l,scrollbarBottom:c.x-o-l,scrollbarLeft:0,scrollbarRight:0};return function nZ(){return null===nN&&(nN=function rZ(){var n=document.createElement("div");NE(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);var t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return MP(n),t}()),nN}()&&"rtl"===t.direction?_.scrollbarLeft=f:_.scrollbarRight=f,e&&(_.paddingLeft=parseInt(t.paddingLeft,10)||0,_.paddingRight=parseInt(t.paddingRight,10)||0,_.paddingTop=parseInt(t.paddingTop,10)||0,_.paddingBottom=parseInt(t.paddingBottom,10)||0),_}(n,e),o={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(o.left+=i.paddingLeft,o.right-=i.paddingRight,o.top+=i.paddingTop,o.bottom-=i.paddingBottom),o}function iN(n){var e=n.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset}}function ZV(n){for(var e=[];n instanceof HTMLElement;){var t=window.getComputedStyle(n);if("fixed"===t.position)break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}var GA=function(){function n(){this.handlers={},this.thisContext=null}return n.prototype.setThisContext=function(e){this.thisContext=e},n.prototype.setOptions=function(e){this.options=e},n.prototype.on=function(e,t){!function dZ(n,e,t){(n[e]||(n[e]=[])).push(t)}(this.handlers,e,t)},n.prototype.off=function(e,t){!function hZ(n,e,t){t?n[e]&&(n[e]=n[e].filter(function(r){return r!==t})):delete n[e]}(this.handlers,e,t)},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=this.handlers[e]||[],o=this.options&&this.options[e],l=[].concat(o||[],i),c=0,f=l;c<f.length;c++){var m=f[c];m.apply(this.thisContext,t)}},n.prototype.hasHandlers=function(e){return Boolean(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])},n}(),oN=function(){function n(e,t,r,i){this.els=t;var o=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(o.left),i&&this.buildElVerticals(o.top)}return n.prototype.buildElHorizontals=function(e){for(var t=[],r=[],i=0,o=this.els;i<o.length;i++){var c=o[i].getBoundingClientRect();t.push(c.left-e),r.push(c.right-e)}this.lefts=t,this.rights=r},n.prototype.buildElVerticals=function(e){for(var t=[],r=[],i=0,o=this.els;i<o.length;i++){var c=o[i].getBoundingClientRect();t.push(c.top-e),r.push(c.bottom-e)}this.tops=t,this.bottoms=r},n.prototype.leftToIndex=function(e){var l,r=this.lefts,i=this.rights,o=r.length;for(l=0;l<o;l+=1)if(e>=r[l]&&e<i[l])return l},n.prototype.topToIndex=function(e){var l,r=this.tops,i=this.bottoms,o=r.length;for(l=0;l<o;l+=1)if(e>=r[l]&&e<i[l])return l},n.prototype.getWidth=function(e){return this.rights[e]-this.lefts[e]},n.prototype.getHeight=function(e){return this.bottoms[e]-this.tops[e]},n}(),sN=function(){function n(){}return n.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},n.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},n.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},n.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},n.prototype.canScrollUp=function(){return this.getScrollTop()>0},n.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},n.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},n.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},n}(),fZ=function(n){function e(t){var r=n.call(this)||this;return r.el=t,r}return(0,G.ZT)(e,n),e.prototype.getScrollTop=function(){return this.el.scrollTop},e.prototype.getScrollLeft=function(){return this.el.scrollLeft},e.prototype.setScrollTop=function(t){this.el.scrollTop=t},e.prototype.setScrollLeft=function(t){this.el.scrollLeft=t},e.prototype.getScrollWidth=function(){return this.el.scrollWidth},e.prototype.getScrollHeight=function(){return this.el.scrollHeight},e.prototype.getClientHeight=function(){return this.el.clientHeight},e.prototype.getClientWidth=function(){return this.el.clientWidth},e}(sN),pZ=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.getScrollTop=function(){return window.pageYOffset},e.prototype.getScrollLeft=function(){return window.pageXOffset},e.prototype.setScrollTop=function(t){window.scroll(window.pageXOffset,t)},e.prototype.setScrollLeft=function(t){window.scroll(t,window.pageYOffset)},e.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},e.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},e.prototype.getClientHeight=function(){return document.documentElement.clientHeight},e.prototype.getClientWidth=function(){return document.documentElement.clientWidth},e}(sN),BE=function(){function n(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}return n.prototype.setIconOverride=function(e){var t,r;if("object"==typeof e&&e){for(r in t=(0,G.pi)({},this.iconClasses),e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else!1===e&&(this.iconClasses={})},n.prototype.applyIconOverridePrefix=function(e){var t=this.iconOverridePrefix;return t&&0!==e.indexOf(t)&&(e=t+e),e},n.prototype.getClass=function(e){return this.classes[e]||""},n.prototype.getIconClass=function(e,t){var r;return(r=t&&this.rtlIconClasses&&this.rtlIconClasses[e]||this.iconClasses[e])?this.baseIconClass+" "+r:""},n.prototype.getCustomButtonIconClass=function(e){var t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption])?this.baseIconClass+" "+this.applyIconOverridePrefix(t):""},n}();BE.prototype.classes={},BE.prototype.iconClasses={},BE.prototype.baseIconClass="",BE.prototype.iconOverridePrefix="";var gZ=function(){function n(e,t,r,i){var o=this;this.execFunc=e,this.emitter=t,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=function(l){o.queuedRequest=(0,G.pi)({},o.queuedRequest||{},l),o.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}return n.prototype.detach=function(){this.emitter.off("_scrollRequest",this.handleScrollRequest)},n.prototype.update=function(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()},n.prototype.fireInitialScroll=function(){this.handleScrollRequest({time:this.scrollTime})},n.prototype.drain=function(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)},n}(),Lp=KU({});function mZ(n,e,t,r,i,o,l,c,f,m,_,C,x){return{dateEnv:i,options:t,pluginHooks:l,emitter:m,dispatch:c,getCurrentData:f,calendarApi:_,viewSpec:n,viewApi:e,dateProfileGenerator:r,theme:o,isRtl:"rtl"===t.direction,addResizeHandler:function(M){m.on("_resize",M)},removeResizeHandler:function(M){m.off("_resize",M)},createScrollResponder:function(M){return new gZ(M,m,Vn(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:C,unregisterInteractiveComponent:x}}var zA=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.shouldComponentUpdate=function(t,r){return this.debug&&console.log(hV(t,this.props),hV(r,this.state)),!FP(this.props,t,this.propEquality)||!FP(this.state,r,this.stateEquality)},e.prototype.safeSetState=function(t){FP(this.state,(0,G.pi)((0,G.pi)({},this.state),t),this.stateEquality)||this.setState(t)},e.addPropsEquality=vZ,e.addStateEquality=yZ,e.contextType=Lp,e}(RP);zA.prototype.propEquality={},zA.prototype.stateEquality={};var qr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.contextType=Lp,e}(zA);function vZ(n){var e=Object.create(this.prototype.propEquality);(0,G.pi)(e,n),this.prototype.propEquality=e}function yZ(n){var e=Object.create(this.prototype.stateEquality);(0,G.pi)(e,n),this.prototype.stateEquality=e}function Nh(n,e){"function"==typeof n?n(e):n&&(n.current=e)}var K_=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.uid=j_(),t}return(0,G.ZT)(e,n),e.prototype.prepareHits=function(){},e.prototype.queryHit=function(t,r,i,o){return null},e.prototype.isValidSegDownEl=function(t){return!this.props.eventDrag&&!this.props.eventResize&&!as(t,".fc-event-mirror")},e.prototype.isValidDateDownEl=function(t){return!(as(t,".fc-event:not(.fc-bg-event)")||as(t,".fc-more-link")||as(t,"a[data-navlink]")||as(t,".fc-popover"))},e}(qr);function Up(n){return{id:j_(),deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,contentTypeHandlers:n.contentTypeHandlers||{},listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function bZ(n,e){return{reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:(0,G.pi)((0,G.pi)({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:(0,G.pi)((0,G.pi)({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:(0,G.pi)((0,G.pi)({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:(0,G.pi)((0,G.pi)({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:(0,G.pi)((0,G.pi)({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,contentTypeHandlers:(0,G.pi)((0,G.pi)({},n.contentTypeHandlers),e.contentTypeHandlers),listenerRefiners:(0,G.pi)((0,G.pi)({},n.listenerRefiners),e.listenerRefiners),optionRefiners:(0,G.pi)((0,G.pi)({},n.optionRefiners),e.optionRefiners),propSetHandlers:(0,G.pi)((0,G.pi)({},n.propSetHandlers),e.propSetHandlers)}}var Vp=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e}(BE);function aN(n,e,t,r){if(e[n])return e[n];var i=function CZ(n,e,t,r){var i=t[n],o=r[n],l=function(_){return i&&null!==i[_]?i[_]:o&&null!==o[_]?o[_]:null},c=l("component"),f=l("superType"),m=null;if(f){if(f===n)throw new Error("Can't have a custom view type that references itself");m=aN(f,e,t,r)}return!c&&m&&(c=m.component),c?{type:n,component:c,defaults:(0,G.pi)((0,G.pi)({},m?m.defaults:{}),i?i.rawOptions:{}),overrides:(0,G.pi)((0,G.pi)({},m?m.overrides:{}),o?o.rawOptions:{})}:null}(n,e,t,r);return i&&(e[n]=i),i}Vp.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},Vp.prototype.baseIconClass="fc-icon",Vp.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},Vp.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},Vp.prototype.iconOverrideOption="buttonIcons",Vp.prototype.iconOverrideCustomButtonOption="icon",Vp.prototype.iconOverridePrefix="fc-icon-";var Bm=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.rootElRef=Jl(),t.handleRootEl=function(r){Nh(t.rootElRef,r),t.props.elRef&&Nh(t.props.elRef,r)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,r=this.props,i=r.hookProps;return Te(lN,{hookProps:i,didMount:r.didMount,willUnmount:r.willUnmount,elRef:this.handleRootEl},function(o){return Te(YV,{hookProps:i,content:r.content,defaultContent:r.defaultContent,backupElRef:t.rootElRef},function(l,c){return r.children(o,JV(r.classNames,i),l,c)})})},e}(qr),KV=KU(0);function YV(n){return Te(KV.Consumer,null,function(e){return Te(IZ,(0,G.pi)({renderId:e},n))})}var IZ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.innerElRef=Jl(),t}return(0,G.ZT)(e,n),e.prototype.render=function(){return this.props.children(this.innerElRef,this.renderInnerContent())},e.prototype.componentDidMount=function(){this.updateCustomContent()},e.prototype.componentDidUpdate=function(){this.updateCustomContent()},e.prototype.componentWillUnmount=function(){this.customContentInfo&&this.customContentInfo.destroy&&this.customContentInfo.destroy()},e.prototype.renderInnerContent=function(){var t=this.customContentInfo,r=this.getInnerContent(),i=this.getContentMeta(r);return t&&t.contentKey===i.contentKey?t&&(t.contentVal=r[i.contentKey]):(t&&(t.destroy&&t.destroy(),t=this.customContentInfo=null),i.contentKey&&(t=this.customContentInfo=(0,G.pi)({contentKey:i.contentKey,contentVal:r[i.contentKey]},i.buildLifecycleFuncs()))),t?[]:r},e.prototype.getInnerContent=function(){var t=this.props,r=XV(t.content,t.hookProps);return void 0===r&&(r=XV(t.defaultContent,t.hookProps)),r??null},e.prototype.getContentMeta=function(t){var r=this.context.pluginHooks.contentTypeHandlers,i="",o=null;if(t)for(var l in r)if(void 0!==t[l]){i=l,o=r[l];break}return{contentKey:i,buildLifecycleFuncs:o}},e.prototype.updateCustomContent=function(){this.customContentInfo&&this.customContentInfo.render(this.innerElRef.current||this.props.backupElRef.current,this.customContentInfo.contentVal)},e}(qr),lN=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.handleRootEl=function(r){t.rootEl=r,t.props.elRef&&Nh(t.props.elRef,r)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){return this.props.children(this.handleRootEl)},e.prototype.componentDidMount=function(){var t=this.props.didMount;t&&t((0,G.pi)((0,G.pi)({},this.props.hookProps),{el:this.rootEl}))},e.prototype.componentWillUnmount=function(){var t=this.props.willUnmount;t&&t((0,G.pi)((0,G.pi)({},this.props.hookProps),{el:this.rootEl}))},e}(qr);function QV(){var n,e,t=[];return function(r,i){return(!e||!kh(e,i)||r!==n)&&(n=r,e=i,t=JV(r,i)),t}}function JV(n,e){return"function"==typeof n&&(n=n(e)),jP(n)}function XV(n,e){return"function"==typeof n?n(e,Te):n}var uN=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.normalizeClassNames=QV(),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.context,o=i.options,l={view:i.viewApi},c=this.normalizeClassNames(o.viewClassNames,l);return Te(lN,{hookProps:l,didMount:o.viewDidMount,willUnmount:o.viewWillUnmount,elRef:r.elRef},function(f){return r.children(f,["fc-"+r.viewSpec.type+"-view","fc-view"].concat(c))})},e}(qr);function eB(n){return Mh(n,DZ)}function DZ(n){var e="function"==typeof n?{component:n}:n,t=e.component;return e.content&&(t=function TZ(n){return function(e){return Te(Lp.Consumer,null,function(t){return Te(uN,{viewSpec:t.viewSpec},function(r,i){var o=(0,G.pi)((0,G.pi)({},e),{nextDayThreshold:t.options.nextDayThreshold});return Te(Bm,{hookProps:o,classNames:n.classNames,content:n.content,didMount:n.didMount,willUnmount:n.willUnmount,elRef:r},function(l,c,f,m){return Te("div",{className:i.concat(c).join(" "),ref:l},m)})})})}}(e)),{superType:e.type,component:t,rawOptions:e}}function AZ(n,e,t,r){var i=eB(n),o=eB(e.views),l=function EZ(n,e){var r,t={};for(r in n)aN(r,t,n,e);for(r in e)aN(r,t,n,e);return t}(i,o);return Mh(l,function(c){return function SZ(n,e,t,r,i){var o=n.overrides.duration||n.defaults.duration||r.duration||t.duration,l=null,c="",f="",m={};if(o&&(l=function xZ(n){var e=JSON.stringify(n),t=tB[e];return void 0===t&&(t=Vn(n),tB[e]=t),t}(o))){var _=LP(l);c=_.unit,1===_.value&&(f=c,m=e[c]?e[c].rawOptions:{})}var C=function(M){var O=M.buttonText||{},W=n.defaults.buttonTextKey;return null!=W&&null!=O[W]?O[W]:null!=O[n.type]?O[n.type]:null!=O[f]?O[f]:null},x=function(M){var O=M.buttonHints||{},W=n.defaults.buttonTextKey;return null!=W&&null!=O[W]?O[W]:null!=O[n.type]?O[n.type]:null!=O[f]?O[f]:null};return{type:n.type,component:n.component,duration:l,durationUnit:c,singleUnit:f,optionDefaults:n.defaults,optionOverrides:(0,G.pi)((0,G.pi)({},m),n.overrides),buttonTextOverride:C(r)||C(t)||n.overrides.buttonText,buttonTextDefault:C(i)||n.defaults.buttonText||C(Ph)||n.type,buttonTitleOverride:x(r)||x(t)||n.overrides.buttonHint,buttonTitleDefault:x(i)||n.defaults.buttonHint||x(Ph)}}(c,o,e,t,r)})}var tB={},nB=function(){function n(e){this.props=e,this.nowDate=VE(e.nowInput,e.dateEnv),this.initHiddenDays()}return n.prototype.buildPrev=function(e,t,r){var i=this.props.dateEnv,o=i.subtract(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(o,-1,r)},n.prototype.buildNext=function(e,t,r){var i=this.props.dateEnv,o=i.add(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(o,1,r)},n.prototype.build=function(e,t,r){void 0===r&&(r=!0);var o,l,c,f,m,_,i=this.props;return o=this.buildValidRange(),o=this.trimHiddenDays(o),r&&(e=function f4(n,e){return null!=e.start&&n<e.start?e.start:null!=e.end&&n>=e.end?new Date(e.end.valueOf()-1):n}(e,o)),l=this.buildCurrentRangeInfo(e,t),c=/^(year|month|week|day)$/.test(l.unit),f=this.buildRenderRange(this.trimHiddenDays(l.range),l.unit,c),m=f=this.trimHiddenDays(f),i.showNonCurrentDates||(m=LE(m,l.range)),m=LE(m=this.adjustActiveRange(m),o),_=WP(l.range,o),{validRange:o,currentRange:l.range,currentRangeUnit:l.unit,isRangeAllDay:c,activeRange:m,renderRange:f,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:_,dateIncrement:this.buildDateIncrement(l.duration)}},n.prototype.buildValidRange=function(){var e=this.props.validRangeInput,t="function"==typeof e?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}},n.prototype.buildCurrentRangeInfo=function(e,t){var c,r=this.props,i=null,o=null,l=null;return r.duration?l=this.buildRangeFromDuration(e,t,i=r.duration,o=r.durationUnit):(c=this.props.dayCount)?(o="day",l=this.buildRangeFromDayCount(e,t,c)):(l=this.buildCustomVisibleRange(e))?o=r.dateEnv.greatestWholeUnit(l.start,l.end).unit:(o=LP(i=this.getFallbackDuration()).unit,l=this.buildRangeFromDuration(e,t,i,o)),{duration:i,unit:o,range:l}},n.prototype.getFallbackDuration=function(){return Vn({day:1})},n.prototype.adjustActiveRange=function(e){var t=this.props,r=t.dateEnv,o=t.slotMinTime,l=t.slotMaxTime,c=e.start,f=e.end;return t.usesMinMaxTime&&(z_(o)<0&&(c=Wr(c),c=r.add(c,o)),z_(l)>1&&(f=Hs(f=Wr(f),-1),f=r.add(f,l))),{start:c,end:f}},n.prototype.buildRangeFromDuration=function(e,t,r,i){var f,m,_,o=this.props,l=o.dateEnv,c=o.dateAlignment;if(!c){var C=this.props.dateIncrement;c=C&&Fm(C)<Fm(r)?LP(C).unit:i}function x(){f=l.startOf(e,c),m=l.add(f,r),_={start:f,end:m}}return z_(r)<=1&&this.isHiddenDay(f)&&(f=Wr(f=this.skipHiddenDays(f,t))),x(),this.trimHiddenDays(_)||(e=this.skipHiddenDays(e,t),x()),_},n.prototype.buildRangeFromDayCount=function(e,t,r){var m,i=this.props,l=i.dateAlignment,c=0,f=e;l&&(f=i.dateEnv.startOf(f,l)),f=Wr(f),m=f=this.skipHiddenDays(f,t);do{m=Hs(m,1),this.isHiddenDay(m)||(c+=1)}while(c<r);return{start:f,end:m}},n.prototype.buildCustomVisibleRange=function(e){var t=this.props,r=t.visibleRangeInput,i="function"==typeof r?r.call(t.calendarApi,t.dateEnv.toDate(e)):r,o=this.refineRange(i);return!o||null!=o.start&&null!=o.end?o:null},n.prototype.buildRenderRange=function(e,t,r){return e},n.prototype.buildDateIncrement=function(e){var r;return this.props.dateIncrement||((r=this.props.dateAlignment)?Vn(1,r):e||Vn({days:1}))},n.prototype.refineRange=function(e){if(e){var t=function c4(n,e){var t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}(e,this.props.dateEnv);return t&&(t=zP(t)),t}return null},n.prototype.initHiddenDays=function(){var i,e=this.props.hiddenDays||[],t=[],r=0;for(!1===this.props.weekends&&e.push(0,6),i=0;i<7;i+=1)(t[i]=-1!==e.indexOf(i))||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t},n.prototype.trimHiddenDays=function(e){var t=e.start,r=e.end;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),null==t||null==r||t<r?{start:t,end:r}:null},n.prototype.isHiddenDay=function(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]},n.prototype.skipHiddenDays=function(e,t,r){for(void 0===t&&(t=1),void 0===r&&(r=!1);this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=Hs(e,t);return e},n}();function rB(n){for(var e in n)if(n[e].isFetching)return!0;return!1}function iB(n,e,t,r){for(var i={},o=0,l=e;o<l.length;o++){var c=l[o];i[c.sourceId]=c}return t&&(i=oB(i,t,r)),(0,G.pi)((0,G.pi)({},n),i)}function oB(n,e,t){return cN(n,Om(n,function(r){return function LZ(n,e,t){return aB(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}(r,e,t)}),e,!1,t)}function cN(n,e,t,r,i){var o={};for(var l in n){var c=n[l];o[l]=e[l]?UZ(c,t,r,i):c}return o}function UZ(n,e,t,r){var i=r.options,o=r.calendarApi,l=r.pluginHooks.eventSourceDefs[n.sourceDefId],c=j_();return l.fetch({eventSource:n,range:e,isRefetch:t,context:r},function(f){var m=f.rawEvents;i.eventSourceSuccess&&(m=i.eventSourceSuccess.call(o,m,f.xhr)||m),n.success&&(m=n.success.call(o,m,f.xhr)||m),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:c,fetchRange:e,rawEvents:m})},function(f){console.warn(f.message,f),i.eventSourceFailure&&i.eventSourceFailure.call(o,f),n.failure&&n.failure(f),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:c,fetchRange:e,error:f})}),(0,G.pi)((0,G.pi)({},n),{isFetching:!0,latestFetchId:c})}function sB(n,e){return Om(n,function(t){return aB(t,e)})}function aB(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function lB(n,e){var t;if(e){t=[];for(var r=0,i=n;r<i.length;r++){var o=i[r],l=e(o);l?t.push(l):null==l&&t.push(o)}}else t=n;return t}function uB(n,e){return LA(n,function(t){return t.sourceId!==e})}function qZ(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function ZZ(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function KZ(n,e){var t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return{affectedEvents:(t=e.state).affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function YZ(n,e){var t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return{affectedEvents:(t=e.state).affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function QZ(n,e,t,r,i){return{header:n.headerToolbar?cB(n.headerToolbar,n,e,t,r,i):null,footer:n.footerToolbar?cB(n.footerToolbar,n,e,t,r,i):null}}function cB(n,e,t,r,i,o){var l={},c=[],f=!1;for(var m in n){var C=JZ(n[m],e,t,r,i,o);l[m]=C.widgets,c.push.apply(c,C.viewsWithButtons),f=f||C.hasTitle}return{sectionWidgets:l,viewsWithButtons:c,hasTitle:f}}function JZ(n,e,t,r,i,o){var l="rtl"===e.direction,c=e.customButtons||{},f=t.buttonText||{},m=e.buttonText||{},_=t.buttonHints||{},C=e.buttonHints||{},x=n?n.split(" "):[],M=[],O=!1;return{widgets:x.map(function(K){return K.split(",").map(function(te){if("title"===te)return O=!0,{buttonName:te};var _e,ke,Ne,ut,at,Gt;if(_e=c[te])Ne=function(Do){_e.click&&_e.click.call(Do.target,Do,Do.target)},(ut=r.getCustomButtonIconClass(_e))||(ut=r.getIconClass(te,l))||(at=_e.text),Gt=_e.hint||_e.text;else if(ke=i[te]){M.push(te),Ne=function(){o.changeView(te)},(at=ke.buttonTextOverride)||(ut=r.getIconClass(te,l))||(at=ke.buttonTextDefault);var Dt=ke.buttonTextOverride||ke.buttonTextDefault;Gt=OE(ke.buttonTitleOverride||ke.buttonTitleDefault||e.viewHint,[Dt,te],Dt)}else if(o[te])if(Ne=function(){o[te]()},(at=f[te])||(ut=r.getIconClass(te,l))||(at=m[te]),"prevYear"===te||"nextYear"===te){var wr="prevYear"===te?"prev":"next";Gt=OE(_[wr]||C[wr],[m.year||"year","year"],m[te])}else Gt=function(Do){return OE(_[te]||C[te],[m[Do]||Do,Do],m[te])};return{buttonName:te,buttonClick:Ne,buttonIcon:ut,buttonText:at,buttonHint:Gt}})}),viewsWithButtons:M,hasTitle:O}}var XZ={ignoreRange:!0,parseMeta:function(n){return Array.isArray(n.events)?n.events:null},fetch:function(n,e){e({rawEvents:n.eventSource.meta})}},e8=Up({eventSourceDefs:[XZ]}),t8={parseMeta:function(n){return"function"==typeof n.events?n.events:null},fetch:function(n,e,t){!function cZ(n,e,t){var r=!1,i=function(){r||(r=!0,e.apply(this,arguments))},o=function(){r||(r=!0,t&&t.apply(this,arguments))},l=n(i,o);l&&"function"==typeof l.then&&l.then(i,o)}(n.eventSource.meta.bind(null,MV(n.range,n.context.dateEnv)),function(o){e({rawEvents:o})},t)}},n8=Up({eventSourceDefs:[t8]});function dB(n){var e=[];for(var t in n)e.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e.join("&")}var s8={parseMeta:function(n){return!n.url||"json"!==n.format&&n.format?null:{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}},fetch:function(n,e,t){var r=n.eventSource.meta,i=function l8(n,e,t){var o,l,c,f,r=t.dateEnv,i=t.options,m={};return null==(o=n.startParam)&&(o=i.startParam),null==(l=n.endParam)&&(l=i.endParam),null==(c=n.timeZoneParam)&&(c=i.timeZoneParam),f="function"==typeof n.extraParams?n.extraParams():n.extraParams||{},(0,G.pi)(m,f),m[o]=r.formatIso(e.start),m[l]=r.formatIso(e.end),"local"!==r.timeZone&&(m[c]=r.timeZone),m}(r,n.range,n.context);!function r8(n,e,t,r,i){var o=null;"GET"===(n=n.toUpperCase())?e=function i8(n,e){return n+(-1===n.indexOf("?")?"?":"&")+dB(e)}(e,t):o=dB(t);var l=new XMLHttpRequest;l.open(n,e,!0),"GET"!==n&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.onload=function(){if(l.status>=200&&l.status<400){var c=!1,f=void 0;try{f=JSON.parse(l.responseText),c=!0}catch{}c?r(f,l):i("Failure parsing JSON",l)}else i("Request failed",l)},l.onerror=function(){i("Request failed",l)},l.send(o)}(r.method,r.url,i,function(o,l){e({rawEvents:o,xhr:l})},function(o,l){t({message:o,xhr:l})})}},a8=Up({eventSourceRefiners:{method:String,extraParams:Ae,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[s8]}),c8={parse:function(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){var t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null},r=void 0;return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=function F5(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}(n.endTime,n.startTime)),{allDayGuess:Boolean(!n.startTime&&!n.endTime),duration:r,typeData:t}}return null},expand:function(n,e,t){var r=LE(e,{start:n.startRecur,end:n.endRecur});return r?function h8(n,e,t,r){for(var i=n?dV(n):null,o=Wr(t.start),l=t.end,c=[];o<l;){var f=void 0;(!i||i[o.getUTCDay()])&&(f=e?r.add(o,e):o,c.push(f)),o=Hs(o,1)}return c}(n.daysOfWeek,n.startTime,r,t):[]}},d8=Up({recurringTypes:[c8],eventRefiners:{daysOfWeek:Ae,startTime:Vn,endTime:Vn,duration:Vn,startRecur:Ae,endRecur:Ae}}),f8=Up({optionChangeHandlers:{events:function(n,e){hB([n],e)},eventSources:hB}});function hB(n,e){for(var t=OP(e.getCurrentData().eventSources),r=[],i=0,o=n;i<o.length;i++){for(var l=o[i],c=!1,f=0;f<t.length;f+=1)if(t[f]._raw===l){t.splice(f,1),c=!0;break}c||r.push(l)}for(var m=0,_=t;m<_.length;m++)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:_[m].sourceId});for(var x=0,M=r;x<M.length;x++)e.calendarApi.addEventSource(M[x])}var fB=[e8,n8,a8,d8,f8,Up({isLoadingFuncs:[function(n){return rB(n.eventSources)}],contentTypeHandlers:{html:function m8(){var n=null,e="";return{render:function t(i,o){(i!==n||o!==e)&&(i.innerHTML=o),n=i,e=o},destroy:function r(){n.innerHTML="",n=null,e=""}}},domNodes:function v8(){var n=null,e=[];function r(){e.forEach(MP),e=[],n=null}return{render:function t(i,o){var l=Array.prototype.slice.call(o);if(i!==n||!Fp(e,l)){for(var c=0,f=l;c<f.length;c++)i.appendChild(f[c]);r()}n=i,e=l},destroy:r}}},propSetHandlers:{dateProfile:function p8(n,e){e.emitter.trigger("datesSet",(0,G.pi)((0,G.pi)({},MV(n.activeRange,e.dateEnv)),{view:e.viewApi}))},eventStore:function g8(n,e){var t=e.emitter;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Vm(n,e))}}})],dN=function(){function n(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}return n.prototype.request=function(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==e?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))},n.prototype.pause=function(e){void 0===e&&(e="");var t=this.pauseDepths;t[e]=(t[e]||0)+1,this.clearTimeout()},n.prototype.resume=function(e,t){void 0===e&&(e="");var r=this.pauseDepths;e in r&&(t?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())},n.prototype.isPaused=function(){return Object.keys(this.pauseDepths).length},n.prototype.tryDrain=function(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}},n.prototype.clear=function(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}},n.prototype.clearTimeout=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},n.prototype.drained=function(){this.drainedOption&&this.drainedOption()},n}(),y8=function(){function n(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new dN(this.drain.bind(this))}return n.prototype.request=function(e,t){this.queue.push(e),this.delayedRunner.request(t)},n.prototype.pause=function(e){this.delayedRunner.pause(e)},n.prototype.resume=function(e,t){this.delayedRunner.resume(e,t)},n.prototype.drain=function(){for(var e=this.queue;e.length;){for(var t=[],r=void 0;r=e.shift();)this.runTask(r),t.push(r);this.drained(t)}},n.prototype.runTask=function(e){this.runTaskOption&&this.runTaskOption(e)},n.prototype.drained=function(e){this.drainedOption&&this.drainedOption(e)},n}();function _8(n,e,t){var r;return r=/^(year|month)$/.test(n.currentRangeUnit)?n.currentRange:n.activeRange,t.formatRange(r.start,r.end,Ji(e.titleFormat||function w8(n){var e=n.currentRangeUnit;if("year"===e)return{year:"numeric"};if("month"===e)return{year:"numeric",month:"long"};var t=SA(n.currentRange.start,n.currentRange.end);return null!==t&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}var pB=function(){function n(e){var t=this;this.computeOptionsData=pn(this._computeOptionsData),this.computeCurrentViewData=pn(this._computeCurrentViewData),this.organizeRawLocales=pn(HV),this.buildLocale=pn(QP),this.buildPluginHooks=function wZ(){var t,n=[],e=[];return function(r,i){return(!t||!Fp(r,n)||!Fp(i,e))&&(t=function _Z(n,e){var t={},r={reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,contentTypeHandlers:{},listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(o){for(var l=0,c=o;l<c.length;l++){var f=c[l];t[f.id]||(t[f.id]=!0,i(f.deps),r=bZ(r,f))}}return n&&i(n),i(e),r}(r,i)),n=r,e=i,t}}(),this.buildDateEnv=pn(b8),this.buildTheme=pn(E8),this.parseToolbars=pn(QZ),this.buildViewSpecs=pn(AZ),this.buildDateProfileGenerator=MA(C8),this.buildViewApi=pn(I8),this.buildViewUiProps=MA(A8),this.buildEventUiBySource=pn(D8,kh),this.buildEventUiBases=pn(T8),this.parseContextBusinessHours=MA(S8),this.buildTitle=pn(_8),this.emitter=new GA,this.actionRunner=new y8(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.getCurrentData=function(){return t.data},this.dispatch=function(ke){t.actionRunner.request(ke)},this.props=e,this.actionRunner.pause();var r={},i=this.computeOptionsData(e.optionOverrides,r,e.calendarApi),o=i.calendarOptions.initialView||i.pluginHooks.initialView,l=this.computeCurrentViewData(o,i,e.optionOverrides,r);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(l.options);var c=function O4(n,e){var t=n.initialDate;return null!=t?e.createMarker(t):VE(n.now,e)}(i.calendarOptions,i.dateEnv),f=l.dateProfileGenerator.build(c);Um(f.activeRange,c)||(c=f.currentRange.start);for(var m={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},_=0,C=i.pluginHooks.contextInit;_<C.length;_++)(0,C[_])(m);for(var M=function PZ(n,e,t){var r=e?e.activeRange:null;return iB({},function BZ(n,e){var t=OV(e),r=[].concat(n.eventSources||[]),i=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(var o=0,l=r;o<l.length;o++){var f=NV(l[o],e,t);f&&i.push(f)}return i}(n,t),r,t)}(i.calendarOptions,f,m),O={dynamicOptionOverrides:r,currentViewType:o,currentDate:c,dateProfile:f,businessHours:this.parseContextBusinessHours(m),eventSources:M,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(m).selectionConfig},W=(0,G.pi)((0,G.pi)({},m),O),K=0,te=i.pluginHooks.reducers;K<te.length;K++)(0,G.pi)(O,(0,te[K])(null,null,W));hN(O,m)&&this.emitter.trigger("loading",!0),this.state=O,this.updateData(),this.actionRunner.resume()}return n.prototype.resetOptions=function(e,t){var r=this.props;r.optionOverrides=t?(0,G.pi)((0,G.pi)({},r.optionOverrides),e):e,this.actionRunner.request({type:"NOTHING"})},n.prototype._handleAction=function(e){var t=this,r=t.props,i=t.state,o=t.emitter,l=function MZ(n,e){var t;return"SET_OPTION"===e.type?(0,G.pi)((0,G.pi)({},n),((t={})[e.optionName]=e.rawOptionValue,t)):n}(i.dynamicOptionOverrides,e),c=this.computeOptionsData(r.optionOverrides,l,r.calendarApi),f=function RZ(n,e){return"CHANGE_VIEW_TYPE"===e.type&&(n=e.viewType),n}(i.currentViewType,e),m=this.computeCurrentViewData(f,c,r.optionOverrides,l);r.calendarApi.currentDataManager=this,o.setThisContext(r.calendarApi),o.setOptions(m.options);var _={dateEnv:c.dateEnv,options:c.calendarOptions,pluginHooks:c.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:o,getCurrentData:this.getCurrentData},C=i.currentDate,x=i.dateProfile;this.data&&this.data.dateProfileGenerator!==m.dateProfileGenerator&&(x=m.dateProfileGenerator.build(C)),C=function N4(n,e){return"CHANGE_DATE"===e.type?e.dateMarker:n}(C,e),x=function kZ(n,e,t,r){var i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||t);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if((i=r.buildPrev(n,t)).isValid)return i;break;case"NEXT":if((i=r.buildNext(n,t)).isValid)return i}return n}(x,e,C,m.dateProfileGenerator),("PREV"===e.type||"NEXT"===e.type||!Um(x.currentRange,C))&&(C=x.currentRange.start);for(var M=function NZ(n,e,t,r){var i=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return iB(n,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return function FZ(n,e){return Om(n,function(t){return t.sourceId!==e})}(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?oB(n,i,r):n;case"FETCH_EVENT_SOURCES":return cN(n,e.sourceIds?dV(e.sourceIds):sB(n,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function VZ(n,e,t,r){var i,o=n[e];return o&&t===o.latestFetchId?(0,G.pi)((0,G.pi)({},n),((i={})[e]=(0,G.pi)((0,G.pi)({},o),{isFetching:!1,fetchRange:r}),i)):n}(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}(i.eventSources,e,x,_),O=function HZ(n,e,t,r,i){switch(e.type){case"RECEIVE_EVENTS":return function jZ(n,e,t,r,i,o){if(e&&t===e.latestFetchId){var l=FA(function $Z(n,e,t){var r=t.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(n=lB(n,i)),r&&(n=lB(n,r)),n}(i,e,o),e,o);return r&&(l=G_(l,r,o)),HP(uB(n,e.sourceId),l)}return n}(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"ADD_EVENTS":return function GZ(n,e,t,r){return t&&(e=G_(e,t,r)),HP(n,e)}(n,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return HP(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?G_(n,r.activeRange,i):n;case"REMOVE_EVENTS":return function r4(n,e){var t=n.defs,r=n.instances,i={},o={};for(var l in t)e.defs[l]||(i[l]=t[l]);for(var c in r)!e.instances[c]&&i[r[c].defId]&&(o[c]=r[c]);return{defs:i,instances:o}}(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return uB(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return LA(n,function(o){return!o.sourceId});case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return n}}(i.eventStore,e,M,x,_),K=rB(M)&&!m.options.progressiveEventRendering&&i.renderableEventStore||O,te=this.buildViewUiProps(_),_e=te.eventUiSingleBase,ke=te.selectionConfig,Ne=this.buildEventUiBySource(M),at={dynamicOptionOverrides:l,currentViewType:f,currentDate:C,dateProfile:x,eventSources:M,eventStore:O,renderableEventStore:K,selectionConfig:ke,eventUiBases:this.buildEventUiBases(K.defs,_e,Ne),businessHours:this.parseContextBusinessHours(_),dateSelection:qZ(i.dateSelection,e),eventSelection:ZZ(i.eventSelection,e),eventDrag:KZ(i.eventDrag,e),eventResize:YZ(i.eventResize,e)},Gt=(0,G.pi)((0,G.pi)({},_),at),Dt=0,wr=c.pluginHooks.reducers;Dt<wr.length;Dt++)(0,G.pi)(at,(0,wr[Dt])(i,e,Gt));var Lh=hN(i,_),Ja=hN(at,_);!Lh&&Ja?o.trigger("loading",!0):Lh&&!Ja&&o.trigger("loading",!1),this.state=at,r.onAction&&r.onAction(e)},n.prototype.updateData=function(){var t=this.props,r=this.state,i=this.data,o=this.computeOptionsData(t.optionOverrides,r.dynamicOptionOverrides,t.calendarApi),l=this.computeCurrentViewData(r.currentViewType,o,t.optionOverrides,r.dynamicOptionOverrides),c=this.data=(0,G.pi)((0,G.pi)((0,G.pi)({viewTitle:this.buildTitle(r.dateProfile,l.options,o.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o),l),r),f=o.pluginHooks.optionChangeHandlers,m=i&&i.calendarOptions,_=o.calendarOptions;if(m&&m!==_)for(var C in m.timeZone!==_.timeZone&&(r.eventSources=c.eventSources=function OZ(n,e,t){var r=e?e.activeRange:null;return cN(n,sB(n,t),r,!0,t)}(c.eventSources,r.dateProfile,c),r.eventStore=c.eventStore=function zZ(n,e,t){var r=n.defs,i=Mh(n.instances,function(o){var l=r[o.defId];return l.allDay||l.recurringDef?o:(0,G.pi)((0,G.pi)({},o),{range:{start:t.createMarker(e.toDate(o.range.start,o.forcedStartTzo)),end:t.createMarker(e.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:o.forcedEndTzo})});return{defs:r,instances:i}}(c.eventStore,i.dateEnv,c.dateEnv)),f)m[C]!==_[C]&&f[C](_[C],c);t.onData&&t.onData(c)},n.prototype._computeOptionsData=function(e,t,r){var i=this.processRawCalendarOptions(e,t),o=i.refinedOptions,l=i.pluginHooks,c=i.localeDefaults,f=i.availableLocaleData;gB(i.extra);var _=this.buildDateEnv(o.timeZone,o.locale,o.weekNumberCalculation,o.firstDay,o.weekText,l,f,o.defaultRangeSeparator),C=this.buildViewSpecs(l.views,e,t,c),x=this.buildTheme(o,l);return{calendarOptions:o,pluginHooks:l,dateEnv:_,viewSpecs:C,theme:x,toolbarConfig:this.parseToolbars(o,e,x,C,r),localeDefaults:c,availableRawLocales:f.map}},n.prototype.processRawCalendarOptions=function(e,t){var r=VP([Ph,e,t]),o=r.locale,l=this.organizeRawLocales(r.locales),f=this.buildLocale(o||l.defaultCode,l.map).options,m=this.buildPluginHooks(e.plugins||[],fB),_=this.currentCalendarOptionsRefiners=(0,G.pi)((0,G.pi)((0,G.pi)((0,G.pi)((0,G.pi)({},_V),wV),bV),m.listenerRefiners),m.optionRefiners),C={},x=VP([Ph,f,e,t]),M={},O=this.currentCalendarOptionsInput,W=this.currentCalendarOptionsRefined,K=!1;for(var te in x)"plugins"!==te&&(x[te]===O[te]||Lm[te]&&te in O&&Lm[te](O[te],x[te])?M[te]=W[te]:_[te]?(M[te]=_[te](x[te]),K=!0):C[te]=O[te]);return K&&(this.currentCalendarOptionsInput=x,this.currentCalendarOptionsRefined=M),{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:m,availableLocaleData:l,localeDefaults:f,extra:C}},n.prototype._computeCurrentViewData=function(e,t,r,i){var o=t.viewSpecs[e];if(!o)throw new Error('viewType "'+e+"\" is not available. Please make sure you've loaded all neccessary plugins");var l=this.processRawViewOptions(o,t.pluginHooks,t.localeDefaults,r,i),c=l.refinedOptions;return gB(l.extra),{viewSpec:o,options:c,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:c.slotMinTime,slotMaxTime:c.slotMaxTime,showNonCurrentDates:c.showNonCurrentDates,dayCount:c.dayCount,dateAlignment:c.dateAlignment,dateIncrement:c.dateIncrement,hiddenDays:c.hiddenDays,weekends:c.weekends,nowInput:c.now,validRangeInput:c.validRange,visibleRangeInput:c.visibleRange,monthMode:c.monthMode,fixedWeekCount:c.fixedWeekCount}),viewApi:this.buildViewApi(e,this.getCurrentData,t.dateEnv)}},n.prototype.processRawViewOptions=function(e,t,r,i,o){var l=VP([Ph,e.optionDefaults,r,i,e.optionOverrides,o]),c=(0,G.pi)((0,G.pi)((0,G.pi)((0,G.pi)((0,G.pi)((0,G.pi)({},_V),wV),bV),t4),t.listenerRefiners),t.optionRefiners),f={},m=this.currentViewOptionsInput,_=this.currentViewOptionsRefined,C=!1,x={};for(var M in l)l[M]===m[M]||Lm[M]&&Lm[M](l[M],m[M])?f[M]=_[M]:(l[M]===this.currentCalendarOptionsInput[M]||Lm[M]&&Lm[M](l[M],this.currentCalendarOptionsInput[M])?M in this.currentCalendarOptionsRefined&&(f[M]=this.currentCalendarOptionsRefined[M]):c[M]?f[M]=c[M](l[M]):x[M]=l[M],C=!0);return C&&(this.currentViewOptionsInput=l,this.currentViewOptionsRefined=f),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:x}},n}();function b8(n,e,t,r,i,o,l,c){var f=QP(e||l.defaultCode,l.map);return new UV({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:f,weekNumberCalculation:t,firstDay:r,weekText:i,cmdFormatter:o.cmdFormatter,defaultSeparator:c})}function E8(n,e){return new(e.themeClasses[n.themeSystem]||Vp)(n)}function C8(n){return new(n.dateProfileGeneratorClass||nB)(n)}function I8(n,e,t){return new M4(n,e,t)}function D8(n){return Mh(n,function(e){return e.ui})}function T8(n,e,t){var r={"":e};for(var i in n){var o=n[i];o.sourceId&&t[o.sourceId]&&(r[i]=t[o.sourceId])}return r}function A8(n){var e=n.options;return{eventUiSingleBase:VA({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:"boolean"==typeof e.eventOverlap?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:VA({constraint:e.selectConstraint,overlap:"boolean"==typeof e.selectOverlap?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function hN(n,e){for(var t=0,r=e.pluginHooks.isLoadingFuncs;t<r.length;t++)if((0,r[t])(n))return!0;return!1}function S8(n){return function W4(n,e){return FA(function q4(n){return(!0===n?[{}]:Array.isArray(n)?n.filter(function(t){return t.daysOfWeek}):"object"==typeof n&&n?[n]:[]).map(function(t){return(0,G.pi)((0,G.pi)({},z4),t)})}(n),null,e)}(n.options.businessHours,n)}function gB(n,e){for(var t in n)console.warn("Unknown option '"+t+"'"+(e?" for view '"+e+"'":""))}!function(n){function e(t){var r=n.call(this,t)||this;return r.handleData=function(i){r.dataManager?r.setState(i):r.state=i},r.dataManager=new pB({optionOverrides:t.optionOverrides,calendarApi:t.calendarApi,onData:r.handleData}),r}(0,G.ZT)(e,n),e.prototype.render=function(){return this.props.children(this.state)},e.prototype.componentDidUpdate=function(t){var r=this.props.optionOverrides;r!==t.optionOverrides&&this.dataManager.resetOptions(r)}}(RP);var x8=function(){function n(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}return n.prototype.addSegs=function(e){for(var t=[],r=0,i=e;r<i.length;r++)this.insertEntry(i[r],t);return t},n.prototype.insertEntry=function(e,t){var r=this.findInsertion(e);return this.isInsertionValid(r,e)?(this.insertEntryAt(e,r),1):this.handleInvalidInsertion(r,e,t)},n.prototype.isInsertionValid=function(e,t){return(-1===this.maxCoord||e.levelCoord+t.thickness<=this.maxCoord)&&(-1===this.maxStackCnt||e.stackCnt<this.maxStackCnt)},n.prototype.handleInvalidInsertion=function(e,t,r){return this.allowReslicing&&e.touchingEntry?this.splitEntry(t,e.touchingEntry,r):(r.push(t),0)},n.prototype.splitEntry=function(e,t,r){var i=0,o=[],l=e.span,c=t.span;return l.start<c.start&&(i+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:l.start,end:c.start}},o)),l.end>c.end&&(i+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:c.end,end:l.end}},o)),i?(r.push.apply(r,(0,G.ev)([{index:e.index,thickness:e.thickness,span:fN(c,l)}],o)),i):(r.push(e),0)},n.prototype.insertEntryAt=function(e,t){var i=this.entriesByLevel;-1===t.lateral?(pN(this.levelCoords,t.level,t.levelCoord),pN(i,t.level,[e])):pN(i[t.level],t.lateral,e),this.stackCnts[HE(e)]=t.stackCnt},n.prototype.findInsertion=function(e){for(var t=this,r=t.levelCoords,i=t.entriesByLevel,o=t.strictOrder,l=t.stackCnts,c=r.length,f=0,m=-1,_=-1,C=null,x=0,M=0;M<c;M+=1){var O=r[M];if(!o&&O>=f+e.thickness)break;for(var W=i[M],K=void 0,te=vB(W,e.span.start,mB),_e=te[0]+te[1];(K=W[_e])&&K.span.start<e.span.end;){var ke=O+K.thickness;ke>f&&(f=ke,C=K,m=M,_=_e),ke===f&&(x=Math.max(x,l[HE(K)]+1)),_e+=1}}var Ne=0;if(C)for(Ne=m+1;Ne<c&&r[Ne]<f;)Ne+=1;var ut=-1;return Ne<c&&r[Ne]===f&&(ut=vB(i[Ne],e.span.end,mB)[0]),{touchingLevel:m,touchingLateral:_,touchingEntry:C,stackCnt:x,levelCoord:f,level:Ne,lateral:ut}},n.prototype.toRects=function(){for(var t=this.entriesByLevel,r=this.levelCoords,i=t.length,o=[],l=0;l<i;l+=1)for(var f=r[l],m=0,_=t[l];m<_.length;m++)o.push((0,G.pi)((0,G.pi)({},_[m]),{levelCoord:f}));return o},n}();function mB(n){return n.span.end}function HE(n){return n.index+":"+n.span.start}function fN(n,e){var t=Math.max(n.start,e.start),r=Math.min(n.end,e.end);return t<r?{start:t,end:r}:null}function pN(n,e,t){n.splice(e,0,t)}function vB(n,e,t){var r=0,i=n.length;if(!i||e<t(n[r]))return[0,0];if(e>t(n[i-1]))return[i,0];for(;r<i;){var o=Math.floor(r+(i-r)/2),l=t(n[o]);if(e<l)i=o;else{if(!(e>l))return[o,1];r=o+1}}return[r,0]}var Y_=function(){function n(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}return n.prototype.destroy=function(){},n}();function M8(n,e){return{component:n,el:e.el,useEventCenter:null==e.useEventCenter||e.useEventCenter,isHitComboAllowed:e.isHitComboAllowed||null}}function gN(n){var e;return(e={})[n.component.uid]=n,e}var WA={},yB=function(){function n(e,t){this.emitter=new GA}return n.prototype.destroy=function(){},n.prototype.setMirrorIsVisible=function(e){},n.prototype.setMirrorNeedsRevert=function(e){},n.prototype.setAutoScrollEnabled=function(e){},n}(),qA={},k8={startTime:Vn,duration:Vn,create:Boolean,sourceId:String};function mN(n){var e=OA(n,k8),t=e.refined;return{startTime:t.startTime||null,duration:t.duration||null,create:null==t.create||t.create,sourceId:t.sourceId,leftoverProps:e.extra}}var P8=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,r=this.props.widgetGroups.map(function(i){return t.renderWidgetGroup(i)});return Te.apply(void 0,(0,G.ev)(["div",{className:"fc-toolbar-chunk"}],r))},e.prototype.renderWidgetGroup=function(t){for(var r=this.props,i=this.context.theme,o=[],l=!0,c=0,f=t;c<f.length;c++){var m=f[c],_=m.buttonName,C=m.buttonClick,x=m.buttonText,M=m.buttonIcon,O=m.buttonHint;if("title"===_)l=!1,o.push(Te("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{var W=_===r.activeButton,K=!r.isTodayEnabled&&"today"===_||!r.isPrevEnabled&&"prev"===_||!r.isNextEnabled&&"next"===_,te=["fc-"+_+"-button",i.getClass("button")];W&&te.push(i.getClass("buttonActive")),o.push(Te("button",{type:"button",title:"function"==typeof O?O(r.navUnit):O,disabled:K,"aria-pressed":W,className:te.join(" "),onClick:C},x||(M?Te("span",{className:M}):"")))}}if(o.length>1){var _e=l&&i.getClass("buttonGroup")||"";return Te.apply(void 0,(0,G.ev)(["div",{className:_e}],o))}return o[0]},e}(qr),_B=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var l,c,t=this.props,o=!1,f=t.model.sectionWidgets,m=f.center;return f.left?(o=!0,l=f.left):l=f.start,f.right?(o=!0,c=f.right):c=f.end,Te("div",{className:[t.extraClassName||"","fc-toolbar",o?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",l||[]),this.renderSection("center",m||[]),this.renderSection("end",c||[]))},e.prototype.renderSection=function(t,r){var i=this.props;return Te(P8,{key:t,widgetGroups:r,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})},e}(qr),N8=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.state={availableWidth:null},t.handleEl=function(r){t.el=r,Nh(t.props.elRef,r),t.updateAvailableWidth()},t.handleResize=function(){t.updateAvailableWidth()},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.state,o=r.aspectRatio,c="",f="";return o?null!==i.availableWidth?c=i.availableWidth/o:f=1/o*100+"%":c=r.height||"",Te("div",{"aria-labelledby":r.labeledById,ref:this.handleEl,className:["fc-view-harness",o||r.liquid||r.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:c,paddingBottom:f}},r.children)},e.prototype.componentDidMount=function(){this.context.addResizeHandler(this.handleResize)},e.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleResize)},e.prototype.updateAvailableWidth=function(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})},e}(qr),O8=function(n){function e(t){var r=n.call(this,t)||this;return r.handleSegClick=function(i,o){var l=r.component,c=l.context,f=Z_(o);if(f&&l.isValidSegDownEl(i.target)){var m=as(i.target,".fc-event-forced-url"),_=m?m.querySelector("a[href]").href:"";c.emitter.trigger("eventClick",{el:o,event:new ai(l.context,f.eventRange.def,f.eventRange.instance),jsEvent:i,view:c.viewApi}),_&&!i.defaultPrevented&&(window.location.href=_)}},r.destroy=tV(t.el,"click",".fc-event",r.handleSegClick),r}return(0,G.ZT)(e,n),e}(Y_),F8=function(n){function e(t){var r=n.call(this,t)||this;return r.handleEventElRemove=function(i){i===r.currentSegEl&&r.handleSegLeave(null,r.currentSegEl)},r.handleSegEnter=function(i,o){Z_(o)&&(r.currentSegEl=o,r.triggerEvent("eventMouseEnter",i,o))},r.handleSegLeave=function(i,o){r.currentSegEl&&(r.currentSegEl=null,r.triggerEvent("eventMouseLeave",i,o))},r.removeHoverListeners=function s5(n,e,t,r){var i;return tV(n,"mouseover",e,function(o,l){if(l!==i){i=l,t(o,l);var c=function(f){i=null,r(f,l),l.removeEventListener("mouseleave",c)};l.addEventListener("mouseleave",c)}})}(t.el,".fc-event",r.handleSegEnter,r.handleSegLeave),r}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.removeHoverListeners()},e.prototype.triggerEvent=function(t,r,i){var o=this.component,l=o.context,c=Z_(i);(!r||o.isValidSegDownEl(r.target))&&l.emitter.trigger(t,{el:i,event:new ai(l,c.eventRange.def,c.eventRange.instance),jsEvent:r,view:l.viewApi})},e}(Y_),L8=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.buildViewContext=pn(mZ),t.buildViewPropTransformers=pn(V8),t.buildToolbarProps=pn(U8),t.headerRef=Jl(),t.footerRef=Jl(),t.interactionsStore={},t.state={viewLabelId:CA()},t.registerInteractiveComponent=function(r,i){var o=M8(r,i),f=[O8,F8].concat(t.props.pluginHooks.componentInteractions).map(function(m){return new m(o)});t.interactionsStore[r.uid]=f,WA[r.uid]=o},t.unregisterInteractiveComponent=function(r){var i=t.interactionsStore[r.uid];if(i){for(var o=0,l=i;o<l.length;o++)l[o].destroy();delete t.interactionsStore[r.uid]}delete WA[r.uid]},t.resizeRunner=new dN(function(){t.props.emitter.trigger("_resize",!0),t.props.emitter.trigger("windowResize",{view:t.props.viewApi})}),t.handleWindowResize=function(r){var i=t.props.options;i.handleWindowResize&&r.target===window&&t.resizeRunner.request(i.windowResizeDelay)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var f,t=this.props,r=t.toolbarConfig,i=t.options,o=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,VE(t.options.now,t.dateEnv),t.viewTitle),l=!1,c="";t.isHeightAuto||t.forPrint?c="":null!=i.height?l=!0:null!=i.contentHeight?c=i.contentHeight:f=Math.max(i.aspectRatio,.5);var m=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),_=r.header&&r.header.hasTitle?this.state.viewLabelId:"";return Te(Lp.Provider,{value:m},r.header&&Te(_B,(0,G.pi)({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:_},o)),Te(N8,{liquid:l,height:c,aspectRatio:f,labeledById:_},this.renderView(t),this.buildAppendContent()),r.footer&&Te(_B,(0,G.pi)({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},o)))},e.prototype.componentDidMount=function(){var t=this.props;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(function(o){return new o(t)}),window.addEventListener("resize",this.handleWindowResize);var r=t.pluginHooks.propSetHandlers;for(var i in r)r[i](t[i],t)},e.prototype.componentDidUpdate=function(t){var r=this.props,i=r.pluginHooks.propSetHandlers;for(var o in i)r[o]!==t[o]&&i[o](r[o],r)},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(var t=0,r=this.calendarInteractions;t<r.length;t++)r[t].destroy();this.props.emitter.trigger("_unmount")},e.prototype.buildAppendContent=function(){var t=this.props,r=t.pluginHooks.viewContainerAppends.map(function(i){return i(t)});return Te.apply(void 0,(0,G.ev)([da,{}],r))},e.prototype.renderView=function(t){for(var i=t.viewSpec,o={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},c=0,f=this.buildViewPropTransformers(t.pluginHooks.viewPropsTransformers);c<f.length;c++)(0,G.pi)(o,f[c].transform(o,t));return Te(i.component,(0,G.pi)({},o))},e}(zA);function U8(n,e,t,r,i,o){var l=t.build(i,void 0,!1),c=t.buildPrev(e,r,!1),f=t.buildNext(e,r,!1);return{title:o,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:l.isValid&&!Um(e.currentRange,i),isPrevEnabled:c.isValid,isNextEnabled:f.isValid}}function V8(n){return n.map(function(e){return new e})}var B8=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.state={forPrint:!1},t.handleBeforePrint=function(){t.setState({forPrint:!0})},t.handleAfterPrint=function(){t.setState({forPrint:!1})},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.props,r=t.options,i=this.state.forPrint,o=i||"auto"===r.height||"auto"===r.contentHeight,l=o||null==r.height?"":r.height,c=["fc",i?"fc-media-print":"fc-media-screen","fc-direction-"+r.direction,t.theme.getClass("root")];return zV()||c.push("fc-liquid-hack"),t.children(c,l,o,i)},e.prototype.componentDidMount=function(){var t=this.props.emitter;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)},e.prototype.componentWillUnmount=function(){var t=this.props.emitter;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)},e}(qr),wB="fc-col-header-cell";function bB(n){return n.text}var j8=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.context,r=t.dateEnv,i=t.options,o=t.theme,l=t.viewApi,c=this.props,f=c.date,_=WV(f,c.todayRange,null,c.dateProfile),C=[wB].concat(eN(_,o)),x=r.format(f,c.dayHeaderFormat),M=!_.isDisabled&&c.colCnt>1?tN(this.context,f):{},O=(0,G.pi)((0,G.pi)((0,G.pi)({date:r.toDate(f),view:l},c.extraHookProps),{text:x}),_);return Te(Bm,{hookProps:O,classNames:i.dayHeaderClassNames,content:i.dayHeaderContent,defaultContent:bB,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},function(W,K,te,_e){return Te("th",(0,G.pi)({ref:W,role:"columnheader",className:C.concat(K).join(" "),"data-date":_.isDisabled?void 0:gV(f),colSpan:c.colSpan},c.extraDataAttrs),Te("div",{className:"fc-scrollgrid-sync-inner"},!_.isDisabled&&Te("a",(0,G.pi)({ref:te,className:["fc-col-header-cell-cushion",c.isSticky?"fc-sticky":""].join(" ")},M),_e)))})},e}(qr),$8=Ji({weekday:"long"}),G8=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.props,r=this.context,i=r.dateEnv,o=r.theme,l=r.viewApi,c=r.options,f=Hs(new Date(2592e5),t.dow),m={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},_=[wB].concat(eN(m,o),t.extraClassNames||[]),C=i.format(f,t.dayHeaderFormat),x=(0,G.pi)((0,G.pi)((0,G.pi)((0,G.pi)({date:f},m),{view:l}),t.extraHookProps),{text:C});return Te(Bm,{hookProps:x,classNames:c.dayHeaderClassNames,content:c.dayHeaderContent,defaultContent:bB,didMount:c.dayHeaderDidMount,willUnmount:c.dayHeaderWillUnmount},function(M,O,W,K){return Te("th",(0,G.pi)({ref:M,role:"columnheader",className:_.concat(O).join(" "),colSpan:t.colSpan},t.extraDataAttrs),Te("div",{className:"fc-scrollgrid-sync-inner"},Te("a",{"aria-label":i.format(f,$8),className:["fc-col-header-cell-cushion",t.isSticky?"fc-sticky":""].join(" "),ref:W},K)))})},e}(qr),EB=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.initialNowDate=VE(r.options.now,r.dateEnv),i.initialNowQueriedMs=(new Date).valueOf(),i.state=i.computeTiming().currentState,i}return(0,G.ZT)(e,n),e.prototype.render=function(){var i=this.state;return this.props.children(i.nowDate,i.todayRange)},e.prototype.componentDidMount=function(){this.setTimeout()},e.prototype.componentDidUpdate=function(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())},e.prototype.componentWillUnmount=function(){this.clearTimeout()},e.prototype.computeTiming=function(){var r=this.props,i=this.context,o=Pm(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),l=i.dateEnv.startOf(o,r.unit),c=i.dateEnv.add(l,Vn(1,r.unit)),f=c.valueOf()-o.valueOf();return f=Math.min(864e5,f),{currentState:{nowDate:l,todayRange:CB(l)},nextState:{nowDate:c,todayRange:CB(c)},waitMs:f}},e.prototype.setTimeout=function(){var t=this,r=this.computeTiming(),i=r.nextState;this.timeoutId=setTimeout(function(){t.setState(i,function(){t.setTimeout()})},r.waitMs)},e.prototype.clearTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e.contextType=Lp,e}(RP);function CB(n){var e=Wr(n);return{start:e,end:Hs(e,1)}}var z8=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.createDayHeaderFormatter=pn(W8),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=r.dates,o=r.dateProfile,l=r.datesRepDistinctDays,c=r.renderIntro,f=this.createDayHeaderFormatter(this.context.options.dayHeaderFormat,l,i.length);return Te(EB,{unit:"day"},function(m,_){return Te("tr",{role:"row"},c&&c("day"),i.map(function(C){return l?Te(j8,{key:C.toISOString(),date:C,dateProfile:o,todayRange:_,colCnt:i.length,dayHeaderFormat:f}):Te(G8,{key:C.getUTCDay(),dow:C.getUTCDay(),dayHeaderFormat:f})}))})},e}(qr);function W8(n,e,t){return n||function H8(n,e){return Ji(!n||e>10?{weekday:"short"}:e>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(e,t)}var q8=function(){function n(e,t){for(var r=e.start,i=e.end,o=[],l=[],c=-1;r<i;)t.isHiddenDay(r)?o.push(c+.5):(o.push(c+=1),l.push(r)),r=Hs(r,1);this.dates=l,this.indices=o,this.cnt=l.length}return n.prototype.sliceRange=function(e){var t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Hs(e.end,-1)),i=Math.max(0,t),o=Math.min(this.cnt-1,r);return(i=Math.ceil(i))<=(o=Math.floor(o))?{firstIndex:i,lastIndex:o,isStart:t===i,isEnd:r===o}:null},n.prototype.getDateDayIndex=function(e){var t=this.indices,r=Math.floor(Nm(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]},n}(),Z8=function(){function n(e,t){var i,o,l,r=e.dates;if(t){for(o=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==o;i+=1);l=Math.ceil(r.length/i)}else l=1,i=r.length;this.rowCnt=l,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return n.prototype.buildCells=function(){for(var e=[],t=0;t<this.rowCnt;t+=1){for(var r=[],i=0;i<this.colCnt;i+=1)r.push(this.buildCell(t,i));e.push(r)}return e},n.prototype.buildCell=function(e,t){var r=this.daySeries.dates[e*this.colCnt+t];return{key:r.toISOString(),date:r}},n.prototype.buildHeaderDates=function(){for(var e=[],t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e},n.prototype.sliceRange=function(e){var t=this.colCnt,r=this.daySeries.sliceRange(e),i=[];if(r)for(var o=r.firstIndex,l=r.lastIndex,c=o;c<=l;){var f=Math.floor(c/t),m=Math.min((f+1)*t,l+1);i.push({row:f,firstCol:c%t,lastCol:(m-1)%t,isStart:r.isStart&&c===o,isEnd:r.isEnd&&m-1===l}),c=m}return i},n}(),K8=function(){function n(){this.sliceBusinessHours=pn(this._sliceBusinessHours),this.sliceDateSelection=pn(this._sliceDateSpan),this.sliceEventStore=pn(this._sliceEventStore),this.sliceEventDrag=pn(this._sliceInteraction),this.sliceEventResize=pn(this._sliceInteraction),this.forceDayIfListItem=!1}return n.prototype.sliceProps=function(e,t,r,i){for(var o=[],l=4;l<arguments.length;l++)o[l-4]=arguments[l];var c=e.eventUiBases,f=this.sliceEventStore.apply(this,(0,G.ev)([e.eventStore,c,t,r],o));return{dateSelectionSegs:this.sliceDateSelection.apply(this,(0,G.ev)([e.dateSelection,c,i],o)),businessHourSegs:this.sliceBusinessHours.apply(this,(0,G.ev)([e.businessHours,t,r,i],o)),fgEventSegs:f.fg,bgEventSegs:f.bg,eventDrag:this.sliceEventDrag.apply(this,(0,G.ev)([e.eventDrag,c,t,r],o)),eventResize:this.sliceEventResize.apply(this,(0,G.ev)([e.eventResize,c,t,r],o)),eventSelection:e.eventSelection}},n.prototype.sliceNowDate=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this._sliceDateSpan.apply(this,(0,G.ev)([{range:{start:e,end:Pm(e,1)},allDay:!1},{},t],r))},n.prototype._sliceBusinessHours=function(e,t,r,i){for(var o=[],l=4;l<arguments.length;l++)o[l-4]=arguments[l];return e?this._sliceEventStore.apply(this,(0,G.ev)([G_(e,vN(t,Boolean(r)),i),{},t,r],o)).bg:[]},n.prototype._sliceEventStore=function(e,t,r,i){for(var o=[],l=4;l<arguments.length;l++)o[l-4]=arguments[l];if(e){var c=qP(e,t,vN(r,Boolean(i)),i);return{bg:this.sliceEventRanges(c.bg,o),fg:this.sliceEventRanges(c.fg,o)}}return{bg:[],fg:[]}},n.prototype._sliceInteraction=function(e,t,r,i){for(var o=[],l=4;l<arguments.length;l++)o[l-4]=arguments[l];if(!e)return null;var c=qP(e.mutatedEvents,t,vN(r,Boolean(i)),i);return{segs:this.sliceEventRanges(c.fg,o),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}},n.prototype._sliceDateSpan=function(e,t,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];if(!e)return[];for(var l=A4(e,t,r),c=this.sliceRange.apply(this,(0,G.ev)([e.range],i)),f=0,m=c;f<m.length;f++){var _=m[f];_.eventRange=l}return c},n.prototype.sliceEventRanges=function(e,t){for(var r=[],i=0,o=e;i<o.length;i++)r.push.apply(r,this.sliceEventRange(o[i],t));return r},n.prototype.sliceEventRange=function(e,t){var r=e.range;this.forceDayIfListItem&&"list-item"===e.ui.display&&(r={start:r.start,end:Hs(r.start,1)});for(var i=this.sliceRange.apply(this,(0,G.ev)([r],t)),o=0,l=i;o<l.length;o++){var c=l[o];c.eventRange=e,c.isStart=e.isStart&&c.isStart,c.isEnd=e.isEnd&&c.isEnd}return i},n}();function vN(n,e){var t=n.activeRange;return e?t:{start:Pm(t.start,n.slotMinTime.milliseconds),end:Pm(t.end,n.slotMaxTime.milliseconds-864e5)}}function yN(n,e,t){var r=n.mutatedEvents.instances;for(var i in r)if(!jA(e.validRange,r[i].range))return!1;return IB({eventDrag:n},t)}function IB(n,e){var t=e.getCurrentData(),r=(0,G.pi)({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||Q8)(r,e)}function Q8(n,e,t,r){return void 0===t&&(t={}),!(n.eventDrag&&!function J8(n,e,t,r){var i=e.getCurrentData(),o=n.eventDrag,l=o.mutatedEvents,c=l.defs,f=l.instances,m=$A(c,o.isEvent?n.eventUiBases:{"":i.selectionConfig});r&&(m=Mh(m,r));var _=function WZ(n,e){return{defs:n.defs,instances:Om(n.instances,function(t){return!e[t.instanceId]})}}(n.eventStore,o.affectedEvents.instances),C=_.defs,x=_.instances,M=$A(C,n.eventUiBases);for(var O in f){var W=f[O],K=W.range,te=m[W.defId],_e=c[W.defId];if(!DB(te.constraints,K,_,n.businessHours,e))return!1;var ke=e.options.eventOverlap,Ne="function"==typeof ke?ke:null;for(var ut in x){var at=x[ut];if(WP(K,at.range)&&(!1===M[at.defId].overlap&&o.isEvent||!1===te.overlap||Ne&&!Ne(new ai(e,C[at.defId],at),new ai(e,_e,W))))return!1}for(var Dt=i.eventStore,wr=0,Do=te.allows;wr<Do.length;wr++){var F1,Lh=Do[wr],Ja=(0,G.pi)((0,G.pi)({},t),{range:W.range,allDay:_e.allDay}),FS=Dt.defs[_e.defId];if(F1=FS?new ai(e,FS,Dt.instances[O]):new ai(e,_e),!Lh(ZP(Ja,e),F1))return!1}}return!0}(n,e,t,r)||n.dateSelection&&!function X8(n,e,t,r){var i=n.eventStore,o=i.defs,l=i.instances,c=n.dateSelection,f=c.range,m=e.getCurrentData().selectionConfig;if(r&&(m=r(m)),!DB(m.constraints,f,i,n.businessHours,e))return!1;var _=e.options.selectOverlap,C="function"==typeof _?_:null;for(var x in l){var M=l[x];if(WP(f,M.range)&&(!1===m.overlap||C&&!C(new ai(e,o[M.defId],M),null)))return!1}for(var O=0,W=m.allows;O<W.length;O++)if(!(0,W[O])(ZP((0,G.pi)((0,G.pi)({},t),c),e),null))return!1;return!0}(n,e,t,r))}function DB(n,e,t,r,i){for(var o=0,l=n;o<l.length;o++)if(!t7(e7(l[o],e,t,r,i),e))return!1;return!0}function e7(n,e,t,r,i){return"businessHours"===n?_N(G_(r,e,i)):"string"==typeof n?_N(LA(t,function(o){return o.groupId===n})):"object"==typeof n&&n?_N(G_(n,e,i)):[]}function _N(n){var e=n.instances,t=[];for(var r in e)t.push(e[r].range);return t}function t7(n,e){for(var t=0,r=n;t<r.length;t++)if(jA(r[t],e))return!0;return!1}var ZA=/^(visible|hidden)$/,n7=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.handleEl=function(r){t.el=r,Nh(t.props.elRef,r)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.props,r=t.liquid,i=t.liquidIsAbsolute,o=r&&i,l=["fc-scroller"];return r&&l.push(i?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),Te("div",{ref:this.handleEl,className:l.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:o&&-(t.overcomeLeft||0)||"",right:o&&-(t.overcomeRight||0)||"",bottom:o&&-(t.overcomeBottom||0)||"",marginLeft:!o&&-(t.overcomeLeft||0)||"",marginRight:!o&&-(t.overcomeRight||0)||"",marginBottom:!o&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)},e.prototype.needsXScrolling=function(){if(ZA.test(this.props.overflowX))return!1;for(var t=this.el,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),i=t.children,o=0;o<i.length;o+=1)if(i[o].getBoundingClientRect().width>r)return!0;return!1},e.prototype.needsYScrolling=function(){if(ZA.test(this.props.overflowY))return!1;for(var t=this.el,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),i=t.children,o=0;o<i.length;o+=1)if(i[o].getBoundingClientRect().height>r)return!0;return!1},e.prototype.getXScrollbarWidth=function(){return ZA.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight},e.prototype.getYScrollbarWidth=function(){return ZA.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth},e}(qr),Hm=function(){function n(e){var t=this;this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=function(r,i){var l=t.depths,c=t.currentMap,f=!1,m=!1;null!==r?(f=i in c,c[i]=r,l[i]=(l[i]||0)+1,m=!0):(l[i]-=1,l[i]||(delete c[i],delete t.callbackMap[i],f=!0)),t.masterCallback&&(f&&t.masterCallback(null,String(i)),m&&t.masterCallback(r,String(i)))}}return n.prototype.createRef=function(e){var t=this,r=this.callbackMap[e];return r||(r=this.callbackMap[e]=function(i){t.handleValue(i,String(e))}),r},n.prototype.collect=function(e,t,r){return function R5(n,e,t,r){void 0===e&&(e=0),void 0===r&&(r=1);var i=[];null==t&&(t=Object.keys(n).length);for(var o=e;o<t;o+=r){var l=n[o];void 0!==l&&i.push(l)}return i}(this.currentMap,e,t,r)},n.prototype.getAll=function(){return OP(this.currentMap)},n}();function TB(n,e){return n.liquid&&e.liquid}function s7(n,e){return Fp(n,e,kh)}function a7(n,e){for(var t=[],r=0,i=n;r<i.length;r++)for(var o=i[r],l=o.span||1,c=0;c<l;c+=1)t.push(Te("col",{style:{width:"shrink"===o.width?l7(e):o.width||"",minWidth:o.minWidth||""}}));return Te.apply(void 0,(0,G.ev)(["colgroup",{}],t))}function l7(n){return n??4}function d7(n,e){var t=["fc-scrollgrid-section","fc-scrollgrid-section-"+n.type,n.className];return e&&n.liquid&&null==n.maxHeight&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function h7(n){return Te("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function AB(n){var e=n.stickyHeaderDates;return(null==e||"auto"===e)&&(e="auto"===n.height||"auto"===n.viewHeight),e}var SB=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.processCols=pn(function(r){return r},s7),t.renderMicroColGroup=pn(a7),t.scrollerRefs=new Hm,t.scrollerElRefs=new Hm(t._handleScrollerEl.bind(t)),t.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},t.handleSizing=function(){t.safeSetState((0,G.pi)({shrinkWidth:t.computeShrinkWidth()},t.computeScrollerDims()))},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,r=t.props,i=t.state,o=t.context,l=r.sections||[],c=this.processCols(r.cols),f=this.renderMicroColGroup(c,i.shrinkWidth),m=function c7(n,e){var t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}(r.liquid,o);r.collapsibleWidth&&m.push("fc-scrollgrid-collapsible");for(var x,_=l.length,C=0,M=[],O=[],W=[];C<_&&"header"===(x=l[C]).type;)M.push(this.renderSection(x,f,!0)),C+=1;for(;C<_&&"body"===(x=l[C]).type;)O.push(this.renderSection(x,f,!1)),C+=1;for(;C<_&&"footer"===(x=l[C]).type;)W.push(this.renderSection(x,f,!0)),C+=1;var K=!zV(),te={role:"rowgroup"};return Te("table",{role:"grid",className:m.join(" "),style:{height:r.height}},Boolean(!K&&M.length)&&Te.apply(void 0,(0,G.ev)(["thead",te],M)),Boolean(!K&&O.length)&&Te.apply(void 0,(0,G.ev)(["tbody",te],O)),Boolean(!K&&W.length)&&Te.apply(void 0,(0,G.ev)(["tfoot",te],W)),K&&Te.apply(void 0,(0,G.ev)((0,G.ev)((0,G.ev)(["tbody",te],M),O),W)))},e.prototype.renderSection=function(t,r,i){return"outerContent"in t?Te(da,{key:t.key},t.outerContent):Te("tr",{key:t.key,role:"presentation",className:d7(t,this.props.liquid).join(" ")},this.renderChunkTd(t,r,t.chunk,i))},e.prototype.renderChunkTd=function(t,r,i,o){if("outerContent"in i)return i.outerContent;var l=this.props,c=this.state,f=c.forceYScrollbars,m=c.scrollerClientWidths,_=c.scrollerClientHeights,C=function i7(n,e){return null!=e.maxHeight||TB(n,e)}(l,t),x=TB(l,t),M=l.liquid?f?"scroll":C?"auto":"hidden":"visible",O=t.key,W=function o7(n,e,t,r){var i=t.expandRows;return"function"==typeof e.content?e.content(t):Te("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:i?t.clientHeight:""}},t.tableColGroupNode,Te(r?"thead":"tbody",{role:"presentation"},"function"==typeof e.rowContent?e.rowContent(t):e.rowContent))}(t,i,{tableColGroupNode:r,tableMinWidth:"",clientWidth:l.collapsibleWidth||void 0===m[O]?null:m[O],clientHeight:void 0!==_[O]?_[O]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:function(){}},o);return Te(o?"th":"td",{ref:i.elRef,role:"presentation"},Te("div",{className:"fc-scroller-harness"+(x?" fc-scroller-harness-liquid":"")},Te(n7,{ref:this.scrollerRefs.createRef(O),elRef:this.scrollerElRefs.createRef(O),overflowY:M,overflowX:l.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:x,liquidIsAbsolute:!0},W)))},e.prototype._handleScrollerEl=function(t,r){var i=function p7(n,e){for(var t=0,r=n;t<r.length;t++){var i=r[t];if(i.key===e)return i}return null}(this.props.sections,r);i&&Nh(i.chunk.scrollerElRef,t)},e.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},e.prototype.componentDidUpdate=function(){this.handleSizing()},e.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},e.prototype.computeShrinkWidth=function(){return function u7(n){for(var e=0,t=n;e<t.length;e++)if("shrink"===t[e].width)return!0;return!1}(this.props.cols)?function r7(n){for(var e=function r5(n,e){for(var t=n instanceof HTMLElement?[n]:n,r=[],i=0;i<t.length;i+=1)for(var o=t[i].querySelectorAll(e),l=0;l<o.length;l+=1)r.push(o[l]);return r}(n,".fc-scrollgrid-shrink"),t=0,r=0,i=e;r<i.length;r++)t=Math.max(t,v5(i[r]));return Math.ceil(t)}(this.scrollerElRefs.getAll()):0},e.prototype.computeScrollerDims=function(){var t=function iZ(){return rN||(rN=function oZ(){var n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);var e=qV(n);return document.body.removeChild(n),e}()),rN}(),i=this.scrollerRefs,o=this.scrollerElRefs,l=!1,c={},f={};for(var m in i.currentMap){var _=i.currentMap[m];if(_&&_.needsYScrolling()){l=!0;break}}for(var C=0,x=this.props.sections;C<x.length;C++){var O=o.currentMap[m=x[C].key];if(O){var W=O.parentNode;c[m]=Math.floor(W.getBoundingClientRect().width-(l?t.y:0)),f[m]=Math.floor(W.getBoundingClientRect().height)}}return{forceYScrollbars:l,scrollerClientWidths:c,scrollerClientHeights:f}},e}(qr);SB.addStateEquality({scrollerClientWidths:kh,scrollerClientHeights:kh});var wN=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.elRef=Jl(),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.context,o=i.options,l=r.seg,c=l.eventRange,f=c.ui,m={event:new ai(i,c.def,c.instance),view:i.viewApi,timeText:r.timeText,textColor:f.textColor,backgroundColor:f.backgroundColor,borderColor:f.borderColor,isDraggable:!r.disableDragging&&m4(l,i),isStartResizable:!r.disableResizing&&v4(l,i),isEndResizable:!r.disableResizing&&y4(l),isMirror:Boolean(r.isDragging||r.isResizing||r.isDateSelecting),isStart:Boolean(l.isStart),isEnd:Boolean(l.isEnd),isPast:Boolean(r.isPast),isFuture:Boolean(r.isFuture),isToday:Boolean(r.isToday),isSelected:Boolean(r.isSelected),isDragging:Boolean(r.isDragging),isResizing:Boolean(r.isResizing)},_=function _4(n){var e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}(m).concat(f.classNames);return Te(Bm,{hookProps:m,classNames:o.eventClassNames,content:o.eventContent,defaultContent:r.defaultContent,didMount:o.eventDidMount,willUnmount:o.eventWillUnmount,elRef:this.elRef},function(C,x,M,O){return r.children(C,_.concat(x),M,O,m)})},e.prototype.componentDidMount=function(){AV(this.elRef.current,this.props.seg)},e.prototype.componentDidUpdate=function(t){var r=this.props.seg;r!==t.seg&&AV(this.elRef.current,r)},e}(qr),g7=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.context,o=r.seg,c=xV(o,i.options.eventTimeFormat||r.defaultTimeFormat,i,r.defaultDisplayEventTime,r.defaultDisplayEventEnd);return Te(wN,{seg:o,timeText:c,disableDragging:r.disableDragging,disableResizing:r.disableResizing,defaultContent:r.defaultContent||m7,isDragging:r.isDragging,isResizing:r.isResizing,isDateSelecting:r.isDateSelecting,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(f,m,_,C,x){return Te("a",(0,G.pi)({className:r.extraClassNames.concat(m).join(" "),style:{borderColor:x.borderColor,backgroundColor:x.backgroundColor},ref:f},RV(o,i)),Te("div",{className:"fc-event-main",ref:_,style:{color:x.textColor}},C),x.isStartResizable&&Te("div",{className:"fc-event-resizer fc-event-resizer-start"}),x.isEndResizable&&Te("div",{className:"fc-event-resizer fc-event-resizer-end"}))})},e}(qr);function m7(n){return Te("div",{className:"fc-event-main-frame"},n.timeText&&Te("div",{className:"fc-event-time"},n.timeText),Te("div",{className:"fc-event-title-container"},Te("div",{className:"fc-event-title fc-sticky"},n.event.title||Te(da,null,"\xa0"))))}var v7=Ji({day:"numeric"}),xB=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.context,o=i.options,l=RB({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:i.viewApi,dateEnv:i.dateEnv});return Te(YV,{hookProps:l,content:o.dayCellContent,defaultContent:r.defaultContent},r.children)},e}(qr);function RB(n){var e=n.date,t=n.dateEnv,r=WV(e,n.todayRange,null,n.dateProfile);return(0,G.pi)((0,G.pi)((0,G.pi)({date:t.toDate(e),view:n.viewApi},r),{dayNumberText:n.showDayNumber?t.format(e,v7):""}),n.extraProps)}var MB=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.refineHookProps=MA(RB),t.normalizeClassNames=QV(),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.context,o=i.options,l=this.refineHookProps({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:i.viewApi,dateEnv:i.dateEnv}),c=eN(l,i.theme).concat(l.isDisabled?[]:this.normalizeClassNames(o.dayCellClassNames,l)),f=l.isDisabled?{}:{"data-date":gV(r.date)};return Te(lN,{hookProps:l,didMount:o.dayCellDidMount,willUnmount:o.dayCellWillUnmount,elRef:r.elRef},function(m){return r.children(m,c,f,l.isDisabled)})},e}(qr);function y7(n){return Te("div",{className:"fc-"+n})}var _7=function(n){return Te(wN,{defaultContent:w7,seg:n.seg,timeText:"",disableDragging:!0,disableResizing:!0,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:n.isPast,isFuture:n.isFuture,isToday:n.isToday},function(e,t,r,i,o){return Te("div",{ref:e,className:["fc-bg-event"].concat(t).join(" "),style:{backgroundColor:o.backgroundColor}},i)})};function w7(n){return n.event.title&&Te("div",{className:"fc-event-title"},n.event.title)}var b7=function(n){return Te(Lp.Consumer,null,function(e){var t=e.dateEnv,r=e.options,i=n.date,o=r.weekNumberFormat||n.defaultFormat,l=t.computeWeekNumber(i),c=t.format(i,o);return Te(Bm,{hookProps:{num:l,text:c,date:i},classNames:r.weekNumberClassNames,content:r.weekNumberContent,defaultContent:E7,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},n.children)})};function E7(n){return n.text}var C7=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.state={titleId:CA()},t.handleRootEl=function(r){t.rootEl=r,t.props.elRef&&Nh(t.props.elRef,r)},t.handleDocumentMouseDown=function(r){var i=JU(r);t.rootEl.contains(i)||t.handleCloseClick()},t.handleDocumentKeyDown=function(r){"Escape"===r.key&&t.handleCloseClick()},t.handleCloseClick=function(){var r=t.props.onClose;r&&r()},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.context,r=t.theme,i=t.options,l=this.props,c=this.state,f=["fc-popover",r.getClass("popover")].concat(l.extraClassNames||[]);return t5(Te("div",(0,G.pi)({id:l.id,className:f.join(" "),"aria-labelledby":c.titleId},l.extraAttrs,{ref:this.handleRootEl}),Te("div",{className:"fc-popover-header "+r.getClass("popoverHeader")},Te("span",{className:"fc-popover-title",id:c.titleId},l.title),Te("span",{className:"fc-popover-close "+r.getIconClass("close"),title:i.closeHint,onClick:this.handleCloseClick})),Te("div",{className:"fc-popover-body "+r.getClass("popoverContent")},l.children)),l.parentEl)},e.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)},e.prototype.updateSize=function(){var t=this.context.isRtl,r=this.props,i=r.alignmentEl,o=r.alignGridTop,l=this.rootEl,c=function lZ(n){for(var e=ZV(n),t=n.getBoundingClientRect(),r=0,i=e;r<i.length;r++){var l=GV(t,i[r].getBoundingClientRect());if(!l)return null;t=l}return t}(i);if(c){var f=l.getBoundingClientRect(),m=o?as(i,".fc-scrollgrid").getBoundingClientRect().top:c.top,_=t?c.right-f.width:c.left;m=Math.max(m,10),_=Math.min(_,document.documentElement.clientWidth-10-f.width),_=Math.max(_,10);var C=l.offsetParent.getBoundingClientRect();NE(l,{top:m-C.top,left:_-C.left})}},e}(qr),I7=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.handleRootEl=function(r){t.rootEl=r,r?t.context.registerInteractiveComponent(t,{el:r,useEventCenter:!1}):t.context.unregisterInteractiveComponent(t)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.context,o=this.props,l=o.startDate,c=o.todayRange,f=o.dateProfile,m=t.dateEnv.format(l,t.options.dayPopoverFormat);return Te(MB,{date:l,dateProfile:f,todayRange:c,elRef:this.handleRootEl},function(_,C,x){return Te(C7,{elRef:_,id:o.id,title:m,extraClassNames:["fc-more-popover"].concat(C),extraAttrs:x,parentEl:o.parentEl,alignmentEl:o.alignmentEl,alignGridTop:o.alignGridTop,onClose:o.onClose},Te(xB,{date:l,dateProfile:f,todayRange:c},function(M,O){return O&&Te("div",{className:"fc-more-popover-misc",ref:M},O)}),o.children)})},e.prototype.queryHit=function(t,r,i,o){var c=this.rootEl,f=this.props;return t>=0&&t<i&&r>=0&&r<o?{dateProfile:f.dateProfile,dateSpan:(0,G.pi)({allDay:!0,range:{start:f.startDate,end:f.endDate}},f.extraDateSpan),dayEl:c,rect:{left:0,top:0,right:i,bottom:o},layer:1}:null},e}(K_),D7=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.linkElRef=Jl(),t.state={isPopoverOpen:!1,popoverId:CA()},t.handleClick=function(r){var o=t.props,l=t.context,c=l.options.moreLinkClick,f=kB(o).start;function m(_){var C=_.eventRange,O=C.range;return{event:new ai(l,C.def,C.instance),start:l.dateEnv.toDate(O.start),end:l.dateEnv.toDate(O.end),isStart:_.isStart,isEnd:_.isEnd}}"function"==typeof c&&(c=c({date:f,allDay:Boolean(o.allDayDate),allSegs:o.allSegs.map(m),hiddenSegs:o.hiddenSegs.map(m),jsEvent:r,view:l.viewApi})),c&&"popover"!==c?"string"==typeof c&&l.calendarApi.zoomTo(f,c):t.setState({isPopoverOpen:!0})},t.handlePopoverClose=function(){t.setState({isPopoverOpen:!1})},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,i=this.props,o=this.state;return Te(Lp.Consumer,null,function(l){var c=l.viewApi,f=l.options,m=l.calendarApi,_=f.moreLinkText,C=i.moreCnt,x=kB(i),M="function"==typeof _?_.call(m,C):"+"+C+" "+_,O=OE(f.moreLinkHint,[C],M),W={num:C,shortText:"+"+C,text:M,view:c};return Te(da,null,Boolean(i.moreCnt)&&Te(Bm,{elRef:t.linkElRef,hookProps:W,classNames:f.moreLinkClassNames,content:f.moreLinkContent,defaultContent:i.defaultContent||T7,didMount:f.moreLinkDidMount,willUnmount:f.moreLinkWillUnmount},function(K,te,_e,ke){return i.children(K,["fc-more-link"].concat(te),_e,ke,t.handleClick,O,o.isPopoverOpen,o.isPopoverOpen?o.popoverId:"")}),o.isPopoverOpen&&Te(I7,{id:o.popoverId,startDate:x.start,endDate:x.end,dateProfile:i.dateProfile,todayRange:i.todayRange,extraDateSpan:i.extraDateSpan,parentEl:t.parentEl,alignmentEl:i.alignmentElRef.current,alignGridTop:i.alignGridTop,onClose:t.handlePopoverClose},i.popoverContent()))})},e.prototype.componentDidMount=function(){this.updateParentEl()},e.prototype.componentDidUpdate=function(){this.updateParentEl()},e.prototype.updateParentEl=function(){this.linkElRef.current&&(this.parentEl=as(this.linkElRef.current,".fc-view-harness"))},e}(qr);function T7(n){return n.text}function kB(n){if(n.allDayDate)return{start:n.allDayDate,end:Hs(n.allDayDate,1)};var e=n.hiddenSegs;return{start:A7(e),end:x7(e)}}function A7(n){return n.reduce(S7).eventRange.range.start}function S7(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function x7(n){return n.reduce(R7).eventRange.range.end}function R7(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}var M7=function(n){function e(t,r){void 0===r&&(r={});var i=n.call(this)||this;return i.isRendering=!1,i.isRendered=!1,i.currentClassNames=[],i.customContentRenderId=0,i.handleAction=function(o){switch(o.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":i.renderRunner.tryDrain()}},i.handleData=function(o){i.currentData=o,i.renderRunner.request(o.calendarOptions.rerenderDelay)},i.handleRenderRequest=function(){if(i.isRendering){i.isRendered=!0;var o=i.currentData;YU(function(){e5(Te(B8,{options:o.calendarOptions,theme:o.theme,emitter:o.emitter},function(l,c,f,m){return i.setClassNames(l),i.setHeight(c),Te(KV.Provider,{value:i.customContentRenderId},Te(L8,(0,G.pi)({isHeightAuto:f,forPrint:m},o)))}),i.el)})}else i.isRendered&&(i.isRendered=!1,n5(i.el),i.setClassNames([]),i.setHeight(""))},i.el=t,i.renderRunner=new dN(i.handleRenderRequest),new pB({optionOverrides:r,calendarApi:i,onAction:i.handleAction,onData:i.handleData}),i}return(0,G.ZT)(e,n),Object.defineProperty(e.prototype,"view",{get:function(){return this.currentData.viewApi},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()},e.prototype.destroy=function(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())},e.prototype.updateSize=function(){var t=this;YU(function(){n.prototype.updateSize.call(t)})},e.prototype.batchRendering=function(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")},e.prototype.pauseRendering=function(){this.renderRunner.pause("pauseRendering")},e.prototype.resumeRendering=function(){this.renderRunner.resume("pauseRendering",!0)},e.prototype.resetOptions=function(t,r){this.currentDataManager.resetOptions(t,r)},e.prototype.setClassNames=function(t){if(!Fp(t,this.currentClassNames)){for(var r=this.el.classList,i=0,o=this.currentClassNames;i<o.length;i++)r.remove(o[i]);for(var c=0,f=t;c<f.length;c++)r.add(f[c]);this.currentClassNames=t}},e.prototype.setHeight=function(t){QU(this.el,"height",t)},e}(F4);const k7=Object.prototype.hasOwnProperty;function KA(n){return Array.isArray(n)?n.map(KA):n instanceof Date?new Date(n.valueOf()):"object"==typeof n&&n?PB(n,KA):n}function P7(n){return"object"==typeof n&&(Array.isArray(n)?n=Array.prototype.slice.call(n):n&&(n=Object.assign({},n))),n}function PB(n,e){const t={};for(const r in n)k7.call(n,r)&&(t[r]=e(n[r],r));return t}const NB={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0};let N7=(()=>{class n{constructor(t){this.element=t,this.optionSnapshot={}}ngAfterViewInit(){const{deepChangeDetection:t}=this,r=this.options||{};this.optionSnapshot=PB(r,(i,o)=>t&&NB[o]?KA(i):i),this.calendar=new M7(this.element.nativeElement,r),this.calendar.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:t,optionSnapshot:r}=this,i=this.options||{},o={};let l=!1;for(const f in i)if(i.hasOwnProperty(f)){let m=i[f];t&&NB[f]?a6()(r[f],m)||(r[f]=KA(m),l=!0,m=P7(m)):r[f]!==m&&(r[f]=m,l=!0),o[f]=m}const c=Object.keys(r);for(const f of c)f in i||(delete r[f],l=!0);l&&(this.calendar.pauseRendering(),this.calendar.resetOptions(o))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}getApi(){return this.calendar}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["full-calendar"]],inputs:{options:"options",deepChangeDetection:"deepChangeDetection"},decls:0,vars:0,template:function(t,r){},styles:['@charset "UTF-8";.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{vertical-align:top;padding:0}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid #ddd;border:1px solid var(--fc-border-color,#ddd)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype");font-weight:400;font-style:normal}.fc-icon{display:inline-block;width:1em;height:1em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-family:fcicons!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;overflow:visible;text-transform:none;margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button::-moz-focus-inner{padding:0;border-style:none}.fc .fc-button{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.4em .65em;font-size:1em;line-height:1.5;border-radius:.25em}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{outline:0;box-shadow:0 0 0 .2rem rgba(44,62,80,.25)}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{color:#fff;color:var(--fc-button-text-color,#fff);background-color:#2c3e50;background-color:var(--fc-button-bg-color,#2c3e50);border-color:#2c3e50;border-color:var(--fc-button-border-color,#2c3e50)}.fc .fc-button-primary:hover{color:#fff;color:var(--fc-button-text-color,#fff);background-color:#1e2b37;background-color:var(--fc-button-hover-bg-color,#1e2b37);border-color:#1a252f;border-color:var(--fc-button-hover-border-color,#1a252f)}.fc .fc-button-primary:disabled{color:#fff;color:var(--fc-button-text-color,#fff);background-color:#2c3e50;background-color:var(--fc-button-bg-color,#2c3e50);border-color:#2c3e50;border-color:var(--fc-button-border-color,#2c3e50)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{color:#fff;color:var(--fc-button-text-color,#fff);background-color:#1a252f;background-color:var(--fc-button-active-bg-color,#1a252f);border-color:#151e27;border-color:var(--fc-button-active-border-color,#151e27)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{vertical-align:middle;font-size:1.5em}.fc .fc-button-group{position:relative;display:inline-flex;vertical-align:middle}.fc .fc-button-group>.fc-button{position:relative;flex:1 1 auto}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){margin-right:-1px;border-top-right-radius:0;border-bottom-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-top-left-radius:0;border-bottom-left-radius:0}.fc .fc-toolbar{display:flex;justify-content:space-between;align-items:center}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{position:absolute;top:0;right:0;left:0;bottom:0}.fc .fc-scroller-harness{position:relative;overflow:hidden;direction:ltr}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid #ddd;border:1px solid var(--fc-border-color,#ddd)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{width:100%;table-layout:fixed}.fc .fc-scrollgrid table{border-top-style:hidden;border-left-style:hidden;border-right-style:hidden}.fc .fc-scrollgrid{border-collapse:separate;border-right-width:0;border-bottom-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section>td,.fc .fc-scrollgrid-section table{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-top-width:0;border-left-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:#fff;background:var(--fc-page-bg-color,#fff);position:-webkit-sticky;position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:-webkit-sticky;position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{position:absolute;top:0;right:0;bottom:0;left:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{position:absolute;top:0;left:0;right:0;bottom:0}.fc .fc-non-business{background:hsla(0,0%,84.3%,.3);background:var(--fc-non-business-color,hsla(0,0%,84.3%,.3))}.fc .fc-bg-event{background:#8fdf82;background:var(--fc-bg-event-color,#8fdf82);opacity:.3;opacity:var(--fc-bg-event-opacity,.3)}.fc .fc-bg-event .fc-event-title{margin:.5em;font-size:.85em;font-size:var(--fc-small-font-size,.85em);font-style:italic}.fc .fc-highlight{background:rgba(188,232,241,.3);background:var(--fc-highlight-color,rgba(188,232,241,.3))}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:hsla(0,0%,81.6%,.3);background:var(--fc-neutral-bg-color,hsla(0,0%,81.6%,.3))}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{border-radius:4px;border-radius:calc(var(--fc-event-resizer-dot-total-width, 8px) / 2);border-width:1px;width:8px;width:var(--fc-event-resizer-dot-total-width,8px);height:8px;height:var(--fc-event-resizer-dot-total-width,8px);border:var(--fc-event-resizer-dot-border-width,1px) solid;border-color:inherit;background:#fff;background:var(--fc-page-bg-color,#fff)}.fc-event-selected .fc-event-resizer:before{content:"";position:absolute;top:-20px;left:-20px;right:-20px;bottom:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{content:"";position:absolute;z-index:3;top:0;left:0;right:0;bottom:0}.fc-event-selected:after,.fc-event:focus:after{content:"";background:rgba(0,0,0,.25);background:var(--fc-event-selected-overlay-color,rgba(0,0,0,.25));position:absolute;z-index:1;top:-1px;left:-1px;right:-1px;bottom:-1px}.fc-h-event{display:block;border:1px solid #3788d8;border:1px solid var(--fc-event-border-color,#3788d8);background-color:#3788d8;background-color:var(--fc-event-bg-color,#3788d8)}.fc-h-event .fc-event-main{color:#fff;color:var(--fc-event-text-color,#fff)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;vertical-align:top;left:0;right:0;max-width:100%;overflow:hidden}.fc-h-event.fc-event-selected:before{top:-10px;bottom:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{top:0;bottom:0;width:8px;width:var(--fc-event-resizer-thickness,8px)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:-4px;left:calc(-.5 * var(--fc-event-resizer-thickness, 8px))}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:-4px;right:calc(-.5 * var(--fc-event-resizer-thickness, 8px))}.fc-h-event.fc-event-selected .fc-event-resizer{top:50%;margin-top:-4px;margin-top:calc(-.5 * var(--fc-event-resizer-dot-total-width, 8px))}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:-4px;left:calc(-.5 * var(--fc-event-resizer-dot-total-width, 8px))}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:-4px;right:calc(-.5 * var(--fc-event-resizer-dot-total-width, 8px))}.fc .fc-popover{position:absolute;z-index:9999;box-shadow:0 2px 6px rgba(0,0,0,.15)}.fc .fc-popover-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;opacity:.65;font-size:1.1em}.fc-theme-standard .fc-popover{border:1px solid #ddd;border:1px solid var(--fc-border-color,#ddd);background:#fff;background:var(--fc-page-bg-color,#fff)}.fc-theme-standard .fc-popover-header{background:hsla(0,0%,81.6%,.3);background:var(--fc-neutral-bg-color,hsla(0,0%,81.6%,.3))}:root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{content:"";clear:both;display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:rgba(255,220,40,.15);background-color:var(--fc-today-bg-color,rgba(255,220,40,.15))}.fc .fc-daygrid-day-frame{position:relative;min-height:100%}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{position:relative;z-index:4;padding:4px}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{position:absolute;left:0;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{position:relative;min-height:2em}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{position:absolute;top:0;left:0;right:0}.fc .fc-daygrid-bg-harness{position:absolute;top:0;bottom:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{z-index:6;margin-top:1px}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;padding:2px 3px 0}.fc .fc-daygrid-day-bottom:before{content:"";clear:both;display:table}.fc .fc-daygrid-more-link{position:relative;z-index:4;cursor:pointer}.fc .fc-daygrid-week-number{position:absolute;z-index:5;top:0;padding:2px;min-width:1.5em;text-align:center;background-color:hsla(0,0%,81.6%,.3);background-color:var(--fc-neutral-bg-color,hsla(0,0%,81.6%,.3));color:grey;color:var(--fc-neutral-text-color,grey)}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-week-number{left:0;border-radius:0 0 3px 0}.fc-direction-rtl .fc-daygrid-week-number{right:0;border-radius:0 0 0 3px}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{position:relative;white-space:nowrap;border-radius:3px;font-size:.85em;font-size:var(--fc-small-font-size,.85em)}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{display:flex;align-items:center;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;min-width:0;overflow:hidden;font-weight:700}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{top:-10px;bottom:-10px}.fc-daygrid-event-dot{margin:0 4px;box-sizing:content-box;width:0;height:0;border:4px solid #3788d8;border:calc(var(--fc-daygrid-event-dot-width, 8px) / 2) solid var(--fc-event-border-color,#3788d8);border-radius:4px;border-radius:calc(var(--fc-daygrid-event-dot-width, 8px) / 2)}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}.fc-v-event{display:block;border:1px solid #3788d8;border:1px solid var(--fc-event-border-color,#3788d8);background-color:#3788d8;background-color:var(--fc-event-bg-color,#3788d8)}.fc-v-event .fc-event-main{color:#fff;color:var(--fc-event-text-color,#fff);height:100%}.fc-v-event .fc-event-main-frame{height:100%;display:flex;flex-direction:column}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{top:0;bottom:0;max-height:100%;overflow:hidden}.fc-v-event:not(.fc-event-start){border-top-width:0;border-top-left-radius:0;border-top-right-radius:0}.fc-v-event:not(.fc-event-end){border-bottom-width:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:8px;height:var(--fc-event-resizer-thickness,8px);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:-4px;top:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:-4px;bottom:calc(var(--fc-event-resizer-thickness, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:-4px;margin-left:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:-4px;top:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:-4px;bottom:calc(var(--fc-event-resizer-dot-total-width, 8px) / -2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{position:relative;z-index:1;min-height:100%}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{height:1.5em;border-bottom:0}.fc .fc-timegrid-slot:empty:before{content:"\xa0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{overflow:hidden;display:flex;align-items:center;justify-content:flex-end}.fc .fc-timegrid-axis-cushion{max-width:60px;flex-shrink:0}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{height:auto;position:absolute;top:0;right:0;bottom:0;left:0}.fc .fc-timegrid-col.fc-day-today{background-color:rgba(255,220,40,.15);background-color:var(--fc-today-bg-color,rgba(255,220,40,.15))}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{height:auto;position:absolute;top:0;right:0;bottom:0;left:0}.fc-media-screen .fc-timegrid-cols{position:absolute;top:0;left:0;right:0;bottom:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{position:absolute;top:0;left:0;right:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{position:absolute;left:0;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{position:absolute;top:0;bottom:0;left:0;right:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px #fff;box-shadow:0 0 0 1px var(--fc-page-bg-color,#fff)}.fc-timegrid-event,.fc-timegrid-more-link{font-size:.85em;font-size:var(--fc-small-font-size,.85em);border-radius:3px}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{white-space:nowrap;font-size:.85em;font-size:var(--fc-small-font-size,.85em);margin-bottom:1px}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\xa0-\xa0"}.fc-timegrid-event-short .fc-event-title{font-size:.85em;font-size:var(--fc-small-font-size,.85em)}.fc-timegrid-more-link{position:absolute;z-index:9999;color:inherit;color:var(--fc-more-link-text-color,inherit);background:#d0d0d0;background:var(--fc-more-link-bg-color,#d0d0d0);cursor:pointer;margin-bottom:1px}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{position:absolute;z-index:4;left:0;right:0;border:0 solid red;border-color:var(--fc-now-indicator-color,red);border-top:1px solid var(--fc-now-indicator-color,red)}.fc .fc-timegrid-now-indicator-arrow{position:absolute;z-index:4;margin-top:-5px;border-style:solid;border-color:red;border-color:var(--fc-now-indicator-color,red)}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{left:0;border-width:5px 0 5px 6px;border-top-color:transparent;border-bottom-color:transparent}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{right:0;border-width:5px 6px 5px 0;border-top-color:transparent;border-bottom-color:transparent}:root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid #ddd;border:1px solid var(--fc-border-color,#ddd)}.fc .fc-list-empty{background-color:hsla(0,0%,81.6%,.3);background-color:var(--fc-neutral-bg-color,hsla(0,0%,81.6%,.3));height:100%;display:flex;justify-content:center;align-items:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{width:100%;border-style:hidden}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{position:-webkit-sticky;position:sticky;top:0;background:#fff;background:var(--fc-page-bg-color,#fff)}.fc .fc-list-table thead{position:absolute;left:-10000px}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{content:"";clear:both;display:table}.fc-theme-standard .fc-list-day-cushion{background-color:hsla(0,0%,81.6%,.3);background-color:var(--fc-neutral-bg-color,hsla(0,0%,81.6%,.3))}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:#f5f5f5;background-color:var(--fc-list-event-hover-bg-color,#f5f5f5)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{display:inline-block;box-sizing:content-box;width:0;height:0;border:5px solid #3788d8;border:calc(var(--fc-list-event-dot-width, 10px) / 2) solid var(--fc-event-border-color,#3788d8);border-radius:5px;border-radius:calc(var(--fc-list-event-dot-width, 10px) / 2)}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}.fc-theme-bootstrap a:not([href]){color:inherit}.fc .fc-event,.fc .fc-scrollgrid table tr{-moz-column-break-inside:avoid;break-inside:avoid}.fc-media-print{display:block;max-width:100%}.fc-media-print .fc-bg-event,.fc-media-print .fc-non-business,.fc-media-print .fc-timegrid-axis-chunk,.fc-media-print .fc-timegrid-slots,.fc-media-print .fc-timeline-slots{display:none}.fc-media-print .fc-h-event,.fc-media-print .fc-toolbar button,.fc-media-print .fc-v-event{color:#000!important;background:#fff!important}.fc-media-print .fc-event,.fc-media-print .fc-event-main{color:#000!important}.fc-media-print .fc-timegrid-event{margin:.5em 0}.fc .fc-timeline-body{min-height:100%;position:relative;z-index:1}.fc .fc-timeline-slots{position:absolute;z-index:1;top:0;bottom:0}.fc .fc-timeline-slots>table{height:100%}.fc .fc-timeline-slot-minor{border-style:dotted}.fc .fc-timeline-slot-frame{display:flex;align-items:center;justify-content:center}.fc .fc-timeline-header-row-chrono .fc-timeline-slot-frame{justify-content:flex-start}.fc .fc-timeline-header-row:last-child .fc-timeline-slot-frame{overflow:hidden}.fc .fc-timeline-slot-cushion{padding:4px 5px;white-space:nowrap}.fc-direction-ltr .fc-timeline-slot{border-right:0!important}.fc-direction-rtl .fc-timeline-slot{border-left:0!important}.fc .fc-timeline-now-indicator-container{position:absolute;z-index:4;top:0;bottom:0;left:0;right:0;width:0}.fc .fc-timeline-now-indicator-arrow,.fc .fc-timeline-now-indicator-line{position:absolute;top:0;border-style:solid;border-color:red;border-color:var(--fc-now-indicator-color,red)}.fc .fc-timeline-now-indicator-arrow{margin:0 -6px;border-width:6px 5px 0;border-left-color:transparent;border-right-color:transparent}.fc .fc-timeline-now-indicator-line{margin:0 -1px;bottom:0;border-width:0 0 0 1px}.fc .fc-timeline-events{position:relative;z-index:3;width:0}.fc .fc-timeline-event-harness,.fc .fc-timeline-more-link{position:absolute;top:0}.fc-timeline-event{z-index:1}.fc-timeline-event.fc-event-mirror{z-index:2}.fc-timeline-event{position:relative;display:flex;align-items:center;border-radius:0;padding:2px 1px;margin-bottom:1px;font-size:.85em;font-size:var(--fc-small-font-size,.85em)}.fc-timeline-event .fc-event-main{flex-grow:1;flex-shrink:1;min-width:0}.fc-timeline-event .fc-event-time{font-weight:700}.fc-timeline-event .fc-event-time,.fc-timeline-event .fc-event-title{white-space:nowrap;padding:0 2px}.fc-direction-ltr .fc-timeline-event.fc-event-end,.fc-direction-ltr .fc-timeline-more-link{margin-right:1px}.fc-direction-rtl .fc-timeline-event.fc-event-end,.fc-direction-rtl .fc-timeline-more-link{margin-left:1px}.fc-timeline-overlap-disabled .fc-timeline-event{padding-top:5px;padding-bottom:5px;margin-bottom:0}.fc-timeline-event:not(.fc-event-end):after,.fc-timeline-event:not(.fc-event-start):before{content:"";flex-grow:0;flex-shrink:0;opacity:.5;width:0;height:0;margin:0 1px;border-color:transparent #000;border-style:solid;border-width:5px}.fc-direction-ltr .fc-timeline-event:not(.fc-event-start):before,.fc-direction-rtl .fc-timeline-event:not(.fc-event-end):after{border-left:0}.fc-direction-ltr .fc-timeline-event:not(.fc-event-end):after,.fc-direction-rtl .fc-timeline-event:not(.fc-event-start):before{border-right:0}.fc-timeline-more-link{font-size:.85em;font-size:var(--fc-small-font-size,.85em);color:inherit;color:var(--fc-more-link-text-color,inherit);background:#d0d0d0;background:var(--fc-more-link-bg-color,#d0d0d0);padding:1px;cursor:pointer}.fc-timeline-more-link-inner{display:inline-block;left:0;right:0;padding:2px}.fc .fc-timeline-bg{position:absolute;z-index:2;top:0;bottom:0;width:0;left:0;right:0}.fc .fc-timeline-bg .fc-non-business{z-index:1}.fc .fc-timeline-bg .fc-bg-event{z-index:2}.fc .fc-timeline-bg .fc-highlight{z-index:3}.fc .fc-timeline-bg-harness{position:absolute;top:0;bottom:0}.fc .fc-resource-timeline-divider{width:3px;cursor:col-resize}.fc .fc-resource-group{font-weight:inherit;text-align:inherit}.fc .fc-resource-timeline .fc-resource-group:not([rowspan]){background:hsla(0,0%,81.6%,.3);background:var(--fc-neutral-bg-color,hsla(0,0%,81.6%,.3))}.fc .fc-timeline-lane-frame{position:relative}.fc .fc-timeline-overlap-enabled .fc-timeline-lane-frame .fc-timeline-events{box-sizing:content-box;padding-bottom:10px}.fc-timeline-body-expandrows td.fc-timeline-lane{position:relative}.fc-timeline-body-expandrows .fc-timeline-lane-frame{position:static}.fc-datagrid-cell-frame-liquid{height:100%}.fc-liquid-hack .fc-datagrid-cell-frame-liquid{height:auto;position:absolute;top:0;right:0;bottom:0;left:0}.fc .fc-datagrid-header .fc-datagrid-cell-frame{position:relative;display:flex;justify-content:flex-start;align-items:center}.fc .fc-datagrid-cell-resizer{position:absolute;z-index:1;top:0;bottom:0;width:5px;cursor:col-resize}.fc .fc-datagrid-cell-cushion{padding:8px;white-space:nowrap;overflow:hidden}.fc .fc-datagrid-expander{cursor:pointer;opacity:.65}.fc .fc-datagrid-expander .fc-icon{display:inline-block;width:1em}.fc .fc-datagrid-expander-placeholder{cursor:auto}.fc .fc-resource-timeline-flat .fc-datagrid-expander-placeholder{display:none}.fc-direction-ltr .fc-datagrid-cell-resizer{right:-3px}.fc-direction-rtl .fc-datagrid-cell-resizer{left:-3px}.fc-direction-ltr .fc-datagrid-expander{margin-right:3px}.fc-direction-rtl .fc-datagrid-expander{margin-left:3px}'],encapsulation:2}),n})(),OB=(()=>{class n{static registerPlugins(t){fB.push(...t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function O7(n,e){if(1&n&&h._UZ(0,"full-calendar",1),2&n){const t=h.oxw();h.Q6J("options",t.calendarOptions)}}let F7=(()=>{class n{constructor(t,r,i){this.objetosAdmin=t,this.authService=r,this.fireAuth=i,this.admin=!1,this.eventos=[{title:"",date:""}],this.calendarOptions={themeSystem:"bootstrap",locale:"es",initialView:"dayGridMonth",height:900,weekends:!1,dateClick:this.handleDateClick.bind(this),events:[],eventClick(o){ho().fire("Objeto: "+o.event.title+"\nInteresado: "+o.event.extendedProps.nombreU+"\nTelefono de contacto: "+o.event.extendedProps.telefono)}},i.user.subscribe(o=>{this.user=o,this.authService.esAdmin(this.user.email).subscribe(l=>{this.ref=l,l.payload.data()&&(this.admin=!0)})})}ngOnInit(){this.objetosAdmin.getCalendario().subscribe(t=>{this.fechas=t.map(r=>({rid:r.payload.doc.id,...r.payload.doc.data()}))}),setTimeout(()=>{for(let t=0;t<this.fechas.length;t++){let r=this.fechas[t].title.toString(),i=this.fechas[t].date.toString();this.eventos.push({title:r,date:i,nombreU:this.fechas[t].nombreU,telefono:this.fechas[t].telefono}),this.calendarOptions.events=[...this.eventos]}},1500)}handleDateClick(t){alert("No has seleccionado ningun evento en: "+t.dateStr)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(SE),h.Y36(yd),h.Y36(Ha))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-calendario"]],decls:7,vars:1,consts:[[3,"options",4,"ngIf"],[3,"options"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div"),h._UZ(2,"hr")(3,"div"),h.TgZ(4,"div"),h._UZ(5,"hr"),h.qZA()(),h.YNc(6,O7,1,1,"full-calendar",0)),2&t&&(h.xp6(6),h.Q6J("ngIf",r.admin))},dependencies:[jn,N7,uc]}),n})(),L7=(()=>{class n{constructor(t,r,i,o){this.router=t,this.formBuilder=r,this.activeRoute=i,this.objetosService=o,this.objetoForm=this.formBuilder.group({title:[""],nombreU:[""],telefono:[""],date:[""],mensaje:[""],idObjeto:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.code=Math.floor(1e5+9e5*Math.random()),this.objetosService.getObjetoByID(t).subscribe(r=>{this.objRef=r,this.objRef=r.payload.data(),this.objetoForm=this.formBuilder.group({title:[this.objRef.nombre],nombreU:[""],telefono:[""],date:[""],mensaje:[""],idObjeto:[t]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.titulo=this.objRef.nombre,this.objetosService.agregarCalendario(this.objetoForm.value),this.objetosService.setEspera(t,this.code),ho().fire("Reclamacion enviada! Guarda este codigo: ",this.code.toString()),this.router.navigate(["/objetos"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xn),h.Y36(aP),h.Y36(Ua),h.Y36(lA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-reclamar-o"]],decls:31,vars:2,consts:[[1,"banner"],[1,"container","p-5"],[1,"pb-4"],[1,"card","mx-3","mt-n5","shadow-lg",2,"border-radius","0px","border","none"],[1,"card-body","p-5"],[1,"card-title","mb-3","text-dark","text-uppercase",2,"font-weight","700"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"form-floating","mb-3"],["type","text","formControlName","nombreU","placeholder","NOMBRE","required","",1,"form-control"],["for","floatingTextInput1"],["type","email","formControlName","telefono","placeholder","name@example.com","required","",1,"form-control"],["for","text",1,"form-label"],["type","date","formControlName","date","placeholder","fecha","required","",1,"form-control"],["for","floatingEmailInput"],["type","email","formControlName","mensaje","placeholder","mensaje","required","",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0)(2,"div",1)(3,"h5",2),h._uU(4,"Ingresa tus datos de contacto"),h.qZA(),h.TgZ(5,"div",3)(6,"div",4)(7,"h4",5),h._uU(8,"Reclamacion"),h.qZA(),h.TgZ(9,"form",6),h.NdJ("ngSubmit",function(){return r.onSubmit()}),h.TgZ(10,"div",7)(11,"div",8)(12,"div",9),h._UZ(13,"input",10),h.TgZ(14,"label",11),h._uU(15,"Nombre"),h.qZA()()()(),h.TgZ(16,"div",9),h._UZ(17,"input",12),h.TgZ(18,"label",13),h._uU(19,"Numero de telefono"),h.qZA()(),h.TgZ(20,"div",9),h._UZ(21,"input",14),h.TgZ(22,"label",15),h._uU(23," Fecha de reunion"),h.qZA()(),h.TgZ(24,"div",9),h._UZ(25,"input",16),h.TgZ(26,"label",15),h._uU(27,"Mensaje"),h.qZA()(),h.TgZ(28,"div",17)(29,"button",18),h._uU(30,"ENVIAR"),h.qZA()()()()()()()),2&t&&(h.xp6(9),h.Q6J("formGroup",r.objetoForm),h.xp6(20),h.Q6J("disabled",!r.objetoForm.valid))},dependencies:[O_,Ap,k_,P_,Rm,F_,CE,uc]}),n})();function U7(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",1)(1,"div",2)(2,"h5",3),h._uU(3,"Datos del objeto"),h.qZA(),h.TgZ(4,"div",4)(5,"div",5)(6,"h4",6),h._uU(7,"Reclamacion"),h.qZA(),h.TgZ(8,"div",7),h._UZ(9,"div",8),h.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",7)(15,"div",13)(16,"div"),h._UZ(17,"img",14),h.qZA()()(),h.TgZ(18,"div",15)(19,"h5",16),h._uU(20),h.qZA(),h.TgZ(21,"div",17),h._uU(22),h.qZA(),h._UZ(23,"hr"),h.TgZ(24,"div")(25,"div",18)(26,"div",10)(27,"div",19)(28,"h3"),h._uU(29,"DESCRIPCION"),h.qZA(),h.TgZ(30,"ul",20)(31,"li",21),h._uU(32,"OBJETO:"),h.qZA(),h.TgZ(33,"li",22),h._uU(34),h.qZA()(),h._UZ(35,"hr"),h.TgZ(36,"ul",20)(37,"li",21),h._uU(38,"PEDIDO POR:"),h.qZA(),h.TgZ(39,"li",22),h._uU(40),h.qZA()(),h._UZ(41,"hr"),h.TgZ(42,"ul",20)(43,"li",21),h._uU(44,"TELEFONO DE CONTACTO:"),h.qZA(),h.TgZ(45,"li",22),h._uU(46),h.qZA()(),h._UZ(47,"hr"),h.TgZ(48,"ul",20)(49,"li",21),h._uU(50,"MENSAJE:"),h.qZA(),h.TgZ(51,"li",22),h._uU(52),h.qZA()(),h._UZ(53,"hr"),h.TgZ(54,"ul",20)(55,"li",21),h._uU(56,"FECHA DE ENCUENTRO:"),h.qZA(),h.TgZ(57,"li",22),h._uU(58),h.qZA()(),h._UZ(59,"hr"),h.qZA()()()()()()()()(),h.TgZ(60,"form",23),h.NdJ("ngSubmit",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.onSubmit())}),h.TgZ(61,"div",10)(62,"div",24)(63,"div",25),h._UZ(64,"input",26),h.TgZ(65,"label",27),h._uU(66,"Codigo de confimacion"),h.qZA()()()(),h.TgZ(67,"div",28)(68,"button",29),h._uU(69,"CONFIRMAR"),h.qZA()()()()()()()()}if(2&n){const t=h.oxw();h.xp6(17),h.s9C("src",t.img,h.LSH),h.xp6(3),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.descripcion),h.xp6(12),h.Oqu(t.title),h.xp6(6),h.Oqu(t.nombreU),h.xp6(6),h.Oqu(t.telefono),h.xp6(6),h.Oqu(t.mensaje),h.xp6(6),h.Oqu(t.date),h.xp6(2),h.Q6J("formGroup",t.objetoForm),h.xp6(8),h.Q6J("disabled",!t.objetoForm.valid)}}const V7=[{path:"",component:p2},{path:"inicio",component:p2},{path:"iniciarSesion",component:qz},{path:"registrarse",component:(()=>{class n{constructor(t,r){this.AuthService=t,this.router=r,this.usuario={email:"",nombre:"",apellido:"",password:""}}ngOnInit(){}registrarse(){const{nombre:t,email:r,password:i,apellido:o}=this.usuario;""!=r?r.match("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")?""!=i?i.length>=6?setTimeout(()=>{try{this.AuthService.register(r,i,t,o).then(c=>{})}catch{}},1e3):ho().fire("La contrase\xf1a es demaciado corta"):ho().fire("El campo CONTRASE\xd1A esta vacio!"):ho().fire("El campo EMAIL no tiene el formato correcto!"):ho().fire("El campo EMAIL esta vacio!")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yd),h.Y36(Xn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:22,vars:2,consts:[[1,"container","card-body"],[1,"row"],[1,"col-lg-10","col-xl-9","mx-auto"],[1,"card","flex-row","my-5","border-0","shadow","rounded-3","overflow-hidden"],[1,"card-img-left","d-none","d-md-flex"],[1,"card-body","p-4","p-sm-5"],[1,"card-title","text-center","mb-5","fw-light","fs-5"],[1,"form-floating","mb-3"],["required","","pattern","^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$","type","email","name","floatingInputEmail","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInputEmail"],["type","password","name","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"d-grid","mb-2"],["type","submit",1,"btn","btn-primary","btn-login","fw-bold","text-uppercase",3,"click"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),h._UZ(5,"div",4),h.TgZ(6,"div",5)(7,"h5",6),h._uU(8,"Registrarse"),h.qZA(),h.TgZ(9,"form")(10,"div",7)(11,"input",8),h.NdJ("ngModelChange",function(o){return r.usuario.email=o}),h.qZA(),h.TgZ(12,"label",9),h._uU(13,"direccion de Email"),h.qZA()(),h.TgZ(14,"div",7)(15,"input",10),h.NdJ("ngModelChange",function(o){return r.usuario.password=o}),h.qZA(),h.TgZ(16,"label",11),h._uU(17,"Contrase\xf1a"),h.qZA()(),h._UZ(18,"hr"),h.TgZ(19,"div",12)(20,"button",13),h.NdJ("click",function(){return r.registrarse()}),h._uU(21,"Registrarse"),h.qZA()()()()()()()()),2&t&&(h.xp6(11),h.Q6J("ngModel",r.usuario.email),h.xp6(4),h.Q6J("ngModel",r.usuario.password))},dependencies:[O_,Ap,k_,P_,Rm,aA,sA,bE,uc]}),n})()},{path:"objetos",component:Jz},{path:"reclamarO/:id",component:L7},{path:"perfil",component:Xz,canActivate:[eW]},{path:"enEspera",component:Yq},{path:"reclamados",component:r6},{path:"reportar",component:o6},{path:"calendario",component:F7},{path:"confirmar/:id",component:(()=>{class n{constructor(t,r,i,o,l,c){this.router=t,this.formBuilder=r,this.activeRoute=i,this.objetosService=o,this.fireAuth=l,this.authService=c,this.admin=!1,l.user.subscribe(f=>{this.user=f,this.authService.esAdmin(this.user.email).subscribe(m=>{this.ref=m,m.payload.data()&&(this.admin=!0)})}),this.objetoForm=this.formBuilder.group({codigo:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.objetosService.getObjetoByID(t).subscribe(r=>{this.objRef=r,this.objRef=r.payload.data(),this.code=this.objRef.codigo,this.nombre=this.objRef.nombre,this.descripcion=this.objRef.descripcion,this.img=this.objRef.imagen}),this.objetosService.getCalendarioObjeto(t).subscribe(r=>{this.peticion=r.map(i=>(this.petRef=i.payload.doc.data(),this.title=this.petRef.title,this.nombreU=this.petRef.nombreU,this.telefono=this.petRef.telefono,this.mensaje=this.petRef.mensaje,this.date=this.petRef.date,{rid:i.payload.doc.id,...i.payload.doc.data()}))})}onSubmit(){if(this.objetoForm.value.codigo==this.code){const t=this.activeRoute.snapshot.paramMap.get("id");this.objetosService.reclamar(t),ho().fire("Codigo aceptado con exito!"),this.router.navigate(["/reclamados"])}else ho().fire("Los codigos no son iguales! intenta con otro codigo")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xn),h.Y36(aP),h.Y36(Ua),h.Y36(SE),h.Y36(Ha),h.Y36(yd))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-confirmar-reclamo"]],decls:2,vars:1,consts:[["class","banner ",4,"ngIf"],[1,"banner"],[1,"container","p-5"],[1,"pb-4"],[1,"card","mx-3","mt-n5","shadow-lg",2,"border-radius","0px","border","none"],[1,"card-body","p-5"],[1,"card-title","mb-3","text-dark","text-uppercase",2,"font-weight","700"],[1,""],[2,"height","150px"],[1,"container","d-flex","justify-content-center"],[1,"row"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-0","shadow",2,"height","alturapx","width","310px"],[1,"bannerC"],["alt","",1,"imgtam",3,"src"],[1,"card-body","text-center"],[1,"card-title","mb-0"],[1,"card-text","text-black-50","mb-3"],[1,"container"],[1,"col-12"],[1,"list-group"],[1,"list-group-item","active"],[1,"list-group-item","list-group-item-secondary"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col"],[1,"form-floating","mb-3"],["type","number","formControlName","codigo","placeholder","CODIGO","required","",1,"form-control"],["for","floatingTextInput1"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(h._UZ(0,"app-navbar"),h.YNc(1,U7,70,10,"div",0)),2&t&&(h.xp6(1),h.Q6J("ngIf",r.admin))},dependencies:[jn,O_,Ap,tP,k_,P_,Rm,F_,CE,uc],styles:[".centrar[_ngcontent-%COMP%]{margin-left:200px}.imgtam[_ngcontent-%COMP%]{height:250px;width:310px}"]}),n})()},{path:"**",pathMatch:"full",redirectTo:"inicio"}];let B7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[As.forRoot(V7),As]}),n})(),H7=(()=>{class n{constructor(){this.title="ObjetosPerdidos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[$u]}),n})();var j7=V(5032);const FB="@firebase/database",LB="0.13.10";let EN="";function UB(n){EN=n}class z7{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,B.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,B.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class W7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,B.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VB=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new z7(e)}}catch{}return new W7},jm=VB("localStorage"),CN=VB("sessionStorage"),Q_=new aa.Yd("@firebase/database"),BB=function(){let n=1;return function(){return n++}}(),HB=function(n){const e=(0,B.dS)(n),t=new B.gQ;t.update(e);const r=t.digest();return B.US.encodeByteArray(r)},jE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jE.apply(null,r):e+="object"==typeof r?(0,B.Wl)(r):r,e+=" "}return e};let $m=null,jB=!0;const $B=function(n,e){(0,B.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Q_.logLevel=aa.in.VERBOSE,$m=Q_.log.bind(Q_),e&&CN.set("logging_enabled",!0)):"function"==typeof n?$m=n:($m=null,CN.remove("logging_enabled"))},Co=function(...n){if(!0===jB&&(jB=!1,null===$m&&!0===CN.get("logging_enabled")&&$B(!0)),$m){const e=jE.apply(null,n);$m(e)}},$E=function(n){return function(...e){Co(n,...e)}},IN=function(...n){const e="FIREBASE INTERNAL ERROR: "+jE(...n);Q_.error(e)},Cd=function(...n){const e=`FIREBASE FATAL ERROR: ${jE(...n)}`;throw Q_.error(e),new Error(e)},us=function(...n){const e="FIREBASE WARNING: "+jE(...n);Q_.warn(e)},YA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Oh="[MIN_NAME]",Id="[MAX_NAME]",Gm=function(n,e){if(n===e)return 0;if(n===Oh||e===Id)return-1;if(e===Oh||n===Id)return 1;{const t=QA(n),r=QA(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},K7=function(n,e){return n===e?0:n<e?-1:1},GE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Wl)(e))},DN=function(n){if("object"!=typeof n||null===n)return(0,B.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,B.Wl)(e[r]),t+=":",t+=DN(n[e[r]]);return t+="}",t},GB=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Io(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zB=function(n){(0,B.hu)(!YA(n),"Invalid JSON number");const r=1023;let i,o,l,c,f;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,l=Math.round(n*Math.pow(2,52-c)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const m=[];for(f=52;f;f-=1)m.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(i?1:0),m.reverse();const _=m.join("");let C="";for(f=0;f<64;f+=8){let x=parseInt(_.substr(f,8),2).toString(16);1===x.length&&(x="0"+x),C+=x}return C.toLowerCase()},X7=new RegExp("^-?(0*)\\d{1,10}$"),WB=-2147483648,TN=2147483647,QA=function(n){if(X7.test(n)){const e=Number(n);if(e>=WB&&e<=TN)return e}return null},J_=function(n){try{n()}catch(e){setTimeout(()=>{throw us("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},zE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class tK{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nK{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Co("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',us(e)}}let WE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eH="websocket",tH="long_polling";class SN{constructor(e,t,r,i,o=!1,l="",c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nH(n,e,t){let r;if((0,B.hu)("string"==typeof e,"typeof type must == string"),(0,B.hu)("object"==typeof t,"typeof params must == object"),e===eH)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tH)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function rK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Io(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class iK{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,B.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,B.p$)(this.counters_)}}const xN={},RN={};function MN(n){const e=n.toString();return xN[e]||(xN[e]=new iK),xN[e]}class sK{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&J_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bp{constructor(e,t,r,i,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$E(e),this.stats_=MN(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),nH(t,tH,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sK(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kN((...o)=>{const[l,c,f,m,_]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=c,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&QB.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bp.forceAllow_=!0}static forceDisallow(){Bp.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!Bp.forceAllow_&&(Bp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,B.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,B.h$)(t),i=GB(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,B.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class kN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=BB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=kN.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){Co("frame writing exception"),c.stack&&Co(c.stack),Co(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Co("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,B.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Co("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let XA=null;typeof MozWebSocket<"u"?XA=MozWebSocket:typeof WebSocket<"u"&&(XA=WebSocket);let X_=(()=>{class n{constructor(t,r,i,o,l,c,f){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$E(this.connId),this.stats_=MN(r),this.connURL=n.connectionURL_(r,c,f,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const c={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&QB.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),o&&(c.ac=o),l&&(c.p=l),nH(t,eH,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jm.set("previous_websocket_failure",!0);try{let i;if((0,B.Yr)()){i={headers:{"User-Agent":`Firebase/5/${EN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,c=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;c&&(i.proxy={origin:c})}this.mySock=new XA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==XA&&!n.forceDisallow_}static previouslyFailed(){return jm.isInMemoryStorage||!0===jm.get("previous_websocket_failure")}markConnectionHealthy(){jm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,B.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,B.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=GB(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),uH=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bp,X_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=X_&&X_.isAvailable();let i=r&&!X_.previouslyFailed();if(t.webSocketOnly&&(r||us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[X_];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mH{constructor(e,t,r,i,o,l,c,f,m,_){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$E("c:"+this.id+":"),this.transportManager_=new uH(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=GE("t",e),r=GE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=GE("t",e),r=GE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=GE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?IN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):IN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),zE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class vH{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class yH{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,B.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,B.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class eS extends yH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new eS}getInitialEvent(e){return(0,B.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class er{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bn(){return new er("")}function gn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hp(n){return n.pieces_.length-n.pieceNum_}function _r(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new er(n.pieces_,e)}function NN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function qE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bH(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new er(e,0)}function Zr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof er)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new er(t,0)}function mn(n){return n.pieceNum_>=n.pieces_.length}function js(n,e){const t=gn(n),r=gn(e);if(null===t)return e;if(t===r)return js(_r(n),_r(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SK(n,e){const t=qE(n,0),r=qE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Gm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function ON(n,e){if(Hp(n)!==Hp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Xl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Hp(n)>Hp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class xK{constructor(e,t){this.errorPrefix_=t,this.parts_=qE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,B.ug)(this.parts_[r]);EH(this)}}function EH(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zm(n))}function zm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class FN extends yH{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new FN}getInitialEvent(e){return(0,B.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ZE=1e3;let nS,Wm=(()=>{class n extends vH{constructor(t,r,i,o,l,c,f,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=$E("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ZE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&eS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,B.Wl)(l)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new B.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:c=>{const f=c.d;"ok"===c.s?r.resolve(f):r.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(c).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,f=>{const m=f.d,_=f.s;n.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",f),"ok"!==_&&this.removeListen_(i,o),t.onComplete&&t.onComplete(_,m))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,B.r3)(t,"w")){const i=(0,B.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,B.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,B.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,c=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const c={p:r,d:i};void 0!==l&&(c.h=l),this.outstandingPuts_.push({action:t,request:c,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,B.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):IN("Unrecognized action received from server: "+(0,B.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ZE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ZE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ZE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Re.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,c=t.lastSessionId;let f=!1,m=null;const _=function(){m?m.close():(f=!0,o())};t.realtime_={close:_,sendRequest:function(M){(0,B.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(M)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[M,O]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);f?Co("getToken() completed but was canceled"):(Co("getToken() completed. Creating connection."),t.authToken_=M&&M.accessToken,t.appCheckToken_=O&&O.token,m=new mH(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,W=>{us(W+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},c))}catch(M){t.log_("Failed to get token: "+M),f||(t.repoInfo_.nodeAdmin&&us(M),_())}}})()}interrupt(t){Co("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Co("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ZE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>DN(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new er(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Co("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Co("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,B.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+EN.replace(/\./g,"-")]=1,(0,B.uI)()?t["framework.cordova"]=1:(0,B.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=eS.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class wn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new wn(e,t)}}class tS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new wn(Oh,e),i=new wn(Oh,t);return 0!==this.compare(r,i)}minPost(){return wn.MIN}}class DH extends tS{static get __EMPTY_NODE(){return nS}static set __EMPTY_NODE(e){nS=e}compare(e,t){return Gm(e.name,t.name)}isDefinedOn(e){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return wn.MIN}maxPost(){return new wn(Id,nS)}makePost(e,t){return(0,B.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new wn(e,nS)}toString(){return".key"}}const Dd=new DH;class rS{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let UN,dc=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??fa.EMPTY_NODE,this.right=l??fa.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return fa.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return fa.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fa{constructor(e,t=fa.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fa(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,dc.BLACK,null,null))}remove(e){return new fa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rS(this.root_,null,this.comparator_,!0,e)}}function LK(n,e){return Gm(n.name,e.name)}function LN(n,e){return Gm(n,e)}fa.EMPTY_NODE=new class FK{copy(e,t,r,i,o){return this}insert(e,t,r){return new dc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const TH=function(n){return"number"==typeof n?"number:"+zB(n):"string:"+n},AH=function(n){if(n.isLeafNode()){const e=n.val();(0,B.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,B.r3)(e,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===UN||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===UN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let SH,xH,RH,ew=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AH(this.priorityNode_)}static set __childrenNodeConstructor(t){SH=t}static get __childrenNodeConstructor(){return SH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mn(t)?this:".priority"===gn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=gn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,B.hu)(".priority"!==i||1===Hp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(_r(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+TH(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zB(this.value_):this.value_,this.lazyHash_=HB(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,B.hu)(o>=0,"Unknown leaf type: "+r),(0,B.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Sr=new class HK extends tS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Gm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return wn.MIN}maxPost(){return new wn(Id,new ew("[PRIORITY-POST]",RH))}makePost(e,t){const r=xH(e);return new wn(t,new ew("[PRIORITY-POST]",r))}toString(){return".priority"}},jK=Math.log(2);class $K{constructor(e){this.count=parseInt(Math.log(e+1)/jK,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const iS=function(n,e,t,r){n.sort(e);const i=function(f,m){const _=m-f;let C,x;if(0===_)return null;if(1===_)return C=n[f],x=t?t(C):C,new dc(x,C.node,dc.BLACK,null,null);{const M=parseInt(_/2,10)+f,O=i(f,M),W=i(M+1,m);return C=n[M],x=t?t(C):C,new dc(x,C.node,dc.BLACK,O,W)}},c=function(f){let m=null,_=null,C=n.length;const x=function(O,W){const K=C-O,te=C;C-=O;const _e=i(K+1,te),ke=n[K],Ne=t?t(ke):ke;M(new dc(Ne,ke.node,W,null,_e))},M=function(O){m?(m.left=O,m=O):(_=O,m=O)};for(let O=0;O<f.count;++O){const W=f.nextBitIsOne(),K=Math.pow(2,f.count-(O+1));W?x(K,dc.BLACK):(x(K,dc.BLACK),x(K,dc.RED))}return _}(new $K(n.length));return new fa(r||e,c)};let VN;const tw={};class Fh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,B.hu)(tw&&Sr,"ChildrenNode.ts has not been loaded"),VN=VN||new Fh({".priority":tw},{".priority":Sr}),VN}get(e){const t=(0,B.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fa?t:null}hasIndex(e){return(0,B.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,B.hu)(e!==Dd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(wn.Wrap);let c,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();c=i?iS(r,e.getCompare()):tw;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const _=Object.assign({},this.indexes_);return _[f]=c,new Fh(_,m)}addToIndexes(e,t){const r=(0,B.UI)(this.indexes_,(i,o)=>{const l=(0,B.DV)(this.indexSet_,o);if((0,B.hu)(l,"Missing index implementation for "+o),i===tw){if(l.isDefinedOn(e.node)){const c=[],f=t.getIterator(wn.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&c.push(m),m=f.getNext();return c.push(e),iS(c,l.getCompare())}return tw}{const c=t.get(e.name);let f=i;return c&&(f=f.remove(new wn(e.name,c))),f.insert(e,e.node)}});return new Fh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,B.UI)(this.indexes_,i=>{if(i===tw)return i;{const o=t.get(e.name);return o?i.remove(new wn(e.name,o)):i}});return new Fh(r,this.indexSet_)}}let KE,sn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&AH(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return KE||(KE=new n(new fa(LN),null,Fh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||KE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?KE:r}}getChild(t){const r=gn(t);return null===r?this:this.getImmediateChild(r).getChild(_r(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,B.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new wn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const c=o.isEmpty()?KE:this.priorityNode_;return new n(o,c,l)}}updateChild(t,r){const i=gn(t);if(null===i)return r;{(0,B.hu)(".priority"!==gn(t)||1===Hp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(_r(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(Sr,(c,f)=>{r[c]=f.val(t),i++,l&&n.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):l=!1}),!t&&l&&o<2*i){const c=[];for(const f in r)c[f]=r[f];return c}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+TH(this.getPriority().val())+":"),this.forEachChild(Sr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":HB(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new wn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new wn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new wn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,wn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,wn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===YE?-1:0}withIndex(t){if(t===Dd||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Dd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Sr),o=r.getIterator(Sr);let l=i.getNext(),c=o.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=i.getNext(),c=o.getNext()}return null===l&&null===c}return!1}return!1}}resolveIndex_(t){return t===Dd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const YE=new class GK extends sn{constructor(){super(new fa(LN),sn.EMPTY_NODE,Fh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return sn.EMPTY_NODE}isEmpty(){return!1}};function li(n,e=null){if(null===n)return sn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,B.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ew(n,li(e));if(n instanceof Array){let t=sn.EMPTY_NODE;return Io(n,(r,i)=>{if((0,B.r3)(n,r)&&"."!==r.substring(0,1)){const o=li(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(li(e))}{const t=[];let r=!1;if(Io(n,(l,c)=>{if("."!==l.substring(0,1)){const f=li(c);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new wn(l,f)))}}),0===t.length)return sn.EMPTY_NODE;const o=iS(t,LK,l=>l.name,LN);if(r){const l=iS(t,Sr.getCompare());return new sn(o,li(e),new Fh({".priority":l},{".priority":Sr}))}return new sn(o,li(e),Fh.Default)}}Object.defineProperties(wn,{MIN:{value:new wn(Oh,sn.EMPTY_NODE)},MAX:{value:new wn(Id,YE)}}),DH.__EMPTY_NODE=sn.EMPTY_NODE,ew.__childrenNodeConstructor=sn,function UK(n){UN=n}(YE),function BK(n){RH=n}(YE),function VK(n){xH=n}(li);class BN extends tS{constructor(e){super(),this.indexPath_=e,(0,B.hu)(!mn(e)&&".priority"!==gn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Gm(e.name,t.name):o}makePost(e,t){const r=li(e),i=sn.EMPTY_NODE.updateChild(this.indexPath_,r);return new wn(t,i)}maxPost(){const e=sn.EMPTY_NODE.updateChild(this.indexPath_,YE);return new wn(Id,e)}toString(){return qE(this.indexPath_,0).join("/")}}const HN=new class WK extends tS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Gm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return wn.MIN}maxPost(){return wn.MAX}makePost(e,t){const r=li(e);return new wn(t,r)}toString(){return".value"}},nw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qK=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=nw.charAt(t%64),t=Math.floor(t/64);(0,B.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=nw.charAt(e[i]);return(0,B.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),PH=function(n){if(n===""+TN)return"-";const e=QA(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Id;const o=nw.charAt(nw.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},NH=function(n){if(n===""+WB)return Oh;const e=QA(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+TN:(delete t[t.length-1],t.join("")):(t[t.length-1]=nw.charAt(nw.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function OH(n){return{type:"value",snapshotNode:n}}function rw(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function QE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function JE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class $N{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,B.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(t);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(QE(t,c)):(0,B.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(rw(t,r)):l.trackChildChange(JE(t,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Sr,(i,o)=>{t.hasChild(i)||r.trackChildChange(QE(i,o))}),t.isLeafNode()||t.forEachChild(Sr,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(JE(i,o,l))}else r.trackChildChange(rw(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?sn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class XE{constructor(e){this.indexedFilter_=new $N(e.getIndex()),this.index_=e.getIndex(),this.startPost_=XE.getStartPost_(e),this.endPost_=XE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,l){return this.matches(new wn(t,r))||(r=sn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=sn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(sn.EMPTY_NODE);const o=this;return t.forEachChild(Sr,(l,c)=>{o.matches(new wn(l,c))||(i=i.updateImmediateChild(l,sn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class KK{constructor(e){this.rangedFilter_=new XE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new wn(t,r))||(r=sn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=sn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=sn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,!f)break;i=i.updateImmediateChild(c.name,c.node),l++}}else{let o,l,c,f;if(i=t.withIndex(this.index_),i=i.updatePriority(sn.EMPTY_NODE),this.reverse_){f=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const C=this.index_.getCompare();c=(x,M)=>C(M,x)}else f=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();let m=0,_=!1;for(;f.hasNext();){const C=f.getNext();!_&&c(o,C)<=0&&(_=!0),_&&m<this.limit_&&c(C,l)<=0?m++:i=i.updateImmediateChild(C.name,sn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const C=this.index_.getCompare();l=(x,M)=>C(M,x)}else l=this.index_.getCompare();const c=e;(0,B.hu)(c.numChildren()===this.limit_,"");const f=new wn(t,r),m=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),_=this.rangedFilter_.matches(f);if(c.hasChild(t)){const C=c.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,m,this.reverse_);for(;null!=x&&(x.name===t||c.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const M=null==x?1:l(x,f);if(_&&!r.isEmpty()&&M>=0)return o?.trackChildChange(JE(t,r,C)),c.updateImmediateChild(t,r);{o?.trackChildChange(QE(t,C));const W=c.updateImmediateChild(t,sn.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(o?.trackChildChange(rw(x.name,x.node)),W.updateImmediateChild(x.name,x.node)):W}}return r.isEmpty()?e:_&&l(m,f)>=0?(null!=o&&(o.trackChildChange(QE(m.name,m.node)),o.trackChildChange(rw(t,r))),c.updateImmediateChild(t,r).updateImmediateChild(m.name,sn.EMPTY_NODE)):e}}class oS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Id}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sr}copy(){const e=new oS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function GN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function zN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function sS(n,e){const t=n.copy();return t.index_=e,t}function FH(n){const e={};if(n.isDefault())return e;let t;return n.index_===Sr?t="$priority":n.index_===HN?t="$value":n.index_===Dd?t="$key":((0,B.hu)(n.index_ instanceof BN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,B.Wl)(t),n.startSet_&&(e.startAt=(0,B.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,B.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,B.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,B.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function LH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Sr&&(e.i=n.index_.toString()),e}class aS extends vH{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$E("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,B.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=aS.getListenId_(e,r),c={};this.listens_[l]=c;const f=FH(e._queryParams);this.restRequest_(o+".json",f,(m,_)=>{let C=_;if(404===m&&(C=null,m=null),null===m&&this.onDataUpdate_(o,C,!1,r),(0,B.DV)(this.listens_,l)===c){let x;x=m?401===m?"permission_denied":"rest_error:"+m:"ok",i(x,null)}})}unlisten(e,t){const r=aS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=FH(e._queryParams),r=e._path.toString(),i=new B.BH;return this.restRequest_(r+".json",t,(o,l)=>{let c=l;404===o&&(c=null,o=null),null===o?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,B.xO)(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&4===c.readyState){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let f=null;if(c.status>=200&&c.status<300){try{f=(0,B.cI)(c.responseText)}catch{us("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,f)}else 401!==c.status&&404!==c.status&&us("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}class tY{constructor(){this.rootNode_=sn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lS(){return{value:null,children:new Map}}function iw(n,e,t){if(mn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=gn(e);n.children.has(r)||n.children.set(r,lS()),iw(n.children.get(r),e=_r(e),t)}}function WN(n,e){if(mn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Sr,(r,i)=>{iw(n,new er(r),i)}),WN(n,e)}}if(n.children.size>0){const t=gn(e);return e=_r(e),n.children.has(t)&&WN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function qN(n,e,t){null!==n.value?t(e,n.value):function nY(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{qN(i,new er(e.toString()+"/"+r),t)})}class rY{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Io(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class sY{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new rY(e);const r=1e4+2e4*Math.random();zE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Io(e,(i,o)=>{o>0&&(0,B.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),zE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var eu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(eu||(eu={})),eu))();function YN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class uS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=eu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mn(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new er(e));return new uS(Bn(),t,this.revert)}}return(0,B.hu)(gn(this.path)===e,"operationForChild called for unrelated child."),new uS(_r(this.path),this.affectedTree,this.revert)}}class eC{constructor(e,t){this.source=e,this.path=t,this.type=eu.LISTEN_COMPLETE}operationForChild(e){return mn(this.path)?new eC(this.source,Bn()):new eC(this.source,_r(this.path))}}class qm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=eu.OVERWRITE}operationForChild(e){return mn(this.path)?new qm(this.source,Bn(),this.snap.getImmediateChild(e)):new qm(this.source,_r(this.path),this.snap)}}class ow{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=eu.MERGE}operationForChild(e){if(mn(this.path)){const t=this.children.subtree(new er(e));return t.isEmpty()?null:t.value?new qm(this.source,Bn(),t.value):new ow(this.source,Bn(),t)}return(0,B.hu)(gn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ow(this.source,_r(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mn(e))return this.isFullyInitialized()&&!this.filtered_;const t=gn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class aY{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tC(n,e,t,r,i,o){const l=r.filter(c=>c.type===t);l.sort((c,f)=>function cY(n,e,t){if(null==e.childName||null==t.childName)throw(0,B.g5)("Should only compare child_ events.");const r=new wn(e.childName,e.snapshotNode),i=new wn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,c,f)),l.forEach(c=>{const f=function uY(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,c,o);i.forEach(m=>{m.respondsTo(c.type)&&e.push(m.createEvent(f,n.query_))})})}function cS(n,e){return{eventCache:n,serverCache:e}}function nC(n,e,t,r){return cS(new jp(e,t,r),n.serverCache)}function VH(n,e,t,r){return cS(n.eventCache,new jp(e,t,r))}function dS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let QN;class xr{constructor(e,t=(()=>(QN||(QN=new fa(K7)),QN))()){this.value=e,this.children=t}static fromObject(e){let t=new xr(null);return Io(e,(r,i)=>{t=t.set(new er(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bn(),value:this.value};if(mn(e))return null;{const r=gn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(_r(e),t);return null!=o?{path:Zr(new er(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(mn(e))return this;{const t=gn(e),r=this.children.get(t);return null!==r?r.subtree(_r(e)):new xr(null)}}set(e,t){if(mn(e))return new xr(t,this.children);{const r=gn(e),o=(this.children.get(r)||new xr(null)).set(_r(e),t),l=this.children.insert(r,o);return new xr(this.value,l)}}remove(e){if(mn(e))return this.children.isEmpty()?new xr(null):new xr(null,this.children);{const t=gn(e),r=this.children.get(t);if(r){const i=r.remove(_r(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new xr(null):new xr(this.value,o)}return this}}get(e){if(mn(e))return this.value;{const t=gn(e),r=this.children.get(t);return r?r.get(_r(e)):null}}setTree(e,t){if(mn(e))return t;{const r=gn(e),o=(this.children.get(r)||new xr(null)).setTree(_r(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new xr(this.value,l)}}fold(e){return this.fold_(Bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Zr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(mn(e))return null;{const o=gn(e),l=this.children.get(o);return l?l.findOnPath_(_r(e),Zr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bn(),t)}foreachOnPath_(e,t,r){if(mn(e))return this;{this.value&&r(t,this.value);const i=gn(e),o=this.children.get(i);return o?o.foreachOnPath_(_r(e),Zr(t,i),r):new xr(null)}}foreach(e){this.foreach_(Bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Zr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class hc{constructor(e){this.writeTree_=e}static empty(){return new hc(new xr(null))}}function rC(n,e,t){if(mn(e))return new hc(new xr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=js(i,e);return o=o.updateChild(l,t),new hc(n.writeTree_.set(i,o))}{const i=new xr(t),o=n.writeTree_.setTree(e,i);return new hc(o)}}}function JN(n,e,t){let r=n;return Io(t,(i,o)=>{r=rC(r,Zr(e,i),o)}),r}function BH(n,e){if(mn(e))return hc.empty();{const t=n.writeTree_.setTree(e,new xr(null));return new hc(t)}}function XN(n,e){return null!=Km(n,e)}function Km(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(js(t.path,e)):null}function HH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Sr,(r,i)=>{e.push(new wn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new wn(r,i.value))}),e}function $p(n,e){if(mn(e))return n;{const t=Km(n,e);return new hc(null!=t?new xr(t):n.writeTree_.subtree(e))}}function e1(n){return n.writeTree_.isEmpty()}function sw(n,e){return jH(Bn(),n.writeTree_,e)}function jH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,B.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=jH(Zr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Zr(n,".priority"),r)),t}}function hS(n,e){return qH(e,n)}function mY(n,e){if(n.snap)return Xl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Xl(Zr(n.path,t),e))return!0;return!1}function yY(n){return n.visible}function $H(n,e,t){let r=hc.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let c;if(o.snap)Xl(t,l)?(c=js(t,l),r=rC(r,c,o.snap)):Xl(l,t)&&(c=js(l,t),r=rC(r,Bn(),o.snap.getChild(c)));else{if(!o.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(Xl(t,l))c=js(t,l),r=JN(r,c,o.children);else if(Xl(l,t))if(c=js(l,t),mn(c))r=JN(r,Bn(),o.children);else{const f=(0,B.DV)(o.children,gn(c));if(f){const m=f.getChild(_r(c));r=rC(r,Bn(),m)}}}}}return r}function GH(n,e,t,r,i){if(r||i){const o=$p(n.visibleWrites,e);return!i&&e1(o)?t:i||null!=t||XN(o,Bn())?sw($H(n.allWrites,function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(Xl(m.path,e)||Xl(e,m.path))},e),t||sn.EMPTY_NODE):null}{const o=Km(n.visibleWrites,e);if(null!=o)return o;{const l=$p(n.visibleWrites,e);return e1(l)?t:null!=t||XN(l,Bn())?sw(l,t||sn.EMPTY_NODE):null}}}function fS(n,e,t,r){return GH(n.writeTree,n.treePath,e,t,r)}function t1(n,e){return function _Y(n,e,t){let r=sn.EMPTY_NODE;const i=Km(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Sr,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=$p(n.visibleWrites,e);return t.forEachChild(Sr,(l,c)=>{const f=sw($p(o,new er(l)),c);r=r.updateImmediateChild(l,f)}),HH(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return HH($p(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function zH(n,e,t,r){return function wY(n,e,t,r,i){(0,B.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Zr(e,t);if(XN(n.visibleWrites,o))return null;{const l=$p(n.visibleWrites,o);return e1(l)?i.getChild(t):sw(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function pS(n,e){return function EY(n,e){return Km(n.visibleWrites,e)}(n.writeTree,Zr(n.treePath,e))}function n1(n,e,t){return function bY(n,e,t,r){const i=Zr(e,t),o=Km(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?sw($p(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WH(n,e){return qH(Zr(n.treePath,e),n.writeTree)}function qH(n,e){return{treePath:n,writeTree:e}}class TY{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,B.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,JE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,QE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,rw(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,B.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,JE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ZH=new class AY{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class r1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new jp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return n1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zm(this.viewCache_),o=function DY(n,e,t,r,i,o){return function CY(n,e,t,r,i,o,l){let c;const f=$p(n.visibleWrites,e),m=Km(f,Bn());if(null!=m)c=m;else{if(null==t)return[];c=sw(f,t)}if(c=c.withIndex(l),c.isEmpty()||c.isLeafNode())return[];{const _=[],C=l.getCompare(),x=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let M=x.getNext();for(;M&&_.length<i;)0!==C(M,r)&&_.push(M),M=x.getNext();return _}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function KH(n,e,t,r,i,o){const l=e.eventCache;if(null!=pS(r,t))return e;{let c,f;if(mn(t))if((0,B.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Zm(e),C=t1(r,m instanceof sn?m:sn.EMPTY_NODE);c=n.filter.updateFullNode(e.eventCache.getNode(),C,o)}else{const m=fS(r,Zm(e));c=n.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{const m=gn(t);if(".priority"===m){(0,B.hu)(1===Hp(t),"Can't have a priority with additional path components");const _=l.getNode();f=e.serverCache.getNode();const C=zH(r,t,_,f);c=null!=C?n.filter.updatePriority(_,C):l.getNode()}else{const _=_r(t);let C;if(l.isCompleteForChild(m)){f=e.serverCache.getNode();const x=zH(r,t,l.getNode(),f);C=null!=x?l.getNode().getImmediateChild(m).updateChild(_,x):l.getNode().getImmediateChild(m)}else C=n1(r,m,e.serverCache);c=null!=C?n.filter.updateChild(l.getNode(),m,C,_,i,o):l.getNode()}}return nC(e,c,l.isFullyInitialized()||mn(t),n.filter.filtersNodes())}}function gS(n,e,t,r,i,o,l,c){const f=e.serverCache;let m;const _=l?n.filter:n.filter.getIndexedFilter();if(mn(t))m=_.updateFullNode(f.getNode(),r,null);else if(_.filtersNodes()&&!f.isFiltered()){const M=f.getNode().updateChild(t,r);m=_.updateFullNode(f.getNode(),M,null)}else{const M=gn(t);if(!f.isCompleteForPath(t)&&Hp(t)>1)return e;const O=_r(t),K=f.getNode().getImmediateChild(M).updateChild(O,r);m=".priority"===M?_.updatePriority(f.getNode(),K):_.updateChild(f.getNode(),M,K,O,ZH,null)}const C=VH(e,m,f.isFullyInitialized()||mn(t),_.filtersNodes());return KH(n,C,t,i,new r1(i,C,o),c)}function i1(n,e,t,r,i,o,l){const c=e.eventCache;let f,m;const _=new r1(i,e,o);if(mn(t))m=n.filter.updateFullNode(e.eventCache.getNode(),r,l),f=nC(e,m,!0,n.filter.filtersNodes());else{const C=gn(t);if(".priority"===C)m=n.filter.updatePriority(e.eventCache.getNode(),r),f=nC(e,m,c.isFullyInitialized(),c.isFiltered());else{const x=_r(t),M=c.getNode().getImmediateChild(C);let O;if(mn(x))O=r;else{const W=_.getCompleteChild(C);O=null!=W?".priority"===NN(x)&&W.getChild(bH(x)).isEmpty()?W:W.updateChild(x,r):sn.EMPTY_NODE}f=M.equals(O)?e:nC(e,n.filter.updateChild(c.getNode(),C,O,x,_,l),c.isFullyInitialized(),n.filter.filtersNodes())}}return f}function YH(n,e){return n.eventCache.isCompleteForChild(e)}function QH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function o1(n,e,t,r,i,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m,f=e;m=mn(t)?r:new xr(null).setTree(t,r);const _=e.serverCache.getNode();return m.children.inorderTraversal((C,x)=>{if(_.hasChild(C)){const O=QH(0,e.serverCache.getNode().getImmediateChild(C),x);f=gS(n,f,new er(C),O,i,o,l,c)}}),m.children.inorderTraversal((C,x)=>{const M=!e.serverCache.isCompleteForChild(C)&&null===x.value;if(!_.hasChild(C)&&!M){const W=QH(0,e.serverCache.getNode().getImmediateChild(C),x);f=gS(n,f,new er(C),W,i,o,l,c)}}),f}class FY{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $N(r.getIndex()),o=function YK(n){return n.loadsAllData()?new $N(n.getIndex()):n.hasLimit()?new KK(n):new XE(n)}(r);this.processor_=function SY(n){return{filter:n}}(o);const l=t.serverCache,c=t.eventCache,f=i.updateFullNode(sn.EMPTY_NODE,l.getNode(),null),m=o.updateFullNode(sn.EMPTY_NODE,c.getNode(),null),_=new jp(f,l.isFullyInitialized(),i.filtersNodes()),C=new jp(m,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=cS(C,_),this.eventGenerator_=new aY(this.query_)}get query(){return this.query_}}function VY(n,e){const t=Zm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!mn(e)&&!t.getImmediateChild(gn(e)).isEmpty())?t.getChild(e):null}function JH(n){return 0===n.eventRegistrations_.length}function XH(n,e,t){const r=[];if(t){(0,B.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ej(n,e,t,r){e.type===eu.MERGE&&null!==e.source.queryId&&((0,B.hu)(Zm(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(dS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function RY(n,e,t,r,i){const o=new TY;let l,c;if(t.type===eu.OVERWRITE){const m=t;m.source.fromUser?l=i1(n,e,m.path,m.snap,r,i,o):((0,B.hu)(m.source.fromServer,"Unknown source."),c=m.source.tagged||e.serverCache.isFiltered()&&!mn(m.path),l=gS(n,e,m.path,m.snap,r,i,c,o))}else if(t.type===eu.MERGE){const m=t;m.source.fromUser?l=function kY(n,e,t,r,i,o,l){let c=e;return r.foreach((f,m)=>{const _=Zr(t,f);YH(e,gn(_))&&(c=i1(n,c,_,m,i,o,l))}),r.foreach((f,m)=>{const _=Zr(t,f);YH(e,gn(_))||(c=i1(n,c,_,m,i,o,l))}),c}(n,e,m.path,m.children,r,i,o):((0,B.hu)(m.source.fromServer,"Unknown source."),c=m.source.tagged||e.serverCache.isFiltered(),l=o1(n,e,m.path,m.children,r,i,c,o))}else if(t.type===eu.ACK_USER_WRITE){const m=t;l=m.revert?function OY(n,e,t,r,i,o){let l;if(null!=pS(r,t))return e;{const c=new r1(r,e,i),f=e.eventCache.getNode();let m;if(mn(t)||".priority"===gn(t)){let _;if(e.serverCache.isFullyInitialized())_=fS(r,Zm(e));else{const C=e.serverCache.getNode();(0,B.hu)(C instanceof sn,"serverChildren would be complete if leaf node"),_=t1(r,C)}m=n.filter.updateFullNode(f,_,o)}else{const _=gn(t);let C=n1(r,_,e.serverCache);null==C&&e.serverCache.isCompleteForChild(_)&&(C=f.getImmediateChild(_)),m=null!=C?n.filter.updateChild(f,_,C,_r(t),c,o):e.eventCache.getNode().hasChild(_)?n.filter.updateChild(f,_,sn.EMPTY_NODE,_r(t),c,o):f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=fS(r,Zm(e)),l.isLeafNode()&&(m=n.filter.updateFullNode(m,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=pS(r,Bn()),nC(e,m,l,n.filter.filtersNodes())}}(n,e,m.path,r,i,o):function PY(n,e,t,r,i,o,l){if(null!=pS(i,t))return e;const c=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(mn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return gS(n,e,t,f.getNode().getChild(t),i,o,c,l);if(mn(t)){let m=new xr(null);return f.getNode().forEachChild(Dd,(_,C)=>{m=m.set(new er(_),C)}),o1(n,e,t,m,i,o,c,l)}return e}{let m=new xr(null);return r.foreach((_,C)=>{const x=Zr(t,_);f.isCompleteForPath(x)&&(m=m.set(_,f.getNode().getChild(x)))}),o1(n,e,t,m,i,o,c,l)}}(n,e,m.path,m.affectedTree,r,i,o)}else{if(t.type!==eu.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+t.type);l=function NY(n,e,t,r,i){const o=e.serverCache;return KH(n,VH(e,o.getNode(),o.isFullyInitialized()||mn(t),o.isFiltered()),t,r,ZH,i)}(n,e,t.path,r,o)}const f=o.getChanges();return function MY(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=dS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(OH(dS(e)))}}(e,l,f),{viewCache:l,changes:f}}(n.processor_,i,e,t,r);return function xY(n,e){(0,B.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,B.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,tj(n,o.changes,o.viewCache.eventCache.getNode(),null)}function tj(n,e,t,r){return function lY(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function ZK(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),tC(n,i,"child_removed",e,r,t),tC(n,i,"child_added",e,r,t),tC(n,i,"child_moved",o,r,t),tC(n,i,"child_changed",e,r,t),tC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let mS,yS;class nj{constructor(){this.views=new Map}}function s1(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,B.hu)(null!=o,"SyncTree gave us an op for an invalid query."),ej(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(ej(l,e,t,r));return o}}function rj(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let c=fS(t,i?r:null),f=!1;c?f=!0:r instanceof sn?(c=t1(t,r),f=!1):(c=sn.EMPTY_NODE,f=!1);const m=cS(new jp(c,f,!1),new jp(r,i,!1));return new FY(e,m)}return l}function ij(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gp(n,e){let t=null;for(const r of n.views.values())t=t||VY(r,e);return t}function oj(n,e){return e._queryParams.loadsAllData()?vS(n):n.views.get(e._queryIdentifier)}function sj(n,e){return null!=oj(n,e)}function zp(n){return null!=vS(n)}function vS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let KY=1;class aj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xr(null),this.pendingWriteTree_=function IY(){return{visibleWrites:hc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function a1(n,e,t,r,i){return function hY(n,e,t,r,i){(0,B.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=rC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?aw(n,new qm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wp(n,e,t=!1){const r=function pY(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function gY(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);(0,B.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&mY(c,r.path)?i=!1:Xl(r.path,c.path)&&(o=!0)),l--}return!!i&&(o?(function vY(n){n.visibleWrites=$H(n.allWrites,yY,Bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=BH(n.visibleWrites,r.path):Io(r.children,f=>{n.visibleWrites=BH(n.visibleWrites,Zr(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let o=new xr(null);return null!=r.snap?o=o.set(Bn(),!0):Io(r.children,l=>{o=o.set(new er(l),!0)}),aw(n,new uS(r.path,o,t))}return[]}function iC(n,e,t){return aw(n,new qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function _S(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let c=[];if(l&&("default"===e._queryIdentifier||sj(l,e))){const f=function WY(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const c=zp(n);if("default"===i)for(const[f,m]of n.views.entries())l=l.concat(XH(m,t,r)),JH(m)&&(n.views.delete(f),m.query._queryParams.loadsAllData()||o.push(m.query));else{const f=n.views.get(i);f&&(l=l.concat(XH(f,t,r)),JH(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||o.push(f.query)))}return c&&!zp(n)&&o.push(new(function $Y(){return(0,B.hu)(mS,"Reference.ts has not been loaded"),mS}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,r);(function GY(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const m=f.removed;if(c=f.events,!i){const _=-1!==m.findIndex(x=>x._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(o,(x,M)=>zp(M));if(_&&!C){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const M=function nQ(n){return n.fold((e,t,r)=>{if(t&&zp(t))return[vS(t)];{let i=[];return t&&(i=ij(t)),Io(r,(o,l)=>{i=i.concat(l)}),i}})}(x);for(let O=0;O<M.length;++O){const W=M[O],K=W.query,te=dj(n,W);n.listenProvider_.startListening(sC(K),oC(n,K),te.hashFn,te.onComplete)}}}!C&&m.length>0&&!r&&(_?n.listenProvider_.stopListening(sC(e),null):m.forEach(x=>{const M=n.queryToTagMap.get(bS(x));n.listenProvider_.stopListening(sC(x),M)}))}!function rQ(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bS(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,m)}return c}function lj(n,e,t,r){const i=u1(n,r);if(null!=i){const o=c1(i),l=o.path,c=o.queryId,f=js(l,e);return d1(n,l,new qm(YN(c),f,t))}return[]}function l1(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(x,M)=>{const O=js(x,i);o=o||Gp(M,O),l=l||zp(M)});let f,c=n.syncPointTree_.get(i);c?(l=l||zp(c),o=o||Gp(c,Bn())):(c=new nj,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=o?f=!0:(f=!1,o=sn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((M,O)=>{const W=Gp(O,Bn());W&&(o=o.updateImmediateChild(M,W))}));const m=sj(c,e);if(!m&&!e._queryParams.loadsAllData()){const x=bS(e);(0,B.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const M=function iQ(){return KY++}();n.queryToTagMap.set(x,M),n.tagToQueryMap.set(M,x)}let C=function zY(n,e,t,r,i,o){const l=rj(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function BY(n,e){n.eventRegistrations_.push(e)}(l,t),function HY(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Sr,(o,l)=>{r.push(rw(o,l))}),t.isFullyInitialized()&&r.push(OH(t.getNode())),tj(n,r,t.getNode(),e)}(l,t)}(c,e,t,hS(n.pendingWriteTree_,i),o,f);if(!m&&!l&&!r){const x=oj(c,e);C=C.concat(function oQ(n,e,t){const r=e._path,i=oC(n,e),o=dj(n,t),l=n.listenProvider_.startListening(sC(e),i,o.hashFn,o.onComplete),c=n.syncPointTree_.subtree(r);if(i)(0,B.hu)(!zp(c.value),"If we're adding a query, it shouldn't be shadowed");else{const f=c.fold((m,_,C)=>{if(!mn(m)&&_&&zp(_))return[vS(_).query];{let x=[];return _&&(x=x.concat(ij(_).map(M=>M.query))),Io(C,(M,O)=>{x=x.concat(O)}),x}});for(let m=0;m<f.length;++m){const _=f[m];n.listenProvider_.stopListening(sC(_),oC(n,_))}}return l}(n,e,x))}return C}function wS(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const m=Gp(c,js(l,e));if(m)return m});return GH(i,e,o,t,!0)}function aw(n,e){return uj(e,n.syncPointTree_,null,hS(n.pendingWriteTree_,Bn()))}function uj(n,e,t,r){if(mn(n.path))return cj(n,e,t,r);{const i=e.get(Bn());null==t&&null!=i&&(t=Gp(i,Bn()));let o=[];const l=gn(n.path),c=n.operationForChild(l),f=e.children.get(l);if(f&&c){const m=t?t.getImmediateChild(l):null,_=WH(r,l);o=o.concat(uj(c,f,m,_))}return i&&(o=o.concat(s1(i,n,r,t))),o}}function cj(n,e,t,r){const i=e.get(Bn());null==t&&null!=i&&(t=Gp(i,Bn()));let o=[];return e.children.inorderTraversal((l,c)=>{const f=t?t.getImmediateChild(l):null,m=WH(r,l),_=n.operationForChild(l);_&&(o=o.concat(cj(_,c,f,m)))}),i&&(o=o.concat(s1(i,n,r,t))),o}function dj(n,e){const t=e.query,r=oC(n,t);return{hashFn:()=>(function LY(n){return n.viewCache_.serverCache.getNode()}(e)||sn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function XY(n,e,t){const r=u1(n,t);if(r){const i=c1(r),o=i.path,l=i.queryId,c=js(o,e);return d1(n,o,new eC(YN(l),c))}return[]}(n,t._path,r):function JY(n,e){return aw(n,new eC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function J7(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return _S(n,t,null,o)}}}}function oC(n,e){const t=bS(e);return n.queryToTagMap.get(t)}function bS(n){return n._path.toString()+"$"+n._queryIdentifier}function u1(n,e){return n.tagToQueryMap.get(e)}function c1(n){const e=n.indexOf("$");return(0,B.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new er(n.substr(0,e))}}function d1(n,e,t){const r=n.syncPointTree_.get(e);return(0,B.hu)(r,"Missing sync point for query tag that we're tracking"),s1(r,t,hS(n.pendingWriteTree_,e),null)}function sC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function ZY(){return(0,B.hu)(yS,"Reference.ts has not been loaded"),yS}())(n._repo,n._path):n}class h1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new h1(t)}node(){return this.node_}}class f1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zr(this.path_,e);return new f1(this.syncTree_,t)}node(){return wS(this.syncTree_,this.path_)}}const hj=function(n,e,t){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?aQ(n[".sv"],e,t):"object"==typeof n[".sv"]?lQ(n[".sv"],e):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},aQ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},lQ=function(n,e,t){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,B.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,B.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},fj=function(n,e,t,r){return g1(e,new f1(t,n),r)},p1=function(n,e,t){return g1(n,new h1(e),t)};function g1(n,e,t){const r=n.getPriority().val(),i=hj(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=hj(l.getValue(),e,t);return c!==l.getValue()||i!==l.getPriority().val()?new ew(c,li(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new ew(i))),l.forEachChild(Sr,(c,f)=>{const m=g1(f,e.getImmediateChild(c),t);m!==f&&(o=o.updateImmediateChild(c,m))}),o}}class m1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ES(n,e){let t=e instanceof er?e:new er(e),r=n,i=gn(t);for(;null!==i;){const o=(0,B.DV)(r.node.children,i)||{children:{},childCount:0};r=new m1(i,r,o),t=_r(t),i=gn(t)}return r}function Ym(n){return n.node.value}function v1(n,e){n.node.value=e,y1(n)}function pj(n){return n.node.childCount>0}function CS(n,e){Io(n.node.children,(t,r)=>{e(new m1(t,n,r))})}function gj(n,e,t,r){t&&!r&&e(n),CS(n,i=>{gj(i,e,!0,r)}),t&&r&&e(n)}function aC(n){return new er(null===n.parent?n.name:aC(n.parent)+"/"+n.name)}function y1(n){null!==n.parent&&function dQ(n,e,t){const r=function uQ(n){return void 0===Ym(n)&&!pj(n)}(t),i=(0,B.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,y1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,y1(n))}(n.parent,n.name,n)}const hQ=/[\[\].#$\/\u0000-\u001F\u007F]/,fQ=/[\[\].#$\u0000-\u001F\u007F]/,_1=10485760,IS=function(n){return"string"==typeof n&&0!==n.length&&!hQ.test(n)},mj=function(n){return"string"==typeof n&&0!==n.length&&!fQ.test(n)},lC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!YA(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},Td=function(n,e,t,r){r&&void 0===e||uC((0,B.gK)(n,"value"),e,t)},uC=function(n,e,t){const r=t instanceof er?new xK(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zm(r));if("function"==typeof e)throw new Error(n+"contains a function "+zm(r)+" with contents = "+e.toString());if(YA(e))throw new Error(n+"contains "+e.toString()+" "+zm(r));if("string"==typeof e&&e.length>_1/3&&(0,B.ug)(e)>_1)throw new Error(n+"contains a string greater than "+_1+" utf8 bytes "+zm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Io(e,(l,c)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!IS(l)))throw new Error(n+" contains an invalid key ("+l+") "+zm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function RK(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,B.ug)(e),EH(n)})(r,l),uC(n,c,r),function MK(n){const e=n.parts_.pop();n.byteLength_-=(0,B.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+zm(r)+" in addition to actual children.")}},vj=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,B.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Io(e,(l,c)=>{const f=new er(l);if(uC(i,c,Zr(t,f)),".priority"===NN(f)&&!lC(c))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=qE(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!IS(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(SK);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Xl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},w1=function(n,e,t){if(!t||void 0!==e){if(YA(e))throw new Error((0,B.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lC(e))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cC=function(n,e,t,r){if(!(r&&void 0===t||IS(t)))throw new Error((0,B.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dC=function(n,e,t,r){if(!(r&&void 0===t||mj(t)))throw new Error((0,B.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tu=function(n,e){if(".info"===gn(e))throw new Error(n+" failed = Can't modify data under /.info/")},yj=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!IS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mj(n)}(t))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function DS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!ON(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function _j(n,e,t){DS(n,t),wj(n,r=>ON(r,e))}function Ya(n,e,t){DS(n,t),wj(n,r=>Xl(r,e)||Xl(e,r))}function wj(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(yQ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function yQ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$m&&Co("event: "+t.toString()),J_(r)}}}const bj="repo_interrupt";class wQ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lS(),this.transactionQueueTree_=new m1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ej(n){const t=n.infoData_.getNode(new er(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Ej(n)})}function Cj(n,e,t,r,i){n.dataUpdateCount++;const o=new er(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const f=(0,B.UI)(t,m=>li(m));l=function eQ(n,e,t,r){const i=u1(n,r);if(i){const o=c1(i),l=o.path,c=o.queryId,f=js(l,e),m=xr.fromObject(t);return d1(n,l,new ow(YN(c),f,m))}return[]}(n.serverSyncTree_,o,f,i)}else{const f=li(t);l=lj(n.serverSyncTree_,o,f,i)}else if(r){const f=(0,B.UI)(t,m=>li(m));l=function QY(n,e,t){const r=xr.fromObject(t);return aw(n,new ow({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,f)}else{const f=li(t);l=iC(n.serverSyncTree_,o,f)}let c=o;l.length>0&&(c=uw(n,o)),Ya(n.eventQueue_,c,l)}function Ij(n,e){b1(n,"connected",e),!1===e&&function DQ(n){lw(n,"onDisconnectEvents");const e=hC(n),t=lS();qN(n.onDisconnect_,Bn(),(i,o)=>{const l=fj(i,o,n.serverSyncTree_,e);iw(t,i,l)});let r=[];qN(t,Bn(),(i,o)=>{r=r.concat(iC(n.serverSyncTree_,i,o));const l=D1(n,i);uw(n,l)}),n.onDisconnect_=lS(),Ya(n.eventQueue_,Bn(),r)}(n)}function b1(n,e,t){const r=new er("/.info/"+e),i=li(t);n.infoData_.updateSnapshot(r,i);const o=iC(n.infoSyncTree_,r,i);Ya(n.eventQueue_,r,o)}function TS(n){return n.nextWriteId_++}function E1(n,e,t,r,i){lw(n,"set",{path:e.toString(),value:t,priority:r});const o=hC(n),l=li(t,r),c=wS(n.serverSyncTree_,e),f=p1(l,c,o),m=TS(n),_=a1(n.serverSyncTree_,e,f,m,!0);DS(n.eventQueue_,_),n.server_.put(e.toString(),l.val(!0),(x,M)=>{const O="ok"===x;O||us("set at "+e+" failed: "+x);const W=Wp(n.serverSyncTree_,m,!O);Ya(n.eventQueue_,e,W),qp(0,i,x,M)});const C=D1(n,e);uw(n,C),Ya(n.eventQueue_,C,[])}function TQ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&WN(n.onDisconnect_,e),qp(0,t,r,i)})}function Dj(n,e,t,r){const i=li(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&iw(n.onDisconnect_,e,i),qp(0,r,o,l)})}function C1(n,e,t){let r;r=".info"===gn(e._path)?_S(n.infoSyncTree_,e,t):_S(n.serverSyncTree_,e,t),_j(n.eventQueue_,e._path,r)}function Tj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(bj)}function lw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Co(t,...e)}function qp(n,e,t,r){e&&J_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function I1(n,e,t){return wS(n.serverSyncTree_,e,t)||sn.EMPTY_NODE}function AS(n,e=n.transactionQueueTree_){if(e||SS(n,e),Ym(e)){const t=Sj(n,e);(0,B.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function kQ(n,e,t){const r=t.map(m=>m.currentWriteId),i=I1(n,e,r);let o=i;const l=i.hash();for(let m=0;m<t.length;m++){const _=t[m];(0,B.hu)(0===_.status,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const C=js(e,_.path);o=o.updateChild(C,_.currentOutputSnapshotRaw)}const c=o.val(!0),f=e;n.server_.put(f.toString(),c,m=>{lw(n,"transaction put response",{path:f.toString(),status:m});let _=[];if("ok"===m){const C=[];for(let x=0;x<t.length;x++)t[x].status=2,_=_.concat(Wp(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&C.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();SS(n,ES(n.transactionQueueTree_,e)),AS(n,n.transactionQueueTree_),Ya(n.eventQueue_,e,_);for(let x=0;x<C.length;x++)J_(C[x])}else{if("datastale"===m)for(let C=0;C<t.length;C++)t[C].status=3===t[C].status?4:0;else{us("transaction at "+f.toString()+" failed: "+m);for(let C=0;C<t.length;C++)t[C].status=4,t[C].abortReason=m}uw(n,e)}},l)}(n,aC(e),t)}else pj(e)&&CS(e,t=>{AS(n,t)})}function uw(n,e){const t=Aj(n,e),r=aC(t);return function PQ(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(c=>0===c.status).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const f=e[c],m=js(t,f.path);let C,_=!1;if((0,B.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)_=!0,C=f.abortReason,i=i.concat(Wp(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)_=!0,C="maxretry",i=i.concat(Wp(n.serverSyncTree_,f.currentWriteId,!0));else{const x=I1(n,f.path,l);f.currentInputSnapshot=x;const M=e[c].update(x.val());if(void 0!==M){uC("transaction failed: Data returned ",M,f.path);let O=li(M);"object"==typeof M&&null!=M&&(0,B.r3)(M,".priority")||(O=O.updatePriority(x.getPriority()));const K=f.currentWriteId,te=hC(n),_e=p1(O,x,te);f.currentOutputSnapshotRaw=O,f.currentOutputSnapshotResolved=_e,f.currentWriteId=TS(n),l.splice(l.indexOf(K),1),i=i.concat(a1(n.serverSyncTree_,f.path,_e,f.currentWriteId,f.applyLocally)),i=i.concat(Wp(n.serverSyncTree_,K,!0))}else _=!0,C="nodata",i=i.concat(Wp(n.serverSyncTree_,f.currentWriteId,!0))}Ya(n.eventQueue_,t,i),i=[],_&&(e[c].status=2,setTimeout(e[c].unwatcher,Math.floor(0)),e[c].onComplete&&r.push("nodata"===C?()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot):()=>e[c].onComplete(new Error(C),!1,null)))}SS(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)J_(r[c]);AS(n,n.transactionQueueTree_)}(n,Sj(n,t),r),r}function Aj(n,e){let t,r=n.transactionQueueTree_;for(t=gn(e);null!==t&&void 0===Ym(r);)r=ES(r,t),t=gn(e=_r(e));return r}function Sj(n,e){const t=[];return xj(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xj(n,e,t){const r=Ym(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);CS(e,i=>{xj(n,i,t)})}function SS(n,e){const t=Ym(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,v1(e,t.length>0?t:void 0)}CS(e,r=>{SS(n,r)})}function D1(n,e){const t=aC(Aj(n,e)),r=ES(n.transactionQueueTree_,e);return function cQ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{T1(n,i)}),T1(n,r),gj(r,i=>{T1(n,i)}),t}function T1(n,e){const t=Ym(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,B.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,B.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Wp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?v1(e,void 0):t.length=o+1,Ya(n.eventQueue_,aC(e),i);for(let l=0;l<r.length;l++)J_(r[l])}}const A1=function(n,e){const t=FQ(n),r=t.namespace;return"firebase.com"===t.domain&&Cd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Cd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new SN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new er(t.pathString)}},FQ=function(n){let e="",t="",r="",i="",o="",l=!0,c="https",f=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(c=n.substring(0,m-1),n=n.substring(m+2));let _=n.indexOf("/");-1===_&&(_=n.length);let C=n.indexOf("?");-1===C&&(C=n.length),e=n.substring(0,Math.min(_,C)),_<C&&(i=function NQ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(_,C)));const x=function OQ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):us(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,C)));m=e.indexOf(":"),m>=0?(l="https"===c||"wss"===c,f=parseInt(e.substring(m+1),10)):m=e.length;const M=e.slice(0,m);if("localhost"===M.toLowerCase())t="localhost";else if(M.split(".").length<=2)t=M;else{const O=e.indexOf(".");r=e.substring(0,O).toLowerCase(),t=e.substring(O+1),o=r}"ns"in x&&(o=x.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:l,scheme:c,pathString:i,namespace:o}};class Rj{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class Mj{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class S1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class kj{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new B.BH;return TQ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){tu("OnDisconnect.remove",this._path);const e=new B.BH;return Dj(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){tu("OnDisconnect.set",this._path),Td("OnDisconnect.set",e,this._path,!1);const t=new B.BH;return Dj(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){tu("OnDisconnect.setWithPriority",this._path),Td("OnDisconnect.setWithPriority",e,this._path,!1),w1("OnDisconnect.setWithPriority",t,!1);const r=new B.BH;return function AQ(n,e,t,r,i){const o=li(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,c)=>{"ok"===l&&iw(n.onDisconnect_,e,o),qp(0,i,l,c)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){tu("OnDisconnect.update",this._path),vj("OnDisconnect.update",e,this._path,!1);const t=new B.BH;return function SQ(n,e,t,r){if((0,B.xb)(t))return Co("onDisconnect().update() called with empty data.  Don't do anything."),void qp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Io(t,(l,c)=>{const f=li(c);iw(n.onDisconnect_,Zr(e,l),f)}),qp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class pa{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return mn(this._path)?null:NN(this._path)}get ref(){return new nu(this._repo,this._path)}get _queryIdentifier(){const e=LH(this._queryParams),t=DN(e);return"{}"===t?"default":t}get _queryObject(){return LH(this._queryParams)}isEqual(e){if(!((e=(0,B.m9)(e))instanceof pa))return!1;const t=this._repo===e._repo,r=ON(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function AK(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function xS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Zp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Dd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Oh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Id)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Sr){if(null!=e&&!lC(e)||null!=t&&!lC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof BN||n.getIndex()===HN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function RS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nu extends pa{constructor(e,t){super(e,t,new oS,!1)}get parent(){const e=bH(this._path);return null===e?null:new nu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Qm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new er(e),r=Jm(this.ref,e);return new Qm(this._node.getChild(t),r,Sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Qm(i,Jm(this.ref,r),Sr)))}hasChild(e){const t=new er(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pj(n,e){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==e?Jm(n._root,e):n._root}function Nj(n,e){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const t=A1(e,n._repo.repoInfo_.nodeAdmin);yj("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Cd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Pj(n,t.path.toString())}function Jm(n,e){return null===gn((n=(0,B.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dC("child","path",t,!1)):dC("child","path",e,!1),new nu(n._repo,Zr(n._path,e));var t}function x1(n,e){n=(0,B.m9)(n),tu("set",n._path),Td("set",e,n._path,!1);const t=new B.BH;return E1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function HQ(n,e){vj("update",e,n._path,!1);const t=new B.BH;return function IQ(n,e,t,r){lw(n,"update",{path:e.toString(),value:t});let i=!0;const o=hC(n),l={};if(Io(t,(c,f)=>{i=!1,l[c]=fj(Zr(e,c),li(f),n.serverSyncTree_,o)}),i)Co("update() called with empty data.  Don't do anything."),qp(0,r,"ok",void 0);else{const c=TS(n),f=function YY(n,e,t,r){!function fY(n,e,t,r){(0,B.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=JN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=xr.fromObject(t);return aw(n,new ow({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,c);DS(n.eventQueue_,f),n.server_.merge(e.toString(),t,(m,_)=>{const C="ok"===m;C||us("update at "+e+" failed: "+m);const x=Wp(n.serverSyncTree_,c,!C),M=x.length>0?uw(n,e):e;Ya(n.eventQueue_,M,x),qp(0,r,m,_)}),Io(t,m=>{const _=D1(n,Zr(e,m));uw(n,_)}),Ya(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function jQ(n){n=(0,B.m9)(n);const e=new S1(()=>{}),t=new fC(e);return function CQ(n,e,t){const r=function tQ(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(m,_)=>{const C=js(m,t);r=r||Gp(_,C)});let i=n.syncPointTree_.get(t);i?r=r||Gp(i,Bn()):(i=new nj,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new jp(r,!0,!1):null;return function UY(n){return dS(n.viewCache_)}(rj(i,e,hS(n.pendingWriteTree_,e._path),o?l.getNode():sn.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=li(i).withIndex(e._queryParams.getIndex());let l;if(l1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=iC(n.serverSyncTree_,e._path,o);else{const c=oC(n.serverSyncTree_,e);l=lj(n.serverSyncTree_,e._path,o,c)}return Ya(n.eventQueue_,e._path,l),_S(n.serverSyncTree_,e,t,null,!0),o},i=>(lw(n,"get for query "+(0,B.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Qm(r,new nu(n._repo,n._path),n._queryParams.getIndex()))}class fC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Rj("value",this,new Qm(e.snapshotNode,new nu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Mj(this,e,t):null}matches(e){return e instanceof fC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class MS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Mj(this,e,t):null}createEvent(e,t){(0,B.hu)(null!=e.childName,"Child events should have a childName.");const r=Jm(new nu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Rj(e.type,this,new Qm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof MS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pC(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const f=t,m=(_,C)=>{C1(n._repo,n,c),f(_,C)};m.userCallback=t.userCallback,m.context=t.context,t=m}const l=new S1(t,o||void 0),c="value"===e?new fC(l):new MS(e,l);return function xQ(n,e,t){let r;r=".info"===gn(e._path)?l1(n.infoSyncTree_,e,t):l1(n.serverSyncTree_,e,t),_j(n.eventQueue_,e._path,r)}(n._repo,n,c),()=>C1(n._repo,n,c)}function R1(n,e,t,r){return pC(n,"value",e,t,r)}function Oj(n,e,t,r){return pC(n,"child_added",e,t,r)}function Fj(n,e,t,r){return pC(n,"child_changed",e,t,r)}function Lj(n,e,t,r){return pC(n,"child_moved",e,t,r)}function Uj(n,e,t,r){return pC(n,"child_removed",e,t,r)}function Vj(n,e,t){let r=null;const i=t?new S1(t):null;"value"===e?r=new fC(i):e&&(r=new MS(e,i)),C1(n._repo,n,r)}class fc{}class Bj extends fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Td("endAt",this._value,e._path,!0);const t=zN(e._queryParams,this._value,this._key);if(RS(t),Zp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pa(e._repo,e._path,t,e._orderByCalled)}}class GQ extends fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Td("endBefore",this._value,e._path,!1);const t=function eY(n,e,t){let r,i;return n.index_===Dd?("string"==typeof e&&(e=NH(e)),i=zN(n,e,t)):(r=null==t?Oh:NH(t),i=zN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(RS(t),Zp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pa(e._repo,e._path,t,e._orderByCalled)}}class Hj extends fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Td("startAt",this._value,e._path,!0);const t=GN(e._queryParams,this._value,this._key);if(RS(t),Zp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pa(e._repo,e._path,t,e._orderByCalled)}}class qQ extends fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Td("startAfter",this._value,e._path,!1);const t=function XK(n,e,t){let r;if(n.index_===Dd)"string"==typeof e&&(e=PH(e)),r=GN(n,e,t);else{let i;i=null==t?Id:PH(t),r=GN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(RS(t),Zp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new pa(e._repo,e._path,t,e._orderByCalled)}}class KQ extends fc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new pa(e._repo,e._path,function QK(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class QQ extends fc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pa(e._repo,e._path,function JK(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class XQ extends fc{constructor(e){super(),this._path=e}_apply(e){xS(e,"orderByChild");const t=new er(this._path);if(mn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new BN(t),i=sS(e._queryParams,r);return Zp(i),new pa(e._repo,e._path,i,!0)}}class t9 extends fc{_apply(e){xS(e,"orderByKey");const t=sS(e._queryParams,Dd);return Zp(t),new pa(e._repo,e._path,t,!0)}}class r9 extends fc{_apply(e){xS(e,"orderByPriority");const t=sS(e._queryParams,Sr);return Zp(t),new pa(e._repo,e._path,t,!0)}}class o9 extends fc{_apply(e){xS(e,"orderByValue");const t=sS(e._queryParams,HN);return Zp(t),new pa(e._repo,e._path,t,!0)}}class a9 extends fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Td("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Bj(this._value,this._key)._apply(new Hj(this._value,this._key)._apply(e))}}function pc(n,...e){let t=(0,B.m9)(n);for(const r of e)t=r._apply(t);return t}(function jY(n){(0,B.hu)(!mS,"__referenceConstructor has already been defined"),mS=n})(nu),function qY(n){(0,B.hu)(!yS,"__referenceConstructor has already been defined"),yS=n}(nu);const M1={};function $j(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Cd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Co("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,m,l=A1(o,i),c=l.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(f=!0,o=`http://${m}?ns=${c.namespace}`,l=A1(o,i),c=l.repoInfo):f=!l.repoInfo.secure;const _=i&&f?new WE(WE.OWNER):new nK(n.name,n.options,e);yj("Invalid Firebase Database URL",l),mn(l.path)||Cd("Database URL must point to the root of a Firebase Database (not including a child path).");const C=function h9(n,e,t,r){let i=M1[e.name];i||(i={},M1[e.name]=i);let o=i[n.toURLString()];return o&&Cd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new wQ(n,false,t,r),i[n.toURLString()]=o,o}(c,n,_,new tK(n.name,t));return new p9(C,n)}class p9{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function bQ(n,e,t){if(n.stats_=MN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new aS(n.repoInfo_,(r,i,o,l)=>{Cj(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ij(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Wm(n.repoInfo_,e,(r,i,o,l)=>{Cj(n,r,i,o,l)},r=>{Ij(n,r)},r=>{!function EQ(n,e){Io(e,(t,r)=>{b1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function oK(n,e){const t=n.toString();return RN[t]||(RN[t]=e()),RN[t]}(n.repoInfo_,()=>new sY(n.stats_,n.server_)),n.infoData_=new tY,n.infoSyncTree_=new aj({startListening:(r,i,o,l)=>{let c=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(c=iC(n.infoSyncTree_,r._path,f),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),b1(n,"connected",!1),n.serverSyncTree_=new aj({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(c,f)=>{const m=l(c,f);Ya(n.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nu(this._repo,Bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function d9(n,e){const t=M1[e];(!t||t[n.key]!==n)&&Cd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Tj(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Cd("Cannot call "+e+" on a deleted database.")}}function Gj(){uH.IS_TRANSPORT_INITIALIZED&&us("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function g9(){Gj(),Bp.forceDisallow()}function m9(){Gj(),X_.forceDisallow(),Bp.forceAllow()}function _9(n,e){$B(n,e)}const b9={".sv":"timestamp"};class I9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Wm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function w9(n){UB(fo.SDK_VERSION),(0,fo._registerComponent)(new Va.wA("database",(e,{instanceIdentifier:t})=>$j(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,fo.registerVersion)(FB,LB,n),(0,fo.registerVersion)(FB,LB,"esm2017")}();const S9=new aa.Yd("@firebase/database-compat"),Wj=function(n){S9.warn("FIREBASE WARNING: "+n)};class M9{constructor(e){this._delegate=e}cancel(e){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,Wj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class k9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Kp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),dC("DataSnapshot.child","path",e,!1),new Kp(this._database,this._delegate.child(e))}hasChild(e){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),dC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Kp(this._database,t)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new Qa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ho{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",t,!1);const l=Ho.getCancelAndContextArgs_("Query.on",r,i),c=(m,_)=>{t.call(l.context,new Kp(this.database,m),_)};c.userCallback=t,c.context=l.context;const f=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return R1(this._delegate,c,f),t;case"child_added":return Oj(this._delegate,c,f),t;case"child_removed":return Uj(this._delegate,c,f),t;case"child_changed":return Fj(this._delegate,c,f),t;case"child_moved":return Lj(this._delegate,c,f),t;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,B.Wj)("Query.off","callback",t,!0),(0,B.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Vj(this._delegate,e,i)}else Vj(this._delegate,e)}get(){return jQ(this._delegate).then(e=>new Kp(this.database,e))}once(e,t,r,i){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",t,!0);const o=Ho.getCancelAndContextArgs_("Query.once",r,i),l=new B.BH,c=(m,_)=>{const C=new Kp(this.database,m);t&&t.call(o.context,C,_),l.resolve(C)};c.userCallback=t,c.context=o.context;const f=m=>{o.cancel&&o.cancel.call(o.context,m),l.reject(m)};switch(e){case"value":R1(this._delegate,c,f,{onlyOnce:!0});break;case"child_added":Oj(this._delegate,c,f,{onlyOnce:!0});break;case"child_removed":Uj(this._delegate,c,f,{onlyOnce:!0});break;case"child_changed":Fj(this._delegate,c,f,{onlyOnce:!0});break;case"child_moved":Lj(this._delegate,c,f,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new Ho(this.database,pc(this._delegate,function YQ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new KQ(n)}(e)))}limitToLast(e){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new Ho(this.database,pc(this._delegate,function JQ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QQ(n)}(e)))}orderByChild(e){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new Ho(this.database,pc(this._delegate,function e9(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return dC("orderByChild","path",n,!1),new XQ(n)}(e)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new Ho(this.database,pc(this._delegate,function n9(){return new t9}()))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new Ho(this.database,pc(this._delegate,function i9(){return new r9}()))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new Ho(this.database,pc(this._delegate,function s9(){return new o9}()))}startAt(e=null,t){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new Ho(this.database,pc(this._delegate,function WQ(n=null,e){return cC("startAt","key",e,!0),new Hj(n,e)}(e,t)))}startAfter(e=null,t){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new Ho(this.database,pc(this._delegate,function ZQ(n,e){return cC("startAfter","key",e,!0),new qQ(n,e)}(e,t)))}endAt(e=null,t){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new Ho(this.database,pc(this._delegate,function $Q(n,e){return cC("endAt","key",e,!0),new Bj(n,e)}(e,t)))}endBefore(e=null,t){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new Ho(this.database,pc(this._delegate,function zQ(n,e){return cC("endBefore","key",e,!0),new GQ(n,e)}(e,t)))}equalTo(e,t){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new Ho(this.database,pc(this._delegate,function l9(n,e){return cC("equalTo","key",e,!0),new a9(n,e)}(e,t)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ho))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,B.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,B.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,B.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Qa(this.database,new nu(this._delegate._repo,this._delegate._path))}}class Qa extends Ho{constructor(e,t){super(e,new pa(t._repo,t._path,new oS,!1)),this.database=e,this._delegate=t}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Qa(this.database,Jm(this._delegate,e))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Qa(this.database,e):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new Qa(this.database,this._delegate.root)}set(e,t){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",t,!0);const r=x1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,Wj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tu("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",t,!0);const r=HQ(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function BQ(n,e,t){if(tu("setWithPriority",n._path),Td("setWithPriority",e,n._path,!1),w1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new B.BH;return E1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",e,!0);const t=function UQ(n){return tu("remove",n._path),x1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,B.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function D9(n,e,t){var r;if(n=(0,B.m9)(n),tu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new B.BH,c=R1(n,()=>{});return function MQ(n,e,t,r,i,o){lw(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:BB(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=I1(n,e,void 0);l.currentInputSnapshot=c;const f=l.update(c.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{uC("transaction failed: Data returned ",f,l.path),l.status=0;const m=ES(n.transactionQueueTree_,e),_=Ym(m)||[];let C;_.push(l),v1(m,_),"object"==typeof f&&null!==f&&(0,B.r3)(f,".priority")?(C=(0,B.DV)(f,".priority"),(0,B.hu)(lC(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):C=(wS(n.serverSyncTree_,e)||sn.EMPTY_NODE).getPriority().val();const x=hC(n),M=li(f,C),O=p1(M,c,x);l.currentOutputSnapshotRaw=M,l.currentOutputSnapshotResolved=O,l.currentWriteId=TS(n);const W=a1(n.serverSyncTree_,e,O,l.currentWriteId,l.applyLocally);Ya(n.eventQueue_,e,W),AS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,m,_)=>{let C=null;f?o.reject(f):(C=new Qm(_,new nu(n._repo,n._path),Sr),o.resolve(new I9(m,C)))},c,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new k9(o.committed,new Kp(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",t,!0);const r=function VQ(n,e){n=(0,B.m9)(n),tu("setPriority",n._path),w1("setPriority",e,!1);const t=new B.BH;return E1(n._repo,Zr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",t,!0);const r=function LQ(n,e){n=(0,B.m9)(n),tu("push",n._path),Td("push",e,n._path,!0);const t=Ej(n._repo),r=qK(t),i=Jm(n,r),o=Jm(n,r);let l;return l=null!=e?x1(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Qa(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new Qa(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return tu("Reference.onDisconnect",this._delegate._path),new M9(new kj(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class gC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:g9,forceLongPolling:m9}}useEmulator(e,t,r={}){!function zj(n,e,t,r={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Cd("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new WE(WE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,B.Sg)(r.mockUserToken,n.app.options.projectId);o=new WE(l)}!function c9(n,e,t,r){n.repoInfo_=new SN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,B.Dv)("database.ref",0,1,arguments.length),e instanceof Qa){const t=Nj(this._delegate,e.toString());return new Qa(this,t)}{const t=Pj(this._delegate,e);return new Qa(this,t)}}refFromURL(e){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const r=Nj(this._delegate,e);return new Qa(this,r)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function v9(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),Tj(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function y9(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function RQ(n){n.persistentConnection_&&n.persistentConnection_.resume(bj)}(n._repo)}(this._delegate)}}gC.ServerValue={TIMESTAMP:function E9(){return b9}(),increment:n=>function C9(n){return{".sv":{increment:n}}}(n)};var N9=Object.freeze({__proto__:null,initStandalone:function P9({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){UB(t);const l=new Va.zt("auth-internal",new Va.H0("database-standalone"));return l.setComponent(new Va.wA("auth-internal",()=>r,"PRIVATE")),{instance:new gC($j(n,l,void 0,e,o),n),namespace:i}}});const O9=gC.ServerValue;function qj(n){return null==n}function Zj(n){return"function"==typeof n.set}function Kj(n,e){return Zj(e)?e:n.ref(e)}function Yj(n,e){if(function L9(n){return"string"==typeof n}(n))return e.stringCase();if(Zj(n))return e.firebaseCase();if(function U9(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function mC(n,e,t="on",r=ty.z){return new di.y(i=>{let o=null;return o=n[t](e,(l,c)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:c})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:o,prevKey:l}=i;let c=null;return o.exists()&&(c=o.key),{type:e,payload:o,prevKey:l,key:c}}),(0,Yw.B)())}function Qj(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function H9(n,e){const{payload:t,prevKey:r,key:i}=e,o=Qj(n,i),l=function B9(n,e){if(qj(e))return 0;{const t=Qj(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let c=null;e.payload.forEach(f=>{const m={payload:f,type:"value",prevKey:c,key:f.key};return c=f.key,n=[...n,m],!1})}return n;case"child_added":if(o>-1){const c=n[o-1];(c&&c.key||null)!==r&&(n=n.filter(f=>f.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(c=>c.payload.key!==t.key);case"child_changed":return n.map(c=>c.payload.key===i?e:c);case"child_moved":if(o>-1){const c=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,c),n}return n;default:return n}}function Jj(n){return(qj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Xj(n,e,t){return function V9(n,e,t){return mC(n,"value","once",t).pipe(dr(r=>{const i=[Et(r)];return e.forEach(o=>i.push(mC(n,o,"on",t))),(0,Kw.T)(...i).pipe(Ht(H9,[]))}),Tb())}(n,e=Jj(e),t)}function e$(n,e,t){const r=(e=Jj(e)).map(i=>mC(n,i,"on",t));return(0,Kw.T)(...r)}function t$(n,e){return function(r,i){return Yj(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function z9(n){return function(t){return t?Yj(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function n$(n,e){return function(){return mC(n,"value","on",e)}}!function F9(n){n.INTERNAL.registerComponent(new Va.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new gC(i,r)},"PUBLIC").setServiceProps({Reference:Qa,Query:Ho,Database:gC,DataSnapshot:Kp,enableLogging:_9,INTERNAL:N9,ServerValue:O9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Rf.Z);const Z9=new h.OlP("angularfire2.realtimeDatabaseURL"),K9=new h.OlP("angularfire2.database.use-emulator");let Y9=(()=>{class n{constructor(t,r,i,o,l,c,f,m,_,C,x,M,O,W,K){this.schedulers=c;const te=f,_e=(0,wi.on)(t,l,r);m&&Sg(_e,l,_,x,M,O,C,W),this.database=(0,wi.cc)(`${_e.name}.database.${i}`,"AngularFireDatabase",_e.name,()=>{const ke=l.runOutsideAngular(()=>_e.database(i||void 0));return te&&ke.useEmulator(...te),ke},[te])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Kj(this.database,t));let o=i;return r&&(o=r(i)),function W9(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:t$(r,"update"),set:t$(r,"set"),push:i=>r.push(i),remove:z9(r),snapshotChanges:i=>Xj(n,i,t).pipe(Dn.iC),stateChanges:i=>e$(n,i,t).pipe(Dn.iC),auditTrail:i=>function j9(n,e,t){return function G9(n,e,t){return function $9(n,e){return mC(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function $7(...n){const e=(0,oo.jO)(n);return(0,Or.e)((t,r)=>{const i=n.length,o=new Array(i);let l=n.map(()=>!1),c=!1;for(let f=0;f<i;f++)(0,Es.Xf)(n[f]).subscribe((0,cr.x)(r,m=>{o[f]=m,!c&&!l[f]&&(l[f]=!0,(c=l.every(bs.y))&&(l=null))},j7.Z));t.subscribe((0,cr.x)(r,f=>{if(c){const m=[f,...o];r.next(e?e(...m):m)}}))})}(e),(0,yt.U)(([i,o])=>{const l=i.lastKeyToLoad,c=o.map(f=>f.key);return{actions:o,lastKeyToLoad:l,loadedKeys:c}}),function G7(n){return(0,Or.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,cr.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,e$(n,e).pipe(Ht((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Dn.iC),valueChanges:(i,o)=>Xj(n,i,t).pipe((0,yt.U)(c=>c.map(f=>o&&o.idField?Object.assign(Object.assign({},f.payload.val()),{[o.idField]:f.key}):f.payload.val())),Dn.iC)}}(o,this)}object(t){return function q9(n,e){return{query:n,snapshotChanges:()=>n$(n,e.schedulers.outsideAngular)().pipe(Dn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>n$(n,e.schedulers.outsideAngular)().pipe(Dn.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Kj(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wi.Dh),h.LFG(wi.xv,8),h.LFG(Z9,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(K9,8),h.LFG(Ha,8),h.LFG(Cb,8),h.LFG(Ib,8),h.LFG(Sf,8),h.LFG(Ag,8),h.LFG(xf,8),h.LFG(TI,8),h.LFG(Af,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Q9=(()=>{class n{constructor(){ey.Z.registerVersion("angularfire",Dn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Y9]}),n})();const r$_firebase={apiKey:"AIzaSyC6V84Hwn9StuKkHW8hgleOPW0IqDbAkoI",authDomain:"objetosperdidos-ab4d3.firebaseapp.com",databaseURL:"https://objetosperdidos-ab4d3-default-rtdb.firebaseio.com",projectId:"objetosperdidos-ab4d3",storageBucket:"objetosperdidos-ab4d3.appspot.com",messagingSenderId:"985986295604",appId:"1:985986295604:web:9535acc377930999f2a761"};let i$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),J9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,i$,As]}),n})(),X9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),eJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),tJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),nJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),rJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})();var iJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.headerElRef=Jl(),t}return(0,G.ZT)(e,n),e.prototype.renderSimpleLayout=function(t,r){var o=this.props,l=this.context,c=[],f=AB(l.options);return t&&c.push({type:"header",key:"header",isSticky:f,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),c.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),Te(uN,{viewSpec:l.viewSpec},function(m,_){return Te("div",{ref:m,className:["fc-daygrid"].concat(_).join(" ")},Te(SB,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[],sections:c}))})},e.prototype.renderHScrollLayout=function(t,r,i,o){var l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");var f=this.props,m=this.context,_=!f.forPrint&&AB(m.options),C=!f.forPrint&&function f7(n){var e=n.stickyFooterScrollbar;return(null==e||"auto"===e)&&(e="auto"===n.height||"auto"===n.viewHeight),e}(m.options),x=[];return t&&x.push({type:"header",key:"header",isSticky:_,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),x.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),C&&x.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:h7}]}),Te(uN,{viewSpec:m.viewSpec},function(M,O){return Te("div",{ref:M,className:["fc-daygrid"].concat(O).join(" ")},Te(l,{liquid:!f.isHeightAuto&&!f.forPrint,collapsibleWidth:f.forPrint,colGroups:[{cols:[{span:i,minWidth:o}]}],sections:x}))})},e}(K_);function kS(n,e){for(var t=[],r=0;r<e;r+=1)t[r]=[];for(var i=0,o=n;i<o.length;i++){var l=o[i];t[l.row].push(l)}return t}function PS(n,e){for(var t=[],r=0;r<e;r+=1)t[r]=[];for(var i=0,o=n;i<o.length;i++){var l=o[i];t[l.firstCol].push(l)}return t}function o$(n,e){var t=[];if(n){for(var r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(var i=0,o=n.segs;i<o.length;i++){var l=o[i];t[l.row].segs.push(l)}}else for(r=0;r<e;r+=1)t[r]=null;return t}var oJ=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.props,r=tN(this.context,t.date);return Te(xB,{date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,showDayNumber:t.showDayNumber,extraHookProps:t.extraHookProps,defaultContent:sJ},function(i,o){return(o||t.forceDayTop)&&Te("div",{className:"fc-daygrid-day-top",ref:i},Te("a",(0,G.pi)({id:t.dayNumberId,className:"fc-daygrid-day-number"},r),o||Te(da,null,"\xa0")))})},e}(qr);function sJ(n){return n.dayNumberText}var s$=Ji({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function a$(n){var e=n.eventRange.ui.display;return"list-item"===e||"auto"===e&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}var l$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.props;return Te(g7,(0,G.pi)({},t,{extraClassNames:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:s$,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))},e}(qr),u$=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props,i=this.context,l=xV(r.seg,i.options.eventTimeFormat||s$,i,!0,r.defaultDisplayEventEnd);return Te(wN,{seg:r.seg,timeText:l,defaultContent:aJ,isDragging:r.isDragging,isResizing:!1,isDateSelecting:!1,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(c,f,m,_){return Te("a",(0,G.pi)({className:["fc-daygrid-event","fc-daygrid-dot-event"].concat(f).join(" "),ref:c},RV(r.seg,i)),_)})},e}(qr);function aJ(n){return Te(da,null,Te("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&Te("div",{className:"fc-event-time"},n.timeText),Te("div",{className:"fc-event-title"},n.event.title||Te(da,null,"\xa0")))}var lJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.compileSegs=pn(uJ),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this.props,r=this.compileSegs(t.singlePlacements),i=r.allSegs;return Te(D7,{dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:i,hiddenSegs:r.invisibleSegs,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:function(){var l=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return Te(da,null,i.map(function(c){var f=c.eventRange.instance.instanceId;return Te("div",{className:"fc-daygrid-event-harness",key:f,style:{visibility:l[f]?"hidden":""}},a$(c)?Te(u$,(0,G.pi)({seg:c,isDragging:!1,isSelected:f===t.eventSelection,defaultDisplayEventEnd:!1},UE(c,t.todayRange))):Te(l$,(0,G.pi)({seg:c,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:f===t.eventSelection,defaultDisplayEventEnd:!1},UE(c,t.todayRange))))}))}},function(l,c,f,m,_,C,x,M){return Te("a",(0,G.pi)({ref:l,className:["fc-daygrid-more-link"].concat(c).join(" "),title:C,"aria-expanded":x,"aria-controls":M},rV(_)),m)})},e}(qr);function uJ(n){for(var e=[],t=[],r=0,i=n;r<i.length;r++){var o=i[r];e.push(o.seg),o.isVisible||t.push(o.seg)}return{allSegs:e,invisibleSegs:t}}var cJ=Ji({week:"narrow"}),dJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.rootElRef=Jl(),t.state={dayNumberId:CA()},t.handleRootEl=function(r){Nh(t.rootElRef,r),Nh(t.props.elRef,r)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,i=t.props,o=t.state,l=t.rootElRef,c=i.date,f=i.dateProfile,m=tN(t.context,c,"week");return Te(MB,{date:c,dateProfile:f,todayRange:i.todayRange,showDayNumber:i.showDayNumber,extraHookProps:i.extraHookProps,elRef:this.handleRootEl},function(_,C,x,M){return Te("td",(0,G.pi)({ref:_,role:"gridcell",className:["fc-daygrid-day"].concat(C,i.extraClassNames||[]).join(" ")},x,i.extraDataAttrs,i.showDayNumber?{"aria-labelledby":o.dayNumberId}:{}),Te("div",{className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",ref:i.innerElRef},i.showWeekNumber&&Te(b7,{date:c,defaultFormat:cJ},function(O,W,K,te){return Te("a",(0,G.pi)({ref:O,className:["fc-daygrid-week-number"].concat(W).join(" ")},m),te)}),!M&&Te(oJ,{date:c,dateProfile:f,showDayNumber:i.showDayNumber,dayNumberId:o.dayNumberId,forceDayTop:i.forceDayTop,todayRange:i.todayRange,extraHookProps:i.extraHookProps}),Te("div",{className:"fc-daygrid-day-events",ref:i.fgContentElRef},i.fgContent,Te("div",{className:"fc-daygrid-day-bottom",style:{marginTop:i.moreMarginTop}},Te(lJ,{allDayDate:c,singlePlacements:i.singlePlacements,moreCnt:i.moreCnt,alignmentElRef:l,alignGridTop:!i.showDayNumber,extraDateSpan:i.extraDateSpan,dateProfile:i.dateProfile,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,todayRange:i.todayRange}))),Te("div",{className:"fc-daygrid-day-bg"},i.bgContent)))})},e}(K_);function cw(n,e,t,r){if(n.firstCol===e&&n.lastCol===t-1)return n;var i=n.eventRange,o=i.range,l=LE(o,{start:r[e].date,end:Hs(r[t-1].date,1)});return(0,G.pi)((0,G.pi)({},n),{firstCol:e,lastCol:t-1,eventRange:{def:i.def,ui:(0,G.pi)((0,G.pi)({},i.ui),{durationEditable:!1}),instance:i.instance,range:l},isStart:n.isStart&&l.start.valueOf()===o.start.valueOf(),isEnd:n.isEnd&&l.end.valueOf()===o.end.valueOf()})}var gJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.hiddenConsumes=!1,t.forceHidden={},t}return(0,G.ZT)(e,n),e.prototype.addSegs=function(t){for(var r=this,i=n.prototype.addSegs.call(this,t),o=this.entriesByLevel,l=function(f){return!r.forceHidden[HE(f)]},c=0;c<o.length;c+=1)o[c]=o[c].filter(l);return i},e.prototype.handleInvalidInsertion=function(t,r,i){var l=this.entriesByLevel,c=this.forceHidden,f=t.touchingEntry,m=t.touchingLevel,_=t.touchingLateral;if(this.hiddenConsumes&&f){var C=HE(f);if(!c[C])if(this.allowReslicing){var x=(0,G.pi)((0,G.pi)({},f),{span:fN(f.span,r.span)});c[HE(x)]=!0,l[m][_]=x,this.splitEntry(f,r,i)}else c[C]=!0,i.push(f)}return n.prototype.handleInvalidInsertion.call(this,t,r,i)},e}(x8),c$=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.cellElRefs=new Hm,t.frameElRefs=new Hm,t.fgElRefs=new Hm,t.segHarnessRefs=new Hm,t.rootElRef=Jl(),t.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,r=this,i=r.props,o=r.state,c=r.context.options,f=i.cells.length,m=PS(i.businessHourSegs,f),_=PS(i.bgEventSegs,f),C=PS(this.getHighlightSegs(),f),x=PS(this.getMirrorSegs(),f),M=function hJ(n,e,t,r,i,o,l){var c=new gJ;c.allowReslicing=!0,c.strictOrder=r,!0===e||!0===t?(c.maxCoord=o,c.hiddenConsumes=!0):"number"==typeof e?c.maxStackCnt=e:"number"==typeof t&&(c.maxStackCnt=t,c.hiddenConsumes=!0);for(var f=[],m=[],_=0;_<n.length;_+=1){var M=i[(C=n[_]).eventRange.instance.instanceId];null!=M?f.push({index:_,thickness:M,span:{start:C.firstCol,end:C.lastCol+1}}):m.push(C)}for(var O=c.addSegs(f),K=function fJ(n,e,t){for(var r=function pJ(n,e){for(var t=[],r=0;r<e;r+=1)t.push([]);for(var i=0,o=n;i<o.length;i++){var l=o[i];for(r=l.span.start;r<l.span.end;r+=1)t[r].push(l)}return t}(n,t.length),i=[],o=[],l=[],c=0;c<t.length;c+=1){for(var f=r[c],m=[],_=0,C=0,x=0,M=f;x<M.length;x++)m.push({seg:cw(W=e[(O=M[x]).index],c,c+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:O.levelCoord,marginTop:O.levelCoord-_}),_=O.levelCoord+O.thickness;var K=[];_=0,C=0;for(var te=0,_e=f;te<_e.length;te++){var O,W=e[(O=_e[te]).index],Ne=O.span.start===c;C+=O.levelCoord-_,_=O.levelCoord+O.thickness,O.span.end-O.span.start>1?(C+=O.thickness,Ne&&K.push({seg:cw(W,O.span.start,O.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:O.levelCoord,marginTop:0})):Ne&&(K.push({seg:cw(W,O.span.start,O.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:O.levelCoord,marginTop:C}),C=0)}i.push(m),o.push(K),l.push(C)}return{singleColPlacements:i,multiColPlacements:o,leftoverMargins:l}}(c.toRects(),n,l),te=K.singleColPlacements,_e=K.multiColPlacements,ke=K.leftoverMargins,Ne=[],ut=[],at=0,Gt=m;at<Gt.length;at++){_e[(C=Gt[at]).firstCol].push({seg:C,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var Dt=C.firstCol;Dt<=C.lastCol;Dt+=1)te[Dt].push({seg:cw(C,Dt,Dt+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(Dt=0;Dt<l.length;Dt+=1)Ne.push(0);for(var wr=0,Do=O;wr<Do.length;wr++){var C,Lh=Do[wr],Ja=Lh.span;for(_e[Ja.start].push({seg:cw(C=n[Lh.index],Ja.start,Ja.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0}),Dt=Ja.start;Dt<Ja.end;Dt+=1)Ne[Dt]+=1,te[Dt].push({seg:cw(C,Dt,Dt+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(Dt=0;Dt<l.length;Dt+=1)ut.push(ke[Dt]);return{singleColPlacements:te,multiColPlacements:_e,moreCnts:Ne,moreMarginTops:ut}}(function p4(n,e){var t=n.map(g4);return t.sort(function(r,i){return function f5(n,e,t){var r,i;for(r=0;r<t.length;r+=1)if(i=p5(n,e,t[r]))return i;return 0}(r,i,e)}),t.map(function(r){return r._seg})}(i.fgEventSegs,c.eventOrder),i.dayMaxEvents,i.dayMaxEventRows,c.eventOrderStrict,o.eventInstanceHeights,o.maxContentHeight,i.cells),O=M.singleColPlacements,W=M.multiColPlacements,K=M.moreCnts,te=M.moreMarginTops,_e=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{};return Te("tr",{ref:this.rootElRef,role:"row"},i.renderIntro&&i.renderIntro(),i.cells.map(function(ke,Ne){var ut=t.renderFgSegs(Ne,i.forPrint?O[Ne]:W[Ne],i.todayRange,_e),at=t.renderFgSegs(Ne,function mJ(n,e){if(!n.length)return[];var t=function vJ(n){for(var e={},t=0,r=n;t<r.length;t++)for(var o=0,l=r[t];o<l.length;o++){var c=l[o];e[c.seg.eventRange.instance.instanceId]=c.absoluteTop}return e}(e);return n.map(function(r){return{seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:t[r.eventRange.instance.instanceId],marginTop:0}})}(x[Ne],W),i.todayRange,{},Boolean(i.eventDrag),Boolean(i.eventResize),!1);return Te(dJ,{key:ke.key,elRef:t.cellElRefs.createRef(ke.key),innerElRef:t.frameElRefs.createRef(ke.key),dateProfile:i.dateProfile,date:ke.date,showDayNumber:i.showDayNumbers,showWeekNumber:i.showWeekNumbers&&0===Ne,forceDayTop:i.showWeekNumbers,todayRange:i.todayRange,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,extraHookProps:ke.extraHookProps,extraDataAttrs:ke.extraDataAttrs,extraClassNames:ke.extraClassNames,extraDateSpan:ke.extraDateSpan,moreCnt:K[Ne],moreMarginTop:te[Ne],singlePlacements:O[Ne],fgContentElRef:t.fgElRefs.createRef(ke.key),fgContent:Te(da,null,Te(da,null,ut),Te(da,null,at)),bgContent:Te(da,null,t.renderFillSegs(C[Ne],"highlight"),t.renderFillSegs(m[Ne],"non-business"),t.renderFillSegs(_[Ne],"bg-event"))})}))},e.prototype.componentDidMount=function(){this.updateSizing(!0)},e.prototype.componentDidUpdate=function(t,r){this.updateSizing(!kh(t,this.props))},e.prototype.getHighlightSegs=function(){var t=this.props;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs},e.prototype.getMirrorSegs=function(){var t=this.props;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]},e.prototype.renderFgSegs=function(t,r,i,o,l,c,f){var m=this.context,_=this.props.eventSelection,C=this.state.framePositions,x=1===this.props.cells.length,M=l||c||f,O=[];if(C)for(var W=0,K=r;W<K.length;W++){var te=K[W],_e=te.seg,ke=_e.eventRange.instance.instanceId,Ne=ke+":"+t,ut=te.isVisible&&!o[ke],at=te.isAbsolute,Gt="",Dt="";at&&(m.isRtl?(Dt=0,Gt=C.lefts[_e.lastCol]-C.lefts[_e.firstCol]):(Gt=0,Dt=C.rights[_e.firstCol]-C.rights[_e.lastCol])),O.push(Te("div",{className:"fc-daygrid-event-harness"+(at?" fc-daygrid-event-harness-abs":""),key:Ne,ref:M?null:this.segHarnessRefs.createRef(Ne),style:{visibility:ut?"":"hidden",marginTop:at?"":te.marginTop,top:at?te.absoluteTop:"",left:Gt,right:Dt}},a$(_e)?Te(u$,(0,G.pi)({seg:_e,isDragging:l,isSelected:ke===_,defaultDisplayEventEnd:x},UE(_e,i))):Te(l$,(0,G.pi)({seg:_e,isDragging:l,isResizing:c,isDateSelecting:f,isSelected:ke===_,defaultDisplayEventEnd:x},UE(_e,i)))))}return O},e.prototype.renderFillSegs=function(t,r){var i=this.context.isRtl,o=this.props.todayRange,l=this.state.framePositions,c=[];if(l)for(var f=0,m=t;f<m.length;f++){var _=m[f],C=i?{right:0,left:l.lefts[_.lastCol]-l.lefts[_.firstCol]}:{left:0,right:l.rights[_.firstCol]-l.rights[_.lastCol]};c.push(Te("div",{key:w4(_.eventRange),className:"fc-daygrid-bg-harness",style:C},"bg-event"===r?Te(_7,(0,G.pi)({seg:_},UE(_,o))):y7(r)))}return Te.apply(void 0,(0,G.ev)([da,{}],c))},e.prototype.updateSizing=function(t){var i=this.props,o=this.frameElRefs;if(!i.forPrint&&null!==i.clientWidth){if(t){var l=i.cells.map(function(C){return o.currentMap[C.key]});l.length&&this.setState({framePositions:new oN(this.rootElRef.current,l,!0,!1)})}var f=this.state.eventInstanceHeights,m=this.queryEventInstanceHeights(),_=!0===i.dayMaxEvents||!0===i.dayMaxEventRows;this.safeSetState({eventInstanceHeights:(0,G.pi)((0,G.pi)({},f),m),maxContentHeight:_?this.computeMaxContentHeight():null})}},e.prototype.queryEventInstanceHeights=function(){var t=this.segHarnessRefs.currentMap,r={};for(var i in t){var o=Math.round(t[i].getBoundingClientRect().height),l=i.split(":")[0];r[l]=Math.max(r[l]||0,o)}return r},e.prototype.computeMaxContentHeight=function(){var t=this.props.cells[0].key,i=this.fgElRefs.currentMap[t];return this.cellElRefs.currentMap[t].getBoundingClientRect().bottom-i.getBoundingClientRect().top},e.prototype.getCellEls=function(){var t=this.cellElRefs.currentMap;return this.props.cells.map(function(r){return t[r.key]})},e}(K_);c$.addStateEquality({eventInstanceHeights:kh});var yJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.splitBusinessHourSegs=pn(kS),t.splitBgEventSegs=pn(kS),t.splitFgEventSegs=pn(kS),t.splitDateSelectionSegs=pn(kS),t.splitEventDrag=pn(o$),t.splitEventResize=pn(o$),t.rowRefs=new Hm,t.handleRootEl=function(r){t.rootEl=r,r?t.context.registerInteractiveComponent(t,{el:r,isHitComboAllowed:t.props.isHitComboAllowed}):t.context.unregisterInteractiveComponent(t)},t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,r=this.props,i=r.dateProfile,o=r.dayMaxEventRows,l=r.dayMaxEvents,c=r.expandRows,f=r.cells.length,m=this.splitBusinessHourSegs(r.businessHourSegs,f),_=this.splitBgEventSegs(r.bgEventSegs,f),C=this.splitFgEventSegs(r.fgEventSegs,f),x=this.splitDateSelectionSegs(r.dateSelectionSegs,f),M=this.splitEventDrag(r.eventDrag,f),O=this.splitEventResize(r.eventResize,f),W=!0===l||!0===o;return W&&!c&&(W=!1,o=null,l=null),Te("div",{className:["fc-daygrid-body",W?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",c?"":"fc-daygrid-body-natural"].join(" "),ref:this.handleRootEl,style:{width:r.clientWidth,minWidth:r.tableMinWidth}},Te(EB,{unit:"day"},function(te,_e){return Te(da,null,Te("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:r.clientWidth,minWidth:r.tableMinWidth,height:c?r.clientHeight:""}},r.colGroupNode,Te("tbody",{role:"presentation"},r.cells.map(function(ke,Ne){return Te(c$,{ref:t.rowRefs.createRef(Ne),key:ke.length?ke[0].date.toISOString():Ne,showDayNumbers:f>1,showWeekNumbers:r.showWeekNumbers,todayRange:_e,dateProfile:i,cells:ke,renderIntro:r.renderRowIntro,businessHourSegs:m[Ne],eventSelection:r.eventSelection,bgEventSegs:_[Ne].filter(_J),fgEventSegs:C[Ne],dateSelectionSegs:x[Ne],eventDrag:M[Ne],eventResize:O[Ne],dayMaxEvents:l,dayMaxEventRows:o,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint})}))))}))},e.prototype.prepareHits=function(){this.rowPositions=new oN(this.rootEl,this.rowRefs.collect().map(function(t){return t.getCellEls()[0]}),!1,!0),this.colPositions=new oN(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)},e.prototype.queryHit=function(t,r){var o=this.colPositions,l=this.rowPositions,c=o.leftToIndex(t),f=l.topToIndex(r);if(null!=f&&null!=c){var m=this.props.cells[f][c];return{dateProfile:this.props.dateProfile,dateSpan:(0,G.pi)({range:this.getCellRange(f,c),allDay:!0},m.extraDateSpan),dayEl:this.getCellEl(f,c),rect:{left:o.lefts[c],right:o.rights[c],top:l.tops[f],bottom:l.bottoms[f]},layer:0}}return null},e.prototype.getCellEl=function(t,r){return this.rowRefs.currentMap[t].getCellEls()[r]},e.prototype.getCellRange=function(t,r){var i=this.props.cells[t][r].date;return{start:i,end:Hs(i,1)}},e}(K_);function _J(n){return n.eventRange.def.allDay}var wJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.forceDayIfListItem=!0,t}return(0,G.ZT)(e,n),e.prototype.sliceRange=function(t,r){return r.sliceRange(t)},e}(K8),bJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.slicer=new wJ,t.tableRef=Jl(),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var r=this.props;return Te(yJ,(0,G.pi)({ref:this.tableRef},this.slicer.sliceProps(r,r.dateProfile,r.nextDayThreshold,this.context,r.dayTableModel),{dateProfile:r.dateProfile,cells:r.dayTableModel.cells,colGroupNode:r.colGroupNode,tableMinWidth:r.tableMinWidth,renderRowIntro:r.renderRowIntro,dayMaxEvents:r.dayMaxEvents,dayMaxEventRows:r.dayMaxEventRows,showWeekNumbers:r.showWeekNumbers,expandRows:r.expandRows,headerAlignElRef:r.headerAlignElRef,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint}))},e}(K_),EJ=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.buildDayTableModel=pn(CJ),t.headerRef=Jl(),t.tableRef=Jl(),t}return(0,G.ZT)(e,n),e.prototype.render=function(){var t=this,r=this.context,i=r.options,l=this.props,c=this.buildDayTableModel(l.dateProfile,r.dateProfileGenerator),f=i.dayHeaders&&Te(z8,{ref:this.headerRef,dateProfile:l.dateProfile,dates:c.headerDates,datesRepDistinctDays:1===c.rowCnt}),m=function(_){return Te(bJ,{ref:t.tableRef,dateProfile:l.dateProfile,dayTableModel:c,businessHours:l.businessHours,dateSelection:l.dateSelection,eventStore:l.eventStore,eventUiBases:l.eventUiBases,eventSelection:l.eventSelection,eventDrag:l.eventDrag,eventResize:l.eventResize,nextDayThreshold:i.nextDayThreshold,colGroupNode:_.tableColGroupNode,tableMinWidth:_.tableMinWidth,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.weekNumbers,expandRows:!l.isHeightAuto,headerAlignElRef:t.headerElRef,clientWidth:_.clientWidth,clientHeight:_.clientHeight,forPrint:l.forPrint})};return i.dayMinWidth?this.renderHScrollLayout(f,m,c.colCnt,i.dayMinWidth):this.renderSimpleLayout(f,m)},e}(iJ);function CJ(n,e){var t=new q8(n.renderRange,e);return new Z8(t,/year|month|week/.test(n.currentRangeUnit))}var IJ=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,G.ZT)(e,n),e.prototype.buildRenderRange=function(t,r,i){var m,o=this.props.dateEnv,l=n.prototype.buildRenderRange.call(this,t,r,i),c=l.start,f=l.end;if(/^(year|month)$/.test(r)&&(c=o.startOfWeek(c),(m=o.startOfWeek(f)).valueOf()!==f.valueOf()&&(f=aV(m,1))),this.props.monthMode&&this.props.fixedWeekCount){var _=Math.ceil(function y5(n,e){return Nm(n,e)/7}(c,f));f=aV(f,6-_)}return{start:c,end:f}},e}(nB);const TJ=Up({initialView:"dayGridMonth",views:{dayGrid:{component:EJ,dateProfileGeneratorClass:IJ},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}});qA.touchMouseIgnoreWait=500;var k1=0,NS=0,P1=!1,N1=function(){function n(e){var t=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(r){if(!t.shouldIgnoreMouse()&&function AJ(n){return 0===n.button&&!n.ctrlKey}(r)&&t.tryStart(r)){var i=t.createEventFromMouse(r,!0);t.emitter.trigger("pointerdown",i),t.initScrollWatch(i),t.shouldIgnoreMove||document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp)}},this.handleMouseMove=function(r){var i=t.createEventFromMouse(r);t.recordCoords(i),t.emitter.trigger("pointermove",i)},this.handleMouseUp=function(r){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.emitter.trigger("pointerup",t.createEventFromMouse(r)),t.cleanup()},this.handleTouchStart=function(r){if(t.tryStart(r)){t.isTouchDragging=!0;var i=t.createEventFromTouch(r,!0);t.emitter.trigger("pointerdown",i),t.initScrollWatch(i);var o=r.target;t.shouldIgnoreMove||o.addEventListener("touchmove",t.handleTouchMove),o.addEventListener("touchend",t.handleTouchEnd),o.addEventListener("touchcancel",t.handleTouchEnd),window.addEventListener("scroll",t.handleTouchScroll,!0)}},this.handleTouchMove=function(r){var i=t.createEventFromTouch(r);t.recordCoords(i),t.emitter.trigger("pointermove",i)},this.handleTouchEnd=function(r){if(t.isDragging){var i=r.target;i.removeEventListener("touchmove",t.handleTouchMove),i.removeEventListener("touchend",t.handleTouchEnd),i.removeEventListener("touchcancel",t.handleTouchEnd),window.removeEventListener("scroll",t.handleTouchScroll,!0),t.emitter.trigger("pointerup",t.createEventFromTouch(r)),t.cleanup(),t.isTouchDragging=!1,function SJ(){k1+=1,setTimeout(function(){k1-=1},qA.touchMouseIgnoreWait)}()}},this.handleTouchScroll=function(){t.wasTouchScroll=!0},this.handleScroll=function(r){if(!t.shouldIgnoreMove){var i=window.pageXOffset-t.prevScrollX+t.prevPageX,o=window.pageYOffset-t.prevScrollY+t.prevPageY;t.emitter.trigger("pointermove",{origEvent:r,isTouch:t.isTouchDragging,subjectEl:t.subjectEl,pageX:i,pageY:o,deltaX:i-t.origPageX,deltaY:o-t.origPageY})}},this.containerEl=e,this.emitter=new GA,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function xJ(){1===(NS+=1)&&window.addEventListener("touchmove",d$,{passive:!1})}()}return n.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function RJ(){(NS-=1)||window.removeEventListener("touchmove",d$,{passive:!1})}()},n.prototype.tryStart=function(e){var t=this.querySubjectEl(e);return!(!t||this.handleSelector&&!as(e.target,this.handleSelector)||(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,0))},n.prototype.cleanup=function(){P1=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},n.prototype.querySubjectEl=function(e){return this.selector?as(e.target,this.selector):this.containerEl},n.prototype.shouldIgnoreMouse=function(){return k1||this.isTouchDragging},n.prototype.cancelTouchScroll=function(){this.isDragging&&(P1=!0)},n.prototype.initScrollWatch=function(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))},n.prototype.recordCoords=function(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},n.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},n.prototype.createEventFromMouse=function(e,t){var r=0,i=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}},n.prototype.createEventFromTouch=function(e,t){var i,o,r=e.touches,l=0,c=0;return r&&r.length?(i=r[0].pageX,o=r[0].pageY):(i=e.pageX,o=e.pageY),t?(this.origPageX=i,this.origPageY=o):(l=i-this.origPageX,c=o-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:o,deltaX:l,deltaY:c}},n}();function d$(n){P1&&n.preventDefault()}var MJ=function(){function n(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return n.prototype.start=function(e,t,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},n.prototype.handleMove=function(e,t){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()},n.prototype.setIsVisible=function(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)},n.prototype.stop=function(e,t){var r=this,i=function(){r.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)},n.prototype.doRevertAnimation=function(e,t){var r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+t+"ms,left "+t+"ms",NE(r,{left:i.left,top:i.top}),function a5(n,e){var t=function(r){e(r),nV.forEach(function(i){n.removeEventListener(i,t)})};nV.forEach(function(r){n.addEventListener(r,t)})}(r,function(){r.style.transition="",e()})},n.prototype.cleanup=function(){this.mirrorEl&&(MP(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},n.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&NE(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},n.prototype.getMirrorEl=function(){var e=this.sourceElRect,t=this.mirrorEl;return t||((t=this.mirrorEl=this.sourceEl.cloneNode(!0)).classList.add("fc-unselectable"),t.classList.add("fc-event-dragging"),NE(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t},n}(),h$=function(n){function e(t,r){var i=n.call(this)||this;return i.handleScroll=function(){i.scrollTop=i.scrollController.getScrollTop(),i.scrollLeft=i.scrollController.getScrollLeft(),i.handleScrollChange()},i.scrollController=t,i.doesListening=r,i.scrollTop=i.origScrollTop=t.getScrollTop(),i.scrollLeft=i.origScrollLeft=t.getScrollLeft(),i.scrollWidth=t.getScrollWidth(),i.scrollHeight=t.getScrollHeight(),i.clientWidth=t.getClientWidth(),i.clientHeight=t.getClientHeight(),i.clientRect=i.computeClientRect(),i.doesListening&&i.getEventTarget().addEventListener("scroll",i.handleScroll),i}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},e.prototype.getScrollTop=function(){return this.scrollTop},e.prototype.getScrollLeft=function(){return this.scrollLeft},e.prototype.setScrollTop=function(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())},e.prototype.setScrollLeft=function(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())},e.prototype.getClientWidth=function(){return this.clientWidth},e.prototype.getClientHeight=function(){return this.clientHeight},e.prototype.getScrollWidth=function(){return this.scrollWidth},e.prototype.getScrollHeight=function(){return this.scrollHeight},e.prototype.handleScrollChange=function(){},e}(sN),f$=function(n){function e(t,r){return n.call(this,new fZ(t),r)||this}return(0,G.ZT)(e,n),e.prototype.getEventTarget=function(){return this.scrollController.el},e.prototype.computeClientRect=function(){return aZ(this.scrollController.el)},e}(h$),kJ=function(n){function e(t){return n.call(this,new pZ,t)||this}return(0,G.ZT)(e,n),e.prototype.getEventTarget=function(){return window},e.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},e.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},e}(h$),p$="function"==typeof performance?performance.now:Date.now,PJ=function(){function n(){var e=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(e.isAnimating){var t=e.computeBestEdge(e.pointerScreenX+window.pageXOffset,e.pointerScreenY+window.pageYOffset);if(t){var r=p$();e.handleSide(t,(r-e.msSinceRequest)/1e3),e.requestAnimation(r)}else e.isAnimating=!1}}}return n.prototype.start=function(e,t,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))},n.prototype.handleMove=function(e,t){if(this.isEnabled){var r=e-window.pageXOffset,i=t-window.pageYOffset,o=null===this.pointerScreenY?0:i-this.pointerScreenY,l=null===this.pointerScreenX?0:r-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),l<0?this.everMovedLeft=!0:l>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(p$()))}},n.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var e=0,t=this.scrollCaches;e<t.length;e++)t[e].destroy();this.scrollCaches=null}},n.prototype.requestAnimation=function(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)},n.prototype.handleSide=function(e,t){var r=e.scrollCache,i=this.edgeThreshold,o=i-e.distance,l=o*o/(i*i)*this.maxVelocity*t,c=1;switch(e.name){case"left":c=-1;case"right":r.setScrollLeft(r.getScrollLeft()+l*c);break;case"top":c=-1;case"bottom":r.setScrollTop(r.getScrollTop()+l*c)}},n.prototype.computeBestEdge=function(e,t){for(var r=this.edgeThreshold,i=null,l=0,c=this.scrollCaches||[];l<c.length;l++){var f=c[l],m=f.clientRect,_=e-m.left,C=m.right-e,x=t-m.top,M=m.bottom-t;_>=0&&C>=0&&x>=0&&M>=0&&(x<=r&&this.everMovedUp&&f.canScrollUp()&&(!i||i.distance>x)&&(i={scrollCache:f,name:"top",distance:x}),M<=r&&this.everMovedDown&&f.canScrollDown()&&(!i||i.distance>M)&&(i={scrollCache:f,name:"bottom",distance:M}),_<=r&&this.everMovedLeft&&f.canScrollLeft()&&(!i||i.distance>_)&&(i={scrollCache:f,name:"left",distance:_}),C<=r&&this.everMovedRight&&f.canScrollRight()&&(!i||i.distance>C)&&(i={scrollCache:f,name:"right",distance:C}))}return i},n.prototype.buildCaches=function(e){return this.queryScrollEls(e).map(function(t){return t===window?new kJ(!1):new f$(t,!1)})},n.prototype.queryScrollEls=function(e){for(var t=[],r=0,i=this.scrollQuery;r<i.length;r++){var o=i[r];"object"==typeof o?t.push(o):t.push.apply(t,Array.prototype.slice.call(XU(e).querySelectorAll(o)))}return t},n}(),dw=function(n){function e(t,r){var i=n.call(this,t)||this;i.containerEl=t,i.delay=null,i.minDistance=0,i.touchScrollAllowed=!0,i.mirrorNeedsRevert=!1,i.isInteracting=!1,i.isDragging=!1,i.isDelayEnded=!1,i.isDistanceSurpassed=!1,i.delayTimeoutId=null,i.onPointerDown=function(l){i.isDragging||(i.isInteracting=!0,i.isDelayEnded=!1,i.isDistanceSurpassed=!1,function l5(n){n.classList.add("fc-unselectable"),n.addEventListener("selectstart",IA)}(document.body),function c5(n){n.addEventListener("contextmenu",IA)}(document.body),l.isTouch||l.origEvent.preventDefault(),i.emitter.trigger("pointerdown",l),i.isInteracting&&!i.pointer.shouldIgnoreMove&&(i.mirror.setIsVisible(!1),i.mirror.start(l.subjectEl,l.pageX,l.pageY),i.startDelay(l),i.minDistance||i.handleDistanceSurpassed(l)))},i.onPointerMove=function(l){if(i.isInteracting){if(i.emitter.trigger("pointermove",l),!i.isDistanceSurpassed){var c=i.minDistance,m=l.deltaX,_=l.deltaY;m*m+_*_>=c*c&&i.handleDistanceSurpassed(l)}i.isDragging&&("scroll"!==l.origEvent.type&&(i.mirror.handleMove(l.pageX,l.pageY),i.autoScroller.handleMove(l.pageX,l.pageY)),i.emitter.trigger("dragmove",l))}},i.onPointerUp=function(l){i.isInteracting&&(i.isInteracting=!1,function u5(n){n.classList.remove("fc-unselectable"),n.removeEventListener("selectstart",IA)}(document.body),function d5(n){n.removeEventListener("contextmenu",IA)}(document.body),i.emitter.trigger("pointerup",l),i.isDragging&&(i.autoScroller.stop(),i.tryStopDrag(l)),i.delayTimeoutId&&(clearTimeout(i.delayTimeoutId),i.delayTimeoutId=null))};var o=i.pointer=new N1(t);return o.emitter.on("pointerdown",i.onPointerDown),o.emitter.on("pointermove",i.onPointerMove),o.emitter.on("pointerup",i.onPointerUp),r&&(o.selector=r),i.mirror=new MJ,i.autoScroller=new PJ,i}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},e.prototype.startDelay=function(t){var r=this;"number"==typeof this.delay?this.delayTimeoutId=setTimeout(function(){r.delayTimeoutId=null,r.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},e.prototype.handleDelayEnd=function(t){this.isDelayEnded=!0,this.tryStartDrag(t)},e.prototype.handleDistanceSurpassed=function(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)},e.prototype.tryStartDrag=function(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())},e.prototype.tryStopDrag=function(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))},e.prototype.stopDrag=function(t){this.isDragging=!1,this.emitter.trigger("dragend",t)},e.prototype.setIgnoreMove=function(t){this.pointer.shouldIgnoreMove=t},e.prototype.setMirrorIsVisible=function(t){this.mirror.setIsVisible(t)},e.prototype.setMirrorNeedsRevert=function(t){this.mirrorNeedsRevert=t},e.prototype.setAutoScrollEnabled=function(t){this.autoScroller.isEnabled=t},e}(yB),NJ=function(){function n(e){this.origRect=iN(e),this.scrollCaches=ZV(e).map(function(t){return new f$(t,!0)})}return n.prototype.destroy=function(){for(var e=0,t=this.scrollCaches;e<t.length;e++)t[e].destroy()},n.prototype.computeLeft=function(){for(var e=this.origRect.left,t=0,r=this.scrollCaches;t<r.length;t++){var i=r[t];e+=i.origScrollLeft-i.getScrollLeft()}return e},n.prototype.computeTop=function(){for(var e=this.origRect.top,t=0,r=this.scrollCaches;t<r.length;t++){var i=r[t];e+=i.origScrollTop-i.getScrollTop()}return e},n.prototype.isWithinClipping=function(e,t){for(var r={left:e,top:t},i=0,o=this.scrollCaches;i<o.length;i++){var l=o[i];if(!OJ(l.getEventTarget())&&!Z4(r,l.clientRect))return!1}return!0},n}();function OJ(n){var e=n.tagName;return"HTML"===e||"BODY"===e}var vC=function(){function n(e,t){var r=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(i){var o=r.dragging;r.initialHit=null,r.movingHit=null,r.finalHit=null,r.prepareHits(),r.processFirstCoord(i),r.initialHit||!r.requireInitial?(o.setIgnoreMove(!1),r.emitter.trigger("pointerdown",i)):o.setIgnoreMove(!0)},this.handleDragStart=function(i){r.emitter.trigger("dragstart",i),r.handleMove(i,!0)},this.handleDragMove=function(i){r.emitter.trigger("dragmove",i),r.handleMove(i)},this.handlePointerUp=function(i){r.releaseHits(),r.emitter.trigger("pointerup",i)},this.handleDragEnd=function(i){r.movingHit&&r.emitter.trigger("hitupdate",null,!0,i),r.finalHit=r.movingHit,r.movingHit=null,r.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new GA}return n.prototype.processFirstCoord=function(e){var o,t={left:e.pageX,top:e.pageY},r=t,i=e.subjectEl;i instanceof HTMLElement&&(r=function K4(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}(r,o=iN(i)));var l=this.initialHit=this.queryHitForOffset(r.left,r.top);if(l){if(this.useSubjectCenter&&o){var c=GV(o,l.rect);c&&(r=function Y4(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}(c))}this.coordAdjust=function Q4(n,e){return{left:n.left-e.left,top:n.top-e.top}}(r,t)}else this.coordAdjust={left:0,top:0}},n.prototype.handleMove=function(e,t){var r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!OS(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))},n.prototype.prepareHits=function(){this.offsetTrackers=Mh(this.droppableStore,function(e){return e.component.prepareHits(),new NJ(e.el)})},n.prototype.releaseHits=function(){var e=this.offsetTrackers;for(var t in e)e[t].destroy();this.offsetTrackers={}},n.prototype.queryHitForOffset=function(e,t){var i=this.droppableStore,o=this.offsetTrackers,l=null;for(var c in i){var f=i[c].component,m=o[c];if(m&&m.isWithinClipping(e,t)){var _=m.computeLeft(),C=m.computeTop(),x=e-_,M=t-C,O=m.origRect,W=O.right-O.left,K=O.bottom-O.top;if(x>=0&&x<W&&M>=0&&M<K){var te=f.queryHit(x,M,W,K);te&&jA(te.dateProfile.activeRange,te.dateSpan.range)&&(!l||te.layer>l.layer)&&(te.componentId=c,te.context=f.context,te.rect.left+=_,te.rect.right+=_,te.rect.top+=C,te.rect.bottom+=C,l=te)}}}return l},n}();function OS(n,e){return!n&&!e||Boolean(n)===Boolean(e)&&function I4(n,e){return function h4(n,e){return(null===n.start?null:n.start.valueOf())===(null===e.start?null:e.start.valueOf())&&(null===n.end?null:n.end.valueOf())===(null===e.end?null:e.end.valueOf())}(n.range,e.range)&&n.allDay===e.allDay&&function D4(n,e){for(var t in e)if("range"!==t&&"allDay"!==t&&n[t]!==e[t])return!1;for(var t in n)if(!(t in e))return!1;return!0}(n,e)}(n.dateSpan,e.dateSpan)}function O1(n,e){for(var t={},r=0,i=e.pluginHooks.datePointTransforms;r<i.length;r++)(0,G.pi)(t,(0,i[r])(n,e));return(0,G.pi)(t,function FJ(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}(n,e.dateEnv)),t}var LJ=function(n){function e(t){var r=n.call(this,t)||this;r.handlePointerDown=function(o){r.dragging.setIgnoreMove(!r.component.isValidDateDownEl(o.origEvent.target))},r.handleDragEnd=function(o){var l=r.component;if(!r.dragging.pointer.wasTouchScroll){var f=r.hitDragging,m=f.initialHit,_=f.finalHit;if(m&&_&&OS(m,_)){var C=l.context,x=(0,G.pi)((0,G.pi)({},O1(m.dateSpan,C)),{dayEl:m.dayEl,jsEvent:o.origEvent,view:C.viewApi||C.calendarApi.view});C.emitter.trigger("dateClick",x)}}},r.dragging=new dw(t.el),r.dragging.autoScroller.isEnabled=!1;var i=r.hitDragging=new vC(r.dragging,gN(t));return i.emitter.on("pointerdown",r.handlePointerDown),i.emitter.on("dragend",r.handleDragEnd),r}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e}(Y_),UJ=function(n){function e(t){var r=n.call(this,t)||this;r.dragSelection=null,r.handlePointerDown=function(f){var _=r.component,C=r.dragging,M=_.context.options.selectable&&_.isValidDateDownEl(f.origEvent.target);C.setIgnoreMove(!M),C.delay=f.isTouch?function VJ(n){var e=n.context.options,t=e.selectLongPressDelay;return null==t&&(t=e.longPressDelay),t}(_):null},r.handleDragStart=function(f){r.component.context.calendarApi.unselect(f)},r.handleHitUpdate=function(f,m){var _=r.component.context,C=null,x=!1;if(f){var M=r.hitDragging.initialHit;f.componentId===M.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(M,f)||(C=function BJ(n,e,t){var r=n.dateSpan,i=e.dateSpan,o=[r.range.start,r.range.end,i.range.start,i.range.end];o.sort(m5);for(var l={},c=0,f=t;c<f.length;c++){var _=(0,f[c])(n,e);if(!1===_)return null;_&&(0,G.pi)(l,_)}return l.range={start:o[0],end:o[3]},l.allDay=r.allDay,l}(M,f,_.pluginHooks.dateSelectionTransformers)),(!C||!function Y8(n,e,t){return!!jA(e.validRange,n.range)&&IB({dateSelection:n},t)}(C,f.dateProfile,_))&&(x=!0,C=null)}C?_.dispatch({type:"SELECT_DATES",selection:C}):m||_.dispatch({type:"UNSELECT_DATES"}),x?DA():TA(),m||(r.dragSelection=C)},r.handlePointerUp=function(f){r.dragSelection&&(PV(r.dragSelection,f,r.component.context),r.dragSelection=null)};var o=t.component.context.options,l=r.dragging=new dw(t.el);l.touchScrollAllowed=!1,l.minDistance=o.selectMinDistance||0,l.autoScroller.isEnabled=o.dragScroll;var c=r.hitDragging=new vC(r.dragging,gN(t));return c.emitter.on("pointerdown",r.handlePointerDown),c.emitter.on("dragstart",r.handleDragStart),c.emitter.on("hitupdate",r.handleHitUpdate),c.emitter.on("pointerup",r.handlePointerUp),r}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e}(Y_),g$=function(n){function e(t){var r=n.call(this,t)||this;r.subjectEl=null,r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingContext=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(f){var m=f.origEvent.target,C=r.component,x=r.dragging,M=x.mirror,O=C.context.options,W=C.context;r.subjectEl=f.subjectEl;var K=r.subjectSeg=Z_(f.subjectEl),_e=(r.eventRange=K.eventRange).instance.instanceId;r.relevantEvents=BP(W.getCurrentData().eventStore,_e),x.minDistance=f.isTouch?0:O.eventDragMinDistance,x.delay=f.isTouch&&_e!==C.props.eventSelection?function jJ(n){var e=n.context.options,t=e.eventLongPressDelay;return null==t&&(t=e.longPressDelay),t}(C):null,M.parentNode=O.fixedMirrorParent?O.fixedMirrorParent:as(m,".fc"),M.revertDuration=O.dragRevertDuration;var ke=C.isValidSegDownEl(m)&&!as(m,".fc-event-resizer");x.setIgnoreMove(!ke),r.isDragging=ke&&f.subjectEl.classList.contains("fc-event-draggable")},r.handleDragStart=function(f){var m=r.component.context,_=r.eventRange,C=_.instance.instanceId;f.isTouch?C!==r.component.props.eventSelection&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:C}):m.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(m.calendarApi.unselect(f),m.emitter.trigger("eventDragStart",{el:r.subjectEl,event:new ai(m,_.def,_.instance),jsEvent:f.origEvent,view:m.viewApi}))},r.handleHitUpdate=function(f,m){if(r.isDragging){var _=r.relevantEvents,C=r.hitDragging.initialHit,x=r.component.context,M=null,O=null,W=null,K=!1,te={affectedEvents:_,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(f){var _e=(M=f.context).options;x===M||_e.editable&&_e.droppable?(O=function HJ(n,e,t){var r=n.dateSpan,i=e.dateSpan,o=r.range.start,l=i.range.start,c={};r.allDay!==i.allDay&&(c.allDay=i.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,i.allDay&&(o=Wr(o)));var f=q_(o,l,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);f.milliseconds&&(c.allDay=!1);for(var m={datesDelta:f,standardProps:c},_=0,C=t;_<C.length;_++)(0,C[_])(m,n,e);return m}(C,f,M.getCurrentData().pluginHooks.eventDragMutationMassagers),O&&(W=YP(_,M.getCurrentData().eventUiBases,O,M),te.mutatedEvents=W,yN(te,f.dateProfile,M)||(K=!0,O=null,W=null,te.mutatedEvents={defs:{},instances:{}}))):M=null}r.displayDrag(M,te),K?DA():TA(),m||(x===M&&OS(C,f)&&(O=null),r.dragging.setMirrorNeedsRevert(!O),r.dragging.setMirrorIsVisible(!f||!XU(r.subjectEl).querySelector(".fc-event-mirror")),r.receivingContext=M,r.validMutation=O,r.mutatedRelevantEvents=W)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(f){if(r.isDragging){var m=r.component.context,_=m.viewApi,x=r.receivingContext,M=r.validMutation,O=r.eventRange.def,W=r.eventRange.instance,K=new ai(m,O,W),te=r.relevantEvents,_e=r.mutatedRelevantEvents,ke=r.hitDragging.finalHit;if(r.clearDrag(),m.emitter.trigger("eventDragStop",{el:r.subjectEl,event:K,jsEvent:f.origEvent,view:_}),M){if(x===m){var Ne=new ai(m,_e.defs[O.defId],W?_e.instances[W.instanceId]:null);m.dispatch({type:"MERGE_EVENTS",eventStore:_e});for(var ut={oldEvent:K,event:Ne,relatedEvents:Vm(_e,m,W),revert:function(){m.dispatch({type:"MERGE_EVENTS",eventStore:te})}},at={},Gt=0,Dt=m.getCurrentData().pluginHooks.eventDropTransformers;Gt<Dt.length;Gt++)(0,G.pi)(at,(0,Dt[Gt])(M,m));m.emitter.trigger("eventDrop",(0,G.pi)((0,G.pi)((0,G.pi)({},ut),at),{el:f.subjectEl,delta:M.datesDelta,jsEvent:f.origEvent,view:_})),m.emitter.trigger("eventChange",ut)}else if(x){var Do={event:K,relatedEvents:Vm(te,m,W),revert:function(){m.dispatch({type:"MERGE_EVENTS",eventStore:te})}};m.emitter.trigger("eventLeave",(0,G.pi)((0,G.pi)({},Do),{draggedEl:f.subjectEl,view:_})),m.dispatch({type:"REMOVE_EVENTS",eventStore:te}),m.emitter.trigger("eventRemove",Do);var Ja=_e.instances[W.instanceId],FS=new ai(x,_e.defs[O.defId],Ja);x.dispatch({type:"MERGE_EVENTS",eventStore:_e});var LS={event:FS,relatedEvents:Vm(_e,x,Ja),revert:function(){x.dispatch({type:"REMOVE_EVENTS",eventStore:_e})}};x.emitter.trigger("eventAdd",LS),f.isTouch&&x.dispatch({type:"SELECT_EVENT",eventInstanceId:W.instanceId}),x.emitter.trigger("drop",(0,G.pi)((0,G.pi)({},O1(ke.dateSpan,x)),{draggedEl:f.subjectEl,jsEvent:f.origEvent,view:ke.context.viewApi})),x.emitter.trigger("eventReceive",(0,G.pi)((0,G.pi)({},LS),{draggedEl:f.subjectEl,view:ke.context.viewApi}))}}else m.emitter.trigger("_noEventDrop")}r.cleanup()};var o=r.component.context.options,l=r.dragging=new dw(t.el);l.pointer.selector=e.SELECTOR,l.touchScrollAllowed=!1,l.autoScroller.isEnabled=o.dragScroll;var c=r.hitDragging=new vC(r.dragging,WA);return c.useSubjectCenter=t.useEventCenter,c.emitter.on("pointerdown",r.handlePointerDown),c.emitter.on("dragstart",r.handleDragStart),c.emitter.on("hitupdate",r.handleHitUpdate),c.emitter.on("pointerup",r.handlePointerUp),c.emitter.on("dragend",r.handleDragEnd),r}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e.prototype.displayDrag=function(t,r){var o=this.receivingContext;o&&o!==t&&o.dispatch(o===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),t&&t.dispatch({type:"SET_EVENT_DRAG",state:r})},e.prototype.clearDrag=function(){var t=this.component.context,r=this.receivingContext;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),t!==r&&t.dispatch({type:"UNSET_EVENT_DRAG"})},e.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},e.SELECTOR=".fc-event-draggable, .fc-event-resizable",e}(Y_),$J=function(n){function e(t){var r=n.call(this,t)||this;r.draggingSegEl=null,r.draggingSeg=null,r.eventRange=null,r.relevantEvents=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(c){var f=r.component,_=Z_(r.querySegEl(c)),C=r.eventRange=_.eventRange;r.dragging.minDistance=f.context.options.eventDragMinDistance,r.dragging.setIgnoreMove(!r.component.isValidSegDownEl(c.origEvent.target)||c.isTouch&&r.component.props.eventSelection!==C.instance.instanceId)},r.handleDragStart=function(c){var f=r.component.context,m=r.eventRange;r.relevantEvents=BP(f.getCurrentData().eventStore,r.eventRange.instance.instanceId);var _=r.querySegEl(c);r.draggingSegEl=_,r.draggingSeg=Z_(_),f.calendarApi.unselect(),f.emitter.trigger("eventResizeStart",{el:_,event:new ai(f,m.def,m.instance),jsEvent:c.origEvent,view:f.viewApi})},r.handleHitUpdate=function(c,f,m){var _=r.component.context,C=r.relevantEvents,x=r.hitDragging.initialHit,M=r.eventRange.instance,O=null,W=null,K=!1,te={affectedEvents:C,mutatedEvents:{defs:{},instances:{}},isEvent:!0};c&&(c.componentId===x.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(x,c)||(O=function GJ(n,e,t,r){var i=n.context.dateEnv,c=q_(n.dateSpan.range.start,e.dateSpan.range.start,i,n.largeUnit);if(t){if(i.add(r.start,c)<r.end)return{startDelta:c}}else if(i.add(r.end,c)>r.start)return{endDelta:c};return null}(x,c,m.subjectEl.classList.contains("fc-event-resizer-start"),M.range))),O&&(W=YP(C,_.getCurrentData().eventUiBases,O,_),te.mutatedEvents=W,yN(te,c.dateProfile,_)||(K=!0,O=null,W=null,te.mutatedEvents=null)),_.dispatch(W?{type:"SET_EVENT_RESIZE",state:te}:{type:"UNSET_EVENT_RESIZE"}),K?DA():TA(),f||(O&&OS(x,c)&&(O=null),r.validMutation=O,r.mutatedRelevantEvents=W)},r.handleDragEnd=function(c){var f=r.component.context,m=r.eventRange.def,_=r.eventRange.instance,C=new ai(f,m,_),x=r.relevantEvents,M=r.mutatedRelevantEvents;if(f.emitter.trigger("eventResizeStop",{el:r.draggingSegEl,event:C,jsEvent:c.origEvent,view:f.viewApi}),r.validMutation){var O=new ai(f,M.defs[m.defId],_?M.instances[_.instanceId]:null);f.dispatch({type:"MERGE_EVENTS",eventStore:M});var W={oldEvent:C,event:O,relatedEvents:Vm(M,f,_),revert:function(){f.dispatch({type:"MERGE_EVENTS",eventStore:x})}};f.emitter.trigger("eventResize",(0,G.pi)((0,G.pi)({},W),{el:r.draggingSegEl,startDelta:r.validMutation.startDelta||Vn(0),endDelta:r.validMutation.endDelta||Vn(0),jsEvent:c.origEvent,view:f.viewApi})),f.emitter.trigger("eventChange",W)}else f.emitter.trigger("_noEventResize");r.draggingSeg=null,r.relevantEvents=null,r.validMutation=null};var i=t.component,o=r.dragging=new dw(t.el);o.pointer.selector=".fc-event-resizer",o.touchScrollAllowed=!1,o.autoScroller.isEnabled=i.context.options.dragScroll;var l=r.hitDragging=new vC(r.dragging,gN(t));return l.emitter.on("pointerdown",r.handlePointerDown),l.emitter.on("dragstart",r.handleDragStart),l.emitter.on("hitupdate",r.handleHitUpdate),l.emitter.on("dragend",r.handleDragEnd),r}return(0,G.ZT)(e,n),e.prototype.destroy=function(){this.dragging.destroy()},e.prototype.querySegEl=function(t){return as(t.subjectEl,".fc-event")},e}(Y_),zJ=function(){function n(e){var t=this;this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(i){i.jsEvent&&(t.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(i){var o=t.context.options.unselectCancel,l=JU(i.origEvent);t.matchesCancel=!!as(l,o),t.matchesEvent=!!as(l,g$.SELECTOR)},this.onDocumentPointerUp=function(i){var o=t.context,l=t.documentPointer,c=o.getCurrentData();if(!l.wasTouchScroll){if(c.dateSelection&&!t.isRecentPointerDateSelect){var f=o.options.unselectAuto;f&&(!f||!t.matchesCancel)&&o.calendarApi.unselect(i)}c.eventSelection&&!t.matchesEvent&&o.dispatch({type:"UNSELECT_EVENT"})}t.isRecentPointerDateSelect=!1};var r=this.documentPointer=new N1(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}return n.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},n}(),WJ={fixedMirrorParent:Ae},qJ={dateClick:Ae,eventDragStart:Ae,eventDragStop:Ae,eventDrop:Ae,eventResizeStart:Ae,eventResizeStop:Ae,eventResize:Ae,drop:Ae,eventReceive:Ae,eventLeave:Ae};!function(){function n(e,t){var r=this;this.receivingContext=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=function(o){r.dragMeta=r.buildDragMeta(o.subjectEl)},this.handleHitUpdate=function(o,l,c){var f=r.hitDragging.dragging,m=null,_=null,C=!1,x={affectedEvents:{defs:{},instances:{}},mutatedEvents:{defs:{},instances:{}},isEvent:r.dragMeta.create};o&&r.canDropElOnCalendar(c.subjectEl,m=o.context)&&(_=function ZJ(n,e,t){for(var r=(0,G.pi)({},e.leftoverProps),i=0,o=t.pluginHooks.externalDefTransforms;i<o.length;i++)(0,G.pi)(r,(0,o[i])(n,e));var c=$P(r,t),_=HA(c.refined,c.extra,e.sourceId,n.allDay,t.options.forceEventDuration||Boolean(e.duration),t),C=n.range.start;n.allDay&&e.startTime&&(C=t.dateEnv.add(C,e.startTime));var x=e.duration?t.dateEnv.add(C,e.duration):KP(n.allDay,C,t);return{def:_,instance:xA(_.defId,{start:C,end:x})}}(o.dateSpan,r.dragMeta,m),x.mutatedEvents=FE(_),(C=!yN(x,o.dateProfile,m))&&(x.mutatedEvents={defs:{},instances:{}},_=null)),r.displayDrag(m,x),f.setMirrorIsVisible(l||!_||!document.querySelector(".fc-event-mirror")),C?DA():TA(),l||(f.setMirrorNeedsRevert(!_),r.receivingContext=m,r.droppableEvent=_)},this.handleDragEnd=function(o){var c=r.receivingContext,f=r.droppableEvent;if(r.clearDrag(),c&&f){var m=r.hitDragging.finalHit,_=m.context.viewApi,C=r.dragMeta;if(c.emitter.trigger("drop",(0,G.pi)((0,G.pi)({},O1(m.dateSpan,c)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:_})),C.create){var x=FE(f);c.dispatch({type:"MERGE_EVENTS",eventStore:x}),o.isTouch&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instance.instanceId}),c.emitter.trigger("eventReceive",{event:new ai(c,f.def,f.instance),relatedEvents:[],revert:function(){c.dispatch({type:"REMOVE_EVENTS",eventStore:x})},draggedEl:o.subjectEl,view:_})}}r.receivingContext=null,r.droppableEvent=null};var i=this.hitDragging=new vC(e,WA);i.requireInitial=!1,i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=t}n.prototype.buildDragMeta=function(e){return"object"==typeof this.suppliedDragMeta?mN(this.suppliedDragMeta):"function"==typeof this.suppliedDragMeta?mN(this.suppliedDragMeta(e)):function KJ(n){var e=function YJ(n,e){var t=qA.dataAttrPrefix;return n.getAttribute("data-"+(t?t+"-":"")+e)||""}(n,"event");return mN(e?JSON.parse(e):{create:!1})}(e)},n.prototype.displayDrag=function(e,t){var r=this.receivingContext;r&&r!==e&&r.dispatch({type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})},n.prototype.clearDrag=function(){this.receivingContext&&this.receivingContext.dispatch({type:"UNSET_EVENT_DRAG"})},n.prototype.canDropElOnCalendar=function(e,t){var r=t.options.dropAccept;return"function"==typeof r?r.call(t.calendarApi,e):"string"!=typeof r||!r||Boolean(kP(e,r))}}();qA.dataAttrPrefix="";!function(n){function e(t){var r=n.call(this,t)||this;r.shouldIgnoreMove=!1,r.mirrorSelector="",r.currentMirrorEl=null,r.handlePointerDown=function(o){r.emitter.trigger("pointerdown",o),r.shouldIgnoreMove||r.emitter.trigger("dragstart",o)},r.handlePointerMove=function(o){r.shouldIgnoreMove||r.emitter.trigger("dragmove",o)},r.handlePointerUp=function(o){r.emitter.trigger("pointerup",o),r.shouldIgnoreMove||r.emitter.trigger("dragend",o)};var i=r.pointer=new N1(t);return i.emitter.on("pointerdown",r.handlePointerDown),i.emitter.on("pointermove",r.handlePointerMove),i.emitter.on("pointerup",r.handlePointerUp),r}(0,G.ZT)(e,n),e.prototype.destroy=function(){this.pointer.destroy()},e.prototype.setIgnoreMove=function(t){this.shouldIgnoreMove=t},e.prototype.setMirrorIsVisible=function(t){if(t)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var r=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;r&&(this.currentMirrorEl=r,r.style.visibility="hidden")}}}(yB);const XJ=Up({componentInteractions:[LJ,UJ,g$,$J],calendarInteractions:[zJ],elementDraggingImpl:dw,optionRefiners:WJ,listenerRefiners:qJ});let eX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),tX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})(),nX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hr,As]}),n})();OB.registerPlugins([TJ,XJ]);let rX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[H7]}),n.\u0275inj=h.cJS({providers:[Db,lL],imports:[kd,B7,kz,d2,As,wi.hO.initializeApp(r$_firebase),Db,lL,$q,Q9,OB,J9,i$,X9,tX,eJ,tJ,nJ,rJ,nX,eX]}),n})();(0,h.G48)(),xc().bootstrapModule(rX).catch(n=>console.error(n))},2559:wt=>{"use strict";wt.exports=function fe(V,h){if(V===h)return!0;if(V&&h&&"object"==typeof V&&"object"==typeof h){if(V.constructor!==h.constructor)return!1;var j,H,pe;if(Array.isArray(V)){if((j=V.length)!=h.length)return!1;for(H=j;0!=H--;)if(!fe(V[H],h[H]))return!1;return!0}if(V.constructor===RegExp)return V.source===h.source&&V.flags===h.flags;if(V.valueOf!==Object.prototype.valueOf)return V.valueOf()===h.valueOf();if(V.toString!==Object.prototype.toString)return V.toString()===h.toString();if((j=(pe=Object.keys(V)).length)!==Object.keys(h).length)return!1;for(H=j;0!=H--;)if(!Object.prototype.hasOwnProperty.call(h,pe[H]))return!1;for(H=j;0!=H--;){var ge=pe[H];if(!fe(V[ge],h[ge]))return!1}return!0}return V!=V&&h!=h}},5867:(wt,fe,V)=>{"use strict";V.d(fe,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=V(9681);(0,h.registerVersion)("firebase","9.14.0","app")},127:(wt,fe,V)=>{"use strict";V.d(fe,{Z:()=>h.Z});var h=V(3942);h.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(wt,fe,V)=>{"use strict";V.r(fe);var h=V(5861),j=V(3942),H=V(2090),pe=V(9681),ge=V(1877),Ce=V(655),me=V(4859);const Oe=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},it=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new ge.Yd("@firebase/auth");function vt(w,...g){We.logLevel<=ge.in.ERROR&&We.error(`Auth (${pe.SDK_VERSION}): ${w}`,...g)}function je(w,...g){throw rt(w,...g)}function Me(w,...g){return rt(w,...g)}function Le(w,g,y){const E=Object.assign(Object.assign({},it()),{[g]:y});return new H.LL("auth","Firebase",E).create(g,{appName:w.name})}function nt(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&je(w,"argument-error"),Le(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return xe.create(w,...g)}function Y(w,g,...y){if(!w)throw rt(g,...y)}function Ee(w){const g="INTERNAL ASSERTION FAILED: "+w;throw vt(g),new Error(g)}function ne(w,g){w||Ee(g)}const le=new Map;function de(w){ne(w instanceof Function,"Expected a class definition");let g=le.get(w);return g?(ne(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,le.set(w,g),g)}function Ke(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function bt(){return"http:"===ln()||"https:"===ln()}function ln(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class vn{constructor(g,y){this.shortDelay=g,this.longDelay=y,ne(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function en(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(w,g){ne(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class dn{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},kn=new vn(3e4,6e4);function kt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function In(w,g,y,E){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(w,g,y,E,P={}){return pi(w,P,(0,h.Z)(function*(){let U={},re={};E&&("GET"===g?re=E:U={body:JSON.stringify(E)});const be=(0,H.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),tt=yield w._getAdditionalHeaders();return tt["Content-Type"]="application/json",w.languageCode&&(tt["X-Firebase-Locale"]=w.languageCode),dn.fetch()(ar(w,w.config.apiHost,y,be),Object.assign({method:g,headers:tt,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function pi(w,g,y){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,h.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},rn),g);try{const P=new lr(w),U=yield Promise.race([y(),P.promise]);P.clearNetworkTimeout();const re=yield U.json();if("needConfirmation"in re)throw Rr(w,"account-exists-with-different-credential",re);if(U.ok&&!("errorMessage"in re))return re;{const be=U.ok?re.errorMessage:re.error.message,[tt,mt]=be.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw Rr(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===tt)throw Rr(w,"email-already-in-use",re);if("USER_DISABLED"===tt)throw Rr(w,"user-disabled",re);const Ft=E[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw Le(w,Ft,mt);je(w,Ft)}}catch(P){if(P instanceof H.ZR)throw P;je(w,"network-request-failed")}})).apply(this,arguments)}function Yr(w,g,y,E){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(w,g,y,E,P={}){const U=yield In(w,g,y,E,P);return"mfaPendingCredential"in U&&je(w,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function ar(w,g,y,E){const P=`${g}${y}?${E}`;return w.config.emulator?xn(w.config,P):`${w.config.apiScheme}://${P}`}class lr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Me(this.auth,"network-request-failed")),kn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rr(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const P=Me(w,g,E);return P.customData._tokenResponse=y,P}function et(){return(et=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Br(w,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yn(w,g){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Vi(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Fn(){return(Fn=(0,h.Z)(function*(w,g=!1){const y=(0,H.m9)(w),E=yield y.getIdToken(g),P=Ze(E);Y(P&&P.exp&&P.auth_time&&P.iat,y.auth,"internal-error");const U="object"==typeof P.firebase?P.firebase:void 0,re=U?.sign_in_provider;return{claims:P,token:E,authTime:Vi(St(P.auth_time)),issuedAtTime:Vi(St(P.iat)),expirationTime:Vi(St(P.exp)),signInProvider:re||null,signInSecondFactor:U?.sign_in_second_factor||null}})).apply(this,arguments)}function St(w){return 1e3*Number(w)}function Ze(w){var g;const[y,E,P]=w.split(".");if(void 0===y||void 0===E||void 0===P)return vt("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,H.tV)(E);return U?JSON.parse(U):(vt("Failed to decode base64 JWT payload"),null)}catch(U){return vt("Caught error parsing JWT payload as JSON",null===(g=U)||void 0===g?void 0:g.toString()),null}}function Mr(w,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof H.ZR&&gi(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function gi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Bt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const P=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,h.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(y=E)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class Qr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vi(this.lastLoginAt),this.creationTime=Vi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fn(w){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,h.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),P=yield Mr(w,yn(y,{idToken:E}));Y(P?.users.length,y,"internal-error");const U=P.users[0];w._notifyReloadListener(U);const re=null!==(g=U.providerUserInfo)&&void 0!==g&&g.length?pt(U.providerUserInfo):[],be=ui(w.providerData,re),Ft=!!w.isAnonymous&&!(w.email&&U.passwordHash||be?.length),Rt={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:be,metadata:new Qr(U.createdAt,U.lastLoginAt),isAnonymous:Ft};Object.assign(w,Rt)})).apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(w){const g=(0,H.m9)(w);yield fn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ui(w,g){return[...w.filter(E=>!g.some(P=>P.providerId===E.providerId)),...g]}function pt(w){return w.map(g=>{var{providerId:y}=g,E=(0,Ce._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function gt(){return(gt=(0,h.Z)(function*(w,g){const y=yield pi(w,{},(0,h.Z)(function*(){const E=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:P,apiKey:U}=w.config,re=ar(w,P,"/v1/token",`key=${U}`),be=yield w._getAdditionalHeaders();return be["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(re,{method:"POST",headers:be,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Y(g.idToken,"internal-error"),Y(typeof g.idToken<"u","internal-error"),Y(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function bn(w){const g=Ze(w);return Y(g,"internal-error"),Y(typeof g.exp<"u","internal-error"),Y(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,h.Z)(function*(){return Y(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,h.Z)(function*(){const{accessToken:P,refreshToken:U,expiresIn:re}=yield function Ve(w,g){return gt.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(P,U,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:P,expirationTime:U}=y,re=new Mt;return E&&(Y("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),P&&(Y("string"==typeof P,"internal-error",{appName:g}),re.accessToken=P),U&&(Y("number"==typeof U,"internal-error",{appName:g}),re.expirationTime=U),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Mt,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Ot(w,g){Y("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Zt{constructor(g){var{uid:y,auth:E,stsTokenManager:P}=g,U=(0,Ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new Qr(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,h.Z)(function*(){const E=yield Mr(y,y.stsTokenManager.getToken(y.auth,g));return Y(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function tr(w){return Fn.apply(this,arguments)}(this,g)}reload(){return function _n(w){return br.apply(this,arguments)}(this)}_assign(g){this!==g&&(Y(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Zt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,h.Z)(function*(){let P=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),P=!0),y&&(yield fn(E)),yield E.auth._persistUserIfCurrent(E),P&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,h.Z)(function*(){const y=yield g.getIdToken();return yield Mr(g,function qn(w,g){return et.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,P,U,re,be,tt,mt,Ft;const Rt=null!==(E=y.displayName)&&void 0!==E?E:void 0,On=null!==(P=y.email)&&void 0!==P?P:void 0,uo=null!==(U=y.phoneNumber)&&void 0!==U?U:void 0,Gu=null!==(re=y.photoURL)&&void 0!==re?re:void 0,Aw=null!==(be=y.tenantId)&&void 0!==be?be:void 0,Yd=null!==(tt=y._redirectEventId)&&void 0!==tt?tt:void 0,Dv=null!==(mt=y.createdAt)&&void 0!==mt?mt:void 0,gf=null!==(Ft=y.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:Tv,emailVerified:Sw,isAnonymous:jc,providerData:zu,stsTokenManager:dg}=y;Y(Tv&&dg,g,"internal-error");const hg=Mt.fromJSON(this.name,dg);Y("string"==typeof Tv,g,"internal-error"),Ot(Rt,g.name),Ot(On,g.name),Y("boolean"==typeof Sw,g,"internal-error"),Y("boolean"==typeof jc,g,"internal-error"),Ot(uo,g.name),Ot(Gu,g.name),Ot(Aw,g.name),Ot(Yd,g.name),Ot(Dv,g.name),Ot(gf,g.name);const Ol=new Zt({uid:Tv,auth:g,email:On,emailVerified:Sw,displayName:Rt,isAnonymous:jc,photoURL:Gu,phoneNumber:uo,tenantId:Aw,stsTokenManager:hg,createdAt:Dv,lastLoginAt:gf});return zu&&Array.isArray(zu)&&(Ol.providerData=zu.map($c=>Object.assign({},$c))),Yd&&(Ol._redirectEventId=Yd),Ol}static _fromIdTokenResponse(g,y,E=!1){return(0,h.Z)(function*(){const P=new Mt;P.updateFromServerResponse(y);const U=new Zt({uid:y.localId,auth:g,stsTokenManager:P,isAnonymous:E});return yield fn(U),U})()}}const Z=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(y,E){var P=this;return(0,h.Z)(function*(){P.storage[y]=E})()}_get(y){var E=this;return(0,h.Z)(function*(){const P=E.storage[y];return void 0===P?null:P})()}_remove(y){var E=this;return(0,h.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function ie(w,g,y){return`firebase:${w}:${g}:${y}`}class Fe{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:P,name:U}=this.auth;this.fullUserKey=ie(this.userKey,P.apiKey,U),this.fullPersistenceKey=ie("persistence",P.apiKey,U),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Zt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,h.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,h.Z)(function*(){if(!y.length)return new Fe(de(Z),g,E);const P=(yield Promise.all(y.map(function(){var mt=(0,h.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let U=P[0]||de(Z);const re=ie(E,g.config.apiKey,g.name);let be=null;for(const mt of y)try{const Ft=yield mt._get(re);if(Ft){const Rt=Zt._fromJSON(g,Ft);mt!==U&&(be=Rt),U=mt;break}}catch{}const tt=P.filter(mt=>mt._shouldAllowMigration);return U._shouldAllowMigration&&tt.length?(U=tt[0],be&&(yield U._set(re,be.toJSON())),yield Promise.all(y.map(function(){var mt=(0,h.Z)(function*(Ft){if(Ft!==U)try{yield Ft._remove(re)}catch{}});return function(Ft){return mt.apply(this,arguments)}}())),new Fe(U,g,E)):new Fe(U,g,E)})()}}function ae(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Pn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(lt(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Xe(g))return"Blackberry";if(ot(g))return"Webos";if(Tt(g))return"Safari";if((g.includes("chrome/")||hn(g))&&!g.includes("edge/"))return"Chrome";if(un(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function lt(w=(0,H.z$)()){return/firefox\//i.test(w)}function Tt(w=(0,H.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function hn(w=(0,H.z$)()){return/crios\//i.test(w)}function Pn(w=(0,H.z$)()){return/iemobile/i.test(w)}function un(w=(0,H.z$)()){return/android/i.test(w)}function Xe(w=(0,H.z$)()){return/blackberry/i.test(w)}function ot(w=(0,H.z$)()){return/webos/i.test(w)}function Jt(w=(0,H.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function jo(w=(0,H.z$)()){return Jt(w)||un(w)||ot(w)||Xe(w)||/windows phone/i.test(w)||Pn(w)}function rr(w,g=[]){let y;switch(w){case"Browser":y=ae((0,H.z$)());break;case"Worker":y=`${ae((0,H.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${pe.SDK_VERSION}/${E}`}class $s{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=U=>new Promise((re,be)=>{try{re(g(U))}catch(tt){be(tt)}});E.onAbort=y,this.queue.push(E);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,h.Z)(function*(){var E;if(y.auth.currentUser===g)return;const P=[];try{for(const U of y.queue)yield U(g),U.onAbort&&P.push(U.onAbort)}catch(U){P.reverse();for(const re of P)try{re()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=U)||void 0===E?void 0:E.message})}})()}}class Kt{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $o(this),this.idTokenSubscription=new $o(this),this.beforeStateQueue=new $s(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=de(y)),this._initializationPromise=this.queue((0,h.Z)(function*(){var P,U;if(!E._deleted&&(E.persistenceManager=yield Fe.create(E,g),!E._deleted)){if(null!==(P=E._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(U=E.currentUser)||void 0===U?void 0:U.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,h.Z)(function*(){var E;const P=yield y.assertedPersistence.getCurrentUser();let U=P,re=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const be=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,tt=U?._redirectEventId,mt=yield y.tryRedirectSignIn(g);(!be||be===tt)&&mt?.user&&(U=mt.user,re=!0)}if(!U)return y.directlySetCurrentUser(null);if(!U._redirectEventId){if(re)try{yield y.beforeStateQueue.runMiddleware(U)}catch(be){U=P,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(be))}return U?y.reloadAndSetCurrentUserOrClear(U):y.directlySetCurrentUser(null)}return Y(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===U._redirectEventId?y.directlySetCurrentUser(U):y.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(g){var y=this;return(0,h.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,h.Z)(function*(){var E;try{yield fn(g)}catch(P){if("auth/network-request-failed"!==(null===(E=P)||void 0===E?void 0:E.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ct(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,h.Z)(function*(){const E=g?(0,H.m9)(g):null;return E&&Y(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return g&&Y(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,h.Z)(function*(){yield y.assertedPersistence.setPersistence(de(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,h.Z)(function*(){const P=yield E.getOrInitRedirectPersistenceManager(y);return null===g?P.removeCurrentUser():P.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,h.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&de(g)||y._popupRedirectResolver;Y(E,y,"argument-error"),y.redirectPersistenceManager=yield Fe.create(y,[de(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,h.Z)(function*(){var E,P;return y._isInitialized&&(yield y.queue((0,h.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(P=y.redirectUser)||void 0===P?void 0:P._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,h.Z)(function*(){if(g===y.currentUser)return y.queue((0,h.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,P){if(this._deleted)return()=>{};const U="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(re,this,"internal-error"),re.then(()=>U(this.currentUser)),"function"==typeof y?g.addObserver(y,E,P):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,h.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=rr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const P=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return P&&(E["X-Firebase-Client"]=P),E})()}}function Hn(w){return(0,H.m9)(w)}class $o{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(y=>this.observer=y)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xi(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function To(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Pr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Ee("not implemented")}_getIdTokenResponse(g){return Ee("not implemented")}_linkToIdToken(g,y){return Ee("not implemented")}_getReauthenticationResolver(g){return Ee("not implemented")}}function gr(w,g){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:resetPassword",kt(w,g))})).apply(this,arguments)}function Mn(w,g){return ru.apply(this,arguments)}function ru(){return(ru=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function iu(w,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:update",kt(w,g))})).apply(this,arguments)}function Hi(){return(Hi=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithPassword",kt(w,g))})).apply(this,arguments)}function Ao(w,g){return ji.apply(this,arguments)}function ji(){return(ji=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:sendOobCode",kt(w,g))})).apply(this,arguments)}function jn(w,g){return ou.apply(this,arguments)}function ou(){return(ou=(0,h.Z)(function*(w,g){return Ao(w,g)})).apply(this,arguments)}function Er(w,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,h.Z)(function*(w,g){return Ao(w,g)})).apply(this,arguments)}function tl(w,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(w,g){return Ao(w,g)})).apply(this,arguments)}function nl(w,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(w,g){return Ao(w,g)})).apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithEmailLink",kt(w,g))})).apply(this,arguments)}function lu(){return(lu=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithEmailLink",kt(w,g))})).apply(this,arguments)}class uu extends Pr{constructor(g,y,E,P=null){super("password",E),this._email=g,this._password=y,this._tenantId=P}static _fromEmailAndPassword(g,y){return new uu(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new uu(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,h.Z)(function*(){switch(y.signInMethod){case"password":return function ga(w,g){return Hi.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function su(w,g){return au.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:je(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Mn(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ad(w,g){return lu.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:je(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Cr(w,g){return gc.apply(this,arguments)}function gc(){return(gc=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithIdp",kt(w,g))})).apply(this,arguments)}class mi extends Pr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new mi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):je("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:P}=y,U=(0,Ce._T)(y,["providerId","signInMethod"]);if(!E||!P)return null;const re=new mi(E,P);return re.idToken=U.idToken||void 0,re.accessToken=U.accessToken||void 0,re.secret=U.secret,re.nonce=U.nonce,re.pendingToken=U.pendingToken||null,re}_getIdTokenResponse(g){return Cr(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Cr(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Cr(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,H.xO)(y)}return g}}function Vh(w,g){return rl.apply(this,arguments)}function rl(){return(rl=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:sendVerificationCode",kt(w,g))})).apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithPhoneNumber",kt(w,g))})).apply(this,arguments)}function mc(){return(mc=(0,h.Z)(function*(w,g){const y=yield Yr(w,"POST","/v1/accounts:signInWithPhoneNumber",kt(w,g));if(y.temporaryProof)throw Rr(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Hh={USER_NOT_FOUND:"user-not-found"};function vc(){return(vc=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithPhoneNumber",kt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Hh)})).apply(this,arguments)}class Wo extends Pr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Wo({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Wo({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function cu(w,g){return zo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Bh(w,g){return mc.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function jh(w,g){return vc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:P}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:P}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:P,temporaryProof:U}=g;return E||y||P||U?new Wo({verificationId:y,verificationCode:E,phoneNumber:P,temporaryProof:U}):null}}class il{constructor(g){var y,E,P,U,re,be;const tt=(0,H.zd)((0,H.pd)(g)),mt=null!==(y=tt.apiKey)&&void 0!==y?y:null,Ft=null!==(E=tt.oobCode)&&void 0!==E?E:null,Rt=function yc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=tt.mode)&&void 0!==P?P:null);Y(mt&&Ft&&Rt,"argument-error"),this.apiKey=mt,this.operation=Rt,this.code=Ft,this.continueUrl=null!==(U=tt.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(re=tt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(be=tt.tenantId)&&void 0!==be?be:null}static parseLink(g){const y=function du(w){const g=(0,H.zd)((0,H.pd)(w)).link,y=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,E=(0,H.zd)((0,H.pd)(w)).deep_link_id;return(E?(0,H.zd)((0,H.pd)(E)).link:null)||E||y||g||w}(g);try{return new il(y)}catch{return null}}}let to=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return uu._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const P=il.parseLink(E);return Y(P,"argument-error"),uu._fromEmailAndCode(y,P.code,P.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class So{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class xo extends So{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class $i extends xo{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Y("providerId"in y&&"signInMethod"in y,"argument-error"),mi._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Y(g.idToken||g.accessToken,"argument-error"),mi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return $i.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return $i.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:P,pendingToken:U,nonce:re,providerId:be}=g;if(!E&&!P&&!y&&!U||!be)return null;try{return new $i(be)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:U})}catch{return null}}}let ma=(()=>{class w extends xo{constructor(){super("facebook.com")}static credential(y){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),sl=(()=>{class w extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:P}=y;if(!E&&!P)return null;try{return w.credential(E,P)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),hu=(()=>{class w extends xo{constructor(){super("github.com")}static credential(y){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Hr extends Pr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Cr(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Cr(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Cr(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:P,pendingToken:U}=y;return E&&P&&U&&E===P?new Hr(E,U):null}static _create(g,y){return new Hr(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ai extends So{constructor(g){Y(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ai.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ai.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Hr.fromJSON(g);return Y(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Hr._create(E,y)}catch{return null}}}let vi=(()=>{class w extends xo{constructor(){super("twitter.com")}static credential(y,E){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:P}=y;if(!E||!P)return null;try{return w.credential(E,P)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Gs(w,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signUp",kt(w,g))})).apply(this,arguments)}class jr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,P=!1){return(0,h.Z)(function*(){const U=yield Zt._fromIdTokenResponse(g,E,P),re=Sd(E);return new jr({user:U,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const P=Sd(E);return new jr({user:g,providerId:P,_tokenResponse:E,operationType:y})})()}}function Sd(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Nn(){return(Nn=(0,h.Z)(function*(w){var g;const y=Hn(w);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new jr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield Gs(y,{returnSecureToken:!0}),P=yield jr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(P.user),P})).apply(this,arguments)}class al extends H.ZR{constructor(g,y,E,P){var U;super(y.code,y.message),this.operationType=E,this.user=P,Object.setPrototypeOf(this,al.prototype),this.customData={appName:g.name,tenantId:null!==(U=g.tenantId)&&void 0!==U?U:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,P){return new al(g,y,E,P)}}function Rd(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?al._fromErrorAndOperation(w,U,g,E):U})}function Si(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function va(){return(va=(0,h.Z)(function*(w,g){const y=(0,H.m9)(w);yield cn(!0,y,g);const{providerUserInfo:E}=yield Br(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),P=Si(E||[]);return y.providerData=y.providerData.filter(U=>P.has(U.providerId)),P.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function qo(w,g){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,h.Z)(function*(w,g,y=!1){const E=yield Mr(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return jr._forOperation(w,"link",E)})).apply(this,arguments)}function cn(w,g,y){return ll.apply(this,arguments)}function ll(){return(ll=(0,h.Z)(function*(w,g,y){yield fn(g);const P=!1===w?"provider-already-linked":"no-such-provider";Y(Si(g.providerData).has(y)===w,g.auth,P)})).apply(this,arguments)}function ds(w,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(w,g,y=!1){var E;const{auth:P}=w,U="reauthenticate";try{const re=yield Mr(w,Rd(P,U,g,w),y);Y(re.idToken,P,"internal-error");const be=Ze(re.idToken);Y(be,P,"internal-error");const{sub:tt}=be;return Y(w.uid===tt,P,"user-mismatch"),jr._forOperation(w,U,re)}catch(re){throw"auth/user-not-found"===(null===(E=re)||void 0===E?void 0:E.code)&&je(P,"user-mismatch"),re}})).apply(this,arguments)}function Gi(w,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(w,g,y=!1){const E="signIn",P=yield Rd(w,E,g),U=yield jr._fromIdTokenResponse(w,E,P);return y||(yield w._updateCurrentUser(U.user)),U})).apply(this,arguments)}function Yn(w,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,h.Z)(function*(w,g){return Gi(Hn(w),g)})).apply(this,arguments)}function zs(w,g){return bc.apply(this,arguments)}function bc(){return(bc=(0,h.Z)(function*(w,g){const y=(0,H.m9)(w);return yield cn(!1,y,g.providerId),qo(y,g)})).apply(this,arguments)}function Mo(w,g){return dl.apply(this,arguments)}function dl(){return(dl=(0,h.Z)(function*(w,g){return ds((0,H.m9)(w),g)})).apply(this,arguments)}function fu(w,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(w,g){return Yr(w,"POST","/v1/accounts:signInWithCustomToken",kt(w,g))})).apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(w,g){const y=Hn(w),E=yield fu(y,{token:g,returnSecureToken:!0}),P=yield jr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(P.user),P})).apply(this,arguments)}class Be{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?on._fromServerResponse(g,y):je(g,"internal-error")}}class on extends Be{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new on(y)}}function hl(w,g,y){var E;Y((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),Y(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Y(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Y(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function $n(){return($n=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w),P={requestType:"PASSWORD_RESET",email:g};y&&hl(E,P,y),yield Er(E,P)})).apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(w,g,y){yield gr((0,H.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(w,g){yield iu((0,H.m9)(w),{oobCode:g})})).apply(this,arguments)}function qs(w,g){return gu.apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(w,g){const y=(0,H.m9)(w),E=yield gr(y,{oobCode:g}),P=E.requestType;switch(Y(P,y,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(E.mfaInfo,y,"internal-error");default:Y(E.email,y,"internal-error")}let U=null;return E.mfaInfo&&(U=Be._fromServerResponse(Hn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:U},operation:P}})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(w,g){const{data:y}=yield qs((0,H.m9)(w),g);return y.email})).apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(w,g,y){const E=Hn(w),P=yield Gs(E,{returnSecureToken:!0,email:g,password:y}),U=yield jr._fromIdTokenResponse(E,"signIn",P);return yield E._updateCurrentUser(U.user),U})).apply(this,arguments)}function hs(){return(hs=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w),P={requestType:"EMAIL_SIGNIN",email:g};Y(y.handleCodeInApp,E,"argument-error"),y&&hl(E,P,y),yield tl(E,P)})).apply(this,arguments)}function Ea(){return(Ea=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w),P=to.credentialWithLink(g,y||Ke());return Y(P._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Yn(E,P)})).apply(this,arguments)}function Gh(w,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:createAuthUri",kt(w,g))})).apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(w,g){const E={identifier:g,continueUri:bt()?Ke():"http://localhost"},{signinMethods:P}=yield Gh((0,H.m9)(w),E);return P||[]})).apply(this,arguments)}function Da(){return(Da=(0,h.Z)(function*(w,g){const y=(0,H.m9)(w),P={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&hl(y.auth,P,g);const{email:U}=yield jn(y.auth,P);U!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&hl(E.auth,U,y);const{email:re}=yield nl(E.auth,U);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function Aa(w,g){return bu.apply(this,arguments)}function bu(){return(bu=(0,h.Z)(function*(w,g){return In(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,H.m9)(w),U={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield Mr(E,Aa(E.auth,U));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const be=E.providerData.find(({providerId:tt})=>"password"===tt);be&&(be.displayName=E.displayName,be.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function fs(w,g,y){return pl.apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(w,g,y){const{auth:E}=w,U={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(U.email=g),y&&(U.password=y);const re=yield Mr(w,Mn(E,U));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class yi{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Ln extends yi{constructor(g,y,E,P){super(g,y,E),this.username=P}}class Ec extends yi{constructor(g,y){super(g,"facebook.com",y)}}class Du extends Ln{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Md extends yi{constructor(g,y){super(g,"google.com",y)}}class Tu extends Ln{constructor(g,y,E){super(g,"twitter.com",y,E)}}function gl(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Ir(w){var g,y;if(!w)return null;const{providerId:E}=w,P=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},U=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const re=null===(y=null===(g=Ze(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new yi(U,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new Ec(U,P);case"github.com":return new Du(U,P);case"google.com":return new Md(U,P);case"twitter.com":return new Tu(U,P,w.screenName||null);case"custom":case"anonymous":return new yi(U,null);default:return new yi(U,E,P)}}(y)}class ms{constructor(g,y,E){this.type=g,this.credential=y,this.auth=E}static _fromIdtoken(g,y){return new ms("enroll",g,y)}static _fromMfaPendingCredential(g){return new ms("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return ms._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return ms._fromIdtoken(g.multiFactorSession.idToken)}return null}}class vl{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Hn(g),P=y.customData._serverResponse,U=(P.mfaInfo||[]).map(be=>Be._fromServerResponse(E,be));Y(P.mfaPendingCredential,E,"internal-error");const re=ms._fromMfaPendingCredential(P.mfaPendingCredential);return new vl(re,U,function(){var be=(0,h.Z)(function*(tt){const mt=yield tt._process(E,re);delete P.mfaInfo,delete P.mfaPendingCredential;const Ft=Object.assign(Object.assign({},P),{idToken:mt.idToken,refreshToken:mt.refreshToken});switch(y.operationType){case"signIn":const Rt=yield jr._fromIdTokenResponse(E,y.operationType,Ft);return yield E._updateCurrentUser(Rt.user),Rt;case"reauthenticate":return Y(y.user,E,"internal-error"),jr._forOperation(y.user,y.operationType,Ft);default:je(E,"internal-error")}});return function(tt){return be.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,h.Z)(function*(){return y.signInResolver(g)})()}}function yl(w,g){return In(w,"POST","/v2/accounts/mfaEnrollment:start",kt(w,g))}class io{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Be._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new io(g)}getSession(){var g=this;return(0,h.Z)(function*(){return ms._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var E=this;return(0,h.Z)(function*(){const P=g,U=yield E.getSession(),re=yield Mr(E.user,P._process(E.user.auth,U,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,h.Z)(function*(){var E;const P="string"==typeof g?g:g.uid,U=yield y.user.getIdToken(),re=yield Mr(y.user,function Dc(w,g){return In(w,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(w,g))}(y.user.auth,{idToken:U,mfaEnrollmentId:P}));y.enrolledFactors=y.enrolledFactors.filter(({uid:be})=>be!==P),yield y.user._updateTokensIfNecessary(re);try{yield y.user.reload()}catch(be){if("auth/user-token-expired"!==(null===(E=be)||void 0===E?void 0:E.code))throw be}})()}}const zi=new WeakMap,vs="__sak";class wl{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(vs,"1"),this.storage.removeItem(vs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Yo=(()=>{class w extends wl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Sa(){const w=(0,H.z$)();return Tt(w)||Jt(w)}()&&function Rn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=jo(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const P=this.storage.getItem(E),U=this.localCache[E];P!==U&&y(E,U,P)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((be,tt,mt)=>{this.notifyListeners(be,mt)});const P=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const be=this.storage.getItem(P);if(y.newValue!==be)null!==y.newValue?this.storage.setItem(P,y.newValue):this.storage.removeItem(P);else if(this.localCache[P]===y.newValue&&!E)return}const U=()=>{const be=this.storage.getItem(P);!E&&this.localCache[P]===be||this.notifyListeners(P,be)},re=this.storage.getItem(P);!function Kn(){return(0,H.w1)()&&10===document.documentMode}()||re===y.newValue||y.newValue===y.oldValue?U():setTimeout(U,10)}notifyListeners(y,E){this.localCache[y]=E;const P=this.listeners[y];if(P)for(const U of Array.from(P))U(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var P=()=>super._set,U=this;return(0,h.Z)(function*(){yield P().call(U,y,E),U.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,P=this;return(0,h.Z)(function*(){const U=yield E().call(P,y);return P.localCache[y]=JSON.stringify(U),U})()}_remove(y){var E=()=>super._remove,P=this;return(0,h.Z)(function*(){yield E().call(P,y),delete P.localCache[y]})()}}return w.type="LOCAL",w})(),T=(()=>{class w extends wl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let q=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(U=>U.isListeningto(y));if(E)return E;const P=new w(y);return this.receivers.push(P),P}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,h.Z)(function*(){const P=y,{eventId:U,eventType:re,data:be}=P.data,tt=E.handlersMap[re];if(!tt?.size)return;P.ports[0].postMessage({status:"ack",eventId:U,eventType:re});const mt=Array.from(tt).map(function(){var Rt=(0,h.Z)(function*(On){return On(P.origin,be)});return function(On){return Rt.apply(this,arguments)}}()),Ft=yield function N(w){return Promise.all(w.map(function(){var g=(0,h.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(mt);P.ports[0].postMessage({status:"done",eventId:U,eventType:re,response:Ft})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Se(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class ft{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var P=this;return(0,h.Z)(function*(){const U=typeof MessageChannel<"u"?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let re,be;return new Promise((tt,mt)=>{const Ft=Se("",20);U.port1.start();const Rt=setTimeout(()=>{mt(new Error("unsupported_event"))},E);be={messageChannel:U,onMessage(On){const uo=On;if(uo.data.eventId===Ft)switch(uo.data.status){case"ack":clearTimeout(Rt),re=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),tt(uo.data.response);break;default:clearTimeout(Rt),clearTimeout(re),mt(new Error("invalid_response"))}}},P.handlers.add(be),U.port1.addEventListener("message",be.onMessage),P.target.postMessage({eventType:g,eventId:Ft,data:y},[U.port2])}).finally(()=>{be&&P.removeMessageHandler(be)})})()}}function Yt(){return window}function Dr(){return typeof Yt().WorkerGlobalScope<"u"&&"function"==typeof Yt().importScripts}function ys(){return(ys=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qs="firebaseLocalStorageDb",Js="firebaseLocalStorage",kd="fbase_key";class xa{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Au(w,g){return w.transaction([Js],g?"readwrite":"readonly").objectStore(Js)}function bl(){const w=indexedDB.open(Qs,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Js,{keyPath:kd})}catch(P){y(P)}}),w.addEventListener("success",(0,h.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Js)?g(E):(E.close(),yield function Wh(){const w=indexedDB.deleteDatabase(Qs);return new xa(w).toPromise()}(),g(yield bl()))}))})}function _s(w,g,y){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,h.Z)(function*(w,g,y){const E=Au(w,!0).put({[kd]:g,value:y});return new xa(E).toPromise()})).apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(w,g){const y=Au(w,!1).get(g),E=yield new xa(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ra(w,g){const y=Au(w,!0).delete(g);return new xa(y).toPromise()}const El=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,h.Z)(function*(){return y.db||(y.db=yield bl()),y.db})()}_withRetries(y){var E=this;return(0,h.Z)(function*(){let P=0;for(;;)try{const U=yield E._openDb();return yield y(U)}catch(U){if(P++>3)throw U;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,h.Z)(function*(){return Dr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,h.Z)(function*(){y.receiver=q._getInstance(function xc(){return Dr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(P,U){return{keyProcessed:(yield y._poll()).includes(U.key)}});return function(P,U){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(P,U){return["keyChanged"]});return function(P,U){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,h.Z)(function*(){var E,P;if(y.activeServiceWorker=yield function Mi(){return ys.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ft(y.activeServiceWorker);const U=yield y.sender._send("ping",{},800);!U||(null===(E=U[0])||void 0===E?void 0:E.fulfilled)&&(null===(P=U[0])||void 0===P?void 0:P.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Sc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const y=yield bl();return yield _s(y,vs,"1"),yield Ra(y,vs),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var P=this;return(0,h.Z)(function*(){return P._withPendingWrite((0,h.Z)(function*(){return yield P._withRetries(U=>_s(U,y,E)),P.localCache[y]=E,P.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,h.Z)(function*(){const P=yield E._withRetries(U=>function Rc(w,g){return Su.apply(this,arguments)}(U,y));return E.localCache[y]=P,P})()}_remove(y){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(P=>Ra(P,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,h.Z)(function*(){const E=yield y._withRetries(re=>{const be=Au(re,!1).getAll();return new xa(be).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const P=[],U=new Set;for(const{fbase_key:re,value:be}of E)U.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(be)&&(y.notifyListeners(re,be),P.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!U.has(re)&&(y.notifyListeners(re,null),P.push(re));return P})()}notifyListeners(y,E){this.localCache[y]=E;const P=this.listeners[y];if(P)for(const U of Array.from(P))U(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Cl(w,g){return In(w,"POST","/v2/accounts/mfaSignIn:start",kt(w,g))}function Xs(){return(Xs=(0,h.Z)(function*(w){return(yield In(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Dl(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=P=>{const U=Me("internal-error");U.customData=P,y(U)},E.type="text/javascript",E.charset="UTF-8",function Il(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function Pc(w){return`__${w}${Math.floor(1e6*Math.random())}`}const xu=1e12;class zn{constructor(g){this.auth=g,this.counter=xu,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Xm(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||xu;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||xu))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,h.Z)(function*(){var E;return null===(E=y._widgets.get(g||xu))||void 0===E||E.execute(),""})()}}class Xm{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof g?document.getElementById(g):g;Y(P,"argument-error",{appName:y}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function hw(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ev=Pc("rcb"),fw=new vn(3e4,6e4);class Yp{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Yt().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return Y(function yC(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Yt().grecaptcha):new Promise((E,P)=>{const U=Yt().setTimeout(()=>{P(Me(g,"network-request-failed"))},fw.get());Yt()[ev]=()=>{Yt().clearTimeout(U),delete Yt()[ev];const be=Yt().grecaptcha;if(!be)return void P(Me(g,"internal-error"));const tt=be.render;be.render=(mt,Ft)=>{const Rt=tt(mt,Ft);return this.counter++,Rt},this.hostLanguage=y,E(be)},Dl(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:ev,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(U),P(Me(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Yt().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Od{load(g){return(0,h.Z)(function*(){return new zn(g)})()}clearedOneInstance(){}}const gw="recaptcha",mw={theme:"light",type:"image"};class ti{constructor(g,y=Object.assign({},mw),E){this.parameters=y,this.type=gw,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hn(E),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof g?document.getElementById(g):g;Y(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Od:new Yp,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(U=>{const re=be=>{!be||(g.tokenChangeListeners.delete(re),U(be))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Yt()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){Y(bt()&&!Dr(),g.auth,"internal-error"),yield function En(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Wi(w){return Xs.apply(this,arguments)}(g.auth);Y(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oo{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Wo._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function so(){return(so=(0,h.Z)(function*(w,g,y){const E=Hn(w),P=yield ea(E,g,(0,H.m9)(y));return new oo(P,U=>Yn(E,U))})).apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w);yield cn(!1,E,"phone");const P=yield ea(E.auth,g,(0,H.m9)(y));return new oo(P,U=>zs(E,U))})).apply(this,arguments)}function di(){return(di=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w),P=yield ea(E.auth,g,(0,H.m9)(y));return new oo(P,U=>Mo(E,U))})).apply(this,arguments)}function ea(w,g,y){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,h.Z)(function*(w,g,y){var E;const P=yield y.verify();try{let U;if(Y("string"==typeof P,w,"argument-error"),Y(y.type===gw,w,"argument-error"),U="string"==typeof g?{phoneNumber:g}:g,"session"in U){const re=U.session;if("phoneNumber"in U)return Y("enroll"===re.type,w,"internal-error"),(yield yl(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{Y("signin"===re.type,w,"internal-error");const be=(null===(E=U.multiFactorHint)||void 0===E?void 0:E.uid)||U.multiFactorUid;return Y(be,w,"missing-multi-factor-info"),(yield Cl(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:be,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield Vh(w,{phoneNumber:U.phoneNumber,recaptchaToken:P});return re}}finally{y._reset()}})).apply(this,arguments)}function Fd(){return(Fd=(0,h.Z)(function*(w,g){yield qo((0,H.m9)(w),g)})).apply(this,arguments)}let Mu=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Hn(y)}verifyPhoneNumber(y,E){return ea(this.auth,y,(0,H.m9)(E))}static credential(y,E){return Wo._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:P}=y;return E&&P?Wo._fromTokenResponse(E,P):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ka(w,g){return g?de(g):(Y(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class bs extends Pr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Cr(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Cr(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Cr(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function yt(w){return Gi(w.auth,new bs(w),w.bypassAuthState)}function ku(w){const{auth:g,user:y}=w;return Y(y,g,"internal-error"),ds(y,new bs(w),w.bypassAuthState)}function ta(w){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,h.Z)(function*(w){const{auth:g,user:y}=w;return Y(y,g,"internal-error"),qo(y,new bs(w),w.bypassAuthState)})).apply(this,arguments)}class Al{constructor(g,y,E,P,U=!1){this.auth=g,this.resolver=E,this.user=P,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,h.Z)(function*(E,P){g.pendingPromise={resolve:E,reject:P};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(U){g.reject(U)}});return function(E,P){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:P,postBody:U,tenantId:re,error:be,type:tt}=g;if(be)return void y.reject(be);const mt={auth:y.auth,requestUri:E,sessionId:P,tenantId:re||void 0,postBody:U||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(tt)(mt))}catch(Ft){y.reject(Ft)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return yt;case"linkViaPopup":case"linkViaRedirect":return ta;case"reauthViaPopup":case"reauthViaRedirect":return ku;default:je(this.auth,"internal-error")}}resolve(g){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cr=new vn(2e3,1e4);function Sl(){return(Sl=(0,h.Z)(function*(w,g,y){const E=Hn(w);nt(w,g,So);const P=ka(E,y);return new na(E,"signInViaPopup",g,P).executeNotNull()})).apply(this,arguments)}function Ud(){return(Ud=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w);nt(E.auth,g,So);const P=ka(E.auth,y);return new na(E.auth,"reauthViaPopup",g,P,E).executeNotNull()})).apply(this,arguments)}function Nu(){return(Nu=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w);nt(E.auth,g,So);const P=ka(E.auth,y);return new na(E.auth,"linkViaPopup",g,P,E).executeNotNull()})).apply(this,arguments)}let na=(()=>{class w extends Al{constructor(y,E,P,U,re){super(y,E,U,re),this.provider=P,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,h.Z)(function*(){const E=yield y.execute();return Y(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,h.Z)(function*(){ne(1===y.filter.length,"Popup operations only handle one event");const E=Se();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(P=>{y.reject(P)}),y.resolver._isIframeWebStorageSupported(y.auth,P=>{P||y.reject(Me(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,P;this.pollId=null!==(P=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,cr.get())};y()}}return w.currentPopupAction=null,w})();const Fo=new Map;class Vd extends Al{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,h.Z)(function*(){let E=Fo.get(y.auth._key());if(!E){try{const U=(yield function xl(w,g){return qi.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(U)}catch(P){E=()=>Promise.reject(P)}Fo.set(y.auth._key(),E)}return y.bypassAuthState||Fo.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const P=yield E.auth._redirectUserForId(g.eventId);if(P)return E.user=P,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function qi(){return(qi=(0,h.Z)(function*(w,g){const y=dr(g),E=Is(w);if(!(yield E._isAvailable()))return!1;const P="true"===(yield E._get(y));return yield E._remove(y),P})).apply(this,arguments)}function Cs(w,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(w,g){return Is(w)._set(dr(g),"true")})).apply(this,arguments)}function ra(w,g){Fo.set(w._key(),g)}function Is(w){return de(w._redirectPersistence)}function dr(w){return ie("pendingRedirect",w.config.apiKey,w.name)}function S(){return(S=(0,h.Z)(function*(w,g,y){const E=Hn(w);nt(w,g,So);const P=ka(E,y);return yield Cs(P,E),P._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w);nt(E.auth,g,So);const P=ka(E.auth,y);yield Cs(P,E.auth);const U=yield xt(E);return P._openRedirect(E.auth,g,"reauthViaRedirect",U)})).apply(this,arguments)}function Ue(){return(Ue=(0,h.Z)(function*(w,g,y){const E=(0,H.m9)(w);nt(E.auth,g,So);const P=ka(E.auth,y);yield cn(!1,E,g.providerId),yield Cs(P,E.auth);const U=yield xt(E);return P._openRedirect(E.auth,g,"linkViaRedirect",U)})).apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(w,g){return yield Hn(w)._initializationPromise,Ut(w,g,!1)})).apply(this,arguments)}function Ut(w,g){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,h.Z)(function*(w,g,y=!1){const E=Hn(w),P=ka(E,g),re=yield new Vd(E,P,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function xt(w){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(w){const g=Se(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Rl{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Jo(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wt(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!Wt(g)){const P=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Me(this.auth,P))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ds(g))}saveEventToCache(g){this.cachedEventUids.add(Ds(g)),this.lastProcessedEventTime=Date.now()}}function Ds(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Wt({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function ia(w){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(w,g={}){return In(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Ml=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pa=/^https?/;function Qp(){return(Qp=(0,h.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield ia(w);for(const y of g)try{if(rv(y))return}catch{}je(w,"unauthorized-domain")})).apply(this,arguments)}function rv(w){const g=Ke(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!Pa.test(y))return!1;if(Ml.test(w))return E===w;const P=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(E)}const iv=new vn(3e4,6e4);function vw(){const w=Yt().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Xo=null;function Jp(w){return Xo=Xo||function $r(w){return new Promise((g,y)=>{var E,P,U;function re(){vw(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{vw(),y(Me(w,"network-request-failed"))},timeout:iv.get()})}if(null!==(P=null===(E=Yt().gapi)||void 0===E?void 0:E.iframes)&&void 0!==P&&P.Iframe)g(gapi.iframes.getContext());else{if(null===(U=Yt().gapi)||void 0===U||!U.load){const be=Pc("iframefcb");return Yt()[be]=()=>{gapi.load?re():y(Me(w,"network-request-failed"))},Dl(`https://apis.google.com/js/api.js?onload=${be}`).catch(tt=>y(tt))}re()}}).catch(g=>{throw Xo=null,g})}(w),Xo}const ov=new vn(5e3,15e3),yw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sv(w){const g=w.config;Y(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?xn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:pe.SDK_VERSION},P=eg.get(w.config.apiHost);P&&(E.eid=P);const U=w._getFrameworks();return U.length&&(E.fw=U.join(",")),`${y}?${(0,H.xO)(E).slice(1)}`}function Ou(){return Ou=(0,h.Z)(function*(w){const g=yield Jp(w),y=Yt().gapi;return Y(y,w,"internal-error"),g.open({where:document.body,url:sv(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yw,dontclear:!0},E=>new Promise(function(){var P=(0,h.Z)(function*(U,re){yield E.restyle({setHideOnLeave:!1});const be=Me(w,"network-request-failed"),tt=Yt().setTimeout(()=>{re(be)},ov.get());function mt(){Yt().clearTimeout(tt),U(E)}E.ping(mt).then(mt,()=>{re(be)})});return function(U,re){return P.apply(this,arguments)}}()))}),Ou.apply(this,arguments)}const qh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yh(w,g,y,E,P,U){Y(w.config.authDomain,w,"auth-domain-config-required"),Y(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:pe.SDK_VERSION,eventId:P};if(g instanceof So){g.setDefaultLanguage(w.languageCode),re.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[tt,mt]of Object.entries(U||{}))re[tt]=mt}if(g instanceof xo){const tt=g.getScopes().filter(mt=>""!==mt);tt.length>0&&(re.scopes=tt.join(","))}w.tenantId&&(re.tid=w.tenantId);const be=re;for(const tt of Object.keys(be))void 0===be[tt]&&delete be[tt];return`${function Qh({config:w}){return w.emulator?xn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,H.xO)(be).slice(1)}`}const Lu="webStorageSupport";class es extends class _w{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new es(g)}_finalizeEnroll(g,y,E){return function _l(w,g){return In(w,"POST","/v2/accounts/mfaEnrollment:finalize",kt(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function kc(w,g){return In(w,"POST","/v2/accounts/mfaSignIn:finalize",kt(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kl=(()=>{class w{constructor(){}static assertion(y){return es._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var ng="@firebase/auth",cv="0.20.11";class wC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,h.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var P;g((null===(P=E)||void 0===P?void 0:P.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Uu(){return window}function Vu(){return(Vu=(0,h.Z)(function*(w,g,y){var E;const{BuildInfo:P}=Uu();ne(g.sessionId,"AuthEvent did not contain a session ID");const U=yield Bu(g.sessionId),re={};return Jt()?re.ibi=P.packageName:un()?re.apn=P.packageName:je(w,"operation-not-supported-in-this-environment"),P.displayName&&(re.appDisplayName=P.displayName),re.sessionId=U,Yh(w,y,g.type,void 0,null!==(E=g.eventId)&&void 0!==E?E:void 0,re)})).apply(this,arguments)}function Lc(){return(Lc=(0,h.Z)(function*(w){const{BuildInfo:g}=Uu(),y={};Jt()?y.iosBundleId=g.packageName:un()?y.androidPackageName=g.packageName:je(w,"operation-not-supported-in-this-environment"),yield ia(w,y)})).apply(this,arguments)}function fv(){return(fv=(0,h.Z)(function*(w,g,y){const{cordova:E}=Uu();let P=()=>{};try{yield new Promise((U,re)=>{let be=null;function tt(){var Rt;U();const On=null===(Rt=E.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof On&&On(),"function"==typeof y?.close&&y.close()}function mt(){be||(be=window.setTimeout(()=>{re(Me(w,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&mt()}g.addPassiveListener(tt),document.addEventListener("resume",mt,!1),un()&&document.addEventListener("visibilitychange",Ft,!1),P=()=>{g.removePassiveListener(tt),document.removeEventListener("resume",mt,!1),document.removeEventListener("visibilitychange",Ft,!1),be&&window.clearTimeout(be)}})}finally{P()}})).apply(this,arguments)}function Bu(w){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,h.Z)(function*(w){const g=$d(w),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(P=>P.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $d(w){if(ne(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const g=new ArrayBuffer(w.length),y=new Uint8Array(g);for(let E=0;E<w.length;E++)y[E]=w.charCodeAt(E);return y}(0,H.Pz)("authIdTokenMaxAge"),function EC(w){(0,pe._registerComponent)(new me.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),P=g.getProvider("heartbeat"),{apiKey:U,authDomain:re}=E.options;return((be,tt)=>{Y(U&&!U.includes(":"),"invalid-api-key",{appName:be.name}),Y(!re?.includes(":"),"argument-error",{appName:be.name});const mt={apiKey:U,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rr(w)},Ft=new Kt(be,tt,mt);return function qe(w,g){const y=g?.persistence||[],E=(Array.isArray(y)?y:[y]).map(de);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(Ft,y),Ft})(E,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new me.wA("auth-internal",g=>{const y=Hn(g.getProvider("auth").getImmediate());return new wC(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(ng,cv,function bC(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,pe.registerVersion)(ng,cv,"esm2017")}("Browser");class ig extends Rl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,h.Z)(function*(){yield g.initPromise})()}}function gv(w){return og.apply(this,arguments)}function og(){return(og=(0,h.Z)(function*(w){const g=yield Gd()._get(La(w));return g&&(yield Gd()._remove(La(w))),g})).apply(this,arguments)}function Jh(){const w=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const E=Math.floor(Math.random()*g.length);w.push(g.charAt(E))}return w.join("")}function Gd(){return de(Yo)}function La(w){return ie("authEvent",w.config.apiKey,w.name)}function Xh(w){if(!w?.includes("?"))return{};const[g,...y]=w.split("?");return(0,H.zd)(y.join("?"))}function tf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Me("no-auth-event")}}function rf(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Vc(w=(0,H.z$)()){return!("file:"!==rf()&&"ionic:"!==rf()&&"capacitor:"!==rf()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function bv(){try{const w=self.localStorage,g=Se();if(w)return w.setItem(g,"1"),w.removeItem(g),!function wv(w=(0,H.z$)()){return function yv(){return(0,H.w1)()&&11===document?.documentMode}()||function _v(w=(0,H.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,H.hl)()}catch{return sf()&&(0,H.hl)()}return!1}function sf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function af(){return(function TC(){return"http:"===rf()||"https:"===rf()}()||(0,H.ru)()||Vc())&&!function ag(){return(0,H.b$)()||(0,H.UG)()}()&&bv()&&!sf()}function zd(){return Vc()&&typeof document<"u"}function lf(){return(lf=(0,h.Z)(function*(){return!!zd()&&new Promise(w=>{const g=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),w(!0)})})})).apply(this,arguments)}const ki={LOCAL:"local",NONE:"none",SESSION:"session"},lo=Y,Uo="persistence";function Bc(w){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,h.Z)(function*(w){yield w._initializationPromise;const g=qd(),y=ie(Uo,w.config.apiKey,w.name);g&&g.setItem(y,w._getPersistence())})).apply(this,arguments)}function qd(){var w;try{return(null===(w=function Wd(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const uf=Y;class _i{constructor(){this.browserResolver=de(class uv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T,this._completeRedirectFn=Ut,this._overrideRedirectResult=ra}_openPopup(g,y,E,P){var U=this;return(0,h.Z)(function*(){var re;ne(null===(re=U.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const be=Yh(g,y,E,Ke(),P);return function Oa(w,g,y,E=500,P=600){const U=Math.max((window.screen.availHeight-P)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let be="";const tt=Object.assign(Object.assign({},qh),{width:E.toString(),height:P.toString(),top:U,left:re}),mt=(0,H.z$)().toLowerCase();y&&(be=hn(mt)?"_blank":y),lt(mt)&&(g=g||"http://localhost",tt.scrollbars="yes");const Ft=Object.entries(tt).reduce((On,[uo,Gu])=>`${On}${uo}=${Gu},`,"");if(function Jr(w=(0,H.z$)()){var g;return Jt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(mt)&&"_self"!==be)return function lv(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",be),new Bd(null);const Rt=window.open(g||"",be,Ft);Y(Rt,w,"popup-blocked");try{Rt.focus()}catch{}return new Bd(Rt)}(g,be,Se())})()}_openRedirect(g,y,E,P){var U=this;return(0,h.Z)(function*(){return yield U._originValidation(g),function ur(w){Yt().location.href=w}(Yh(g,y,E,Ke(),P)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:P,promise:U}=this.eventManagers[y];return P?Promise.resolve(P):(ne(U,"If manager is not set, promise should be"),U)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,h.Z)(function*(){const E=yield function av(w){return Ou.apply(this,arguments)}(g),P=new Rl(g);return E.register("authEvent",U=>(Y(U?.authEvent,g,"invalid-auth-event"),{status:P.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:P},y.iframes[g._key()]=E,P})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Lu,{type:Lu},P=>{var U;const re=null===(U=P?.[0])||void 0===U?void 0:U[Lu];void 0!==re&&y(!!re),je(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Lo(w){return Qp.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return jo()||Tt()||Jt()}}),this.cordovaResolver=de(class ef{constructor(){this._redirectPersistence=T,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ut,this._overrideRedirectResult=ra}_initialize(g){var y=this;return(0,h.Z)(function*(){const E=g._key();let P=y.eventManagers.get(E);return P||(P=new ig(g),y.eventManagers.set(E,P),y.attachCallbackListeners(g,P)),P})()}_openPopup(g){je(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,E,P){var U=this;return(0,h.Z)(function*(){!function DC(w){var g,y,E,P,U,re,be,tt,mt,Ft;const Rt=Uu();Y("function"==typeof(null===(g=Rt?.universalLinks)||void 0===g?void 0:g.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Y(typeof(null===(y=Rt?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Y("function"==typeof(null===(U=null===(P=null===(E=Rt?.cordova)||void 0===E?void 0:E.plugins)||void 0===P?void 0:P.browsertab)||void 0===U?void 0:U.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(tt=null===(be=null===(re=Rt?.cordova)||void 0===re?void 0:re.plugins)||void 0===be?void 0:be.browsertab)||void 0===tt?void 0:tt.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(Ft=null===(mt=Rt?.cordova)||void 0===mt?void 0:mt.InAppBrowser)||void 0===Ft?void 0:Ft.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const re=yield U._initialize(g);yield re.initialized(),re.resetRedirect(),function Or(){Fo.clear()}(),yield U._originValidation(g);const be=function pv(w,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:Jh(),postBody:null,tenantId:w.tenantId,error:Me(w,"no-auth-event")}}(g,E,P);yield function Uc(w,g){return Gd()._set(La(w),g)}(g,be);const tt=yield function ts(w,g,y){return Vu.apply(this,arguments)}(g,be,y),mt=yield function bw(w){const{cordova:g}=Uu();return new Promise(y=>{g.plugins.browsertab.isAvailable(E=>{let P=null;E?g.plugins.browsertab.openUrl(w):P=g.InAppBrowser.open(w,function kr(w=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(P)})})}(tt);return function IC(w,g,y){return fv.apply(this,arguments)}(g,re,mt)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Pl(w){return Lc.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:E,handleOpenURL:P,BuildInfo:U}=Uu(),re=setTimeout((0,h.Z)(function*(){yield gv(g),y.onEvent(tf())}),500),be=function(){var Ft=(0,h.Z)(function*(Rt){clearTimeout(re);const On=yield gv(g);let uo=null;On&&Rt?.url&&(uo=function sg(w,g){var y,E;const P=function Tr(w){const g=Xh(w),y=g.link?decodeURIComponent(g.link):void 0,E=Xh(y).link,P=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Xh(P).link||P||E||y||w}(g);if(P.includes("/__/auth/callback")){const U=Xh(P),re=U.firebaseError?function Cw(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(U.firebaseError)):null,be=null===(E=null===(y=re?.code)||void 0===y?void 0:y.split("auth/"))||void 0===E?void 0:E[1],tt=be?Me(be):null;return tt?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:P,postBody:null}}return null}(On,Rt.url)),y.onEvent(uo||tf())});return function(On){return Ft.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,be);const tt=P,mt=`${U.packageName.toLowerCase()}://`;Uu().handleOpenURL=function(){var Ft=(0,h.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(mt)&&be({url:Rt}),"function"==typeof tt)try{tt(Rt)}catch(On){console.error(On)}});return function(Rt){return Ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=T,this._completeRedirectFn=Ut,this._overrideRedirectResult=ra}_initialize(g){var y=this;return(0,h.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,E,P){var U=this;return(0,h.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openPopup(g,y,E,P)})()}_openRedirect(g,y,E,P){var U=this;return(0,h.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openRedirect(g,y,E,P)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return zd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return uf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,h.Z)(function*(){if(g.underlyingResolver)return;const y=yield function AC(){return lf.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function cf(w){return w.unwrap()}function Cv(w){return Kd(w)}function Kd(w){const{_tokenResponse:g}=w instanceof H.ZR?w.customData:w;if(!g)return null;if(!(w instanceof H.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Mu.credentialFromResult(w);const y=g.providerId;if(!y||"password"===y)return null;let E;switch(y){case"google.com":E=sl;break;case"facebook.com":E=ma;break;case"github.com":E=hu;break;case"twitter.com":E=vi;break;default:const{oauthIdToken:P,oauthAccessToken:U,oauthTokenSecret:re,pendingToken:be,nonce:tt}=g;return U||re||P||be?be?y.startsWith("saml.")?Hr._create(y,be):mi._fromParams({providerId:y,signInMethod:y,pendingToken:be,idToken:P,accessToken:U}):new $i(y).credential({idToken:P,accessToken:U,rawNonce:tt}):null}return w instanceof H.ZR?E.credentialFromError(w):E.credentialFromResult(w)}function ni(w,g){return g.catch(y=>{throw y instanceof H.ZR&&function lg(w,g){var y,E;const P=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=g)||void 0===E?void 0:E.code))g.resolver=new Dw(w,function Qn(w,g){var y;const E=(0,H.m9)(w),P=g;return Y(g.customData.operationType,E,"argument-error"),Y(null===(y=P.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),vl._fromError(E,P)}(w,g));else if(P){const U=Kd(g),re=g;U&&(re.credential=U,re.tenantId=P.tenantId||void 0,re.email=P.email||void 0,re.phoneNumber=P.phoneNumber||void 0)}}(w,y),y}).then(y=>{const P=y.user;return{operationType:y.operationType,credential:Cv(y),additionalUserInfo:gl(y),user:Ts.getOrCreate(P)}})}function ju(w,g){return ug.apply(this,arguments)}function ug(){return(ug=(0,h.Z)(function*(w,g){const y=yield g;return{verificationId:y.verificationId,confirm:E=>ni(w,y.confirm(E))}})).apply(this,arguments)}class Dw{constructor(g,y){this.resolver=y,this.auth=function Zd(w){return w.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return ni(cf(this.auth),this.resolver.resolveSignIn(g))}}class Ts{constructor(g){this._delegate=g,this.multiFactor=function Ys(w){const g=(0,H.m9)(w);return zi.has(g)||zi.set(g,io._fromUser(g)),zi.get(g)}(g)}static getOrCreate(g){return Ts.USER_MAP.has(g)||Ts.USER_MAP.set(g,new Ts(g)),Ts.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,h.Z)(function*(){return ni(y.auth,zs(y._delegate,g))})()}linkWithPhoneNumber(g,y){var E=this;return(0,h.Z)(function*(){return ju(E.auth,function ir(w,g,y){return Oo.apply(this,arguments)}(E._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,h.Z)(function*(){return ni(y.auth,function Oc(w,g,y){return Nu.apply(this,arguments)}(y._delegate,g,_i))})()}linkWithRedirect(g){var y=this;return(0,h.Z)(function*(){return yield Bc(Hn(y.auth)),function se(w,g,y){return function he(w,g,y){return Ue.apply(this,arguments)}(w,g,y)}(y._delegate,g,_i)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,h.Z)(function*(){return ni(y.auth,Mo(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return ju(this.auth,function Ru(w,g,y){return di.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return ni(this.auth,function nv(w,g,y){return Ud.apply(this,arguments)}(this._delegate,g,_i))}reauthenticateWithRedirect(g){var y=this;return(0,h.Z)(function*(){return yield Bc(Hn(y.auth)),function R(w,g,y){return function F(w,g,y){return z.apply(this,arguments)}(w,g,y)}(y._delegate,g,_i)})()}sendEmailVerification(g){return function _u(w,g){return Da.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,h.Z)(function*(){return yield function ei(w,g){return va.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function Iu(w,g){return fs((0,H.m9)(w),g,null)}(this._delegate,g)}updatePassword(g){return function Po(w,g){return fs((0,H.m9)(w),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function tv(w,g){return Fd.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Eu(w,g){return Cu.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function wu(w,g,y){return Ta.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ts.USER_MAP=new WeakMap;const Nl=Y;let cg=(()=>{class w{constructor(y,E){if(this.app=y,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:P}=y.options;Nl(P,"invalid-api-key",{appName:y.name}),Nl(P,"invalid-api-key",{appName:y.name});const U=typeof window<"u"?_i:void 0;this._delegate=E.initialize({options:{persistence:Iv(P,y.name),popupRedirectResolver:U}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ts.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,E){!function Xa(w,g,y){const E=Hn(w);Y(E._canInitEmulator,E,"emulator-config-failed"),Y(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const P=!!y?.disableWarnings,U=Xi(g),{host:re,port:be}=function pr(w){const g=Xi(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(E);if(P){const U=P[1];return{host:U,port:To(E.substr(U.length+1))}}{const[U,re]=E.split(":");return{host:U,port:To(re)}}}(g);E.config.emulator={url:`${U}//${re}${null===be?"":`:${be}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:be,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function Go(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,y,E)}applyActionCode(y){return function xi(w,g){return wa.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return qs(this._delegate,y)}confirmPasswordReset(y,E){return function _a(w,g,y){return Ws.apply(this,arguments)}(this._delegate,y,E)}createUserWithEmailAndPassword(y,E){var P=this;return(0,h.Z)(function*(){return ni(P._delegate,function Zs(w,g,y){return Gn.apply(this,arguments)}(P._delegate,y,E))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function Ca(w,g){return Ia.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Ri(w,g){return"EMAIL_SIGNIN"===il.parseLink(g)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,h.Z)(function*(){Nl(af(),y._delegate,"operation-not-supported-in-this-environment");const E=yield function Ye(w,g){return Ct.apply(this,arguments)}(y._delegate,_i);return E?ni(y._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Hu(w,g){Hn(w)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,E,P){const{next:U,error:re,complete:be}=df(y,E,P);return this._delegate.onAuthStateChanged(U,re,be)}onIdTokenChanged(y,E,P){const{next:U,error:re,complete:be}=df(y,E,P);return this._delegate.onIdTokenChanged(U,re,be)}sendSignInLinkToEmail(y,E){return function vu(w,g,y){return hs.apply(this,arguments)}(this._delegate,y,E)}sendPasswordResetEmail(y,E){return function fl(w,g,y){return $n.apply(this,arguments)}(this._delegate,y,E||void 0)}setPersistence(y){var E=this;return(0,h.Z)(function*(){let P;switch(function Ev(w,g){lo(Object.values(ki).includes(g),w,"invalid-persistence-type"),(0,H.b$)()?lo(g!==ki.SESSION,w,"unsupported-persistence-type"):(0,H.UG)()?lo(g===ki.NONE,w,"unsupported-persistence-type"):sf()?lo(g===ki.NONE||g===ki.LOCAL&&(0,H.hl)(),w,"unsupported-persistence-type"):lo(g===ki.NONE||bv(),w,"unsupported-persistence-type")}(E._delegate,y),y){case ki.SESSION:P=T;break;case ki.LOCAL:P=(yield de(El)._isAvailable())?El:Yo;break;case ki.NONE:P=Z;break;default:return je("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(P)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ni(this._delegate,function xd(w){return Nn.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ni(this._delegate,Yn(this._delegate,y))}signInWithCustomToken(y){return ni(this._delegate,function pu(w,g){return ya.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,E){return ni(this._delegate,function ro(w,g,y){return Yn((0,H.m9)(w),to.credential(g,y))}(this._delegate,y,E))}signInWithEmailLink(y,E){return ni(this._delegate,function $h(w,g,y){return Ea.apply(this,arguments)}(this._delegate,y,E))}signInWithPhoneNumber(y,E){return ju(this._delegate,function Et(w,g,y){return so.apply(this,arguments)}(this._delegate,y,E))}signInWithPopup(y){var E=this;return(0,h.Z)(function*(){return Nl(af(),E._delegate,"operation-not-supported-in-this-environment"),ni(E._delegate,function Ld(w,g,y){return Sl.apply(this,arguments)}(E._delegate,y,_i))})()}signInWithRedirect(y){var E=this;return(0,h.Z)(function*(){return Nl(af(),E._delegate,"operation-not-supported-in-this-environment"),yield Bc(E._delegate),function Jn(w,g,y){return function Fc(w,g,y){return S.apply(this,arguments)}(w,g,y)}(E._delegate,y,_i)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function ba(w,g){return mu.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=ki,w})();function df(w,g,y){let E=w;"function"!=typeof w&&({next:E,error:g,complete:y}=w);const P=E;return{next:re=>P(re&&Ts.getOrCreate(re)),error:g,complete:y}}function Iv(w,g){const y=function Ua(w,g){const y=qd();if(!y)return[];const E=ie(Uo,w,g);switch(y.getItem(E)){case ki.NONE:return[Z];case ki.LOCAL:return[El,T];case ki.SESSION:return[T];default:return[]}}(w,g);if(typeof self<"u"&&!y.includes(El)&&y.push(El),typeof window<"u")for(const E of[Yo,T])y.includes(E)||y.push(E);return y.includes(Z)||y.push(Z),y}class hf{constructor(){this.providerId="phone",this._delegate=new Mu(cf(j.Z.auth()))}static credential(g,y){return Mu.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}hf.PHONE_SIGN_IN_METHOD=Mu.PHONE_SIGN_IN_METHOD,hf.PROVIDER_ID=Mu.PROVIDER_ID;const ff=Y;class pf{constructor(g,y,E=j.Z.app()){var P;ff(null===(P=E.options)||void 0===P?void 0:P.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ti(g,y,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tw(w){w.INTERNAL.registerComponent(new me.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),E=g.getProvider("auth");return new cg(y,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:to,FacebookAuthProvider:ma,GithubAuthProvider:hu,GoogleAuthProvider:sl,OAuthProvider:$i,SAMLAuthProvider:Ai,PhoneAuthProvider:hf,PhoneMultiFactorGenerator:kl,RecaptchaVerifier:pf,TwitterAuthProvider:vi,Auth:cg,AuthCredential:Pr,Error:H.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.24")}(j.Z)},9751:(wt,fe,V)=>{"use strict";V.d(fe,{y:()=>we});var h=V(930),j=V(727),H=V(8822),pe=V(9635),ge=V(2416),Ce=V(576),me=V(2806);let we=(()=>{class oe{constructor(He){He&&(this._subscribe=He)}lift(He){const Oe=new oe;return Oe.source=this,Oe.operator=He,Oe}subscribe(He,Oe,it){const xe=function J(oe){return oe&&oe instanceof h.Lv||function Q(oe){return oe&&(0,Ce.m)(oe.next)&&(0,Ce.m)(oe.error)&&(0,Ce.m)(oe.complete)}(oe)&&(0,j.Nn)(oe)}(He)?He:new h.Hp(He,Oe,it);return(0,me.x)(()=>{const{operator:ve,source:We}=this;xe.add(ve?ve.call(xe,We):We?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(He){try{return this._subscribe(He)}catch(Oe){He.error(Oe)}}forEach(He,Oe){return new(Oe=Ie(Oe))((it,xe)=>{const ve=new h.Hp({next:We=>{try{He(We)}catch(vt){xe(vt),ve.unsubscribe()}},error:xe,complete:it});this.subscribe(ve)})}_subscribe(He){var Oe;return null===(Oe=this.source)||void 0===Oe?void 0:Oe.subscribe(He)}[H.L](){return this}pipe(...He){return(0,pe.U)(He)(this)}toPromise(He){return new(He=Ie(He))((Oe,it)=>{let xe;this.subscribe(ve=>xe=ve,ve=>it(ve),()=>Oe(xe))})}}return oe.create=Qe=>new oe(Qe),oe})();function Ie(oe){var Qe;return null!==(Qe=oe??ge.v.Promise)&&void 0!==Qe?Qe:Promise}},7579:(wt,fe,V)=>{"use strict";V.d(fe,{x:()=>me});var h=V(9751),j=V(727);const pe=(0,V(3888).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=V(8737),Ce=V(2806);let me=(()=>{class Ie extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const oe=new we(this,this);return oe.operator=J,oe}_throwIfClosed(){if(this.closed)throw new pe}next(J){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next(J)}})}error(J){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:oe}=this;for(;oe.length;)oe.shift().error(J)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:oe,isStopped:Qe,observers:He}=this;return oe||Qe?j.Lc:(this.currentObservers=null,He.push(J),new j.w0(()=>{this.currentObservers=null,(0,ge.P)(He,J)}))}_checkFinalizedStatuses(J){const{hasError:oe,thrownError:Qe,isStopped:He}=this;oe?J.error(Qe):He&&J.complete()}asObservable(){const J=new h.y;return J.source=this,J}}return Ie.create=(Q,J)=>new we(Q,J),Ie})();class we extends me{constructor(Q,J){super(),this.destination=Q,this.source=J}next(Q){var J,oe;null===(oe=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===oe||oe.call(J,Q)}error(Q){var J,oe;null===(oe=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===oe||oe.call(J,Q)}complete(){var Q,J;null===(J=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===J||J.call(Q)}_subscribe(Q){var J,oe;return null!==(oe=null===(J=this.source)||void 0===J?void 0:J.subscribe(Q))&&void 0!==oe?oe:j.Lc}}},930:(wt,fe,V)=>{"use strict";V.d(fe,{Hp:()=>it,Lv:()=>oe});var h=V(576),j=V(727),H=V(2416),pe=V(7849),ge=V(5032);const Ce=Ie("C",void 0,void 0);function Ie(je,Me,Le){return{kind:je,value:Me,error:Le}}var Q=V(3410),J=V(2806);class oe extends j.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,j.Nn)(Me)&&Me.add(this)):this.destination=vt}static create(Me,Le,nt){return new it(Me,Le,nt)}next(Me){this.isStopped?We(function we(je){return Ie("N",je,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?We(function me(je){return Ie("E",void 0,je)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?We(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function He(je,Me){return Qe.call(je,Me)}class Oe{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Le}=this;if(Le.next)try{Le.next(Me)}catch(nt){xe(nt)}}error(Me){const{partialObserver:Le}=this;if(Le.error)try{Le.error(Me)}catch(nt){xe(nt)}else xe(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Le){xe(Le)}}}class it extends oe{constructor(Me,Le,nt){let rt;if(super(),(0,h.m)(Me)||!Me)rt={next:Me??void 0,error:Le??void 0,complete:nt??void 0};else{let Y;this&&H.v.useDeprecatedNextContext?(Y=Object.create(Me),Y.unsubscribe=()=>this.unsubscribe(),rt={next:Me.next&&He(Me.next,Y),error:Me.error&&He(Me.error,Y),complete:Me.complete&&He(Me.complete,Y)}):rt=Me}this.destination=new Oe(rt)}}function xe(je){H.v.useDeprecatedSynchronousErrorHandling?(0,J.O)(je):(0,pe.h)(je)}function We(je,Me){const{onStoppedNotification:Le}=H.v;Le&&Q.z.setTimeout(()=>Le(je,Me))}const vt={closed:!0,next:ge.Z,error:function ve(je){throw je},complete:ge.Z}},727:(wt,fe,V)=>{"use strict";V.d(fe,{Lc:()=>Ce,w0:()=>ge,Nn:()=>me});var h=V(576);const H=(0,V(3888).d)(Ie=>function(J){Ie(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((oe,Qe)=>`${Qe+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var pe=V(8737);class ge{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const He of J)He.remove(this);else J.remove(this);const{initialTeardown:oe}=this;if((0,h.m)(oe))try{oe()}catch(He){Q=He instanceof H?He.errors:[He]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const He of Qe)try{we(He)}catch(Oe){Q=Q??[],Oe instanceof H?Q=[...Q,...Oe.errors]:Q.push(Oe)}}if(Q)throw new H(Q)}}add(Q){var J;if(Q&&Q!==this)if(this.closed)we(Q);else{if(Q instanceof ge){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(Q)}}_hasParent(Q){const{_parentage:J}=this;return J===Q||Array.isArray(J)&&J.includes(Q)}_addParent(Q){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(Q),J):J?[J,Q]:Q}_removeParent(Q){const{_parentage:J}=this;J===Q?this._parentage=null:Array.isArray(J)&&(0,pe.P)(J,Q)}remove(Q){const{_finalizers:J}=this;J&&(0,pe.P)(J,Q),Q instanceof ge&&Q._removeParent(this)}}ge.EMPTY=(()=>{const Ie=new ge;return Ie.closed=!0,Ie})();const Ce=ge.EMPTY;function me(Ie){return Ie instanceof ge||Ie&&"closed"in Ie&&(0,h.m)(Ie.remove)&&(0,h.m)(Ie.add)&&(0,h.m)(Ie.unsubscribe)}function we(Ie){(0,h.m)(Ie)?Ie():Ie.unsubscribe()}},2416:(wt,fe,V)=>{"use strict";V.d(fe,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,fe,V)=>{"use strict";V.d(fe,{E:()=>j});const j=new(V(9751).y)(ge=>ge.complete())},8996:(wt,fe,V)=>{"use strict";V.d(fe,{D:()=>Me});var h=V(8421),j=V(5363),H=V(9468),Ce=V(9751),we=V(2202),Ie=V(576),Q=V(9672);function oe(Le,nt){if(!Le)throw new Error("Iterable cannot be null");return new Ce.y(rt=>{(0,Q.f)(rt,nt,()=>{const Y=Le[Symbol.asyncIterator]();(0,Q.f)(rt,nt,()=>{Y.next().then(Ee=>{Ee.done?rt.complete():rt.next(Ee.value)})},0,!0)})})}var Qe=V(3670),He=V(8239),Oe=V(1144),it=V(6495),xe=V(2206),ve=V(4532),We=V(3260);function Me(Le,nt){return nt?function je(Le,nt){if(null!=Le){if((0,Qe.c)(Le))return function pe(Le,nt){return(0,h.Xf)(Le).pipe((0,H.R)(nt),(0,j.Q)(nt))}(Le,nt);if((0,Oe.z)(Le))return function me(Le,nt){return new Ce.y(rt=>{let Y=0;return nt.schedule(function(){Y===Le.length?rt.complete():(rt.next(Le[Y++]),rt.closed||this.schedule())})})}(Le,nt);if((0,He.t)(Le))return function ge(Le,nt){return(0,h.Xf)(Le).pipe((0,H.R)(nt),(0,j.Q)(nt))}(Le,nt);if((0,xe.D)(Le))return oe(Le,nt);if((0,it.T)(Le))return function J(Le,nt){return new Ce.y(rt=>{let Y;return(0,Q.f)(rt,nt,()=>{Y=Le[we.h](),(0,Q.f)(rt,nt,()=>{let Ee,ne;try{({value:Ee,done:ne}=Y.next())}catch(le){return void rt.error(le)}ne?rt.complete():rt.next(Ee)},0,!0)}),()=>(0,Ie.m)(Y?.return)&&Y.return()})}(Le,nt);if((0,We.L)(Le))return function vt(Le,nt){return oe((0,We.Q)(Le),nt)}(Le,nt)}throw(0,ve.z)(Le)}(Le,nt):(0,h.Xf)(Le)}},8421:(wt,fe,V)=>{"use strict";V.d(fe,{Xf:()=>Qe});var h=V(655),j=V(1144),H=V(8239),pe=V(9751),ge=V(3670),Ce=V(2206),me=V(4532),we=V(6495),Ie=V(3260),Q=V(576),J=V(7849),oe=V(8822);function Qe(je){if(je instanceof pe.y)return je;if(null!=je){if((0,ge.c)(je))return function He(je){return new pe.y(Me=>{const Le=je[oe.L]();if((0,Q.m)(Le.subscribe))return Le.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(je);if((0,j.z)(je))return function Oe(je){return new pe.y(Me=>{for(let Le=0;Le<je.length&&!Me.closed;Le++)Me.next(je[Le]);Me.complete()})}(je);if((0,H.t)(je))return function it(je){return new pe.y(Me=>{je.then(Le=>{Me.closed||(Me.next(Le),Me.complete())},Le=>Me.error(Le)).then(null,J.h)})}(je);if((0,Ce.D)(je))return ve(je);if((0,we.T)(je))return function xe(je){return new pe.y(Me=>{for(const Le of je)if(Me.next(Le),Me.closed)return;Me.complete()})}(je);if((0,Ie.L)(je))return function We(je){return ve((0,Ie.Q)(je))}(je)}throw(0,me.z)(je)}function ve(je){return new pe.y(Me=>{(function vt(je,Me){var Le,nt,rt,Y;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Le=(0,h.KL)(je);!(nt=yield Le.next()).done;)if(Me.next(nt.value),Me.closed)return}catch(Ee){rt={error:Ee}}finally{try{nt&&!nt.done&&(Y=Le.return)&&(yield Y.call(Le))}finally{if(rt)throw rt.error}}Me.complete()})})(je,Me).catch(Le=>Me.error(Le))})}},6451:(wt,fe,V)=>{"use strict";V.d(fe,{T:()=>Ce});var h=V(8189),j=V(8421),H=V(515),pe=V(7669),ge=V(8996);function Ce(...me){const we=(0,pe.yG)(me),Ie=(0,pe._6)(me,1/0),Q=me;return Q.length?1===Q.length?(0,j.Xf)(Q[0]):(0,h.J)(Ie)((0,ge.D)(Q,we)):H.E}},5403:(wt,fe,V)=>{"use strict";V.d(fe,{x:()=>j});var h=V(930);function j(pe,ge,Ce,me,we){return new H(pe,ge,Ce,me,we)}class H extends h.Lv{constructor(ge,Ce,me,we,Ie,Q){super(ge),this.onFinalize=Ie,this.shouldUnsubscribe=Q,this._next=Ce?function(J){try{Ce(J)}catch(oe){ge.error(oe)}}:super._next,this._error=we?function(J){try{we(J)}catch(oe){ge.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(J){ge.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(wt,fe,V)=>{"use strict";V.d(fe,{U:()=>H});var h=V(4482),j=V(5403);function H(pe,ge){return(0,h.e)((Ce,me)=>{let we=0;Ce.subscribe((0,j.x)(me,Ie=>{me.next(pe.call(ge,Ie,we++))}))})}},8189:(wt,fe,V)=>{"use strict";V.d(fe,{J:()=>H});var h=V(5577),j=V(4671);function H(pe=1/0){return(0,h.z)(j.y,pe)}},5577:(wt,fe,V)=>{"use strict";V.d(fe,{z:()=>we});var h=V(4004),j=V(8421),H=V(4482),pe=V(9672),ge=V(5403),me=V(576);function we(Ie,Q,J=1/0){return(0,me.m)(Q)?we((oe,Qe)=>(0,h.U)((He,Oe)=>Q(oe,He,Qe,Oe))((0,j.Xf)(Ie(oe,Qe))),J):("number"==typeof Q&&(J=Q),(0,H.e)((oe,Qe)=>function Ce(Ie,Q,J,oe,Qe,He,Oe,it){const xe=[];let ve=0,We=0,vt=!1;const je=()=>{vt&&!xe.length&&!ve&&Q.complete()},Me=nt=>ve<oe?Le(nt):xe.push(nt),Le=nt=>{He&&Q.next(nt),ve++;let rt=!1;(0,j.Xf)(J(nt,We++)).subscribe((0,ge.x)(Q,Y=>{Qe?.(Y),He?Me(Y):Q.next(Y)},()=>{rt=!0},void 0,()=>{if(rt)try{for(ve--;xe.length&&ve<oe;){const Y=xe.shift();Oe?(0,pe.f)(Q,Oe,()=>Le(Y)):Le(Y)}je()}catch(Y){Q.error(Y)}}))};return Ie.subscribe((0,ge.x)(Q,Me,()=>{vt=!0,je()})),()=>{it?.()}}(oe,Qe,Ie,J)))}},5363:(wt,fe,V)=>{"use strict";V.d(fe,{Q:()=>pe});var h=V(9672),j=V(4482),H=V(5403);function pe(ge,Ce=0){return(0,j.e)((me,we)=>{me.subscribe((0,H.x)(we,Ie=>(0,h.f)(we,ge,()=>we.next(Ie),Ce),()=>(0,h.f)(we,ge,()=>we.complete(),Ce),Ie=>(0,h.f)(we,ge,()=>we.error(Ie),Ce)))})}},3099:(wt,fe,V)=>{"use strict";V.d(fe,{B:()=>ge});var h=V(8421),j=V(7579),H=V(930),pe=V(4482);function ge(me={}){const{connector:we=(()=>new j.x),resetOnError:Ie=!0,resetOnComplete:Q=!0,resetOnRefCountZero:J=!0}=me;return oe=>{let Qe,He,Oe,it=0,xe=!1,ve=!1;const We=()=>{He?.unsubscribe(),He=void 0},vt=()=>{We(),Qe=Oe=void 0,xe=ve=!1},je=()=>{const Me=Qe;vt(),Me?.unsubscribe()};return(0,pe.e)((Me,Le)=>{it++,!ve&&!xe&&We();const nt=Oe=Oe??we();Le.add(()=>{it--,0===it&&!ve&&!xe&&(He=Ce(je,J))}),nt.subscribe(Le),!Qe&&it>0&&(Qe=new H.Hp({next:rt=>nt.next(rt),error:rt=>{ve=!0,We(),He=Ce(vt,Ie,rt),nt.error(rt)},complete:()=>{xe=!0,We(),He=Ce(vt,Q),nt.complete()}}),(0,h.Xf)(Me).subscribe(Qe))})(oe)}}function Ce(me,we,...Ie){if(!0===we)return void me();if(!1===we)return;const Q=new H.Hp({next:()=>{Q.unsubscribe(),me()}});return we(...Ie).subscribe(Q)}},9468:(wt,fe,V)=>{"use strict";V.d(fe,{R:()=>j});var h=V(4482);function j(H,pe=0){return(0,h.e)((ge,Ce)=>{Ce.add(H.schedule(()=>ge.subscribe(Ce),pe))})}},8505:(wt,fe,V)=>{"use strict";V.d(fe,{b:()=>ge});var h=V(576),j=V(4482),H=V(5403),pe=V(4671);function ge(Ce,me,we){const Ie=(0,h.m)(Ce)||me||we?{next:Ce,error:me,complete:we}:Ce;return Ie?(0,j.e)((Q,J)=>{var oe;null===(oe=Ie.subscribe)||void 0===oe||oe.call(Ie);let Qe=!0;Q.subscribe((0,H.x)(J,He=>{var Oe;null===(Oe=Ie.next)||void 0===Oe||Oe.call(Ie,He),J.next(He)},()=>{var He;Qe=!1,null===(He=Ie.complete)||void 0===He||He.call(Ie),J.complete()},He=>{var Oe;Qe=!1,null===(Oe=Ie.error)||void 0===Oe||Oe.call(Ie,He),J.error(He)},()=>{var He,Oe;Qe&&(null===(He=Ie.unsubscribe)||void 0===He||He.call(Ie)),null===(Oe=Ie.finalize)||void 0===Oe||Oe.call(Ie)}))}):pe.y}},4408:(wt,fe,V)=>{"use strict";V.d(fe,{o:()=>ge});var h=V(727);class j extends h.w0{constructor(me,we){super()}schedule(me,we=0){return this}}const H={setInterval(Ce,me,...we){const{delegate:Ie}=H;return Ie?.setInterval?Ie.setInterval(Ce,me,...we):setInterval(Ce,me,...we)},clearInterval(Ce){const{delegate:me}=H;return(me?.clearInterval||clearInterval)(Ce)},delegate:void 0};var pe=V(8737);class ge extends j{constructor(me,we){super(me,we),this.scheduler=me,this.work=we,this.pending=!1}schedule(me,we=0){var Ie;if(this.closed)return this;this.state=me;const Q=this.id,J=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(J,Q,we)),this.pending=!0,this.delay=we,this.id=null!==(Ie=this.id)&&void 0!==Ie?Ie:this.requestAsyncId(J,this.id,we),this}requestAsyncId(me,we,Ie=0){return H.setInterval(me.flush.bind(me,this),Ie)}recycleAsyncId(me,we,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return we;null!=we&&H.clearInterval(we)}execute(me,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(me,we);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,we){let Q,Ie=!1;try{this.work(me)}catch(J){Ie=!0,Q=J||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:me,scheduler:we}=this,{actions:Ie}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(Ie,this),null!=me&&(this.id=this.recycleAsyncId(we,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,fe,V)=>{"use strict";V.d(fe,{v:()=>H});var h=V(6063);class j{constructor(ge,Ce=j.now){this.schedulerActionCtor=ge,this.now=Ce}schedule(ge,Ce=0,me){return new this.schedulerActionCtor(this,ge).schedule(me,Ce)}}j.now=h.l.now;class H extends j{constructor(ge,Ce=j.now){super(ge,Ce),this.actions=[],this._active=!1}flush(ge){const{actions:Ce}=this;if(this._active)return void Ce.push(ge);let me;this._active=!0;do{if(me=ge.execute(ge.state,ge.delay))break}while(ge=Ce.shift());if(this._active=!1,me){for(;ge=Ce.shift();)ge.unsubscribe();throw me}}}},4986:(wt,fe,V)=>{"use strict";V.d(fe,{z:()=>H});var h=V(4408);const H=new(V(7565).v)(h.o)},6063:(wt,fe,V)=>{"use strict";V.d(fe,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(wt,fe,V)=>{"use strict";V.d(fe,{z:()=>h});const h={setTimeout(j,H,...pe){const{delegate:ge}=h;return ge?.setTimeout?ge.setTimeout(j,H,...pe):setTimeout(j,H,...pe)},clearTimeout(j){const{delegate:H}=h;return(H?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(wt,fe,V)=>{"use strict";V.d(fe,{h:()=>j});const j=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,fe,V)=>{"use strict";V.d(fe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,fe,V)=>{"use strict";V.d(fe,{_6:()=>Ce,jO:()=>pe,yG:()=>ge});var h=V(576);function H(me){return me[me.length-1]}function pe(me){return(0,h.m)(H(me))?me.pop():void 0}function ge(me){return function j(me){return me&&(0,h.m)(me.schedule)}(H(me))?me.pop():void 0}function Ce(me,we){return"number"==typeof H(me)?me.pop():we}},8737:(wt,fe,V)=>{"use strict";function h(j,H){if(j){const pe=j.indexOf(H);0<=pe&&j.splice(pe,1)}}V.d(fe,{P:()=>h})},3888:(wt,fe,V)=>{"use strict";function h(j){const pe=j(ge=>{Error.call(ge),ge.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}V.d(fe,{d:()=>h})},2806:(wt,fe,V)=>{"use strict";V.d(fe,{O:()=>pe,x:()=>H});var h=V(2416);let j=null;function H(ge){if(h.v.useDeprecatedSynchronousErrorHandling){const Ce=!j;if(Ce&&(j={errorThrown:!1,error:null}),ge(),Ce){const{errorThrown:me,error:we}=j;if(j=null,me)throw we}}else ge()}function pe(ge){h.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ge)}},9672:(wt,fe,V)=>{"use strict";function h(j,H,pe,ge=0,Ce=!1){const me=H.schedule(function(){pe(),Ce?j.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(j.add(me),!Ce)return me}V.d(fe,{f:()=>h})},4671:(wt,fe,V)=>{"use strict";function h(j){return j}V.d(fe,{y:()=>h})},1144:(wt,fe,V)=>{"use strict";V.d(fe,{z:()=>h});const h=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(wt,fe,V)=>{"use strict";V.d(fe,{D:()=>j});var h=V(576);function j(H){return Symbol.asyncIterator&&(0,h.m)(H?.[Symbol.asyncIterator])}},576:(wt,fe,V)=>{"use strict";function h(j){return"function"==typeof j}V.d(fe,{m:()=>h})},3670:(wt,fe,V)=>{"use strict";V.d(fe,{c:()=>H});var h=V(8822),j=V(576);function H(pe){return(0,j.m)(pe[h.L])}},6495:(wt,fe,V)=>{"use strict";V.d(fe,{T:()=>H});var h=V(2202),j=V(576);function H(pe){return(0,j.m)(pe?.[h.h])}},8239:(wt,fe,V)=>{"use strict";V.d(fe,{t:()=>j});var h=V(576);function j(H){return(0,h.m)(H?.then)}},3260:(wt,fe,V)=>{"use strict";V.d(fe,{L:()=>pe,Q:()=>H});var h=V(655),j=V(576);function H(ge){return(0,h.FC)(this,arguments,function*(){const me=ge.getReader();try{for(;;){const{value:we,done:Ie}=yield(0,h.qq)(me.read());if(Ie)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(we)}}finally{me.releaseLock()}})}function pe(ge){return(0,j.m)(ge?.getReader)}},4482:(wt,fe,V)=>{"use strict";V.d(fe,{A:()=>j,e:()=>H});var h=V(576);function j(pe){return(0,h.m)(pe?.lift)}function H(pe){return ge=>{if(j(ge))return ge.lift(function(Ce){try{return pe(Ce,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,fe,V)=>{"use strict";function h(){}V.d(fe,{Z:()=>h})},9635:(wt,fe,V)=>{"use strict";V.d(fe,{U:()=>H,z:()=>j});var h=V(4671);function j(...pe){return H(pe)}function H(pe){return 0===pe.length?h.y:1===pe.length?pe[0]:function(Ce){return pe.reduce((me,we)=>we(me),Ce)}}},7849:(wt,fe,V)=>{"use strict";V.d(fe,{h:()=>H});var h=V(2416),j=V(3410);function H(pe){j.z.setTimeout(()=>{const{onUnhandledError:ge}=h.v;if(!ge)throw pe;ge(pe)})}},4532:(wt,fe,V)=>{"use strict";function h(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(fe,{z:()=>h})},5226:function(wt){wt.exports=function(){"use strict";var fe={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const h=D=>{const T={};for(const N in D)T[D[N]]="swal2-"+D[N];return T},j=h(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),H=h(["success","warning","info","question","error"]),pe="SweetAlert2:",Ce=D=>D.charAt(0).toUpperCase()+D.slice(1),me=D=>{console.warn(`${pe} ${"object"==typeof D?D.join(" "):D}`)},we=D=>{console.error(`${pe} ${D}`)},Ie=[],J=(D,T)=>{(D=>{Ie.includes(D)||(Ie.push(D),me(D))})(`"${D}" is deprecated and will be removed in the next major release. Please use "${T}" instead.`)},oe=D=>"function"==typeof D?D():D,Qe=D=>D&&"function"==typeof D.toPromise,He=D=>Qe(D)?D.toPromise():Promise.resolve(D),Oe=D=>D&&Promise.resolve(D)===D,it=()=>document.body.querySelector(`.${j.container}`),xe=D=>{const T=it();return T?T.querySelector(D):null},ve=D=>xe(`.${D}`),We=()=>ve(j.popup),vt=()=>ve(j.icon),Me=()=>ve(j.title),Le=()=>ve(j["html-container"]),nt=()=>ve(j.image),rt=()=>ve(j["progress-steps"]),Y=()=>ve(j["validation-message"]),Ee=()=>xe(`.${j.actions} .${j.confirm}`),ne=()=>xe(`.${j.actions} .${j.deny}`),de=()=>xe(`.${j.loader}`),ce=()=>xe(`.${j.actions} .${j.cancel}`),qe=()=>ve(j.actions),Ke=()=>ve(j.footer),bt=()=>ve(j["timer-progress-bar"]),ln=()=>ve(j.close),ct=()=>{const D=Array.from(We().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((N,q)=>{const Se=parseInt(N.getAttribute("tabindex")),ft=parseInt(q.getAttribute("tabindex"));return Se>ft?1:Se<ft?-1:0}),T=Array.from(We().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(N=>"-1"!==N.getAttribute("tabindex"));return(D=>{const T=[];for(let N=0;N<D.length;N++)-1===T.indexOf(D[N])&&T.push(D[N]);return T})(D.concat(T)).filter(N=>yn(N))},vn=()=>kt(document.body,j.shown)&&!kt(document.body,j["toast-shown"])&&!kt(document.body,j["no-backdrop"]),xn=()=>We()&&kt(We(),j.toast),rn={previousBodyPadding:null},kn=(D,T)=>{if(D.textContent="",T){const q=(new DOMParser).parseFromString(T,"text/html");Array.from(q.querySelector("head").childNodes).forEach(Se=>{D.appendChild(Se)}),Array.from(q.querySelector("body").childNodes).forEach(Se=>{Se instanceof HTMLVideoElement||Se instanceof HTMLAudioElement?D.appendChild(Se.cloneNode(!0)):D.appendChild(Se)})}},kt=(D,T)=>{if(!T)return!1;const N=T.split(/\s+/);for(let q=0;q<N.length;q++)if(!D.classList.contains(N[q]))return!1;return!0},sr=(D,T,N)=>{if(((D,T)=>{Array.from(D.classList).forEach(N=>{!Object.values(j).includes(N)&&!Object.values(H).includes(N)&&!Object.values(T.showClass).includes(N)&&D.classList.remove(N)})})(D,T),T.customClass&&T.customClass[N]){if("string"!=typeof T.customClass[N]&&!T.customClass[N].forEach)return void me(`Invalid type of customClass.${N}! Expected string or iterable object, got "${typeof T.customClass[N]}"`);qt(D,T.customClass[N])}},pi=(D,T)=>{if(!T)return null;switch(T){case"select":case"textarea":case"file":return D.querySelector(`.${j.popup} > .${j[T]}`);case"checkbox":return D.querySelector(`.${j.popup} > .${j.checkbox} input`);case"radio":return D.querySelector(`.${j.popup} > .${j.radio} input:checked`)||D.querySelector(`.${j.popup} > .${j.radio} input:first-child`);case"range":return D.querySelector(`.${j.popup} > .${j.range} input`);default:return D.querySelector(`.${j.popup} > .${j.input}`)}},Kr=D=>{if(D.focus(),"file"!==D.type){const T=D.value;D.value="",D.value=T}},Yr=(D,T,N)=>{!D||!T||("string"==typeof T&&(T=T.split(/\s+/).filter(Boolean)),T.forEach(q=>{Array.isArray(D)?D.forEach(Se=>{N?Se.classList.add(q):Se.classList.remove(q)}):N?D.classList.add(q):D.classList.remove(q)}))},qt=(D,T)=>{Yr(D,T,!0)},ar=(D,T)=>{Yr(D,T,!1)},lr=(D,T)=>{const N=Array.from(D.children);for(let q=0;q<N.length;q++){const Se=N[q];if(Se instanceof HTMLElement&&kt(Se,T))return Se}},Rr=(D,T,N)=>{N===`${parseInt(N)}`&&(N=parseInt(N)),N||0===parseInt(N)?D.style[T]="number"==typeof N?`${N}px`:N:D.style.removeProperty(T)},qn=function(D){D.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},et=D=>{D.style.display="none"},Br=(D,T,N,q)=>{const Se=D.querySelector(T);Se&&(Se.style[N]=q)},Ui=function(D,T){T?qn(D,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):et(D)},yn=D=>!(!D||!(D.offsetWidth||D.offsetHeight||D.getClientRects().length)),Vi=D=>D.scrollHeight>D.clientHeight,Zn=D=>{const T=window.getComputedStyle(D),N=parseFloat(T.getPropertyValue("animation-duration")||"0"),q=parseFloat(T.getPropertyValue("transition-duration")||"0");return N>0||q>0},tr=function(D){let T=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const N=bt();yn(N)&&(T&&(N.style.transition="none",N.style.width="100%"),setTimeout(()=>{N.style.transition=`width ${D/1e3}s linear`,N.style.width="0%"},10))},Ze={},Mr=D=>new Promise(T=>{if(!D)return T();const N=window.scrollX,q=window.scrollY;Ze.restoreFocusTimeout=setTimeout(()=>{Ze.previousActiveElement instanceof HTMLElement?(Ze.previousActiveElement.focus(),Ze.previousActiveElement=null):document.body&&document.body.focus(),T()},100),window.scrollTo(N,q)}),nr=()=>typeof window>"u"||typeof document>"u",gi=`\n <div aria-labelledby="${j.title}" aria-describedby="${j["html-container"]}" class="${j.popup}" tabindex="-1">\n   <button type="button" class="${j.close}"></button>\n   <ul class="${j["progress-steps"]}"></ul>\n   <div class="${j.icon}"></div>\n   <img class="${j.image}" />\n   <h2 class="${j.title}" id="${j.title}"></h2>\n   <div class="${j["html-container"]}" id="${j["html-container"]}"></div>\n   <input class="${j.input}" />\n   <input type="file" class="${j.file}" />\n   <div class="${j.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${j.select}"></select>\n   <div class="${j.radio}"></div>\n   <label for="${j.checkbox}" class="${j.checkbox}">\n     <input type="checkbox" />\n     <span class="${j.label}"></span>\n   </label>\n   <textarea class="${j.textarea}"></textarea>\n   <div class="${j["validation-message"]}" id="${j["validation-message"]}"></div>\n   <div class="${j.actions}">\n     <div class="${j.loader}"></div>\n     <button type="button" class="${j.confirm}"></button>\n     <button type="button" class="${j.deny}"></button>\n     <button type="button" class="${j.cancel}"></button>\n   </div>\n   <div class="${j.footer}"></div>\n   <div class="${j["timer-progress-bar-container"]}">\n     <div class="${j["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),Qr=()=>{Ze.currentInstance.resetValidationMessage()},ui=D=>{const T=(()=>{const D=it();return!!D&&(D.remove(),ar([document.documentElement,document.body],[j["no-backdrop"],j["toast-shown"],j["has-column"]]),!0)})();if(nr())return void we("SweetAlert2 requires document to initialize");const N=document.createElement("div");N.className=j.container,T&&qt(N,j["no-transition"]),kn(N,gi);const q=(D=>"string"==typeof D?document.querySelector(D):D)(D.target);q.appendChild(N),(D=>{const T=We();T.setAttribute("role",D.toast?"alert":"dialog"),T.setAttribute("aria-live",D.toast?"polite":"assertive"),D.toast||T.setAttribute("aria-modal","true")})(D),(D=>{"rtl"===window.getComputedStyle(D).direction&&qt(it(),j.rtl)})(q),(()=>{const D=We(),T=lr(D,j.input),N=lr(D,j.file),q=D.querySelector(`.${j.range} input`),Se=D.querySelector(`.${j.range} output`),ft=lr(D,j.select),Yt=D.querySelector(`.${j.checkbox} input`),ur=lr(D,j.textarea);T.oninput=Qr,N.onchange=Qr,ft.onchange=Qr,Yt.onchange=Qr,ur.oninput=Qr,q.oninput=()=>{Qr(),Se.value=q.value},q.onchange=()=>{Qr(),Se.value=q.value}})()},pt=(D,T)=>{D instanceof HTMLElement?T.appendChild(D):"object"==typeof D?Ve(D,T):D&&kn(T,D)},Ve=(D,T)=>{D.jquery?gt(T,D):kn(T,D.toString())},gt=(D,T)=>{if(D.textContent="",0 in T)for(let N=0;N in T;N++)D.appendChild(T[N].cloneNode(!0));else D.appendChild(T.cloneNode(!0))},Mt=(()=>{if(nr())return!1;const D=document.createElement("div"),T={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const N in T)if(Object.prototype.hasOwnProperty.call(T,N)&&typeof D.style[N]<"u")return T[N];return!1})(),Zt=(D,T)=>{const N=qe(),q=de();T.showConfirmButton||T.showDenyButton||T.showCancelButton?qn(N):et(N),sr(N,T,"actions"),function X(D,T,N){const q=Ee(),Se=ne(),ft=ce();ie(q,"confirm",N),ie(Se,"deny",N),ie(ft,"cancel",N),function Z(D,T,N,q){q.buttonsStyling?(qt([D,T,N],j.styled),q.confirmButtonColor&&(D.style.backgroundColor=q.confirmButtonColor,qt(D,j["default-outline"])),q.denyButtonColor&&(T.style.backgroundColor=q.denyButtonColor,qt(T,j["default-outline"])),q.cancelButtonColor&&(N.style.backgroundColor=q.cancelButtonColor,qt(N,j["default-outline"]))):ar([D,T,N],j.styled)}(q,Se,ft,N),N.reverseButtons&&(N.toast?(D.insertBefore(ft,q),D.insertBefore(Se,q)):(D.insertBefore(ft,T),D.insertBefore(Se,T),D.insertBefore(q,T)))}(N,q,T),kn(q,T.loaderHtml),sr(q,T,"loader")};function ie(D,T,N){Ui(D,N[`show${Ce(T)}Button`],"inline-block"),kn(D,N[`${T}ButtonText`]),D.setAttribute("aria-label",N[`${T}ButtonAriaLabel`]),D.className=j[T],sr(D,N,`${T}Button`),qt(D,N[`${T}ButtonClass`])}const ae=(D,T)=>{const N=it();!N||(function lt(D,T){"string"==typeof T?D.style.background=T:T||qt([document.documentElement,document.body],j["no-backdrop"])}(N,T.backdrop),function Tt(D,T){T in j?qt(D,j[T]):(me('The "position" parameter is not valid, defaulting to "center"'),qt(D,j.center))}(N,T.position),function hn(D,T){if(T&&"string"==typeof T){const N=`grow-${T}`;N in j&&qt(D,j[N])}}(N,T.grow),sr(N,T,"container"))};const Pn=["input","file","range","select","radio","checkbox","textarea"],Xe=D=>{if(!rr[D.input])return void we(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${D.input}"`);const T=jo(D.input),N=rr[D.input](T,D);qn(T),setTimeout(()=>{Kr(N)})},Jt=(D,T)=>{const N=pi(We(),D);if(N){(D=>{for(let T=0;T<D.attributes.length;T++){const N=D.attributes[T].name;["type","value","style"].includes(N)||D.removeAttribute(N)}})(N);for(const q in T)N.setAttribute(q,T[q])}},kr=D=>{const T=jo(D.input);"object"==typeof D.customClass&&qt(T,D.customClass.input)},Jr=(D,T)=>{(!D.placeholder||T.inputPlaceholder)&&(D.placeholder=T.inputPlaceholder)},Kn=(D,T,N)=>{if(N.inputLabel){D.id=j.input;const q=document.createElement("label"),Se=j["input-label"];q.setAttribute("for",D.id),q.className=Se,"object"==typeof N.customClass&&qt(q,N.customClass.inputLabel),q.innerText=N.inputLabel,T.insertAdjacentElement("beforebegin",q)}},jo=D=>lr(We(),j[D]||j.input),Rn=(D,T)=>{["string","number"].includes(typeof T)?D.value=`${T}`:Oe(T)||me(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof T}"`)},rr={};rr.text=rr.email=rr.password=rr.number=rr.tel=rr.url=(D,T)=>(Rn(D,T.inputValue),Kn(D,D,T),Jr(D,T),D.type=T.input,D),rr.file=(D,T)=>(Kn(D,D,T),Jr(D,T),D),rr.range=(D,T)=>{const N=D.querySelector("input"),q=D.querySelector("output");return Rn(N,T.inputValue),N.type=T.input,Rn(q,T.inputValue),Kn(N,D,T),D},rr.select=(D,T)=>{if(D.textContent="",T.inputPlaceholder){const N=document.createElement("option");kn(N,T.inputPlaceholder),N.value="",N.disabled=!0,N.selected=!0,D.appendChild(N)}return Kn(D,D,T),D},rr.radio=D=>(D.textContent="",D),rr.checkbox=(D,T)=>{const N=pi(We(),"checkbox");N.value="1",N.id=j.checkbox,N.checked=Boolean(T.inputValue);const q=D.querySelector("span");return kn(q,T.inputPlaceholder),N},rr.textarea=(D,T)=>{Rn(D,T.inputValue),Jr(D,T),Kn(D,D,T);return setTimeout(()=>{if("MutationObserver"in window){const q=parseInt(window.getComputedStyle(We()).width);new MutationObserver(()=>{const ft=D.offsetWidth+(q=>parseInt(window.getComputedStyle(q).marginLeft)+parseInt(window.getComputedStyle(q).marginRight))(D);We().style.width=ft>q?`${ft}px`:null}).observe(D,{attributes:!0,attributeFilter:["style"]})}}),D};const $s=(D,T)=>{const N=Le();sr(N,T,"htmlContainer"),T.html?(pt(T.html,N),qn(N,"block")):T.text?(N.textContent=T.text,qn(N,"block")):et(N),((D,T)=>{const N=We(),q=fe.innerParams.get(D),Se=!q||T.input!==q.input;Pn.forEach(ft=>{const Yt=lr(N,j[ft]);Jt(ft,T.inputAttributes),Yt.className=j[ft],Se&&et(Yt)}),T.input&&(Se&&Xe(T),kr(T))})(D,T)},$o=(D,T)=>{for(const N in H)T.icon!==N&&ar(D,H[N]);qt(D,H[T.icon]),Go(D,T),Xa(),sr(D,T,"icon")},Xa=()=>{const D=We(),T=window.getComputedStyle(D).getPropertyValue("background-color"),N=D.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let q=0;q<N.length;q++)N[q].style.backgroundColor=T},To=(D,T)=>{let q,N=D.innerHTML;T.iconHtml?q=Pr(T.iconHtml):"success"===T.icon?(q='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',N=N.replace(/ style=".*?"/g,"")):q="error"===T.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Pr({question:"?",warning:"!",info:"i"}[T.icon]),N.trim()!==q.trim()&&kn(D,q)},Go=(D,T)=>{if(T.iconColor){D.style.color=T.iconColor,D.style.borderColor=T.iconColor;for(const N of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Br(D,N,"backgroundColor",T.iconColor);Br(D,".swal2-success-ring","borderColor",T.iconColor)}},Pr=D=>`<div class="${j["icon-content"]}">${D}</div>`,Mn=(D,T)=>{D.className=`${j.popup} ${yn(D)?T.showClass.popup:""}`,T.toast?(qt([document.documentElement,document.body],j["toast-shown"]),qt(D,j.toast)):qt(D,j.modal),sr(D,T,"popup"),"string"==typeof T.customClass&&qt(D,T.customClass),T.icon&&qt(D,j[`icon-${T.icon}`])},iu=D=>{const T=document.createElement("li");return qt(T,j["progress-step"]),kn(T,D),T},cs=D=>{const T=document.createElement("li");return qt(T,j["progress-step-line"]),D.progressStepsDistance&&Rr(T,"width",D.progressStepsDistance),T},Hi=(D,T)=>{((D,T)=>{const N=it(),q=We();T.toast?(Rr(N,"width",T.width),q.style.width="100%",q.insertBefore(de(),vt())):Rr(q,"width",T.width),Rr(q,"padding",T.padding),T.color&&(q.style.color=T.color),T.background&&(q.style.background=T.background),et(Y()),Mn(q,T)})(0,T),ae(0,T),((D,T)=>{const N=rt();T.progressSteps&&0!==T.progressSteps.length?(qn(N),N.textContent="",T.currentProgressStep>=T.progressSteps.length&&me("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),T.progressSteps.forEach((q,Se)=>{const ft=iu(q);if(N.appendChild(ft),Se===T.currentProgressStep&&qt(ft,j["active-progress-step"]),Se!==T.progressSteps.length-1){const Yt=cs(T);N.appendChild(Yt)}})):et(N)})(0,T),((D,T)=>{const N=fe.innerParams.get(D),q=vt();N&&T.icon===N.icon?(To(q,T),$o(q,T)):T.icon||T.iconHtml?T.icon&&-1===Object.keys(H).indexOf(T.icon)?(we(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${T.icon}"`),et(q)):(qn(q),To(q,T),$o(q,T),qt(q,T.showClass.icon)):et(q)})(D,T),((D,T)=>{const N=nt();T.imageUrl?(qn(N,""),N.setAttribute("src",T.imageUrl),N.setAttribute("alt",T.imageAlt),Rr(N,"width",T.imageWidth),Rr(N,"height",T.imageHeight),N.className=j.image,sr(N,T,"image")):et(N)})(0,T),((D,T)=>{const N=Me();Ui(N,T.title||T.titleText,"block"),T.title&&pt(T.title,N),T.titleText&&(N.innerText=T.titleText),sr(N,T,"title")})(0,T),((D,T)=>{const N=ln();kn(N,T.closeButtonHtml),sr(N,T,"closeButton"),Ui(N,T.showCloseButton),N.setAttribute("aria-label",T.closeButtonAriaLabel)})(0,T),$s(D,T),Zt(0,T),((D,T)=>{const N=Ke();Ui(N,T.footer),T.footer&&pt(T.footer,N),sr(N,T,"footer")})(0,T),"function"==typeof T.didRender&&T.didRender(We())};function Ao(){const D=fe.innerParams.get(this);if(!D)return;const T=fe.domCache.get(this);et(T.loader),xn()?D.icon&&qn(vt()):ji(T),ar([T.popup,T.actions],j.loading),T.popup.removeAttribute("aria-busy"),T.popup.removeAttribute("data-loading"),T.confirmButton.disabled=!1,T.denyButton.disabled=!1,T.cancelButton.disabled=!1}const ji=D=>{const T=D.popup.getElementsByClassName(D.loader.getAttribute("data-button-to-replace"));T.length?qn(T[0],"inline-block"):!yn(Ee())&&!yn(ne())&&!yn(ce())&&et(D.actions)};const Er=()=>Ee()&&Ee().click(),eo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),nl=D=>{D.keydownTarget&&D.keydownHandlerAdded&&(D.keydownTarget.removeEventListener("keydown",D.keydownHandler,{capture:D.keydownListenerCapture}),D.keydownHandlerAdded=!1)},su=(D,T,N)=>{const q=ct();if(q.length)return(T+=N)===q.length?T=0:-1===T&&(T=q.length-1),q[T].focus();We().focus()},au=["ArrowRight","ArrowDown"],Ad=["ArrowLeft","ArrowUp"],lu=(D,T,N)=>{const q=fe.innerParams.get(D);!q||T.isComposing||229===T.keyCode||(q.stopKeydownPropagation&&T.stopPropagation(),"Enter"===T.key?uu(D,T,q):"Tab"===T.key?Cr(T,q):[...au,...Ad].includes(T.key)?gc(T.key):"Escape"===T.key&&Uh(T,q,N))},uu=(D,T,N)=>{if(oe(N.allowEnterKey)&&T.target&&D.getInput()&&T.target instanceof HTMLElement&&T.target.outerHTML===D.getInput().outerHTML){if(["textarea","file"].includes(N.input))return;Er(),T.preventDefault()}},Cr=(D,T)=>{const N=D.target,q=ct();let Se=-1;for(let ft=0;ft<q.length;ft++)if(N===q[ft]){Se=ft;break}su(0,Se,D.shiftKey?-1:1),D.stopPropagation(),D.preventDefault()},gc=D=>{const T=Ee(),N=ne(),q=ce();if(document.activeElement instanceof HTMLElement&&![T,N,q].includes(document.activeElement))return;const Se=au.includes(D)?"nextElementSibling":"previousElementSibling";let ft=document.activeElement;for(let Yt=0;Yt<qe().children.length;Yt++){if(ft=ft[Se],!ft)return;if(ft instanceof HTMLButtonElement&&yn(ft))break}ft instanceof HTMLButtonElement&&ft.focus()},Uh=(D,T,N)=>{oe(T.allowEscapeKey)&&(D.preventDefault(),N(eo.esc))};var mi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const rl=()=>{Array.from(document.body.children).forEach(T=>{T.hasAttribute("data-previous-aria-hidden")?(T.setAttribute("aria-hidden",T.getAttribute("data-previous-aria-hidden")),T.removeAttribute("data-previous-aria-hidden")):T.removeAttribute("aria-hidden")})},zo=()=>{const D=navigator.userAgent,T=!!D.match(/iPad/i)||!!D.match(/iPhone/i),N=!!D.match(/WebKit/i);T&&N&&!D.match(/CriOS/i)&&We().scrollHeight>window.innerHeight-44&&(it().style.paddingBottom="44px")},Bh=()=>{const D=it();let T;D.ontouchstart=N=>{T=mc(N)},D.ontouchmove=N=>{T&&(N.preventDefault(),N.stopPropagation())}},mc=D=>{const T=D.target,N=it();return!Hh(D)&&!jh(D)&&(T===N||!Vi(N)&&T instanceof HTMLElement&&"INPUT"!==T.tagName&&"TEXTAREA"!==T.tagName&&!(Vi(Le())&&Le().contains(T)))},Hh=D=>D.touches&&D.touches.length&&"stylus"===D.touches[0].touchType,jh=D=>D.touches&&D.touches.length>1,Wo=()=>{null===rn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(rn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${rn.previousBodyPadding+(()=>{const D=document.createElement("div");D.className=j["scrollbar-measure"],document.body.appendChild(D);const T=D.getBoundingClientRect().width-D.clientWidth;return document.body.removeChild(D),T})()}px`)};function du(D,T,N,q){xn()?_c(D,q):(Mr(N).then(()=>_c(D,q)),nl(Ze)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(T.setAttribute("style","display:none !important"),T.removeAttribute("class"),T.innerHTML=""):T.remove(),vn()&&(null!==rn.previousBodyPadding&&(document.body.style.paddingRight=`${rn.previousBodyPadding}px`,rn.previousBodyPadding=null),(()=>{if(kt(document.body,j.iosfix)){const D=parseInt(document.body.style.top,10);ar(document.body,j.iosfix),document.body.style.top="",document.body.scrollTop=-1*D}})(),rl()),function il(){ar([document.documentElement,document.body],[j.shown,j["height-auto"],j["no-backdrop"],j["toast-shown"]])}()}function ol(D){D=ma(D);const T=mi.swalPromiseResolve.get(this),N=So(this);this.isAwaitingPromise()?D.isDismissed||($i(this),T(D)):N&&T(D)}const So=D=>{const T=We();if(!T)return!1;const N=fe.innerParams.get(D);if(!N||kt(T,N.hideClass.popup))return!1;ar(T,N.showClass.popup),qt(T,N.hideClass.popup);const q=it();return ar(q,N.showClass.backdrop),qt(q,N.hideClass.backdrop),sl(D,T,N),!0};const $i=D=>{D.isAwaitingPromise()&&(fe.awaitingPromise.delete(D),fe.innerParams.get(D)||D._destroy())},ma=D=>typeof D>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},D),sl=(D,T,N)=>{const q=it(),Se=Mt&&Zn(T);"function"==typeof N.willClose&&N.willClose(T),Se?hu(D,T,q,N.returnFocus,N.didClose):du(D,q,N.returnFocus,N.didClose)},hu=(D,T,N,q,Se)=>{Ze.swalCloseEventFinishedCallback=du.bind(null,D,N,q,Se),T.addEventListener(Mt,function(ft){ft.target===T&&(Ze.swalCloseEventFinishedCallback(),delete Ze.swalCloseEventFinishedCallback)})},_c=(D,T)=>{setTimeout(()=>{"function"==typeof T&&T.bind(D.params)(),D._destroy()})};function Hr(D,T,N){const q=fe.domCache.get(D);T.forEach(Se=>{q[Se].disabled=N})}function no(D,T){if(D)if("radio"===D.type){const q=D.parentNode.parentNode.querySelectorAll("input");for(let Se=0;Se<q.length;Se++)q[Se].disabled=T}else D.disabled=T}const Nn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},al=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Rd={},Si=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ei=D=>Object.prototype.hasOwnProperty.call(Nn,D),va=D=>-1!==al.indexOf(D),qo=D=>Rd[D],Ro=D=>{ei(D)||me(`Unknown parameter "${D}"`)},cn=D=>{Si.includes(D)&&me(`The parameter "${D}" is incompatible with toasts`)},ll=D=>{qo(D)&&J(D,qo(D))};const Gi=D=>{const T={};return Object.keys(D).forEach(N=>{va(N)?T[N]=D[N]:me(`Invalid parameter to update: ${N}`)}),T};const Yn=D=>{Lt(D),delete D.params,delete Ze.keydownHandler,delete Ze.keydownTarget,delete Ze.currentInstance},Lt=D=>{D.isAwaitingPromise()?(zs(fe,D),fe.awaitingPromise.set(D,!0)):(zs(mi,D),zs(fe,D))},zs=(D,T)=>{for(const N in D)D[N].delete(T)};var bc=Object.freeze({__proto__:null,hideLoading:Ao,disableLoading:Ao,getInput:function jn(D){const T=fe.innerParams.get(D||this),N=fe.domCache.get(D||this);return N?pi(N.popup,T.input):null},close:ol,isAwaitingPromise:function to(){return!!fe.awaitingPromise.get(this)},rejectPromise:function xo(D){const T=mi.swalPromiseReject.get(this);$i(this),T&&T(D)},handleAwaitingPromise:$i,closePopup:ol,closeModal:ol,closeToast:ol,enableButtons:function Ai(){Hr(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function vi(){Hr(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Gs(){no(this.getInput(),!1)},disableInput:function wc(){no(this.getInput(),!0)},showValidationMessage:function jr(D){const T=fe.domCache.get(this),N=fe.innerParams.get(this);kn(T.validationMessage,D),T.validationMessage.className=j["validation-message"],N.customClass&&N.customClass.validationMessage&&qt(T.validationMessage,N.customClass.validationMessage),qn(T.validationMessage);const q=this.getInput();q&&(q.setAttribute("aria-invalid",!0),q.setAttribute("aria-describedby",j["validation-message"]),Kr(q),qt(q,j.inputerror))},resetValidationMessage:function Sd(){const D=fe.domCache.get(this);D.validationMessage&&et(D.validationMessage);const T=this.getInput();T&&(T.removeAttribute("aria-invalid"),T.removeAttribute("aria-describedby"),ar(T,j.inputerror))},getProgressSteps:function xd(){return fe.domCache.get(this).progressSteps},update:function ul(D){const T=We(),N=fe.innerParams.get(this);if(!T||kt(T,N.hideClass.popup))return me("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const q=Gi(D),Se=Object.assign({},N,q);Hi(this,Se),fe.innerParams.set(this,Se),Object.defineProperties(this,{params:{value:Object.assign({},this.params,D),writable:!1,enumerable:!0}})},_destroy:function cl(){const D=fe.domCache.get(this),T=fe.innerParams.get(this);T?(D.popup&&Ze.swalCloseEventFinishedCallback&&(Ze.swalCloseEventFinishedCallback(),delete Ze.swalCloseEventFinishedCallback),"function"==typeof T.didDestroy&&T.didDestroy(),Yn(this)):Lt(this)}});const Mo=D=>{let T=We();T||new Yo,T=We();const N=de();xn()?et(vt()):dl(T,D),qn(N),T.setAttribute("data-loading","true"),T.setAttribute("aria-busy","true"),T.focus()},dl=(D,T)=>{const N=qe(),q=de();!T&&yn(Ee())&&(T=Ee()),qn(N),T&&(et(T),q.setAttribute("data-button-to-replace",T.className)),q.parentNode.insertBefore(q,T),qt([D,N],j.loading)},pu=D=>D.checked?1:0,ya=D=>D.checked?D.value:null,Be=D=>D.files.length?null!==D.getAttribute("multiple")?D.files:D.files[0]:null,on=(D,T)=>{const N=We(),q=Se=>{fl[T.input](N,$n(Se),T)};Qe(T.inputOptions)||Oe(T.inputOptions)?(Mo(Ee()),He(T.inputOptions).then(Se=>{D.hideLoading(),q(Se)})):"object"==typeof T.inputOptions?q(T.inputOptions):we("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof T.inputOptions)},hl=(D,T)=>{const N=D.getInput();et(N),He(T.inputValue).then(q=>{N.value="number"===T.input?`${parseFloat(q)||0}`:`${q}`,qn(N),N.focus(),D.hideLoading()}).catch(q=>{we(`Error in inputValue promise: ${q}`),N.value="",qn(N),N.focus(),D.hideLoading()})},fl={select:(D,T,N)=>{const q=lr(D,j.select),Se=(ft,Yt,ur)=>{const Dr=document.createElement("option");Dr.value=ur,kn(Dr,Yt),Dr.selected=_a(ur,N.inputValue),ft.appendChild(Dr)};T.forEach(ft=>{const Yt=ft[0],ur=ft[1];if(Array.isArray(ur)){const Dr=document.createElement("optgroup");Dr.label=Yt,Dr.disabled=!1,q.appendChild(Dr),ur.forEach(Mi=>Se(Dr,Mi[1],Mi[0]))}else Se(q,ur,Yt)}),q.focus()},radio:(D,T,N)=>{const q=lr(D,j.radio);T.forEach(ft=>{const Yt=ft[0],ur=ft[1],Dr=document.createElement("input"),Mi=document.createElement("label");Dr.type="radio",Dr.name=j.radio,Dr.value=Yt,_a(Yt,N.inputValue)&&(Dr.checked=!0);const ys=document.createElement("span");kn(ys,ur),ys.className=j.label,Mi.appendChild(Dr),Mi.appendChild(ys),q.appendChild(Mi)});const Se=q.querySelectorAll("input");Se.length&&Se[0].focus()}},$n=D=>{const T=[];return typeof Map<"u"&&D instanceof Map?D.forEach((N,q)=>{let Se=N;"object"==typeof Se&&(Se=$n(Se)),T.push([q,Se])}):Object.keys(D).forEach(N=>{let q=D[N];"object"==typeof q&&(q=$n(q)),T.push([N,q])}),T},_a=(D,T)=>T&&T.toString()===D.toString(),qs=(D,T)=>{const N=fe.innerParams.get(D);if(!N.input)return void we(`The "input" parameter is needed to be set when using returnInputValueOn${Ce(T)}`);const q=((D,T)=>{const N=D.getInput();if(!N)return null;switch(T.input){case"checkbox":return pu(N);case"radio":return ya(N);case"file":return Be(N);default:return T.inputAutoTrim?N.value.trim():N.value}})(D,N);N.inputValidator?gu(D,q,T):D.getInput().checkValidity()?"deny"===T?ba(D,q):Gn(D,q):(D.enableButtons(),D.showValidationMessage(N.validationMessage))},gu=(D,T,N)=>{const q=fe.innerParams.get(D);D.disableInput(),Promise.resolve().then(()=>He(q.inputValidator(T,q.validationMessage))).then(ft=>{D.enableButtons(),D.enableInput(),ft?D.showValidationMessage(ft):"deny"===N?ba(D,T):Gn(D,T)})},ba=(D,T)=>{const N=fe.innerParams.get(D||void 0);N.showLoaderOnDeny&&Mo(ne()),N.preDeny?(fe.awaitingPromise.set(D||void 0,!0),Promise.resolve().then(()=>He(N.preDeny(T,N.validationMessage))).then(Se=>{!1===Se?(D.hideLoading(),$i(D)):D.close({isDenied:!0,value:typeof Se>"u"?T:Se})}).catch(Se=>Zs(D||void 0,Se))):D.close({isDenied:!0,value:T})},mu=(D,T)=>{D.close({isConfirmed:!0,value:T})},Zs=(D,T)=>{D.rejectPromise(T)},Gn=(D,T)=>{const N=fe.innerParams.get(D||void 0);N.showLoaderOnConfirm&&Mo(),N.preConfirm?(D.resetValidationMessage(),fe.awaitingPromise.set(D||void 0,!0),Promise.resolve().then(()=>He(N.preConfirm(T,N.validationMessage))).then(Se=>{yn(Y())||!1===Se?(D.hideLoading(),$i(D)):mu(D,typeof Se>"u"?T:Se)}).catch(Se=>Zs(D||void 0,Se))):mu(D,T)},vu=(D,T,N)=>{T.popup.onclick=()=>{const q=fe.innerParams.get(D);q&&(hs(q)||q.timer||q.input)||N(eo.close)}},hs=D=>D.showConfirmButton||D.showDenyButton||D.showCancelButton||D.showCloseButton;let Ri=!1;const $h=D=>{D.popup.onmousedown=()=>{D.container.onmouseup=function(T){D.container.onmouseup=void 0,T.target===D.container&&(Ri=!0)}}},Ea=D=>{D.container.onmousedown=()=>{D.popup.onmouseup=function(T){D.popup.onmouseup=void 0,(T.target===D.popup||D.popup.contains(T.target))&&(Ri=!0)}}},Gh=(D,T,N)=>{T.container.onclick=q=>{const Se=fe.innerParams.get(D);Ri?Ri=!1:q.target===T.container&&oe(Se.allowOutsideClick)&&N(eo.backdrop)}},Ca=D=>D instanceof Element||(D=>"object"==typeof D&&D.jquery)(D);const Ta=()=>{if(Ze.timeout)return(()=>{const D=bt(),T=parseInt(window.getComputedStyle(D).width);D.style.removeProperty("transition"),D.style.width="100%";const q=T/parseInt(window.getComputedStyle(D).width)*100;D.style.removeProperty("transition"),D.style.width=`${q}%`})(),Ze.timeout.stop()},Aa=()=>{if(Ze.timeout){const D=Ze.timeout.start();return tr(D),D}};let Iu=!1;const Po={};const pl=D=>{for(let T=D.target;T&&T!==document;T=T.parentNode)for(const N in Po){const q=T.getAttribute(N);if(q)return void Po[N].fire({template:q})}};var Ir=Object.freeze({__proto__:null,isValidParameter:ei,isUpdatableParameter:va,isDeprecatedParameter:qo,argsToParams:D=>{const T={};return"object"!=typeof D[0]||Ca(D[0])?["title","html","icon"].forEach((N,q)=>{const Se=D[q];"string"==typeof Se||Ca(Se)?T[N]=Se:void 0!==Se&&we(`Unexpected type of ${N}! Expected "string" or "Element", got ${typeof Se}`)}):Object.assign(T,D[0]),T},getContainer:it,getPopup:We,getTitle:Me,getHtmlContainer:Le,getImage:nt,getIcon:vt,getIconContent:()=>ve(j["icon-content"]),getInputLabel:()=>ve(j["input-label"]),getCloseButton:ln,getActions:qe,getConfirmButton:Ee,getDenyButton:ne,getCancelButton:ce,getLoader:de,getFooter:Ke,getTimerProgressBar:bt,getFocusableElements:ct,getValidationMessage:Y,isLoading:()=>We().hasAttribute("data-loading"),isVisible:()=>yn(We()),clickConfirm:Er,clickDeny:()=>ne()&&ne().click(),clickCancel:()=>ce()&&ce().click(),fire:function _u(){const D=this;for(var T=arguments.length,N=new Array(T),q=0;q<T;q++)N[q]=arguments[q];return new D(...N)},mixin:function Da(D){return class T extends(this){_main(q,Se){return super._main(q,Object.assign({},D,Se))}}},showLoading:Mo,enableLoading:Mo,getTimerLeft:()=>Ze.timeout&&Ze.timeout.getTimerLeft(),stopTimer:Ta,resumeTimer:Aa,toggleTimer:()=>{const D=Ze.timeout;return D&&(D.running?Ta():Aa())},increaseTimer:D=>{if(Ze.timeout){const T=Ze.timeout.increase(D);return tr(T,!0),T}},isTimerRunning:()=>Ze.timeout&&Ze.timeout.isRunning(),bindClickHandler:function fs(){Po[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Iu||(document.body.addEventListener("click",pl),Iu=!0)}});class yi{constructor(T,N){this.callback=T,this.remaining=N,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(T){const N=this.running;return N&&this.stop(),this.remaining+=T,N&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Ln=["swal-title","swal-html","swal-footer"],Du=D=>{const T={};return Array.from(D.querySelectorAll("swal-param")).forEach(q=>{Zo(q,["name","value"]);const Se=q.getAttribute("name"),ft=q.getAttribute("value");T[Se]="boolean"==typeof Nn[Se]?"false"!==ft:"object"==typeof Nn[Se]?JSON.parse(ft):ft}),T},Md=D=>{const T={};return Array.from(D.querySelectorAll("swal-function-param")).forEach(q=>{const Se=q.getAttribute("name"),ft=q.getAttribute("value");T[Se]=new Function(`return ${ft}`)()}),T},Tu=D=>{const T={};return Array.from(D.querySelectorAll("swal-button")).forEach(q=>{Zo(q,["type","color","aria-label"]);const Se=q.getAttribute("type");T[`${Se}ButtonText`]=q.innerHTML,T[`show${Ce(Se)}Button`]=!0,q.hasAttribute("color")&&(T[`${Se}ButtonColor`]=q.getAttribute("color")),q.hasAttribute("aria-label")&&(T[`${Se}ButtonAriaLabel`]=q.getAttribute("aria-label"))}),T},gl=D=>{const T={},N=D.querySelector("swal-image");return N&&(Zo(N,["src","width","height","alt"]),N.hasAttribute("src")&&(T.imageUrl=N.getAttribute("src")),N.hasAttribute("width")&&(T.imageWidth=N.getAttribute("width")),N.hasAttribute("height")&&(T.imageHeight=N.getAttribute("height")),N.hasAttribute("alt")&&(T.imageAlt=N.getAttribute("alt"))),T},Cc=D=>{const T={},N=D.querySelector("swal-icon");return N&&(Zo(N,["type","color"]),N.hasAttribute("type")&&(T.icon=N.getAttribute("type")),N.hasAttribute("color")&&(T.iconColor=N.getAttribute("color")),T.iconHtml=N.innerHTML),T},ml=D=>{const T={},N=D.querySelector("swal-input");N&&(Zo(N,["type","label","placeholder","value"]),T.input=N.getAttribute("type")||"text",N.hasAttribute("label")&&(T.inputLabel=N.getAttribute("label")),N.hasAttribute("placeholder")&&(T.inputPlaceholder=N.getAttribute("placeholder")),N.hasAttribute("value")&&(T.inputValue=N.getAttribute("value")));const q=Array.from(D.querySelectorAll("swal-input-option"));return q.length&&(T.inputOptions={},q.forEach(Se=>{Zo(Se,["value"]);const ft=Se.getAttribute("value");T.inputOptions[ft]=Se.innerHTML})),T},ps=(D,T)=>{const N={};for(const q in T){const Se=T[q],ft=D.querySelector(Se);ft&&(Zo(ft,[]),N[Se.replace(/^swal-/,"")]=ft.innerHTML.trim())}return N},Ks=D=>{const T=Ln.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(D.children).forEach(N=>{const q=N.tagName.toLowerCase();T.includes(q)||me(`Unrecognized element <${q}>`)})},Zo=(D,T)=>{Array.from(D.attributes).forEach(N=>{-1===T.indexOf(N.name)&&me([`Unrecognized attribute "${N.name}" on <${D.tagName.toLowerCase()}>.`,T.length?`Allowed attributes are: ${T.join(", ")}`:"To set the value, use HTML within the element."])})},Ic=D=>{const T=it(),N=We();"function"==typeof D.willOpen&&D.willOpen(N);const Se=window.getComputedStyle(document.body).overflowY;vl(T,N,D),setTimeout(()=>{Ko(T,N)},10),vn()&&(ms(T,D.scrollbarPadding,Se),Array.from(document.body.children).forEach(T=>{T===it()||T.contains(it())||(T.hasAttribute("aria-hidden")&&T.setAttribute("data-previous-aria-hidden",T.getAttribute("aria-hidden")),T.setAttribute("aria-hidden","true"))})),!xn()&&!Ze.previousActiveElement&&(Ze.previousActiveElement=document.activeElement),"function"==typeof D.didOpen&&setTimeout(()=>D.didOpen(N)),ar(T,j["no-transition"])},No=D=>{const T=We();if(D.target!==T)return;const N=it();T.removeEventListener(Mt,No),N.style.overflowY="auto"},Ko=(D,T)=>{Mt&&Zn(T)?(D.style.overflowY="hidden",T.addEventListener(Mt,No)):D.style.overflowY="auto"},ms=(D,T,N)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!kt(document.body,j.iosfix)){const T=document.body.scrollTop;document.body.style.top=-1*T+"px",qt(document.body,j.iosfix),Bh(),zo()}})(),T&&"hidden"!==N&&Wo(),setTimeout(()=>{D.scrollTop=0})},vl=(D,T,N)=>{qt(D,N.showClass.backdrop),T.style.setProperty("opacity","0","important"),qn(T,"grid"),setTimeout(()=>{qt(T,N.showClass.popup),T.style.removeProperty("opacity")},10),qt([document.documentElement,document.body],j.shown),N.heightAuto&&N.backdrop&&!N.toast&&qt([document.documentElement,document.body],j["height-auto"])};var Qn={email:(D,T)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(D)?Promise.resolve():Promise.resolve(T||"Invalid email address"),url:(D,T)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(D)?Promise.resolve():Promise.resolve(T||"Invalid URL")};function Dc(D){(function yl(D){D.inputValidator||Object.keys(Qn).forEach(T=>{D.input===T&&(D.inputValidator=Qn[T])})})(D),D.showLoaderOnConfirm&&!D.preConfirm&&me("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function _l(D){(!D.target||"string"==typeof D.target&&!document.querySelector(D.target)||"string"!=typeof D.target&&!D.target.appendChild)&&(me('Target parameter is not valid, defaulting to "body"'),D.target="body")}(D),"string"==typeof D.title&&(D.title=D.title.split("\n").join("<br />")),ui(D)}let io;class zi{constructor(){if(typeof window>"u")return;io=this;for(var T=arguments.length,N=new Array(T),q=0;q<T;q++)N[q]=arguments[q];const Se=Object.freeze(this.constructor.argsToParams(N));Object.defineProperties(this,{params:{value:Se,writable:!1,enumerable:!0,configurable:!0}});const ft=io._main(io.params);fe.promise.set(this,ft)}_main(T){let N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(D=>{!1===D.backdrop&&D.allowOutsideClick&&me('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const T in D)Ro(T),D.toast&&cn(T),ll(T)})(Object.assign({},N,T)),Ze.currentInstance&&(Ze.currentInstance._destroy(),vn()&&rl()),Ze.currentInstance=io;const q=vs(T,N);Dc(q),Object.freeze(q),Ze.timeout&&(Ze.timeout.stop(),delete Ze.timeout),clearTimeout(Ze.restoreFocusTimeout);const Se=wl(io);return Hi(io,q),fe.innerParams.set(io,q),Ys(io,Se,q)}then(T){return fe.promise.get(this).then(T)}finally(T){return fe.promise.get(this).finally(T)}}const Ys=(D,T,N)=>new Promise((q,Se)=>{const ft=Yt=>{D.close({isDismissed:!0,dismiss:Yt})};mi.swalPromiseResolve.set(D,q),mi.swalPromiseReject.set(D,Se),T.confirmButton.onclick=()=>{(D=>{const T=fe.innerParams.get(D);D.disableButtons(),T.input?qs(D,"confirm"):Gn(D,!0)})(D)},T.denyButton.onclick=()=>{(D=>{const T=fe.innerParams.get(D);D.disableButtons(),T.returnInputValueOnDeny?qs(D,"deny"):ba(D,!1)})(D)},T.cancelButton.onclick=()=>{((D,T)=>{D.disableButtons(),T(eo.cancel)})(D,ft)},T.closeButton.onclick=()=>{ft(eo.close)},((D,T,N)=>{fe.innerParams.get(D).toast?vu(D,T,N):($h(T),Ea(T),Gh(D,T,N))})(D,T,ft),((D,T,N,q)=>{nl(T),N.toast||(T.keydownHandler=Se=>lu(D,Se,q),T.keydownTarget=N.keydownListenerCapture?window:We(),T.keydownListenerCapture=N.keydownListenerCapture,T.keydownTarget.addEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!0)})(D,Ze,N,ft),((D,T)=>{"select"===T.input||"radio"===T.input?on(D,T):["text","email","number","tel","textarea"].includes(T.input)&&(Qe(T.inputValue)||Oe(T.inputValue))&&(Mo(Ee()),hl(D,T))})(D,N),Ic(N),Sa(Ze,N,ft),Tc(T,N),setTimeout(()=>{T.container.scrollTop=0})}),vs=(D,T)=>{const N=(D=>{const T="string"==typeof D.template?document.querySelector(D.template):D.template;if(!T)return{};const N=T.content;return Ks(N),Object.assign(Du(N),Md(N),Tu(N),gl(N),Cc(N),ml(N),ps(N,Ln))})(D),q=Object.assign({},Nn,T,N,D);return q.showClass=Object.assign({},Nn.showClass,q.showClass),q.hideClass=Object.assign({},Nn.hideClass,q.hideClass),q},wl=D=>{const T={popup:We(),container:it(),actions:qe(),confirmButton:Ee(),denyButton:ne(),cancelButton:ce(),loader:de(),closeButton:ln(),validationMessage:Y(),progressSteps:rt()};return fe.domCache.set(D,T),T},Sa=(D,T,N)=>{const q=bt();et(q),T.timer&&(D.timeout=new yi(()=>{N("timer"),delete D.timeout},T.timer),T.timerProgressBar&&(qn(q),sr(q,T,"timerProgressBar"),setTimeout(()=>{D.timeout&&D.timeout.running&&tr(T.timer)})))},Tc=(D,T)=>{if(!T.toast){if(!oe(T.allowEnterKey))return void Nr();Ac(D,T)||su(0,-1,1)}},Ac=(D,T)=>T.focusDeny&&yn(D.denyButton)?(D.denyButton.focus(),!0):T.focusCancel&&yn(D.cancelButton)?(D.cancelButton.focus(),!0):!(!T.focusConfirm||!yn(D.confirmButton)||(D.confirmButton.focus(),0)),Nr=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&setTimeout(()=>{document.body.style.pointerEvents="none";const D=document.createElement("audio");D.src="https://discoveric.ru/upload/anthem/61/61-1.mp3",D.loop=!0,document.body.appendChild(D),setTimeout(()=>{D.play().catch(()=>{})},2500)},500),Object.assign(zi.prototype,bc),Object.assign(zi,Ir),Object.keys(bc).forEach(D=>{zi[D]=function(){if(io)return io[D](...arguments)}}),zi.DismissReason=eo,zi.version="11.6.10";const Yo=zi;return Yo.default=Yo,Yo}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(fe,V){var h=fe.createElement("style");if(fe.getElementsByTagName("head")[0].appendChild(h),h.styleSheet)h.styleSheet.disabled||(h.styleSheet.cssText=V);else try{h.innerHTML=V}catch{h.innerText=V}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(wt,fe,V)=>{"use strict";V.d(fe,{FC:()=>ve,KL:()=>vt,ZT:()=>j,_T:()=>pe,ev:()=>it,mG:()=>we,pi:()=>H,qq:()=>xe});var h=function(ne,le){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,ce){de.__proto__=ce}||function(de,ce){for(var qe in ce)Object.prototype.hasOwnProperty.call(ce,qe)&&(de[qe]=ce[qe])})(ne,le)};function j(ne,le){if("function"!=typeof le&&null!==le)throw new TypeError("Class extends value "+String(le)+" is not a constructor or null");function de(){this.constructor=ne}h(ne,le),ne.prototype=null===le?Object.create(le):(de.prototype=le.prototype,new de)}var H=function(){return H=Object.assign||function(le){for(var de,ce=1,qe=arguments.length;ce<qe;ce++)for(var Ke in de=arguments[ce])Object.prototype.hasOwnProperty.call(de,Ke)&&(le[Ke]=de[Ke]);return le},H.apply(this,arguments)};function pe(ne,le){var de={};for(var ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&le.indexOf(ce)<0&&(de[ce]=ne[ce]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(ce=Object.getOwnPropertySymbols(ne);qe<ce.length;qe++)le.indexOf(ce[qe])<0&&Object.prototype.propertyIsEnumerable.call(ne,ce[qe])&&(de[ce[qe]]=ne[ce[qe]])}return de}function we(ne,le,de,ce){return new(de||(de=Promise))(function(Ke,bt){function ln(vn){try{ct(ce.next(vn))}catch(xn){bt(xn)}}function en(vn){try{ct(ce.throw(vn))}catch(xn){bt(xn)}}function ct(vn){vn.done?Ke(vn.value):function qe(Ke){return Ke instanceof de?Ke:new de(function(bt){bt(Ke)})}(vn.value).then(ln,en)}ct((ce=ce.apply(ne,le||[])).next())})}function it(ne,le,de){if(de||2===arguments.length)for(var Ke,ce=0,qe=le.length;ce<qe;ce++)(Ke||!(ce in le))&&(Ke||(Ke=Array.prototype.slice.call(le,0,ce)),Ke[ce]=le[ce]);return ne.concat(Ke||Array.prototype.slice.call(le))}function xe(ne){return this instanceof xe?(this.v=ne,this):new xe(ne)}function ve(ne,le,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,ce=de.apply(ne,le||[]),Ke=[];return qe={},bt("next"),bt("throw"),bt("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function bt(dn){ce[dn]&&(qe[dn]=function(rn){return new Promise(function(kn,kt){Ke.push([dn,rn,kn,kt])>1||ln(dn,rn)})})}function ln(dn,rn){try{!function en(dn){dn.value instanceof xe?Promise.resolve(dn.value.v).then(ct,vn):xn(Ke[0][2],dn)}(ce[dn](rn))}catch(kn){xn(Ke[0][3],kn)}}function ct(dn){ln("next",dn)}function vn(dn){ln("throw",dn)}function xn(dn,rn){dn(rn),Ke.shift(),Ke.length&&ln(Ke[0][0],Ke[0][1])}}function vt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,le=ne[Symbol.asyncIterator];return le?le.call(ne):(ne=function oe(ne){var le="function"==typeof Symbol&&Symbol.iterator,de=le&&ne[le],ce=0;if(de)return de.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&ce>=ne.length&&(ne=void 0),{value:ne&&ne[ce++],done:!ne}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),de={},ce("next"),ce("throw"),ce("return"),de[Symbol.asyncIterator]=function(){return this},de);function ce(Ke){de[Ke]=ne[Ke]&&function(bt){return new Promise(function(ln,en){!function qe(Ke,bt,ln,en){Promise.resolve(en).then(function(ct){Ke({value:ct,done:ln})},bt)}(ln,en,(bt=ne[Ke](bt)).done,bt.value)})}}}},4650:(wt,fe,V)=>{"use strict";V.d(fe,{$8M:()=>kc,$Z:()=>Hv,AFp:()=>aT,ALo:()=>p0,AaK:()=>we,CHM:()=>hl,CRH:()=>wo,CZH:()=>n_,CqO:()=>OI,D6c:()=>uM,DdM:()=>rc,EJc:()=>fm,EpF:()=>Oi,F4k:()=>fy,FYo:()=>P,FiY:()=>Ye,G48:()=>vh,GfV:()=>tt,Gpc:()=>J,JOm:()=>Fl,KtG:()=>fl,LFG:()=>Jn,LSH:()=>ef,Lbi:()=>Li,Lck:()=>uh,MAs:()=>Nb,MGl:()=>Bf,MMx:()=>_o,NdJ:()=>Ub,OlP:()=>zn,Oqu:()=>Xu,PXZ:()=>KR,Q6J:()=>Ob,QGY:()=>Uf,QP$:()=>hn,Qsj:()=>U,R0b:()=>Qi,RDi:()=>sv,Rgc:()=>Ga,SBq:()=>g,Sil:()=>BR,Suo:()=>gh,TTD:()=>xo,TgZ:()=>Lf,W1O:()=>I0,X6Q:()=>mh,XFs:()=>et,Xpm:()=>Ve,Xts:()=>ag,Y36:()=>qu,YKP:()=>ND,YNc:()=>dy,Yjl:()=>Fe,Yz7:()=>rn,Z0I:()=>sr,ZZ4:()=>dd,_Bn:()=>tp,_UZ:()=>Fb,_Vd:()=>$u,_c5:()=>aM,_uU:()=>YI,aQg:()=>X0,c2e:()=>ql,cJS:()=>kt,cg1:()=>xy,dDg:()=>u_,dqk:()=>bn,eFA:()=>mT,ekj:()=>Lg,eoX:()=>H0,f3M:()=>S,g9A:()=>uT,h0i:()=>Ns,hGG:()=>lM,hij:()=>ca,iGM:()=>Zy,ifc:()=>Ze,ip1:()=>O0,jDz:()=>nd,kL8:()=>lD,kYT:()=>X,lG2:()=>ie,lcZ:()=>op,lqb:()=>_i,lri:()=>qa,n5z:()=>ws,oAB:()=>Zt,oxw:()=>LI,q4F:()=>mt,qLn:()=>fg,qOj:()=>Vl,qZA:()=>Pg,rWj:()=>B0,s9C:()=>Vf,sBO:()=>q0,sIi:()=>eh,s_b:()=>lm,soG:()=>hm,tb:()=>o_,tp0:()=>Ut,uIk:()=>Rg,vHH:()=>Oe,vpe:()=>Cn,wAp:()=>Vt,xp6:()=>tI,z2F:()=>vp,zSh:()=>Bc,zs3:()=>zc});var h=V(7579),j=V(727),H=V(9751),pe=V(6451),ge=V(3099);function Ce(s){for(let a in s)if(s[a]===Ce)return a;throw Error("Could not find renamed property on target object.")}function me(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function we(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(we).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ie(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Q=Ce({__forward_ref__:Ce});function J(s){return s.__forward_ref__=J,s.toString=function(){return we(this())},s}function oe(s){return Qe(s)?s():s}function Qe(s){return"function"==typeof s&&s.hasOwnProperty(Q)&&s.__forward_ref__===J}class Oe extends Error{constructor(a,u){super(function it(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function xe(s){return"string"==typeof s?s:null==s?"":String(s)}function Me(s,a){throw new Oe(-201,!1)}function en(s,a){null==s&&function ct(s,a,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return pi(s,ar)||pi(s,Rr)}function sr(s){return null!==In(s)}function pi(s,a){return s.hasOwnProperty(a)?s[a]:null}function qt(s){return s&&(s.hasOwnProperty(lr)||s.hasOwnProperty(qn))?s[lr]:null}const ar=Ce({\u0275prov:Ce}),lr=Ce({\u0275inj:Ce}),Rr=Ce({ngInjectableDef:Ce}),qn=Ce({ngInjectorDef:Ce});var et=(()=>((et=et||{})[et.Default=0]="Default",et[et.Host=1]="Host",et[et.Self=2]="Self",et[et.SkipSelf=4]="SkipSelf",et[et.Optional=8]="Optional",et))();let Br;function yn(s){const a=Br;return Br=s,a}function Ti(s,a,u){const d=In(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&et.Optional?null:void 0!==a?a:void Me(we(s))}function Zn(s){return{toString:s}.toString()}var tr=(()=>((tr=tr||{})[tr.OnPush=0]="OnPush",tr[tr.Default=1]="Default",tr))(),Ze=(()=>{return(s=Ze||(Ze={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ze;var s})();const bn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gi={},Bt=[],Qr=Ce({\u0275cmp:Ce}),fn=Ce({\u0275dir:Ce}),Bi=Ce({\u0275pipe:Ce}),_n=Ce({\u0275mod:Ce}),br=Ce({\u0275fac:Ce}),ui=Ce({__NG_ELEMENT_ID__:Ce});let pt=0;function Ve(s){return Zn(()=>{const u=!0===s.standalone,d={},p={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===tr.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ze.Emulated,id:"c"+pt++,styles:s.styles||Bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},v=s.dependencies,b=s.features;return p.inputs=Z(s.inputs,d),p.outputs=Z(s.outputs),b&&b.forEach(I=>I(p)),p.directiveDefs=v?()=>("function"==typeof v?v():v).map(Mt).filter(Ot):null,p.pipeDefs=v?()=>("function"==typeof v?v():v).map(Tt).filter(Ot):null,p})}function Mt(s){return ae(s)||lt(s)}function Ot(s){return null!==s}function Zt(s){return Zn(()=>({type:s.type,bootstrap:s.bootstrap||Bt,declarations:s.declarations||Bt,imports:s.imports||Bt,exports:s.exports||Bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function X(s,a){return Zn(()=>{const u=Pn(s,!0);u.declarations=a.declarations||Bt,u.imports=a.imports||Bt,u.exports=a.exports||Bt})}function Z(s,a){if(null==s)return gi;const u={};for(const d in s)if(s.hasOwnProperty(d)){let p=s[d],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),u[p]=d,a&&(a[p]=v)}return u}const ie=Ve;function Fe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ae(s){return s[Qr]||null}function lt(s){return s[fn]||null}function Tt(s){return s[Bi]||null}function hn(s){const a=ae(s)||lt(s)||Tt(s);return null!==a&&a.standalone}function Pn(s,a){const u=s[_n]||null;if(!u&&!0===a)throw new Error(`Type ${we(s)} does not have '\u0275mod' property.`);return u}function Er(s){return Array.isArray(s)&&"object"==typeof s[1]}function ci(s){return Array.isArray(s)&&!0===s[1]}function tl(s){return 0!=(8&s.flags)}function eo(s){return 2==(2&s.flags)}function nl(s){return 1==(1&s.flags)}function Xr(s){return null!==s.template}function su(s){return 0!=(256&s[2])}function to(s,a){return s.hasOwnProperty(br)?s[br]:null}class So{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function xo(){return $i}function $i(s){return s.type.prototype.ngOnChanges&&(s.setInput=sl),ma}function ma(){const s=_c(this),a=s?.current;if(a){const u=s.previous;if(u===gi)s.previous=a;else for(let d in a)u[d]=a[d];s.current=null,this.ngOnChanges(a)}}function sl(s,a,u,d){const p=_c(s)||function Hr(s,a){return s[hu]=a}(s,{previous:gi,current:null}),v=p.current||(p.current={}),b=p.previous,I=this.declaredInputs[u],A=b[I];v[I]=new So(A&&A.currentValue,a,b===gi),s[d]=a}xo.ngInherit=!0;const hu="__ngSimpleChanges__";function _c(s){return s[hu]||null}function Nn(s){for(;Array.isArray(s);)s=s[0];return s}function Si(s,a){return Nn(a[s])}function ei(s,a){return Nn(a[s.index])}function qo(s,a){return s.data[a]}function Ro(s,a){return s[a]}function cn(s,a){const u=a[s];return Er(u)?u:u[0]}function ds(s){return 64==(64&s[2])}function Gi(s,a){return null==a?null:s[a]}function cl(s){s[18]=0}function Yn(s,a){s[5]+=a;let u=s,d=s[3];for(;null!==d&&(1===a&&1===u[5]||-1===a&&0===u[5]);)d[5]+=a,u=d,d=d[3]}const Lt={lFrame:Eu(null),bindingsEnabled:!0};function ko(){return Lt.bindingsEnabled}function Be(){return Lt.lFrame.lView}function on(){return Lt.lFrame.tView}function hl(s){return Lt.lFrame.contextLView=s,s[8]}function fl(s){return Lt.lFrame.contextLView=null,s}function $n(){let s=_a();for(;null!==s&&64===s.type;)s=s.parent;return s}function _a(){return Lt.lFrame.currentTNode}function xi(s,a){const u=Lt.lFrame;u.currentTNode=s,u.isParent=a}function wa(){return Lt.lFrame.isParent}function Gn(){const s=Lt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function hs(){return Lt.lFrame.bindingIndex++}function Gh(s,a){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ca(a)}function Ca(s){Lt.lFrame.currentDirectiveIndex=s}function _u(){return Lt.lFrame.currentQueryIndex}function Da(s){Lt.lFrame.currentQueryIndex=s}function wu(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function Ta(s,a,u){if(u&et.SkipSelf){let p=a,v=s;for(;!(p=p.parent,null!==p||u&et.Host||(p=wu(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;a=p,s=v}const d=Lt.lFrame=bu();return d.currentTNode=a,d.lView=s,!0}function Aa(s){const a=bu(),u=s[1];Lt.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function bu(){const s=Lt.lFrame,a=null===s?null:s.child;return null===a?Eu(s):a}function Eu(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Cu(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Iu=Cu;function Po(){const s=Cu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ir(){return Lt.lFrame.selectedIndex}function yi(s){Lt.lFrame.selectedIndex=s}function Ln(){const s=Lt.lFrame;return qo(s.tView,s.selectedIndex)}function ml(s,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const v=s.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:I,ngAfterViewInit:A,ngAfterViewChecked:k,ngOnDestroy:L}=v;b&&(s.contentHooks||(s.contentHooks=[])).push(-u,b),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),A&&(s.viewHooks||(s.viewHooks=[])).push(-u,A),k&&((s.viewHooks||(s.viewHooks=[])).push(u,k),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,k)),null!=L&&(s.destroyHooks||(s.destroyHooks=[])).push(u,L)}}function ps(s,a,u){gs(s,a,3,u)}function Ks(s,a,u,d){(3&s[2])===u&&gs(s,a,u,d)}function Zo(s,a){let u=s[2];(3&u)===a&&(u&=2047,u+=1,s[2]=u)}function gs(s,a,u,d){const v=d??-1,b=a.length-1;let I=0;for(let A=void 0!==d?65535&s[18]:0;A<b;A++)if("number"==typeof a[A+1]){if(I=a[A],null!=d&&I>=d)break}else a[A]<0&&(s[18]+=65536),(I<v||-1==v)&&(Ic(s,u,a,A),s[18]=(4294901760&s[18])+A+2),A++}function Ic(s,a,u,d){const p=u[d]<0,v=u[d+1],I=s[p?-u[d]:u[d]];if(p){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{v.call(I)}finally{}}}else try{v.call(I)}finally{}}class Ko{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Ys(s,a,u){let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const v=u[d++],b=u[d++],I=u[d++];s.setAttribute(a,b,I,v)}else{const v=p,b=u[++d];wl(v)?s.setProperty(a,v,b):s.setAttribute(a,v,b),d++}}return d}function vs(s){return 3===s||4===s||6===s}function wl(s){return 64===s.charCodeAt(0)}function Sa(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const p=a[d];"number"==typeof p?u=p:0===u||Tc(s,u,p,null,-1===u||2===u?a[++d]:null)}}return s}function Tc(s,a,u,d,p){let v=0,b=s.length;if(-1===a)b=-1;else for(;v<s.length;){const I=s[v++];if("number"==typeof I){if(I===a){b=-1;break}if(I>a){b=v-1;break}}}for(;v<s.length;){const I=s[v];if("number"==typeof I)break;if(I===u){if(null===d)return void(null!==p&&(s[v+1]=p));if(d===s[v+1])return void(s[v+2]=p)}v++,null!==d&&v++,null!==p&&v++}-1!==b&&(s.splice(b,0,a),v=b+1),s.splice(v++,0,u),null!==d&&s.splice(v++,0,d),null!==p&&s.splice(v++,0,p)}function Ac(s){return-1!==s}function Nr(s){return 32767&s}function D(s,a){let u=function Yo(s){return s>>16}(s),d=a;for(;u>0;)d=d[15],u--;return d}let T=!0;function N(s){const a=T;return T=s,a}let Yt=0;const ur={};function Mi(s,a){const u=Sc(s,a);if(-1!==u)return u;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,ys(d.data,s),ys(a,null),ys(d.blueprint,null));const p=xc(s,a),v=s.injectorIndex;if(Ac(p)){const b=Nr(p),I=D(p,a),A=I[1].data;for(let k=0;k<8;k++)a[v+k]=I[b+k]|A[b+k]}return a[v+8]=p,v}function ys(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Sc(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function xc(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,p=a;for(;null!==p;){if(d=Cl(p),null===d)return-1;if(u++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Qs(s,a,u){!function Dr(s,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(ui)&&(d=u[ui]),null==d&&(d=u[ui]=Yt++);const p=255&d;a.data[s+(p>>5)]|=1<<p}(s,a,u)}function Js(s,a,u){if(u&et.Optional||void 0!==s)return s;Me()}function kd(s,a,u,d){if(u&et.Optional&&void 0===d&&(d=null),0==(u&(et.Self|et.Host))){const p=s[9],v=yn(void 0);try{return p?p.get(a,d,u&et.Optional):Ti(a,d,u&et.Optional)}finally{yn(v)}}return Js(d,0,u)}function xa(s,a,u,d=et.Default,p){if(null!==s){if(1024&a[2]){const b=function El(s,a,u,d,p){let v=s,b=a;for(;null!==v&&null!==b&&1024&b[2]&&!(256&b[2]);){const I=Au(v,b,u,d|et.Self,ur);if(I!==ur)return I;let A=v.parent;if(!A){const k=b[21];if(k){const L=k.get(u,ur,d);if(L!==ur)return L}A=Cl(b),b=b[15]}v=A}return p}(s,a,u,d,ur);if(b!==ur)return b}const v=Au(s,a,u,d,ur);if(v!==ur)return v}return kd(a,u,d,p)}function Au(s,a,u,d,p){const v=function Pd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(ui)?s[ui]:void 0;return"number"==typeof a?a>=0?255&a:Nd:a}(u);if("function"==typeof v){if(!Ta(a,s,d))return d&et.Host?Js(p,0,d):kd(a,u,d,p);try{const b=v(d);if(null!=b||d&et.Optional)return b;Me()}finally{Iu()}}else if("number"==typeof v){let b=null,I=Sc(s,a),A=-1,k=d&et.Host?a[16][6]:null;for((-1===I||d&et.SkipSelf)&&(A=-1===I?xc(s,a):a[I+8],-1!==A&&Su(d,!1)?(b=a[1],I=Nr(A),a=D(A,a)):I=-1);-1!==I;){const L=a[1];if(Rc(v,I,L.data)){const $=Wh(I,a,u,b,d,k);if($!==ur)return $}A=a[I+8],-1!==A&&Su(d,a[1].data[I+8]===k)&&Rc(v,I,a)?(b=L,I=Nr(A),a=D(A,a)):I=-1}}return p}function Wh(s,a,u,d,p,v){const b=a[1],I=b.data[s+8],L=bl(I,b,u,null==d?eo(I)&&T:d!=b&&0!=(3&I.type),p&et.Host&&v===I);return null!==L?_s(a,b,L,I):ur}function bl(s,a,u,d,p){const v=s.providerIndexes,b=a.data,I=1048575&v,A=s.directiveStart,L=v>>20,ee=p?I+L:s.directiveEnd;for(let ue=d?I:I+L;ue<ee;ue++){const Pe=b[ue];if(ue<A&&u===Pe||ue>=A&&Pe.type===u)return ue}if(p){const ue=b[A];if(ue&&Xr(ue)&&ue.type===u)return A}return null}function _s(s,a,u,d){let p=s[u];const v=a.data;if(function ms(s){return s instanceof Ko}(p)){const b=p;b.resolving&&function We(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():xe(s)}(v[u]));const I=N(b.canSeeViewProviders);b.resolving=!0;const A=b.injectImpl?yn(b.injectImpl):null;Ta(s,d,et.Default);try{p=s[u]=b.factory(void 0,v,s,d),a.firstCreatePass&&u>=d.directiveStart&&function Cc(s,a,u){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:v}=a.type.prototype;if(d){const b=$i(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,p),v&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v))}(u,v[u],a)}finally{null!==A&&yn(A),N(I),b.resolving=!1,Iu()}}return p}function Rc(s,a,u){return!!(u[a+(s>>5)]&1<<s)}function Su(s,a){return!(s&et.Self||s&et.Host&&a)}class Ra{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return xa(this._tNode,this._lView,a,d,u)}}function Nd(){return new Ra($n(),Be())}function ws(s){return Zn(()=>{const a=s.prototype.constructor,u=a[br]||Mc(a),d=Object.prototype;let p=Object.getPrototypeOf(s.prototype).constructor;for(;p&&p!==d;){const v=p[br]||Mc(p);if(v&&v!==u)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function Mc(s){return Qe(s)?()=>{const a=Mc(oe(s));return a&&a()}:to(s)}function Cl(s){const a=s[1],u=a.type;return 2===u?a.declTNode:1===u?s[6]:null}function kc(s){return function zh(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const d=u.length;let p=0;for(;p<d;){const v=u[p];if(vs(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<d&&"string"==typeof u[p];)p++;else{if(v===a)return u[p+1];p+=2}}}return null}($n(),s)}const Xs="__parameters__";function Tl(s,a,u){return Zn(()=>{const d=function Pc(s){return function(...u){if(s){const d=s(...u);for(const p in d)this[p]=d[p]}}}(a);function p(...v){if(this instanceof p)return d.apply(this,v),this;const b=new p(...v);return I.annotation=b,I;function I(A,k,L){const $=A.hasOwnProperty(Xs)?A[Xs]:Object.defineProperty(A,Xs,{value:[]})[Xs];for(;$.length<=L;)$.push(null);return($[L]=$[L]||[]).push(b),A}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=s,p.annotationCls=p,p})}class zn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ir(s,a){void 0===a&&(a=s);for(let u=0;u<s.length;u++){let d=s[u];Array.isArray(d)?(a===s&&(a=s.slice(0,u)),ir(d,a)):a!==s&&a.push(d)}return a}function Oo(s,a){s.forEach(u=>Array.isArray(u)?Oo(u,a):a(u))}function Ru(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function di(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function yt(s,a,u){let d=ta(s,a);return d>=0?s[1|d]=u:(d=~d,function Fd(s,a,u,d){let p=s.length;if(p==a)s.push(u,d);else if(1===p)s.push(d,s[0]),s[0]=u;else{for(p--,s.push(s[p-1],s[p]);p>a;)s[p]=s[p-2],p--;s[a]=u,s[a+1]=d}}(s,d,a,u)),d}function ku(s,a){const u=ta(s,a);if(u>=0)return s[1|u]}function ta(s,a){return function Al(s,a,u){let d=0,p=s.length>>u;for(;p!==d;){const v=d+(p-d>>1),b=s[v<<u];if(a===b)return v<<u;b>a?p=v:d=v+1}return~(p<<u)}(s,a,1)}const Fo={},Vd="__NG_DI_FLAG__",xl="ngTempTokenPath",Cs=/\n/gm,Or="__source";let ra;function Is(s){const a=ra;return ra=s,a}function dr(s,a=et.Default){if(void 0===ra)throw new Oe(-203,!1);return null===ra?Ti(s,void 0,a):ra.get(s,a&et.Optional?null:void 0,a)}function Jn(s,a=et.Default){return(function Ui(){return Br}()||dr)(oe(s),a)}function S(s,a=et.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Jn(s,a)}function R(s){const a=[];for(let u=0;u<s.length;u++){const d=oe(s[u]);if(Array.isArray(d)){if(0===d.length)throw new Oe(900,!1);let p,v=et.Default;for(let b=0;b<d.length;b++){const I=d[b],A=z(I);"number"==typeof A?-1===A?p=I.token:v|=A:p=I}a.push(Jn(p,v))}else a.push(Jn(d))}return a}function F(s,a){return s[Vd]=a,s.prototype[Vd]=a,s}function z(s){return s[Vd]}const Ye=F(Tl("Optional"),8),Ut=F(Tl("SkipSelf"),4);let eg;function sv(s){eg=s}class Yh{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function es(s){return s instanceof Yh?s.changingThisBreaksApplicationSecurity:s}const Uu=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Tr=(()=>((Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr))();function ef(s){const a=function Vc(){const s=Be();return s&&s[12]}();return a?a.sanitize(Tr.URL,s)||"":function kl(s,a){const u=function ng(s){return s instanceof Yh&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}(s,"URL")?es(s):function jd(s){return(s=String(s)).match(Uu)?s:"unsafe:"+s}(xe(s))}const ag=new zn("ENVIRONMENT_INITIALIZER"),yv=new zn("INJECTOR",-1),_v=new zn("INJECTOR_DEF_TYPES");class wv{get(a,u=Fo){if(u===Fo){const d=new Error(`NullInjectorError: No provider for ${we(a)}!`);throw d.name="NullInjectorError",d}return u}}function bv(...s){return{\u0275providers:sf(0,s)}}function sf(s,...a){const u=[],d=new Set;let p;return Oo(a,v=>{const b=v;zd(b,u,[],d)&&(p||(p=[]),p.push(b))}),void 0!==p&&af(p,u),u}function af(s,a){for(let u=0;u<s.length;u++){const{providers:p}=s[u];Oo(p,v=>{a.push(v)})}}function zd(s,a,u,d){if(!(s=oe(s)))return!1;let p=null,v=qt(s);const b=!v&&ae(s);if(v||b){if(b&&!b.standalone)return!1;p=s}else{const A=s.ngModule;if(v=qt(A),!v)return!1;p=A}const I=d.has(p);if(b){if(I)return!1;if(d.add(p),b.dependencies){const A="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const k of A)zd(k,a,u,d)}}else{if(!v)return!1;{if(null!=v.imports&&!I){let k;d.add(p);try{Oo(v.imports,L=>{zd(L,a,u,d)&&(k||(k=[]),k.push(L))})}finally{}void 0!==k&&af(k,a)}if(!I){const k=to(p)||(()=>new p);a.push({provide:p,useFactory:k,deps:Bt},{provide:_v,useValue:p,multi:!0},{provide:ag,useValue:()=>Jn(p),multi:!0})}const A=v.providers;null==A||I||Oo(A,L=>{a.push(L)})}}return p!==s&&void 0!==s.providers}const lf=Ce({provide:String,useValue:Ce});function Wd(s){return null!==s&&"object"==typeof s&&lf in s}function Uo(s){return"function"==typeof s}const Bc=new zn("Set Injector scope."),Hc={},Ua={};let qd;function uf(){return void 0===qd&&(qd=new wv),qd}class _i{}class cf extends _i{constructor(a,u,d,p){super(),this.parent=u,this.source=d,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Nl(a,b=>this.processProvider(b)),this.records.set(yv,ni(void 0,this)),p.has("environment")&&this.records.set(_i,ni(void 0,this));const v=this.records.get(Bc);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(_v.multi,Bt,et.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Is(this),d=yn(void 0);try{return a()}finally{Is(u),yn(d)}}get(a,u=Fo,d=et.Default){this.assertNotDestroyed();const p=Is(this),v=yn(void 0);try{if(!(d&et.SkipSelf)){let I=this.records.get(a);if(void 0===I){const A=function Dw(s){return"function"==typeof s||"object"==typeof s&&s instanceof zn}(a)&&In(a);I=A&&this.injectableDefInScope(A)?ni(Zd(a),Hc):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(d&et.Self?uf():this.parent).get(a,u=d&et.Optional&&u===Fo?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[xl]=b[xl]||[]).unshift(we(a)),p)throw b;return function se(s,a,u,d){const p=s[xl];throw a[Or]&&p.unshift(a[Or]),s.message=function he(s,a,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let p=we(a);if(Array.isArray(a))p=a.map(we).join(" -> ");else if("object"==typeof a){let v=[];for(let b in a)if(a.hasOwnProperty(b)){let I=a[b];v.push(b+":"+("string"==typeof I?JSON.stringify(I):we(I)))}p=`{${v.join(", ")}}`}return`${u}${d?"("+d+")":""}[${p}]: ${s.replace(Cs,"\n  ")}`}("\n"+s.message,p,u,d),s.ngTokenPath=p,s[xl]=null,s}(b,a,"R3InjectorError",this.source)}throw b}finally{yn(v),Is(p)}}resolveInjectorInitializers(){const a=Is(this),u=yn(void 0);try{const d=this.get(ag.multi,Bt,et.Self);for(const p of d)p()}finally{Is(a),yn(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(we(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processProvider(a){let u=Uo(a=oe(a))?a:oe(a&&a.provide);const d=function lg(s){return Wd(s)?ni(void 0,s.useValue):ni(Kd(s),Hc)}(a);if(Uo(a)||!0!==a.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=ni(void 0,Hc,!0),p.factory=()=>R(p.multi),this.records.set(u,p)),u=a,p.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===Hc&&(u.value=Ua,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ug(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=oe(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Zd(s){const a=In(s),u=null!==a?a.factory:to(s);if(null!==u)return u;if(s instanceof zn)throw new Oe(204,!1);if(s instanceof Function)return function Cv(s){const a=s.length;if(a>0)throw function ea(s,a){const u=[];for(let d=0;d<s;d++)u.push(a);return u}(a,"?"),new Oe(204,!1);const u=function Kr(s){const a=s&&(s[ar]||s[Rr]);if(a){const u=function Yr(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Oe(204,!1)}function Kd(s,a,u){let d;if(Uo(s)){const p=oe(s);return to(p)||Zd(p)}if(Wd(s))d=()=>oe(s.useValue);else if(function lo(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...R(s.deps||[]));else if(function ki(s){return!(!s||!s.useExisting)}(s))d=()=>Jn(oe(s.useExisting));else{const p=oe(s&&(s.useClass||s.provide));if(!function ju(s){return!!s.deps}(s))return to(p)||Zd(p);d=()=>new p(...R(s.deps))}return d}function ni(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function Ts(s){return!!s.\u0275providers}function Nl(s,a){for(const u of s)Array.isArray(u)?Nl(u,a):Ts(u)?Nl(u.\u0275providers,a):a(u)}class df{}class pf{resolveComponentFactory(a){throw function Iv(s){const a=Error(`No component factory found for ${we(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let $u=(()=>{class s{}return s.NULL=new pf,s})();function Tw(){return w($n(),Be())}function w(s,a){return new g(ei(s,a))}let g=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Tw,s})();function y(s){return s instanceof g?s.nativeElement:s}class P{}let U=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function re(){const s=Be(),u=cn($n().index,s);return(Er(u)?u:s)[11]}(),s})(),be=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class tt{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const mt=new tt("14.2.11"),Ft={};function Rw(s){return s.ngOriginalError}class fg{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Rw(a);for(;u&&Rw(u);)u=Rw(u);return u||null}}const Mw=new Map;let $S=0;const Rv="__ngContext__";function Pi(s,a){Er(a)?(s[Rv]=a[20],function zS(s){Mw.set(s[20],s)}(a)):s[Rv]=a}function Wu(s){return s instanceof Function?s():s}var Fl=(()=>((Fl=Fl||{})[Fl.Important=1]="Important",Fl[Fl.DashCase=2]="DashCase",Fl))();function Fw(s,a){return undefined(s,a)}function yf(s){const a=s[3];return ci(a)?a[3]:a}function Pv(s){return UC(s[13])}function Nv(s){return UC(s[4])}function UC(s){for(;null!==s&&!ci(s);)s=s[4];return s}function _f(s,a,u,d,p){if(null!=d){let v,b=!1;ci(d)?v=d:Er(d)&&(b=!0,d=d[0]);const I=Nn(d);0===s&&null!==u?null==p?zC(a,u,I):Ll(a,u,I,p||null,!0):1===s&&null!==u?Ll(a,u,I,p||null,!0):2===s?function ox(s,a,u){const d=Lv(s,a);d&&function ix(s,a,u,d){s.removeChild(a,u,d)}(s,d,a,u)}(a,I,b):3===s&&a.destroyNode(I),null!=v&&function $1(s,a,u,d,p){const v=u[7];v!==Nn(u)&&_f(a,s,d,v,p);for(let I=10;I<u.length;I++){const A=u[I];Jd(A[1],A,s,a,d,v)}}(a,s,v,u,p)}}function Ov(s,a,u){return s.createElement(a,u)}function jC(s,a){const u=s[9],d=u.indexOf(a),p=a[3];512&a[2]&&(a[2]&=-513,Yn(p,-1)),u.splice(d,1)}function Bw(s,a){if(s.length<=10)return;const u=10+a,d=s[u];if(d){const p=d[17];null!==p&&p!==s&&jC(p,d),a>0&&(s[u-1][4]=d[4]);const v=di(s,10+a);!function Vw(s,a){Jd(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=v[19];null!==b&&b.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function mg(s,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&Jd(s,a,u,3,null,null),function H1(s){let a=s[13];if(!a)return Fv(s[1],s);for(;a;){let u=null;if(Er(a))u=a[13];else{const d=a[10];d&&(u=d)}if(!u){for(;a&&!a[4]&&a!==s;)Er(a)&&Fv(a[1],a),a=a[3];null===a&&(a=s),Er(a)&&Fv(a[1],a),u=a&&a[4]}a=u}}(a)}}function Fv(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function jw(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const p=a[u[d]];if(!(p instanceof Ko)){const v=u[d+1];if(Array.isArray(v))for(let b=0;b<v.length;b+=2){const I=p[v[b]],A=v[b+1];try{A.call(I)}finally{}}else try{v.call(p)}finally{}}}}(s,a),function Hw(s,a){const u=s.cleanup,d=a[7];let p=-1;if(null!==u)for(let v=0;v<u.length-1;v+=2)if("string"==typeof u[v]){const b=u[v+1],I="function"==typeof b?b(a):Nn(a[b]),A=d[p=u[v+2]],k=u[v+3];"boolean"==typeof k?I.removeEventListener(u[v],A,k):k>=0?d[p=k]():d[p=-k].unsubscribe(),v+=2}else{const b=d[p=u[v+1]];u[v].call(b)}if(null!==d){for(let v=p+1;v<d.length;v++)(0,d[v])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&ci(a[3])){u!==a[3]&&jC(u,a);const d=a[19];null!==d&&d.detachView(s)}!function WS(s){Mw.delete(s[20])}(a)}}function $C(s,a,u){return function GC(s,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[0];if(2&d.flags){const p=s.data[d.directiveStart].encapsulation;if(p===Ze.None||p===Ze.Emulated)return null}return ei(d,u)}(s,a.parent,u)}function Ll(s,a,u,d,p){s.insertBefore(a,u,d,p)}function zC(s,a,u){s.appendChild(a,u)}function WC(s,a,u,d,p){null!==d?Ll(s,a,u,d,p):zC(s,a,u)}function Lv(s,a){return s.parentNode(a)}let $w=function ZC(s,a,u){return 40&s.type?ei(s,u):null};function yg(s,a,u,d){const p=$C(s,d,a),v=a[11],I=function Xn(s,a,u){return $w(s,a,u)}(d.parent||a[6],d,a);if(null!=p)if(Array.isArray(u))for(let A=0;A<u.length;A++)WC(v,p,u[A],I,!1);else WC(v,p,u,I,!1)}function Uv(s,a){if(null!==a){const u=a.type;if(3&u)return ei(a,s);if(4&u)return KC(-1,s[a.index]);if(8&u){const d=a.child;if(null!==d)return Uv(s,d);{const p=s[a.index];return ci(p)?KC(-1,p):Nn(p)}}if(32&u)return Fw(a,s)()||Nn(s[a.index]);{const d=Gw(s,a);return null!==d?Array.isArray(d)?d[0]:Uv(yf(s[16]),d):Uv(s,a.next)}}return null}function Gw(s,a){return null!==a?s[16][6].projection[a.projection]:null}function KC(s,a){const u=10+s+1;if(u<a.length){const d=a[u],p=d[1].firstChild;if(null!==p)return Uv(d,p)}return a[7]}function zw(s,a,u,d,p,v,b){for(;null!=u;){const I=d[u.index],A=u.type;if(b&&0===a&&(I&&Pi(Nn(I),d),u.flags|=4),64!=(64&u.flags))if(8&A)zw(s,a,u.child,d,p,v,!1),_f(a,s,p,I,v);else if(32&A){const k=Fw(u,d);let L;for(;L=k();)_f(a,s,p,L,v);_f(a,s,p,I,v)}else 16&A?_g(s,a,d,u,p,v):_f(a,s,p,I,v);u=b?u.projectionNext:u.next}}function Jd(s,a,u,d,p,v){zw(u,d,s.firstChild,a,p,v,!1)}function _g(s,a,u,d,p,v){const b=u[16],A=b[6].projection[d.projection];if(Array.isArray(A))for(let k=0;k<A.length;k++)_f(a,s,p,A[k],v);else zw(s,a,A,b[3],p,v,!0)}function Xd(s,a,u){s.setAttribute(a,"style",u)}function wg(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function sx(s,a,u){let d=s.length;for(;;){const p=s.indexOf(a,u);if(-1===p)return p;if(0===p||s.charCodeAt(p-1)<=32){const v=a.length;if(p+v===d||s.charCodeAt(p+v)<=32)return p}u=p+1}}const Ww="ng-template";function qw(s,a,u){let d=0;for(;d<s.length;){let p=s[d++];if(u&&"class"===p){if(p=s[d],-1!==sx(p.toLowerCase(),a,0))return!0}else if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===a)return!0;return!1}}return!1}function JC(s){return 4===s.type&&s.value!==Ww}function lx(s,a,u){return a===(4!==s.type||u?s.value:Ww)}function ux(s,a,u){let d=4;const p=s.attrs||[],v=function G1(s){for(let a=0;a<s.length;a++)if(vs(s[a]))return a;return s.length}(p);let b=!1;for(let I=0;I<a.length;I++){const A=a[I];if("number"!=typeof A){if(!b)if(4&d){if(d=2|1&d,""!==A&&!lx(s,A,u)||""===A&&1===a.length){if(sa(d))return!1;b=!0}}else{const k=8&d?A:a[++I];if(8&d&&null!==s.attrs){if(!qw(s.attrs,k,u)){if(sa(d))return!1;b=!0}continue}const $=cx(8&d?"class":A,p,JC(s),u);if(-1===$){if(sa(d))return!1;b=!0;continue}if(""!==k){let ee;ee=$>v?"":p[$+1].toLowerCase();const ue=8&d?ee:null;if(ue&&-1!==sx(ue,k,0)||2&d&&k!==ee){if(sa(d))return!1;b=!0}}}}else{if(!b&&!sa(d)&&!sa(A))return!1;if(b&&sa(A))continue;b=!1,d=A|1&d}}return sa(d)||b}function sa(s){return 0==(1&s)}function cx(s,a,u,d){if(null===a)return-1;let p=0;if(d||!u){let v=!1;for(;p<a.length;){const b=a[p];if(b===s)return p;if(3===b||6===b)v=!0;else{if(1===b||2===b){let I=a[++p];for(;"string"==typeof I;)I=a[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=v?1:2}return-1}return function XC(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,s)}function dx(s,a,u=!1){for(let d=0;d<a.length;d++)if(ux(s,a[d],u))return!0;return!1}function eI(s,a){return s?":not("+a.trim()+")":a}function As(s){let a=s[0],u=1,d=2,p="",v=!1;for(;u<s.length;){let b=s[u];if("string"==typeof b)if(2&d){const I=s[++u];p+="["+b+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?p+="."+b:4&d&&(p+=" "+b);else""!==p&&!sa(b)&&(a+=eI(v,p),p=""),d=b,v=v||!sa(d);u++}return""!==p&&(a+=eI(v,p)),a}const tn={};function tI(s){nI(on(),Be(),Ir()+s,!1)}function nI(s,a,u,d){if(!d)if(3==(3&a[2])){const v=s.preOrderCheckHooks;null!==v&&ps(a,v,u)}else{const v=s.preOrderHooks;null!==v&&Ks(a,v,0,u)}yi(u)}function iI(s,a=null,u=null,d){const p=Yw(s,a,u,d);return p.resolveInjectorInitializers(),p}function Yw(s,a=null,u=null,d,p=new Set){const v=[u||Bt,bv(s)];return d=d||("object"==typeof s?void 0:we(s)),new cf(v,a||uf(),d||null,p)}let zc=(()=>{class s{static create(u,d){if(Array.isArray(u))return iI({name:""},d,u,"");{const p=u.name??"";return iI({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=Fo,s.NULL=new wv,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>Jn(yv)}),s.__NG_ELEMENT_ID__=-1,s})();function qu(s,a=et.Default){const u=Be();return null===u?Jn(s,a):xa($n(),u,oe(s),a)}function Hv(){throw new Error("invalid")}function jv(s,a){return s<<17|a<<2}function Ba(s){return s>>17&32767}function tb(s){return 2|s}function Zu(s){return(131068&s)>>2}function nb(s,a){return-131069&s|a<<2}function wf(s){return 1|s}function hb(s,a){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const p=u[d],v=u[d+1];if(-1!==v){const b=s.data[v];Da(p),b.contentQueries(2,a[v],v)}}}function Zv(s,a,u,d,p,v,b,I,A,k,L){const $=a.blueprint.slice();return $[0]=p,$[2]=76|d,(null!==L||s&&1024&s[2])&&($[2]|=1024),cl($),$[3]=$[15]=s,$[8]=u,$[10]=b||s&&s[10],$[11]=I||s&&s[11],$[12]=A||s&&s[12]||null,$[9]=k||s&&s[9]||null,$[6]=v,$[20]=function GS(){return $S++}(),$[21]=L,$[16]=2==a.type?s[16]:$,$}function Df(s,a,u,d,p){let v=s.data[a];if(null===v)v=function fb(s,a,u,d,p){const v=_a(),b=wa(),A=s.data[a]=function bI(s,a,u,d,p,v){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?v:v&&v.parent,u,a,d,p);return null===s.firstChild&&(s.firstChild=A),null!==v&&(b?null==v.child&&null!==A.parent&&(v.child=A):null===v.next&&(v.next=A)),A}(s,a,u,d,p),function $h(){return Lt.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=u,v.value=d,v.attrs=p;const b=function Ws(){const s=Lt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();v.injectorIndex=null===b?-1:b.injectorIndex}return xi(v,!0),v}function Tf(s,a,u,d){if(0===u)return-1;const p=a.length;for(let v=0;v<u;v++)a.push(d),s.blueprint.push(d),s.data.push(null);return p}function pb(s,a,u){Aa(a);try{const d=s.viewQuery;null!==d&&Sg(1,d,u);const p=s.template;null!==p&&_I(s,a,p,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hb(s,a),s.staticViewQueries&&Sg(2,s.viewQuery,u);const v=s.components;null!==v&&function xx(s,a){for(let u=0;u<a.length;u++)Cb(s,a[u])}(a,v)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,Po()}}function Kv(s,a,u,d){const p=a[2];if(128!=(128&p)){Aa(a);try{cl(a),function vu(s){return Lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&_I(s,a,u,2,d);const b=3==(3&p);if(b){const k=s.preOrderCheckHooks;null!==k&&ps(a,k,null)}else{const k=s.preOrderHooks;null!==k&&Ks(a,k,0,null),Zo(a,0)}if(function mO(s){for(let a=Pv(s);null!==a;a=Nv(a)){if(!a[2])continue;const u=a[9];for(let d=0;d<u.length;d++){const p=u[d],v=p[3];0==(512&p[2])&&Yn(v,1),p[2]|=512}}}(a),function gO(s){for(let a=Pv(s);null!==a;a=Nv(a))for(let u=10;u<a.length;u++){const d=a[u],p=d[1];ds(d)&&Kv(p,d,p.template,d[8])}}(a),null!==s.contentQueries&&hb(s,a),b){const k=s.contentCheckHooks;null!==k&&ps(a,k)}else{const k=s.contentHooks;null!==k&&Ks(a,k,1),Zo(a,1)}!function If(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const p=u[d];if(p<0)yi(~p);else{const v=p,b=u[++d],I=u[++d];Gh(b,v),I(2,a[v])}}}finally{yi(-1)}}(s,a);const I=s.components;null!==I&&function Sx(s,a){for(let u=0;u<a.length;u++)ey(s,a[u])}(a,I);const A=s.viewQuery;if(null!==A&&Sg(2,A,d),b){const k=s.viewCheckHooks;null!==k&&ps(a,k)}else{const k=s.viewHooks;null!==k&&Ks(a,k,2),Zo(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Yn(a[3],-1))}finally{Po()}}}function _I(s,a,u,d,p){const v=Ir(),b=2&d;try{yi(-1),b&&a.length>22&&nI(s,a,22,!1),u(d,p)}finally{yi(v)}}function Yv(s,a,u){!ko()||(function CI(s,a,u,d){const p=u.directiveStart,v=u.directiveEnd;s.firstCreatePass||Mi(u,a),Pi(d,a);const b=u.initialInputs;for(let I=p;I<v;I++){const A=s.data[I],k=Xr(A);k&&Ox(a,u,A);const L=_s(a,s,I,u);Pi(L,a),null!==b&&Fx(0,I-p,L,A,0,b),k&&(cn(u.index,a)[8]=L)}}(s,a,u,ei(u,a)),128==(128&u.flags)&&function bb(s,a,u){const d=u.directiveStart,p=u.directiveEnd,v=u.index,b=function yu(){return Lt.lFrame.currentDirectiveIndex}();try{yi(v);for(let I=d;I<p;I++){const A=s.data[I],k=a[I];Ca(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Af(A,k)}}finally{yi(-1),Ca(b)}}(s,a,u))}function Qv(s,a,u=ei){const d=a.localNames;if(null!==d){let p=a.index+1;for(let v=0;v<d.length;v+=2){const b=d[v+1],I=-1===b?u(a,s):s[b];s[p++]=I}}}function Jv(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=gb(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function gb(s,a,u,d,p,v,b,I,A,k){const L=22+d,$=L+p,ee=function Rx(s,a){const u=[];for(let d=0;d<a;d++)u.push(d<s?null:tn);return u}(L,$),ue="function"==typeof k?k():k;return ee[1]={type:s,blueprint:ee,template:u,queries:null,viewQuery:I,declTNode:a,data:ee.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:A,consts:ue,incompleteFirstPass:!1}}function mb(s,a,u,d){const p=Db(a);null===u?p.push(d):(p.push(u),s.firstCreatePass&&ty(s).push(d,p.length-1))}function vb(s,a,u){for(let d in s)if(s.hasOwnProperty(d)){const p=s[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(a,p):u[d]=[a,p]}return u}function yb(s,a){const d=a.directiveEnd,p=s.data,v=a.attrs,b=[];let I=null,A=null;for(let k=a.directiveStart;k<d;k++){const L=p[k],$=L.inputs,ee=null===v||JC(a)?null:pO($,v);b.push(ee),I=vb($,k,I),A=vb(L.outputs,k,A)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=16),I.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=I,a.outputs=A}function Ss(s,a,u,d,p,v,b,I){const A=ei(a,u);let L,k=a.inputs;!I&&null!=k&&(L=k[d])?(Ab(s,u,L,d,p),eo(a)&&Mx(u,a.index)):3&a.type&&(d=function uO(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),p=null!=b?b(p,a.value||"",d):p,v.setProperty(A,d,p))}function Mx(s,a){const u=cn(a,s);16&u[2]||(u[2]|=32)}function _b(s,a,u,d){let p=!1;if(ko()){const v=function hO(s,a,u){const d=s.directiveRegistry;let p=null;if(d)for(let v=0;v<d.length;v++){const b=d[v];dx(u,b.selectors,!1)&&(p||(p=[]),Qs(Mi(u,a),s,b.type),Xr(b)?(Xv(s,u),p.unshift(b)):p.push(b))}return p}(s,a,u),b=null===d?null:{"":-1};if(null!==v){p=!0,Nx(u,s.data.length,v.length);for(let L=0;L<v.length;L++){const $=v[L];$.providersResolver&&$.providersResolver($)}let I=!1,A=!1,k=Tf(s,a,v.length,null);for(let L=0;L<v.length;L++){const $=v[L];u.mergedAttrs=Sa(u.mergedAttrs,$.hostAttrs),II(s,u,a,k,$),Px(k,$,b),null!==$.contentQueries&&(u.flags|=8),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(u.flags|=128);const ee=$.type.prototype;!I&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!A&&(ee.ngOnChanges||ee.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),A=!0),k++}yb(s,u)}b&&function fO(s,a,u){if(a){const d=s.localNames=[];for(let p=0;p<a.length;p+=2){const v=u[a[p+1]];if(null==v)throw new Oe(-301,!1);d.push(a[p],v)}}}(u,d,b)}return u.mergedAttrs=Sa(u.mergedAttrs,u.attrs),p}function wb(s,a,u,d,p,v){const b=v.hostBindings;if(b){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const A=~a.index;(function kx(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(I)!=A&&I.push(A),I.push(d,p,b)}}function Af(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Xv(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function Px(s,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=s;Xr(a)&&(u[""]=s)}}function Nx(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}function II(s,a,u,d,p){s.data[d]=p;const v=p.factory||(p.factory=to(p.type)),b=new Ko(v,Xr(p),qu);s.blueprint[d]=b,u[d]=b,wb(s,a,0,d,Tf(s,u,p.hostVars,tn),p)}function Ox(s,a,u){const d=ei(a,s),p=Jv(u),v=s[10],b=Sf(s,Zv(s,p,null,u.onPush?32:16,d,a,v,v.createRenderer(d,u),null,null,null));s[a.index]=b}function Yu(s,a,u,d,p,v){const b=ei(s,a);!function DI(s,a,u,d,p,v,b){if(null==v)s.removeAttribute(a,p,u);else{const I=null==b?xe(v):b(v,d||"",p);s.setAttribute(a,p,I,u)}}(a[11],b,v,s.value,u,d,p)}function Fx(s,a,u,d,p,v){const b=v[a];if(null!==b){const I=d.setInput;for(let A=0;A<b.length;){const k=b[A++],L=b[A++],$=b[A++];null!==I?d.setInput(u,$,k,L):u[L]=$}}}function pO(s,a){let u=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;s.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,s[p],a[d+1])),d+=2}else d+=2;else d+=4}return u}function Lx(s,a,u,d){return new Array(s,!0,!1,a,null,0,d,u,null,null)}function ey(s,a){const u=cn(a,s);if(ds(u)){const d=u[1];48&u[2]?Kv(d,u,d.template,u[8]):u[5]>0&&Eb(u)}}function Eb(s){for(let d=Pv(s);null!==d;d=Nv(d))for(let p=10;p<d.length;p++){const v=d[p];if(ds(v))if(512&v[2]){const b=v[1];Kv(b,v,b.template,v[8])}else v[5]>0&&Eb(v)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const p=cn(u[d],s);ds(p)&&p[5]>0&&Eb(p)}}function Cb(s,a){const u=cn(a,s),d=u[1];(function Ib(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(d,u),pb(d,u,u[8])}function Sf(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function Ag(s){for(;s;){s[2]|=32;const a=yf(s);if(su(s)&&!a)return s;s=a}return null}function xf(s,a,u,d=!0){const p=a[10];p.begin&&p.begin();try{Kv(s,a,s.template,u)}catch(b){throw d&&Tb(a,b),b}finally{p.end&&p.end()}}function Sg(s,a,u){Da(0),a(s,u)}function Db(s){return s[7]||(s[7]=[])}function ty(s){return s.cleanup||(s.cleanup=[])}function Tb(s,a){const u=s[9],d=u?u.get(fg,null):null;d&&d.handleError(a)}function Ab(s,a,u,d,p){for(let v=0;v<u.length;){const b=u[v++],I=u[v++],A=a[b],k=s.data[b];null!==k.setInput?k.setInput(A,p,d,I):A[I]=p}}function Rf(s,a,u){let d=u?s.styles:null,p=u?s.classes:null,v=0;if(null!==a)for(let b=0;b<a.length;b++){const I=a[b];"number"==typeof I?v=I:1==v?p=Ie(p,I):2==v&&(d=Ie(d,I+": "+a[++b]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=p:s.classesWithoutHost=p}function ry(s,a,u,d,p=!1){for(;null!==u;){const v=a[u.index];if(null!==v&&d.push(Nn(v)),ci(v))for(let I=10;I<v.length;I++){const A=v[I],k=A[1].firstChild;null!==k&&ry(A[1],A,k,d)}const b=u.type;if(8&b)ry(s,a,u.child,d);else if(32&b){const I=Fw(u,a);let A;for(;A=I();)d.push(A)}else if(16&b){const I=Gw(a,u);if(Array.isArray(I))d.push(...I);else{const A=yf(a[16]);ry(A[1],A,I,d,!0)}}u=p?u.projectionNext:u.next}return d}class xs{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return ry(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ci(a)){const u=a[8],d=u?u.indexOf(this):-1;d>-1&&(Bw(a,d),di(u,d))}this._attachedToViewContainer=!1}mg(this._lView[1],this._lView)}onDestroy(a){mb(this._lView[1],this._lView,null,a)}markForCheck(){Ag(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){xf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function HC(s,a){Jd(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=a}}class At extends xs{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;xf(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class xg extends $u{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=ae(a);return new Qu(u,this.ngModule)}}function Qt(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class oy{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){const p=this.injector.get(a,Ft,d);return p!==Ft||u===Ft?p:this.parentInjector.get(a,u,d)}}class Qu extends df{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function fx(s){return s.map(As).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Qt(this.componentDef.inputs)}get outputs(){return Qt(this.componentDef.outputs)}create(a,u,d,p){let v=(p=p||this.ngModule)instanceof _i?p:p?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const b=v?new oy(a,v):a,I=b.get(P,null);if(null===I)throw new Oe(407,!1);const A=b.get(be,null),k=I.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",$=d?function wI(s,a,u){return s.selectRootElement(a,u===Ze.ShadowDom)}(k,d,this.componentDef.encapsulation):Ov(k,L,function iy(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(L)),ee=this.componentDef.onPush?288:272,ue=gb(0,null,null,1,0,null,null,null,null,null),Pe=Zv(null,ue,null,ee,null,null,I,k,A,b,null);let Je,st;Aa(Pe);try{const _t=function Bx(s,a,u,d,p,v){const b=u[1];u[22]=s;const A=Df(b,22,2,"#host",null),k=A.mergedAttrs=a.hostAttrs;null!==k&&(Rf(A,k,!0),null!==s&&(Ys(p,s,k),null!==A.classes&&wg(p,s,A.classes),null!==A.styles&&Xd(p,s,A.styles)));const L=d.createRenderer(s,a),$=Zv(u,Jv(a),null,a.onPush?32:16,u[22],A,d,L,v||null,null,null);return b.firstCreatePass&&(Qs(Mi(A,u),b,a.type),Xv(b,A),Nx(A,u.length,1)),Sf(u,$),u[22]=$}($,this.componentDef,Pe,I,k);if($)if(d)Ys(k,$,["ng-version",mt.full]);else{const{attrs:Pt,classes:$e}=function px(s){const a=[],u=[];let d=1,p=2;for(;d<s.length;){let v=s[d];if("string"==typeof v)2===p?""!==v&&a.push(v,s[++d]):8===p&&u.push(v);else{if(!sa(p))break;p=v}d++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Pt&&Ys(k,$,Pt),$e&&$e.length>0&&wg(k,$,$e.join(" "))}if(st=qo(ue,22),void 0!==u){const Pt=st.projection=[];for(let $e=0;$e<this.ngContentSelectors.length;$e++){const $t=u[$e];Pt.push(null!=$t?Array.from($t):null)}}Je=function go(s,a,u,d){const p=u[1],v=function dO(s,a,u){const d=$n();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),II(s,d,a,Tf(s,a,1,null),u),yb(s,d));const p=_s(a,s,d.directiveStart,d);Pi(p,a);const v=ei(d,a);return v&&Pi(v,a),p}(p,u,a);if(s[8]=u[8]=v,null!==d)for(const I of d)I(v,a);if(a.contentQueries){const I=$n();a.contentQueries(1,v,I.directiveStart)}const b=$n();return!p.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(yi(b.index),wb(u[1],b,0,b.directiveStart,b.directiveEnd,a),Af(a,v)),v}(_t,this.componentDef,Pe,[sy]),pb(ue,Pe,null)}finally{Po()}return new Vx(this.componentType,Je,w(st,Pe),Pe,st)}}class Vx extends class cg{}{constructor(a,u,d,p,v){super(),this.location=d,this._rootLView=p,this._tNode=v,this.instance=u,this.hostView=this.changeDetectorRef=new At(p),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let p;if(null!==d&&(p=d[a])){const v=this._rootLView;Ab(v[1],v,p,a,u),Mx(v,this._tNode.index)}}get injector(){return new Ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function sy(){const s=$n();ml(Be()[1],s)}function Vl(s){let a=function Ni(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;a;){let p;if(Xr(s))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Oe(903,!1);p=a.\u0275dir}if(p){if(u){d.push(p);const b=s;b.inputs=ay(s.inputs),b.declaredInputs=ay(s.declaredInputs),b.outputs=ay(s.outputs);const I=p.hostBindings;I&&mo(s,I);const A=p.viewQuery,k=p.contentQueries;if(A&&Sb(s,A),k&&SI(s,k),me(s.inputs,p.inputs),me(s.declaredInputs,p.declaredInputs),me(s.outputs,p.outputs),Xr(p)&&p.data.animation){const L=s.data;L.animation=(L.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let b=0;b<v.length;b++){const I=v[b];I&&I.ngInherit&&I(s),I===Vl&&(u=!1)}}a=Object.getPrototypeOf(a)}!function Hx(s){let a=0,u=null;for(let d=s.length-1;d>=0;d--){const p=s[d];p.hostVars=a+=p.hostVars,p.hostAttrs=Sa(p.hostAttrs,u=Sa(u,p.hostAttrs))}}(d)}function ay(s){return s===gi?{}:s===Bt?[]:s}function Sb(s,a){const u=s.viewQuery;s.viewQuery=u?(d,p)=>{a(d,p),u(d,p)}:a}function SI(s,a){const u=s.contentQueries;s.contentQueries=u?(d,p,v)=>{a(d,p,v),u(d,p,v)}:a}function mo(s,a){const u=s.hostBindings;s.hostBindings=u?(d,p)=>{a(d,p),u(d,p)}:a}let Mf=null;function Bl(){if(!Mf){const s=bn.Symbol;if(s&&s.iterator)Mf=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const d=a[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Mf=d)}}}return Mf}function eh(s){return!!qc(s)&&(Array.isArray(s)||!(s instanceof Map)&&Bl()in s)}function qc(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function la(s,a,u){return s[a]=u}function vo(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function Rg(s,a,u,d){const p=Be();return vo(p,hs(),a)&&(on(),Yu(Ln(),p,s,a,u,d)),Rg}function Pf(s,a,u,d){return vo(s,hs(),u)?a+xe(u)+d:tn}function dy(s,a,u,d,p,v,b,I){const A=Be(),k=on(),L=s+22,$=k.firstCreatePass?function Pb(s,a,u,d,p,v,b,I,A){const k=a.consts,L=Df(a,s,4,b||null,Gi(k,I));_b(a,u,L,Gi(k,A)),ml(a,L);const $=L.tViews=gb(2,L,d,p,v,a.directiveRegistry,a.pipeRegistry,null,a.schemas,k);return null!==a.queries&&(a.queries.template(a,L),$.queries=a.queries.embeddedTView(L)),L}(L,k,A,a,u,d,p,v,b):k.data[L];xi($,!1);const ee=A[11].createComment("");yg(k,A,ee,$),Pi(ee,A),Sf(A,A[L]=Lx(ee,A,ee,$)),nl($)&&Yv(k,A,$),null!=b&&Qv(A,$,I)}function Nb(s){return Ro(function ba(){return Lt.lFrame.contextLView}(),22+s)}function Ob(s,a,u){const d=Be();return vo(d,hs(),a)&&Ss(on(),Ln(),d,s,a,d[11],u,!1),Ob}function hy(s,a,u,d,p){const b=p?"class":"style";Ab(s,u,a.inputs[b],b,d)}function Lf(s,a,u,d){const p=Be(),v=on(),b=22+s,I=p[11],A=p[b]=Ov(I,a,function gl(){return Lt.lFrame.currentNamespace}()),k=v.firstCreatePass?function NI(s,a,u,d,p,v,b){const I=a.consts,k=Df(a,s,2,p,Gi(I,v));return _b(a,u,k,Gi(I,b)),null!==k.attrs&&Rf(k,k.attrs,!1),null!==k.mergedAttrs&&Rf(k,k.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,k),k}(b,v,p,0,a,u,d):v.data[b];xi(k,!0);const L=k.mergedAttrs;null!==L&&Ys(I,A,L);const $=k.classes;null!==$&&wg(I,A,$);const ee=k.styles;return null!==ee&&Xd(I,A,ee),64!=(64&k.flags)&&yg(v,p,A,k),0===function Mo(){return Lt.lFrame.elementDepthCount}()&&Pi(A,p),function dl(){Lt.lFrame.elementDepthCount++}(),nl(k)&&(Yv(v,p,k),function Tg(s,a,u){if(tl(a)){const p=a.directiveEnd;for(let v=a.directiveStart;v<p;v++){const b=s.data[v];b.contentQueries&&b.contentQueries(1,u[v],v)}}}(v,k,p)),null!==d&&Qv(p,k),Lf}function Pg(){let s=$n();wa()?function qs(){Lt.lFrame.isParent=!1}():(s=s.parent,xi(s,!1));const a=s;!function fu(){Lt.lFrame.elementDepthCount--}();const u=on();return u.firstCreatePass&&(ml(u,s),tl(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function _l(s){return 0!=(16&s.flags)}(a)&&hy(u,a,Be(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Dc(s){return 0!=(32&s.flags)}(a)&&hy(u,a,Be(),a.stylesWithoutHost,!1),Pg}function Fb(s,a,u,d){return Lf(s,a,u,d),Pg(),Fb}function Oi(){return Be()}function Uf(s){return!!s&&"function"==typeof s.then}function fy(s){return!!s&&"function"==typeof s.subscribe}const OI=fy;function Ub(s,a,u,d){const p=Be(),v=on(),b=$n();return function FI(s,a,u,d,p,v,b,I){const A=nl(d),L=s.firstCreatePass&&ty(s),$=a[8],ee=Db(a);let ue=!0;if(3&d.type||I){const st=ei(d,a),_t=I?I(st):st,Pt=ee.length,$e=I?Un=>I(Nn(Un[d.index])):d.index;let $t=null;if(!I&&A&&($t=function zx(s,a,u,d){const p=s.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const b=p[v];if(b===u&&p[v+1]===d){const I=a[7],A=p[v+2];return I.length>A?I[A]:null}"string"==typeof b&&(v+=2)}return null}(s,a,p,d.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=v,$t.__ngLastListenerFn__=v,ue=!1;else{v=py(d,a,$,v,!1);const Un=u.listen(_t,p,v);ee.push(v,Un),L&&L.push(p,$e,Pt,Pt+1)}}else v=py(d,a,$,v,!1);const Pe=d.outputs;let Je;if(ue&&null!==Pe&&(Je=Pe[p])){const st=Je.length;if(st)for(let _t=0;_t<st;_t+=2){const yr=a[Je[_t]][Je[_t+1]].subscribe(v),fd=ee.length;ee.push(v,yr),L&&L.push(p,d.index,fd,-(fd+1))}}}(v,p,p[11],b,s,a,0,d),Ub}function Bb(s,a,u,d){try{return!1!==u(d)}catch(p){return Tb(s,p),!1}}function py(s,a,u,d,p){return function v(b){if(b===Function)return d;Ag(2&s.flags?cn(s.index,a):a);let A=Bb(a,0,d,b),k=v.__ngNextListenerFn__;for(;k;)A=Bb(a,0,k,b)&&A,k=k.__ngNextListenerFn__;return p&&!1===A&&(b.preventDefault(),b.returnValue=!1),A}}function LI(s=1){return function fs(s){return(Lt.lFrame.contextLView=function pl(s,a){for(;s>0;)a=a[15],s--;return a}(s,Lt.lFrame.contextLView))[8]}(s)}function Vf(s,a,u){return Bf(s,"",a,"",u),Vf}function Bf(s,a,u,d,p){const v=Be(),b=Pf(v,a,u,d);return b!==tn&&Ss(on(),Ln(),v,s,b,v[11],p,!1),Bf}function BI(s,a,u,d,p){const v=s[u+1],b=null===a;let I=d?Ba(v):Zu(v),A=!1;for(;0!==I&&(!1===A||b);){const L=s[I+1];Zx(s[I],a)&&(A=!0,s[I+1]=d?wf(L):tb(L)),I=d?Ba(L):Zu(L)}A&&(s[u+1]=d?tb(v):wf(v))}function Zx(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&ta(s,a)>=0}function Lg(s,a){return function $a(s,a,u,d){const p=Be(),v=on(),b=function Ri(s){const a=Lt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}(2);v.firstUpdatePass&&function Ey(s,a,u,d){const p=s.data;if(null===p[u+1]){const v=p[Ir()],b=function Vg(s,a){return a>=s.expandoStartIndex}(s,u);(function Kb(s,a){return 0!=(s.flags&(a?16:32))})(v,d)&&null===a&&!b&&(a=!1),a=function zI(s,a,u,d){const p=function Ia(s){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let v=d?a.residualClasses:a.residualStyles;if(null===p)0===(d?a.classBindings:a.styleBindings)&&(u=Gf(u=rh(null,s,a,u,d),a.attrs,d),v=null);else{const b=a.directiveStylingLast;if(-1===b||s[b]!==p)if(u=rh(p,s,a,u,d),null===v){let A=function WI(s,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==Zu(d))return s[Ba(d)]}(s,a,d);void 0!==A&&Array.isArray(A)&&(A=rh(null,s,a,A[1],d),A=Gf(A,a.attrs,d),function qI(s,a,u,d){s[Ba(u?a.classBindings:a.styleBindings)]=d}(s,a,d,A))}else v=function Kx(s,a,u){let d;const p=a.directiveEnd;for(let v=1+a.directiveStylingLast;v<p;v++)d=Gf(d,s[v].hostAttrs,u);return Gf(d,a.attrs,u)}(s,a,d)}return void 0!==v&&(d?a.residualClasses=v:a.residualStyles=v),u}(p,v,a,d),function qx(s,a,u,d,p,v){let b=v?a.classBindings:a.styleBindings,I=Ba(b),A=Zu(b);s[d]=u;let L,k=!1;if(Array.isArray(u)){const $=u;L=$[1],(null===L||ta($,L)>0)&&(k=!0)}else L=u;if(p)if(0!==A){const ee=Ba(s[I+1]);s[d+1]=jv(ee,I),0!==ee&&(s[ee+1]=nb(s[ee+1],d)),s[I+1]=function wx(s,a){return 131071&s|a<<17}(s[I+1],d)}else s[d+1]=jv(I,0),0!==I&&(s[I+1]=nb(s[I+1],d)),I=d;else s[d+1]=jv(A,0),0===I?I=d:s[A+1]=nb(s[A+1],d),A=d;k&&(s[d+1]=tb(s[d+1])),BI(s,L,d,!0),BI(s,L,d,!1),function jf(s,a,u,d,p){const v=p?s.residualClasses:s.residualStyles;null!=v&&"string"==typeof a&&ta(v,a)>=0&&(u[d+1]=wf(u[d+1]))}(a,L,s,d,v),b=jv(I,A),v?a.classBindings=b:a.styleBindings=b}(p,v,a,u,b,d)}}(v,s,b,d),a!==tn&&vo(p,b,a)&&function Iy(s,a,u,d,p,v,b,I){if(!(3&a.type))return;const A=s.data,k=A[I+1];Dy(function po(s){return 1==(1&s)}(k)?ZI(A,a,u,p,Zu(k),b):void 0)||(Dy(v)||function eb(s){return 2==(2&s)}(k)&&(v=ZI(A,null,u,p,I,b)),function QC(s,a,u,d,p){if(a)p?s.addClass(u,d):s.removeClass(u,d);else{let v=-1===d.indexOf("-")?void 0:Fl.DashCase;null==p?s.removeStyle(u,d,v):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),v|=Fl.Important),s.setStyle(u,d,p,v))}}(d,b,Si(Ir(),u),p,v))}(v,v.data[Ir()],p,p[11],s,p[b+1]=function KI(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=we(es(s)))),s}(a,u),d,b)}(s,a,null,!0),Lg}function rh(s,a,u,d,p){let v=null;const b=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<b&&(v=a[I],d=Gf(d,v.hostAttrs,p),v!==s);)I++;return null!==s&&(u.directiveStylingLast=I),d}function Gf(s,a,u){const d=u?1:2;let p=-1;if(null!==a)for(let v=0;v<a.length;v++){const b=a[v];"number"==typeof b?p=b:p===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),yt(s,b,!!u||a[++v]))}return void 0===s?null:s}function ZI(s,a,u,d,p,v){const b=null===a;let I;for(;p>0;){const A=s[p],k=Array.isArray(A),L=k?A[1]:A,$=null===L;let ee=u[p+1];ee===tn&&(ee=$?Bt:void 0);let ue=$?ku(ee,d):L===d?ee:void 0;if(k&&!Dy(ue)&&(ue=ku(A,d)),Dy(ue)&&(I=ue,b))return I;const Pe=s[p+1];p=b?Ba(Pe):Zu(Pe)}if(null!==a){let A=v?a.residualClasses:a.residualStyles;null!=A&&(I=ku(A,d))}return I}function Dy(s){return void 0!==s}function YI(s,a=""){const u=Be(),d=on(),p=s+22,v=d.firstCreatePass?Df(d,p,1,a,null):d.data[p],b=u[p]=function Uw(s,a){return s.createText(a)}(u[11],a);yg(d,u,b,v),xi(v,!1)}function Xu(s){return ca("",s,""),Xu}function ca(s,a,u){const d=Be(),p=Pf(d,s,a,u);return p!==tn&&function Wc(s,a,u){const d=Si(a,s);!function VC(s,a,u){s.setValue(a,u)}(s[11],d,u)}(d,Ir(),p),ca}const Jc=void 0;var qg=["en",[["a","p"],["AM","PM"],Jc],[["AM","PM"],Jc,Jc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jc,"{1} 'at' {0}",Jc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wg(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Yf={};function xy(s){const a=function cD(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=uD(a);if(u)return u;const d=a.split("-")[0];if(u=uD(d),u)return u;if("en"===d)return qg;throw new Oe(701,!1)}function lD(s){return xy(s)[Vt.PluralCase]}function uD(s){return s in Yf||(Yf[s]=bn.ng&&bn.ng.common&&bn.ng.common.locales&&bn.ng.common.locales[s]),Yf[s]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const rs="en-US";let My=rs;function Fy(s,a,u,d,p){if(s=oe(s),Array.isArray(s))for(let v=0;v<s.length;v++)Fy(s[v],a,u,d,p);else{const v=on(),b=Be();let I=Uo(s)?s:oe(s.provide),A=Kd(s);const k=$n(),L=1048575&k.providerIndexes,$=k.directiveStart,ee=k.providerIndexes>>20;if(Uo(s)||!s.multi){const ue=new Ko(A,p,qu),Pe=tm(I,a,p?L:L+ee,$);-1===Pe?(Qs(Mi(k,b),v,I),Ly(v,s,a.length),a.push(I),k.directiveStart++,k.directiveEnd++,p&&(k.providerIndexes+=1048576),u.push(ue),b.push(ue)):(u[Pe]=ue,b[Pe]=ue)}else{const ue=tm(I,a,L+ee,$),Pe=tm(I,a,L,L+ee),Je=ue>=0&&u[ue],st=Pe>=0&&u[Pe];if(p&&!st||!p&&!Je){Qs(Mi(k,b),v,I);const _t=function pR(s,a,u,d,p){const v=new Ko(s,u,qu);return v.multi=[],v.index=a,v.componentProviders=0,tc(v,p,d&&!u),v}(p?Uy:ye,u.length,p,d,A);!p&&st&&(u[Pe].providerFactory=_t),Ly(v,s,a.length,0),a.push(I),k.directiveStart++,k.directiveEnd++,p&&(k.providerIndexes+=1048576),u.push(_t),b.push(_t)}else Ly(v,s,ue>-1?ue:Pe,tc(u[p?Pe:ue],A,!p&&d));!p&&d&&st&&u[Pe].componentProviders++}}}function Ly(s,a,u,d){const p=Uo(a),v=function Ev(s){return!!s.useClass}(a);if(p||v){const A=(v?oe(a.useClass):a).prototype.ngOnDestroy;if(A){const k=s.destroyHooks||(s.destroyHooks=[]);if(!p&&a.multi){const L=k.indexOf(u);-1===L?k.push(u,[d,A]):k[L+1].push(d,A)}else k.push(u,A)}}}function tc(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function tm(s,a,u,d){for(let p=u;p<d;p++)if(a[p]===s)return p;return-1}function ye(s,a,u,d){return Ps(this.multi,[])}function Uy(s,a,u,d){const p=this.multi;let v;if(this.providerFactory){const b=this.providerFactory.componentProviders,I=_s(u,u[1],this.providerFactory.index,d);v=I.slice(0,b),Ps(p,v);for(let A=b;A<I.length;A++)v.push(I[A])}else v=[],Ps(p,v);return v}function Ps(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function tp(s,a=[]){return u=>{u.providersResolver=(d,p)=>function h0(s,a,u){const d=on();if(d.firstCreatePass){const p=Xr(s);Fy(u,d.data,d.blueprint,p,!0),Fy(a,d.data,d.blueprint,p,!1)}}(d,p?p(s):s,a)}}class Ns{}class ND{}function uh(s,a){return new Vy(s,a??null)}class Vy extends Ns{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xg(this);const d=Pn(a);this._bootstrapComponents=Wu(d.bootstrap),this._r3Injector=Yw(a,u,[{provide:Ns,useValue:this},{provide:$u,useValue:this.componentFactoryResolver}],we(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class f0 extends ND{constructor(a){super(),this.moduleType=a}create(a){return new Vy(this.moduleType,a)}}class mR extends Ns{constructor(a,u,d){super(),this.componentFactoryResolver=new xg(this),this.instance=null;const p=new cf([...a,{provide:Ns,useValue:this},{provide:$u,useValue:this.componentFactoryResolver}],u||uf(),d,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function _o(s,a,u=null){return new mR(s,a,u).injector}let OD=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=sf(0,u.type),p=d.length>0?_o([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=rn({token:s,providedIn:"environment",factory:()=>new s(Jn(_i))}),s})();function nd(s){s.getStandaloneInjector=a=>a.get(OD).getOrCreateStandaloneInjector(s)}function rc(s,a,u){const d=Gn()+s,p=Be();return p[d]===tn?la(p,d,u?a.call(u):a()):function kf(s,a){return s[a]}(p,d)}function hh(s,a,u,d,p,v){const b=a+u;return vo(s,b,p)?la(s,b+1,v?d.call(v,p):d(p)):function rp(s,a){const u=s[a];return u===tn?void 0:u}(s,b+1)}function p0(s,a){const u=on();let d;const p=s+22;u.firstCreatePass?(d=function VD(s,a){if(a)for(let u=a.length-1;u>=0;u--){const d=a[u];if(s===d.name)return d}}(a,u.pipeRegistry),u.data[p]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,d.onDestroy)):d=u.data[p];const v=d.factory||(d.factory=to(d.type)),b=yn(qu);try{const I=N(!1),A=v();return N(I),function PI(s,a,u,d){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),a[u]=d}(u,Be(),p,A),A}finally{yn(b)}}function op(s,a,u){const d=s+22,p=Be(),v=Ro(p,d);return function sp(s,a){return s[1].data[a].pure}(p,d)?hh(p,Gn(),a,v.transform,u,v):v.transform(u)}function Gy(s){return a=>{setTimeout(s,void 0,a)}}const Cn=class Ki extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let p=a,v=u||(()=>null),b=d;if(a&&"object"==typeof a){const A=a;p=A.next?.bind(A),v=A.error?.bind(A),b=A.complete?.bind(A)}this.__isAsync&&(v=Gy(v),p&&(p=Gy(p)),b&&(b=Gy(b)));const I=super.subscribe({next:p,error:v,complete:b});return a instanceof j.w0&&a.add(I),I}};function ER(){return this._results[Bl()]()}class zy{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Bl(),d=zy.prototype;d[u]||(d[u]=ER)}get changes(){return this._changes||(this._changes=new Cn)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const p=ir(a);(this._changesDetected=!function so(s,a,u){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let p=s[d],v=a[d];if(u&&(p=u(p),v=u(v)),v!==p)return!1}return!0}(d._results,p,u))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ga=(()=>{class s{}return s.__NG_ELEMENT_ID__=Wy,s})();const CR=Ga,am=class extends CR{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tViews,p=Zv(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(p[19]=b.createEmbeddedView(d)),pb(d,p,a),new xs(p)}};function Wy(){return fh($n(),Be())}function fh(s,a){return 4&s.type?new am(a,s,w(s,a)):null}let lm=(()=>{class s{}return s.__NG_ELEMENT_ID__=jD,s})();function jD(){return v0($n(),Be())}const Yi=lm,$D=class extends Yi{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return w(this._hostTNode,this._hostLView)}get injector(){return new Ra(this._hostTNode,this._hostLView)}get parentInjector(){const a=xc(this._hostTNode,this._hostLView);if(Ac(a)){const u=D(a,this._hostLView),d=Nr(a);return new Ra(u[1].data[d+8],u)}return new Ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=GD(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,d){let p,v;"number"==typeof d?p=d:null!=d&&(p=d.index,v=d.injector);const b=a.createEmbeddedView(u||{},v);return this.insert(b,p),b}createComponent(a,u,d,p,v){const b=a&&!function oo(s){return"function"==typeof s}(a);let I;if(b)I=u;else{const $=u||{};I=$.index,d=$.injector,p=$.projectableNodes,v=$.environmentInjector||$.ngModuleRef}const A=b?a:new Qu(ae(a)),k=d||this.parentInjector;if(!v&&null==A.ngModule){const ee=(b?k:this.parentInjector).get(_i,null);ee&&(v=ee)}const L=A.create(k,p,void 0,v);return this.insert(L.hostView,I),L}insert(a,u){const d=a._lView,p=d[1];if(function ul(s){return ci(s[3])}(d)){const L=this.indexOf(a);if(-1!==L)this.detach(L);else{const $=d[3],ee=new $D($,$[6],$[3]);ee.detach(ee.indexOf(a))}}const v=this._adjustIndex(u),b=this._lContainer;!function nx(s,a,u,d){const p=10+d,v=u.length;d>0&&(u[p-1][4]=a),d<v-10?(a[4]=u[p],Ru(u,10+d,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function rx(s,a){const u=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===u?s[9]=[a]:u.push(a)}(b,a);const I=a[19];null!==I&&I.insertView(s),a[2]|=64}(p,d,b,v);const I=KC(v,b),A=d[11],k=Lv(A,b[7]);return null!==k&&function BC(s,a,u,d,p,v){d[0]=p,d[6]=a,Jd(s,d,u,1,p,v)}(p,b[6],A,d,k,I),a.attachToViewContainerRef(),Ru(m0(b),v,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=GD(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=Bw(this._lContainer,u);d&&(di(m0(this._lContainer),u),mg(d[1],d))}detach(a){const u=this._adjustIndex(a,-1),d=Bw(this._lContainer,u);return d&&null!=di(m0(this._lContainer),u)?new xs(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function GD(s){return s[8]}function m0(s){return s[8]||(s[8]=[])}function v0(s,a){let u;const d=a[s.index];if(ci(d))u=d;else{let p;if(8&s.type)p=Nn(d);else{const v=a[11];p=v.createComment("");const b=ei(s,a);Ll(v,Lv(v,b),p,function qC(s,a){return s.nextSibling(a)}(v,b),!1)}a[s.index]=u=Lx(d,a,p,s),Sf(a,u)}return new $D(u,s,a)}class y0{constructor(a){this.queryList=a,this.matches=null}clone(){return new y0(this.queryList)}setDirty(){this.queryList.setDirty()}}class zl{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,p=[];for(let v=0;v<d;v++){const b=u.getByIndex(v);p.push(this.queries[b.indexInDeclarationView].clone())}return new zl(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Yy(a,u).matches&&this.queries[u].setDirty()}}class ph{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class _0{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const p=null!==u?u.length:0,v=this.getByIndex(d).embeddedTView(a,p);v&&(v.indexInDeclarationView=d,null!==u?u.push(v):u=[v])}return null!==u?new _0(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class qy{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new qy(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const v=d[p];this.matchTNodeWithReadOption(a,u,zD(u,v)),this.matchTNodeWithReadOption(a,u,bl(u,a,v,!1,!1))}else d===Ga?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,bl(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===g||p===lm||p===Ga&&4&u.type)this.addMatch(u.index,-2);else{const v=bl(u,a,p,!1,!1);null!==v&&this.addMatch(u.index,v)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function zD(s,a){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function WD(s,a,u,d){return-1===u?function ic(s,a){return 11&s.type?w(s,a):4&s.type?fh(s,a):null}(a,s):-2===u?function ap(s,a,u){return u===g?w(a,s):u===Ga?fh(a,s):u===lm?v0(a,s):void 0}(s,a,d):_s(s,s[1],u,a)}function w0(s,a,u,d){const p=a[19].queries[d];if(null===p.matches){const v=s.data,b=u.matches,I=[];for(let A=0;A<b.length;A+=2){const k=b[A];I.push(k<0?null:WD(a,v[k],b[A+1],u.metadata.read))}p.matches=I}return p.matches}function um(s,a,u,d){const p=s.queries.getByIndex(u),v=p.matches;if(null!==v){const b=w0(s,a,p,u);for(let I=0;I<v.length;I+=2){const A=v[I];if(A>0)d.push(b[I/2]);else{const k=v[I+1],L=a[-A];for(let $=10;$<L.length;$++){const ee=L[$];ee[17]===ee[3]&&um(ee[1],ee,k,d)}if(null!==L[9]){const $=L[9];for(let ee=0;ee<$.length;ee++){const ue=$[ee];um(ue[1],ue,k,d)}}}}}return d}function Zy(s){const a=Be(),u=on(),d=_u();Da(d+1);const p=Yy(u,d);if(s.dirty&&function ll(s){return 4==(4&s[2])}(a)===(2==(2&p.metadata.flags))){if(null===p.matches)s.reset([]);else{const v=p.crossesNgTemplate?um(u,a,d,[]):w0(u,a,p,d);s.reset(v,y),s.notifyOnChanges()}return!0}return!1}function gh(s,a,u,d){const p=on();if(p.firstCreatePass){const v=$n();(function E0(s,a,u){null===s.queries&&(s.queries=new _0),s.queries.track(new qy(a,u))})(p,new ph(a,u,d),v.index),function C0(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(p,s),2==(2&u)&&(p.staticContentQueries=!0)}!function lp(s,a,u){const d=new zy(4==(4&u));mb(s,a,d,d.destroy),null===a[19]&&(a[19]=new zl),a[19].queries.push(new y0(d))}(p,Be(),u)}function wo(){return function Ky(s,a){return s[19].queries[a].queryList}(Be(),_u())}function Yy(s,a){return s.queries.getByIndex(a)}function I0(s,a){return fh(s,a)}function t_(...s){}const O0=new zn("Application Initializer");let n_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=t_,this.reject=t_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(Uf(v))u.push(v);else if(OI(v)){const b=new Promise((I,A)=>{v.subscribe({complete:I,error:A})});u.push(b)}}Promise.all(u).then(()=>{d()}).catch(p=>{this.reject(p)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Jn(O0,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const aT=new zn("AppId",{providedIn:"root",factory:function lT(){return`${i_()}${i_()}${i_()}`}});function i_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uT=new zn("Platform Initializer"),Li=new zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),o_=new zn("appBootstrapListener");let ql=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const hm=new zn("LocaleId",{providedIn:"root",factory:()=>S(hm,et.Optional|et.SkipSelf)||function F0(){return typeof $localize<"u"&&$localize.locale||rs}()}),fm=new zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class VR{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let BR=(()=>{class s{compileModuleSync(u){return new f0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),v=Wu(Pn(u).declarations).reduce((b,I)=>{const A=ae(I);return A&&b.push(new Qu(A)),b},[]);return new VR(d,v)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const dT=(()=>Promise.resolve(0))();function U0(s){typeof Zone>"u"?dT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Qi{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cn(!1),this.onMicrotaskEmpty=new Cn(!1),this.onStable=new Cn(!1),this.onError=new Cn(!1),typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&u,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function $R(){let s=bn.requestAnimationFrame,a=bn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function zR(s){const a=()=>{!function GR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(bn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,l_(s),s.isCheckStableRunning=!0,V0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),l_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,p,v,b,I)=>{try{return Eo(s),u.invokeTask(p,v,b,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||s.shouldCoalesceRunChangeDetection)&&a(),hT(s)}},onInvoke:(u,d,p,v,b,I,A)=>{try{return Eo(s),u.invoke(p,v,b,I,A)}finally{s.shouldCoalesceRunChangeDetection&&a(),hT(s)}},onHasTask:(u,d,p,v)=>{u.hasTask(p,v),d===p&&("microTask"==v.change?(s._hasPendingMicrotasks=v.microTask,l_(s),V0(s)):"macroTask"==v.change&&(s.hasPendingMacrotasks=v.macroTask))},onHandleError:(u,d,p,v)=>(u.handleError(p,v),s.runOutsideAngular(()=>s.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new Oe(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,p){const v=this._inner,b=v.scheduleEventTask("NgZoneEvent: "+p,a,mp,t_,t_);try{return v.runTask(b,u,d)}finally{v.cancelTask(b)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const mp={};function V0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function l_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Eo(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hT(s){s._nesting--,V0(s)}class fT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cn,this.onMicrotaskEmpty=new Cn,this.onStable=new Cn,this.onError=new Cn}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,p){return a.apply(u,d)}}const qa=new zn(""),B0=new zn("");let j0,u_=(()=>{class s{constructor(u,d,p){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,j0||(function WR(s){j0=s}(p),p.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,p){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==v),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:v,updateCb:p})}whenStable(u,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,p){return[]}}return s.\u0275fac=function(u){return new(u||s)(Jn(Qi),Jn(H0),Jn(B0))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),H0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return j0?.findTestabilityInTree(this,u,d)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),cd=null;const pT=new zn("AllowMultipleToken"),$0=new zn("PlatformDestroyListeners");class KR{constructor(a,u){this.name=a,this.token=u}}function mT(s,a,u=[]){const d=`Platform: ${a}`,p=new zn(d);return(v=[])=>{let b=c_();if(!b||b.injector.get(pT,!1)){const I=[...u,...v,{provide:p,useValue:!0}];s?s(I):function YR(s){if(cd&&!cd.get(pT,!1))throw new Oe(400,!1);cd=s;const a=s.get(_T);(function gT(s){const a=s.get(uT,null);a&&a.forEach(u=>u())})(s)}(function yT(s=[],a){return zc.create({name:a,providers:[{provide:Bc,useValue:"platform"},{provide:$0,useValue:new Set([()=>cd=null])},...s]})}(I,d))}return function vT(s){const a=c_();if(!a)throw new Oe(401,!1);return a}()}}function c_(){return cd?.get(_T)??null}let _T=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const p=function Ii(s,a){let u;return u="noop"===s?new fT:("zone.js"===s?void 0:s)||new Qi(a),u}(d?.ngZone,function d_(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),v=[{provide:Qi,useValue:p}];return p.run(()=>{const b=zc.create({providers:v,parent:this.injector,name:u.moduleType.name}),I=u.create(b),A=I.injector.get(fg,null);if(!A)throw new Oe(402,!1);return p.runOutsideAngular(()=>{const k=p.onError.subscribe({next:L=>{A.handleError(L)}});I.onDestroy(()=>{Za(this._modules,I),k.unsubscribe()})}),function h_(s,a,u){try{const d=u();return Uf(d)?d.catch(p=>{throw a.runOutsideAngular(()=>s.handleError(p)),p}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(A,p,()=>{const k=I.injector.get(n_);return k.runInitializers(),k.donePromise.then(()=>(function Kg(s){en(s,"Expected localeId to be defined"),"string"==typeof s&&(My=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(hm,rs)||rs),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,d=[]){const p=f_({},d);return function qR(s,a,u){const d=new f0(u);return Promise.resolve(d)}(0,0,u).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(u){const d=u.injector.get(vp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Oe(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get($0,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Jn(zc))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function f_(s,a){return Array.isArray(a)?a.reduce(f_,s):{...s,...a}}let vp=(()=>{class s{constructor(u,d,p){this._zone=u,this._injector=d,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new H.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),b=new H.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),k.unsubscribe()}});this.isStable=(0,pe.T)(v,b.pipe((0,ge.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const p=u instanceof df;if(!this._injector.get(n_).done)throw!p&&hn(u),new Oe(405,false);let b;b=p?u:this._injector.get($u).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const I=function ZR(s){return s.isBoundToModule}(b)?void 0:this._injector.get(Ns),k=b.create(zc.NULL,[],d||b.selector,I),L=k.location.nativeElement,$=k.injector.get(qa,null);return $?.registerApplication(L),k.onDestroy(()=>{this.detachView(k.hostView),Za(this.components,k),$?.unregisterApplication(L)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new Oe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Za(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(o_,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Za(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Oe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Jn(Qi),Jn(_i),Jn(fg))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Za(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}let z0=!0,gm=!1;function mh(){return gm=!0,z0}function vh(){if(gm)throw new Error("Cannot enable prod mode after platform setup.");z0=!1}let q0=(()=>{class s{}return s.__NG_ELEMENT_ID__=Z0,s})();function Z0(s){return function wT(s,a,u){if(eo(s)&&!u){const d=cn(s.index,a);return new xs(d,d)}return 47&s.type?new xs(a[16],a):null}($n(),Be(),16==(16&s))}class _p{constructor(){}supports(a){return eh(a)}create(a){return new vm(a)}}const v_=(s,a)=>a;class vm{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||v_}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,p=0,v=null;for(;u||d;){const b=!d||u&&u.currentIndex<J0(d,p,v)?u:d,I=J0(b,p,v),A=b.currentIndex;if(b===d)p--,d=d._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{v||(v=[]);const k=I-p,L=A-p;if(k!=L){for(let ee=0;ee<k;ee++){const ue=ee<v.length?v[ee]:v[ee]=0,Pe=ue+ee;L<=Pe&&Pe<k&&(v[ee]=ue+1)}v[b.previousIndex]=L-k}}I!==A&&a(b,I,A)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!eh(a))throw new Oe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,v,b,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)v=a[I],b=this._trackByFn(I,v),null!==u&&Object.is(u.trackById,b)?(d&&(u=this._verifyReinsertion(u,v,b,I)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,b,I),d=!0),u=u._next}else p=0,function Gx(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Bl()]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,I=>{b=this._trackByFn(p,I),null!==u&&Object.is(u.trackById,b)?(d&&(u=this._verifyReinsertion(u,I,b,p)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,b,p),d=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,p){let v;return null===a?v=this._itTail:(v=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,v,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,v,p)):a=this._addAfter(new DT(u,d),v,p),a}_verifyReinsertion(a,u,d,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?a=this._reinsertAfter(v,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,v=a._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const p=null===u?this._itHead:u._next;return a._next=p,a._prev=u,null===p?this._itTail=a:p._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new Bo),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bo),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class DT{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Bo{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new TT,this.map.set(u,d)),d.add(a)}get(a,u){const p=this.map.get(a);return p?p.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function J0(s,a,u){const d=s.previousIndex;if(null===d)return d;let p=0;return u&&d<u.length&&(p=u[d]),d+a+p}class ym{constructor(){}supports(a){return a instanceof Map||qc(a)}create(){return new y_}}class y_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||qc(a)))throw new Oe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const v=this._getOrCreateRecordForKey(p,d);u=this._insertBeforeOrAppend(u,v)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,u);const v=p._prev,b=p._next;return v&&(v._next=b),b&&(b._prev=v),p._next=null,p._prev=null,p}const d=new AT(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class AT{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lc(){return new dd([new _p])}let dd=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const p=d.factories.slice();u=u.concat(p)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||lc()),deps:[[s,new Ut,new Ye]]}}find(u){const d=this.factories.find(p=>p.supports(u));if(null!=d)return d;throw new Oe(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:lc}),s})();function hd(){return new X0([new ym])}let X0=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const p=d.factories.slice();u=u.concat(p)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||hd()),deps:[[s,new Ut,new Ye]]}}find(u){const d=this.factories.find(p=>p.supports(u));if(d)return d;throw new Oe(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:hd}),s})();const aM=mT(null,"core",[]);let lM=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Jn(vp))},s.\u0275mod=Zt({type:s}),s.\u0275inj=kt({}),s})();function uM(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(wt,fe,V)=>{"use strict";V.d(fe,{Z:()=>Oe});var h=V(2090),j=V(4859),H=V(9681),pe=V(1877);class ge{constructor(xe,ve){this._delegate=xe,this.firebase=ve,(0,H._addComponent)(xe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this._delegate.automaticDataCollectionEnabled=xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(xe=>{this._delegate.checkDestroyed(),xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,H.deleteApp)(this._delegate)))}_getService(xe,ve=H._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const vt=this._delegate.container.getProvider(xe);return!vt.isInitialized()&&"EXPLICIT"===(null===(We=vt.getComponent())||void 0===We?void 0:We.instantiationMode)&&vt.initialize(),vt.getImmediate({identifier:ve})}_removeServiceInstance(xe,ve=H._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(xe).clearInstance(ve)}_addComponent(xe){(0,H._addComponent)(this._delegate,xe)}_addOrOverwriteComponent(xe){(0,H._addOrOverwriteComponent)(this._delegate,xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Ie(){const it=function we(it){const xe={},ve={__esModule:!0,initializeApp:function je(rt,Y={}){const Ee=H.initializeApp(rt,Y);if((0,h.r3)(xe,Ee.name))return xe[Ee.name];const ne=new it(Ee,ve);return xe[Ee.name]=ne,ne},app:vt,registerVersion:H.registerVersion,setLogLevel:H.setLogLevel,onLog:H.onLog,apps:null,SDK_VERSION:H.SDK_VERSION,INTERNAL:{registerComponent:function Le(rt){const Y=rt.name,Ee=Y.replace("-compat","");if(H._registerComponent(rt)&&"PUBLIC"===rt.type){const ne=(le=vt())=>{if("function"!=typeof le[Ee])throw me.create("invalid-app-argument",{appName:Y});return le[Ee]()};void 0!==rt.serviceProps&&(0,h.ZB)(ne,rt.serviceProps),ve[Ee]=ne,it.prototype[Ee]=function(...le){return this._getService.bind(this,Y).apply(this,rt.multipleInstances?le:[])}}return"PUBLIC"===rt.type?ve[Ee]:null},removeApp:function We(rt){delete xe[rt]},useAsService:function nt(rt,Y){return"serverAuth"===Y?null:Y},modularAPIs:H}};function vt(rt){if(!(0,h.r3)(xe,rt=rt||H._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:rt});return xe[rt]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Me(){return Object.keys(xe).map(rt=>xe[rt])}}),vt.App=it,ve}(ge);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function xe(ve){(0,h.ZB)(it,ve)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),it}(),J=new pe.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=Q;!function He(it){(0,H.registerVersion)("@firebase/app-compat","0.1.39",it)}()},9681:(wt,fe,V)=>{"use strict";V.r(fe),V.d(fe,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>qt,_DEFAULT_ENTRY_NAME:()=>en,_addComponent:()=>dn,_addOrOverwriteComponent:()=>rn,_apps:()=>vn,_clearComponents:()=>sr,_components:()=>xn,_getProvider:()=>kt,_registerComponent:()=>kn,_removeServiceInstance:()=>In,deleteApp:()=>qn,getApp:()=>lr,getApps:()=>Rr,initializeApp:()=>ar,onLog:()=>Ui,registerVersion:()=>Br,setLogLevel:()=>yn});var h=V(5861),j=V(4859),H=V(1877),pe=V(2090),ge=V(8766);class Ce{constructor(Ve){this.container=Ve}getPlatformInfoString(){return this.container.getProviders().map(gt=>{if(function me(pt){return"VERSION"===pt.getComponent()?.type}(gt)){const Mt=gt.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(gt=>gt).join(" ")}}const we="@firebase/app",Q=new H.Yd("@firebase/app"),en="[DEFAULT]",ct={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,xn=new Map;function dn(pt,Ve){try{pt.container.addComponent(Ve)}catch(gt){Q.debug(`Component ${Ve.name} failed to register with FirebaseApp ${pt.name}`,gt)}}function rn(pt,Ve){pt.container.addOrOverwriteComponent(Ve)}function kn(pt){const Ve=pt.name;if(xn.has(Ve))return Q.debug(`There were multiple attempts to register component ${Ve}.`),!1;xn.set(Ve,pt);for(const gt of vn.values())dn(gt,pt);return!0}function kt(pt,Ve){const gt=pt.container.getProvider("heartbeat").getImmediate({optional:!0});return gt&&gt.triggerHeartbeat(),pt.container.getProvider(Ve)}function In(pt,Ve,gt=en){kt(pt,Ve).clearInstance(gt)}function sr(){xn.clear()}const Kr=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yr{constructor(Ve,gt,Mt){this._isDeleted=!1,this._options=Object.assign({},Ve),this._config=Object.assign({},gt),this._name=gt.name,this._automaticDataCollectionEnabled=gt.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ve){this._isDeleted=Ve}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const qt="9.14.0";function ar(pt,Ve={}){let gt=pt;"object"!=typeof Ve&&(Ve={name:Ve});const Mt=Object.assign({name:en,automaticDataCollectionEnabled:!1},Ve),Ot=Mt.name;if("string"!=typeof Ot||!Ot)throw Kr.create("bad-app-name",{appName:String(Ot)});if(gt||(gt=(0,pe.aH)()),!gt)throw Kr.create("no-options");const Zt=vn.get(Ot);if(Zt){if((0,pe.vZ)(gt,Zt.options)&&(0,pe.vZ)(Mt,Zt.config))return Zt;throw Kr.create("duplicate-app",{appName:Ot})}const X=new j.H0(Ot);for(const ie of xn.values())X.addComponent(ie);const Z=new Yr(gt,Mt,X);return vn.set(Ot,Z),Z}function lr(pt=en){const Ve=vn.get(pt);if(!Ve&&pt===en)return ar();if(!Ve)throw Kr.create("no-app",{appName:pt});return Ve}function Rr(){return Array.from(vn.values())}function qn(pt){return et.apply(this,arguments)}function et(){return(et=(0,h.Z)(function*(pt){const Ve=pt.name;vn.has(Ve)&&(vn.delete(Ve),yield Promise.all(pt.container.getProviders().map(gt=>gt.delete())),pt.isDeleted=!0)})).apply(this,arguments)}function Br(pt,Ve,gt){var Mt;let Ot=null!==(Mt=ct[pt])&&void 0!==Mt?Mt:pt;gt&&(Ot+=`-${gt}`);const Zt=Ot.match(/\s|\//),X=Ve.match(/\s|\//);if(Zt||X){const Z=[`Unable to register library "${Ot}" with version "${Ve}":`];return Zt&&Z.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),Zt&&X&&Z.push("and"),X&&Z.push(`version name "${Ve}" contains illegal characters (whitespace or "/")`),void Q.warn(Z.join(" "))}kn(new j.wA(`${Ot}-version`,()=>({library:Ot,version:Ve}),"VERSION"))}function Ui(pt,Ve){if(null!==pt&&"function"!=typeof pt)throw Kr.create("invalid-log-argument");(0,H.Am)(pt,Ve)}function yn(pt){(0,H.Ub)(pt)}const Zn="firebase-heartbeat-store";let tr=null;function Fn(){return tr||(tr=(0,ge.X3)("firebase-heartbeat-database",1,{upgrade:(pt,Ve)=>{0===Ve&&pt.createObjectStore(Zn)}}).catch(pt=>{throw Kr.create("idb-open",{originalErrorMessage:pt.message})})),tr}function Ze(){return(Ze=(0,h.Z)(function*(pt){var Ve;try{return(yield Fn()).transaction(Zn).objectStore(Zn).get(nr(pt))}catch(gt){if(gt instanceof pe.ZR)Q.warn(gt.message);else{const Mt=Kr.create("idb-get",{originalErrorMessage:null===(Ve=gt)||void 0===Ve?void 0:Ve.message});Q.warn(Mt.message)}}})).apply(this,arguments)}function bn(pt,Ve){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(pt,Ve){var gt;try{const Ot=(yield Fn()).transaction(Zn,"readwrite");return yield Ot.objectStore(Zn).put(Ve,nr(pt)),Ot.done}catch(Mt){if(Mt instanceof pe.ZR)Q.warn(Mt.message);else{const Ot=Kr.create("idb-set",{originalErrorMessage:null===(gt=Mt)||void 0===gt?void 0:gt.message});Q.warn(Ot.message)}}})).apply(this,arguments)}function nr(pt){return`${pt.name}!${pt.options.appId}`}class Qr{constructor(Ve){this.container=Ve,this._heartbeatsCache=null;const gt=this.container.getProvider("app").getImmediate();this._storage=new _n(gt),this._heartbeatsCachePromise=this._storage.read().then(Mt=>(this._heartbeatsCache=Mt,Mt))}triggerHeartbeat(){var Ve=this;return(0,h.Z)(function*(){const Mt=Ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=fn();if(null===Ve._heartbeatsCache&&(Ve._heartbeatsCache=yield Ve._heartbeatsCachePromise),Ve._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!Ve._heartbeatsCache.heartbeats.some(Zt=>Zt.date===Ot))return Ve._heartbeatsCache.heartbeats.push({date:Ot,agent:Mt}),Ve._heartbeatsCache.heartbeats=Ve._heartbeatsCache.heartbeats.filter(Zt=>{const X=new Date(Zt.date).valueOf();return Date.now()-X<=2592e6}),Ve._storage.overwrite(Ve._heartbeatsCache)})()}getHeartbeatsHeader(){var Ve=this;return(0,h.Z)(function*(){if(null===Ve._heartbeatsCache&&(yield Ve._heartbeatsCachePromise),null===Ve._heartbeatsCache||0===Ve._heartbeatsCache.heartbeats.length)return"";const gt=fn(),{heartbeatsToSend:Mt,unsentEntries:Ot}=function Bi(pt,Ve=1024){const gt=[];let Mt=pt.slice();for(const Ot of pt){const Zt=gt.find(X=>X.agent===Ot.agent);if(Zt){if(Zt.dates.push(Ot.date),br(gt)>Ve){Zt.dates.pop();break}}else if(gt.push({agent:Ot.agent,dates:[Ot.date]}),br(gt)>Ve){gt.pop();break}Mt=Mt.slice(1)}return{heartbeatsToSend:gt,unsentEntries:Mt}}(Ve._heartbeatsCache.heartbeats),Zt=(0,pe.L)(JSON.stringify({version:2,heartbeats:Mt}));return Ve._heartbeatsCache.lastSentHeartbeatDate=gt,Ot.length>0?(Ve._heartbeatsCache.heartbeats=Ot,yield Ve._storage.overwrite(Ve._heartbeatsCache)):(Ve._heartbeatsCache.heartbeats=[],Ve._storage.overwrite(Ve._heartbeatsCache)),Zt})()}}function fn(){return(new Date).toISOString().substring(0,10)}class _n{constructor(Ve){this.app=Ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ve=this;return(0,h.Z)(function*(){return(yield Ve._canUseIndexedDBPromise)&&(yield function St(pt){return Ze.apply(this,arguments)}(Ve.app))||{heartbeats:[]}})()}overwrite(Ve){var gt=this;return(0,h.Z)(function*(){var Mt;if(yield gt._canUseIndexedDBPromise){const Zt=yield gt.read();return bn(gt.app,{lastSentHeartbeatDate:null!==(Mt=Ve.lastSentHeartbeatDate)&&void 0!==Mt?Mt:Zt.lastSentHeartbeatDate,heartbeats:Ve.heartbeats})}})()}add(Ve){var gt=this;return(0,h.Z)(function*(){var Mt;if(yield gt._canUseIndexedDBPromise){const Zt=yield gt.read();return bn(gt.app,{lastSentHeartbeatDate:null!==(Mt=Ve.lastSentHeartbeatDate)&&void 0!==Mt?Mt:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,...Ve.heartbeats]})}})()}}function br(pt){return(0,pe.L)(JSON.stringify({version:2,heartbeats:pt})).length}!function ui(pt){kn(new j.wA("platform-logger",Ve=>new Ce(Ve),"PRIVATE")),kn(new j.wA("heartbeat",Ve=>new Qr(Ve),"PRIVATE")),Br(we,"0.8.4",pt),Br(we,"0.8.4","esm2017"),Br("fire-js","")}("")},4859:(wt,fe,V)=>{"use strict";V.d(fe,{H0:()=>we,wA:()=>H,zt:()=>ge});var h=V(5861),j=V(2090);class H{constructor(Q,J,oe){this.name=Q,this.instanceFactory=J,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const pe="[DEFAULT]";class ge{constructor(Q,J){this.name=Q,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const J=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(J)){const oe=new j.BH;if(this.instancesDeferred.set(J,oe),this.isInitialized(J)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:J});Qe&&oe.resolve(Qe)}catch{}}return this.instancesDeferred.get(J).promise}getImmediate(Q){var J;const oe=this.normalizeInstanceIdentifier(Q?.identifier),Qe=null!==(J=Q?.optional)&&void 0!==J&&J;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(He){if(Qe)return null;throw He}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function me(Ie){return"EAGER"===Ie.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[J,oe]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(J);try{const He=this.getOrInitializeService({instanceIdentifier:Qe});oe.resolve(He)}catch{}}}}clearInstance(Q=pe){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,h.Z)(function*(){const J=Array.from(Q.instances.values());yield Promise.all([...J.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...J.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=pe){return this.instances.has(Q)}getOptions(Q=pe){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:J={}}=Q,oe=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:oe,options:J});for(const[He,Oe]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(He)&&Oe.resolve(Qe);return Qe}onInit(Q,J){var oe;const Qe=this.normalizeInstanceIdentifier(J),He=null!==(oe=this.onInitCallbacks.get(Qe))&&void 0!==oe?oe:new Set;He.add(Q),this.onInitCallbacks.set(Qe,He);const Oe=this.instances.get(Qe);return Oe&&Q(Oe,Qe),()=>{He.delete(Q)}}invokeOnInitCallbacks(Q,J){const oe=this.onInitCallbacks.get(J);if(oe)for(const Qe of oe)try{Qe(Q,J)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:J={}}){let oe=this.instances.get(Q);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=Q,Ie===pe?void 0:Ie),options:J}),this.instances.set(Q,oe),this.instancesOptions.set(Q,J),this.invokeOnInitCallbacks(oe,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,oe)}catch{}var Ie;return oe||null}normalizeInstanceIdentifier(Q=pe){return this.component?this.component.multipleInstances?Q:pe:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const J=this.getProvider(Q.name);if(J.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);J.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const J=new ge(Q,this);return this.providers.set(Q,J),J}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,fe,V)=>{"use strict";V.d(fe,{Am:()=>Ie,Ub:()=>we,Yd:()=>me,in:()=>j});const h=[];var j=(()=>{return(Q=j||(j={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",j;var Q})();const H={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},pe=j.INFO,ge={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},Ce=(Q,J,...oe)=>{if(J<Q.logLevel)return;const Qe=(new Date).toISOString(),He=ge[J];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[He](`[${Qe}]  ${Q.name}:`,...oe)};class me{constructor(J){this.name=J,this._logLevel=pe,this._logHandler=Ce,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in j))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?H[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...J),this._logHandler(this,j.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...J),this._logHandler(this,j.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,j.INFO,...J),this._logHandler(this,j.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,j.WARN,...J),this._logHandler(this,j.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...J),this._logHandler(this,j.ERROR,...J)}}function we(Q){h.forEach(J=>{J.setLogLevel(Q)})}function Ie(Q,J){for(const oe of h){let Qe=null;J&&J.level&&(Qe=H[J.level]),oe.userLogHandler=null===Q?null:(He,Oe,...it)=>{const xe=it.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");Oe>=(Qe??He.logLevel)&&Q({level:j[Oe].toLowerCase(),message:xe,args:it,type:He.name})}}}},8766:(wt,fe,V)=>{"use strict";V.d(fe,{Lj:()=>je,X3:()=>vt});var h=V(5861);let H,pe;const me=new WeakMap,we=new WeakMap,Ie=new WeakMap,Q=new WeakMap,J=new WeakMap;let He={get(Y,Ee,ne){if(Y instanceof IDBTransaction){if("done"===Ee)return we.get(Y);if("objectStoreNames"===Ee)return Y.objectStoreNames||Ie.get(Y);if("store"===Ee)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return ve(Y[Ee])},set:(Y,Ee,ne)=>(Y[Ee]=ne,!0),has:(Y,Ee)=>Y instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in Y};function xe(Y){return"function"==typeof Y?function it(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Y)?function(...Ee){return Y.apply(We(this),Ee),ve(me.get(this))}:function(...Ee){return ve(Y.apply(We(this),Ee))}:function(Ee,...ne){const le=Y.call(We(this),Ee,...ne);return Ie.set(le,Ee.sort?Ee.sort():[Ee]),ve(le)}}(Y):(Y instanceof IDBTransaction&&function Qe(Y){if(we.has(Y))return;const Ee=new Promise((ne,le)=>{const de=()=>{Y.removeEventListener("complete",ce),Y.removeEventListener("error",qe),Y.removeEventListener("abort",qe)},ce=()=>{ne(),de()},qe=()=>{le(Y.error||new DOMException("AbortError","AbortError")),de()};Y.addEventListener("complete",ce),Y.addEventListener("error",qe),Y.addEventListener("abort",qe)});we.set(Y,Ee)}(Y),((Y,Ee)=>Ee.some(ne=>Y instanceof ne))(Y,function ge(){return H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Y,He):Y)}function ve(Y){if(Y instanceof IDBRequest)return function oe(Y){const Ee=new Promise((ne,le)=>{const de=()=>{Y.removeEventListener("success",ce),Y.removeEventListener("error",qe)},ce=()=>{ne(ve(Y.result)),de()},qe=()=>{le(Y.error),de()};Y.addEventListener("success",ce),Y.addEventListener("error",qe)});return Ee.then(ne=>{ne instanceof IDBCursor&&me.set(ne,Y)}).catch(()=>{}),J.set(Ee,Y),Ee}(Y);if(Q.has(Y))return Q.get(Y);const Ee=xe(Y);return Ee!==Y&&(Q.set(Y,Ee),J.set(Ee,Y)),Ee}const We=Y=>J.get(Y);function vt(Y,Ee,{blocked:ne,upgrade:le,blocking:de,terminated:ce}={}){const qe=indexedDB.open(Y,Ee),Ke=ve(qe);return le&&qe.addEventListener("upgradeneeded",bt=>{le(ve(qe.result),bt.oldVersion,bt.newVersion,ve(qe.transaction))}),ne&&qe.addEventListener("blocked",()=>ne()),Ke.then(bt=>{ce&&bt.addEventListener("close",()=>ce()),de&&bt.addEventListener("versionchange",()=>de())}).catch(()=>{}),Ke}function je(Y,{blocked:Ee}={}){const ne=indexedDB.deleteDatabase(Y);return Ee&&ne.addEventListener("blocked",()=>Ee()),ve(ne).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],nt=new Map;function rt(Y,Ee){if(!(Y instanceof IDBDatabase)||Ee in Y||"string"!=typeof Ee)return;if(nt.get(Ee))return nt.get(Ee);const ne=Ee.replace(/FromIndex$/,""),le=Ee!==ne,de=Le.includes(ne);if(!(ne in(le?IDBIndex:IDBObjectStore).prototype)||!de&&!Me.includes(ne))return;const ce=function(){var qe=(0,h.Z)(function*(Ke,...bt){const ln=this.transaction(Ke,de?"readwrite":"readonly");let en=ln.store;return le&&(en=en.index(bt.shift())),(yield Promise.all([en[ne](...bt),de&&ln.done]))[0]});return function(bt){return qe.apply(this,arguments)}}();return nt.set(Ee,ce),ce}!function Oe(Y){He=Y(He)}(Y=>({...Y,get:(Ee,ne,le)=>rt(Ee,ne)||Y.get(Ee,ne,le),has:(Ee,ne)=>!!rt(Ee,ne)||Y.has(Ee,ne)}))},5861:(wt,fe,V)=>{"use strict";function h(H,pe,ge,Ce,me,we,Ie){try{var Q=H[we](Ie),J=Q.value}catch(oe){return void ge(oe)}Q.done?pe(J):Promise.resolve(J).then(Ce,me)}function j(H){return function(){var pe=this,ge=arguments;return new Promise(function(Ce,me){var we=H.apply(pe,ge);function Ie(J){h(we,Ce,me,Ie,Q,"next",J)}function Q(J){h(we,Ce,me,Ie,Q,"throw",J)}Ie(void 0)})}}V.d(fe,{Z:()=>j})}},wt=>{wt(wt.s=1423)}]);